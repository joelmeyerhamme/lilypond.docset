<!-- header_tag -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Copyright C 1999-2009 by the authors

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.1
or any later version published by the Free Software Foundation;
with no Invariant Sections.
A copy of the license is included in the section entitled "GNU
Free Documentation License".

 -->
<!-- Created on January 13, 2010 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>GNU LilyPond Learning Manual</title>

<meta name="description" content="GNU LilyPond Learning Manual">
<meta name="keywords" content="GNU LilyPond Learning Manual">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="#Top" rel="start" title="GNU LilyPond &mdash; Learning Manual">
<link href="#LilyPond-index" rel="index" title="D. LilyPond index">
<link href="#SEC_Contents" rel="contents" title="Table of Contents">
<link href="#SEC_About" rel="help" title="About This Document">
<link rel="stylesheet" type="text/css" title="Patrick McCarty's design" href="lilypond-mccarty.css">
<link rel="alternate stylesheet" type="text/css" href="lilypond.css" title="Andrew Hawryluk's design">
<link rel="alternate stylesheet" type="text/css" href="lilypond-blue.css" title="Kurt Kroon's blue design">
<!--[if lte IE 7]>
<link href="lilypond-ie-fixes.css" rel="stylesheet" type="text/css">
<![endif]-->


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">


<div id="main">
<a name="Top"></a>
<table class="nav_table">
<tr><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td></tr></table>
<a name="Top"></a>
<h1 class="settitle">GNU LilyPond &mdash; Learning Manual</h1>


<p>This document is also available as a
<a href="../../Documentation/user/lilypond-learning.pdf">PDF</a> and as
<a href="../../Documentation/user/lilypond-learning/index.html">HTML indexed multiple pages</a>.
</p>









<p>This file documents GNU LilyPond for beginners.
</p>
<p>Copyright 1999&ndash;2009 by the authors
</p>
<blockquote><p>Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.1
or any later version published by the Free Software Foundation;
with no Invariant Sections.
A copy of the license is included in the section entitled &ldquo;GNU
Free Documentation License&rdquo;.
</p></blockquote>

<p>This is the Learning Manual (LM) for GNU LilyPond version 2.12.3.
For more information about how this fits with the other
documentation, see <a href="#About-the-documentation">About the documentation</a>.
</p>
<a name="index-web-site"></a>
<a name="index-URL"></a>

<p>More information can be found at
<a href="http://www.lilypond.org/">http://www.lilypond.org/</a>.  The website contains on-line copies
of this and other documentation.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Preface" accesskey="1">Preface</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"></td></tr>
<tr><td align="left" valign="top"><a href="#Introduction" accesskey="2">1. Introduction</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                   What, Why, How.
</td></tr>
<tr><td align="left" valign="top"><a href="#Tutorial" accesskey="3">2. Tutorial</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                       A tutorial introduction.
</td></tr>
<tr><td align="left" valign="top"><a href="#Fundamental-concepts" accesskey="4">3. Fundamental concepts</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">           Basic concepts required for reading the rest of this manual.
</td></tr>
<tr><td align="left" valign="top"><a href="#Tweaking-output" accesskey="5">4. Tweaking output</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Introduction to modifying output.
</td></tr>
<tr><td align="left" valign="top"><a href="#Working-on-LilyPond-projects" accesskey="6">5. Working on LilyPond projects</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">   Discusses real-life usage.
</td></tr>
<tr><th colspan="3" align="left" valign="top"><pre class="menu-comment">
Appendices

</pre></th></tr><tr><td align="left" valign="top"><a href="#Templates" accesskey="7">A. Templates</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                      Ready-made templates.
</td></tr>
<tr><td align="left" valign="top"><a href="#Scheme-tutorial" accesskey="8">B. Scheme tutorial</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">                Programming inside LilyPond.
</td></tr>
<tr><td align="left" valign="top"><a href="#GNU-Free-Documentation-License" accesskey="9">C. GNU Free Documentation License</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top"> License of this document.
</td></tr>
<tr><td align="left" valign="top"><a href="#LilyPond-index">D. LilyPond index</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>





<hr size="1">
<a name="Preface"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Top" title="Beginning of this chapter or previous chapter"> &lt;&lt; Top&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Introduction" title="Next chapter">&nbsp;Introduction &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Top" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Top&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Top" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Introduction" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Introduction &gt; </a>]</td></tr></table>
<a name="Preface"></a>
<h1 class="unnumbered">Preface</h1>


<p>It must have been during a rehearsal of the EJE (Eindhoven Youth
Orchestra), somewhere in 1995 that Jan, one of the cranked violists,
told Han-Wen, one of the distorted French horn players, about the
grand new project he was working on.  It was an automated system for
printing music (to be precise, it was MPP, a preprocessor for
MusiXTeX).  As it happened, Han-Wen accidentally wanted to print out
some parts from a score, so he started looking at the software, and he
quickly got hooked.  It was decided that MPP was a dead end.  After
lots of philosophizing and heated email exchanges, Han-Wen started
LilyPond in 1996.  This time, Jan got sucked into Han-Wen&rsquo;s new
project.
</p>
<p>In some ways, developing a computer program is like learning to play
an instrument.  In the beginning, discovering how it works is fun, and
the things you cannot do are challenging.  After the initial excitement,
you have to practice and practice.  Scales and studies can be dull, and
if you are not motivated by others &ndash; teachers, conductors or
audience &ndash; it is very tempting to give up.  You continue, and gradually
playing becomes a part of your life.  Some days it comes naturally, and
it is wonderful, and on some days it just does not work, but you keep
playing, day after day.
</p>
<p>Like making music, working on LilyPond can be dull work, and on
some days it feels like plodding through a morass of bugs.
Nevertheless, it has become a part of our life, and we keep doing it.
Probably the most important motivation is that our program actually
does something useful for people.  When we browse around the net we
find many people who use LilyPond, and produce impressive pieces of
sheet music.  Seeing that feels unreal, but in a very pleasant way.
</p>
<p>Our users not only give us good vibes by using our program, many of
them also help us by giving suggestions and sending bug reports, so we
would like to thank all users that sent us bug reports, gave
suggestions or contributed in any other way to LilyPond.
</p>
<p>Playing and printing music is more than a nice analogy.  Programming
together is a lot of fun, and helping people is deeply satisfying, but
ultimately, working on LilyPond is a way to express our deep love for
music.  May it help you create lots of beautiful music!
</p>
<p>Han-Wen and Jan
</p>
<p>Utrecht/Eindhoven, The Netherlands, July 2002.
</p>


<hr size="6">
<a name="Introduction"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Preface" title="Beginning of this chapter or previous chapter"> &lt;&lt; Preface&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tutorial" title="Next chapter">&nbsp;Tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Preface" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Preface&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Top" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Background" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Background &gt; </a>]</td></tr></table>
<a name="Introduction"></a>
<h1 class="chapter">1. Introduction</h1>

<p>This chapter introduces readers to LilyPond and the
documentation.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Background" accesskey="1">1.1 Background</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#About-the-documentation" accesskey="2">1.2 About the documentation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="Background"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Introduction" title="Beginning of this chapter or previous chapter"> &lt;&lt; Introduction&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tutorial" title="Next chapter">&nbsp;Tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Introduction" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Introduction&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Introduction" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Introduction&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Engraving" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Engraving &gt; </a>]</td></tr></table>
<a name="Background"></a>
<h2 class="section">1.1 Background</h2>

<p>This section covers the overall goals and architecture of
LilyPond.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Engraving" accesskey="1">Engraving</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Automated-engraving" accesskey="2">Automated engraving</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#What-symbols-to-engrave_003f" accesskey="3">What symbols to engrave?</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Music-representation" accesskey="4">Music representation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Example-applications" accesskey="5">Example applications</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="Engraving"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Introduction" title="Beginning of this chapter or previous chapter"> &lt;&lt; Introduction&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tutorial" title="Next chapter">&nbsp;Tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Background" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Background&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Background" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Background&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Automated-engraving" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Automated engraving &gt; </a>]</td></tr></table>
<a name="Engraving"></a>
<h3 class="unnumberedsubsec">Engraving</h3>

<a name="index-engraving"></a>
<a name="index-typography_002c-music"></a>
<a name="index-music-typography"></a>
<a name="index-plate-engraving"></a>
<a name="index-music-engraving"></a>

<p>The art of music typography is called <em>(plate) engraving</em>.
The term derives from the traditional process of music printing.
Just a few decades ago, sheet music was made by cutting and
stamping the music into a zinc or pewter plate in mirror image.
The plate would be inked, the depressions caused by the cutting
and stamping would hold ink.  An image was formed by pressing
paper to the plate.  The stamping and cutting was completely done
by hand.  Making a correction was cumbersome, if possible at all,
so the engraving had to be perfect in one go.  Engraving was a
highly specialized skill; a craftsman had to complete around five
years of training before earning the title of master engraver, and
another five years of experience were necessary to become truly
skilled.
</p>
<p>Nowadays, all newly printed music is produced with computers.
This has obvious advantages; prints are cheaper to make, and
editorial work can be delivered by email.  Unfortunately, the
pervasive use of computers has also decreased the graphical
quality of scores.  Computer printouts have a bland, mechanical
look, which makes them unpleasant to play from.
</p>

<p>The images below illustrate the difference between traditional
engraving and typical computer output, and the third picture shows
how LilyPond mimics the traditional look.  The left picture shows
a scan of a flat symbol from an edition published in 2000.  The
center depicts a symbol from a hand-engraved Bärenreiter edition
of the same music.  The left scan illustrates typical flaws of
computer print: the staff lines are thin, the weight of the flat
symbol matches the light lines and it has a straight layout with
sharp corners.  By contrast, the Bärenreiter flat has a bold,
almost voluptuous rounded look.  Our flat symbol is designed
after, among others, this one.  It is rounded, and its weight
harmonizes with the thickness of our staff lines, which are also
much thicker than lines in the computer edition.
</p>
<table>
<tr><td width="12%"></td><td width="25%"><img src="henle-flat-gray.png" alt="png"></td><td width="25%"><img src="baer-flat-gray.png" alt="png"></td><td width="25%"><img src="lily-flat-bw.png" alt="png"></td></tr>
<tr><td width="12%"></td><td width="25%"><p>Henle (2000)
</p></td><td width="25%"><p>Bärenreiter (1950)
</p></td><td width="25%"><p>LilyPond Feta font (2003)
</p></td></tr>
</table>


<a name="index-musical-symbols"></a>
<a name="index-font"></a>
<a name="index-blackness"></a>
<a name="index-balance"></a>

<p>In spacing, the distribution of space should reflect the durations
between notes.  However, many modern scores adhere to the
durations with mathematical precision, which leads to poor
results.  In the next example a motive is printed twice: once
using exact mathematical spacing, and once with corrections.  Can
you spot which fragment is which?
</p>
<a name="index-optical-spacing"></a>
<p>
 <a href="90/lily-35e012eb.ly">
  <img align="middle"
       border="0"
       src="90/lily-35e012eb.png"
       alt="[image of music]">
 </a>
</p>



<p>
 <a href="1c/lily-f9b0aa77.ly">
  <img align="middle"
       border="0"
       src="1c/lily-f9b0aa77.png"
       alt="[image of music]">
 </a>
</p>



<a name="index-regular-rhythms"></a>
<a name="index-regular-spacing"></a>
<a name="index-spacing_002c-regular"></a>

<p>Each bar in the fragment only uses notes that are played in a
constant rhythm.  The spacing should reflect that.  Unfortunately,
the eye deceives us a little; not only does it notice the distance
between note heads, it also takes into account the distance
between consecutive stems.  As a result, the notes of an
up-stem/down-stem combination should be put farther apart, and
the notes of a down-stem/up-stem combination should be put
closer together, all depending on the combined vertical positions
of the notes.  The upper two measures are printed with this
correction, the lower two measures without, forming
down-stem/up-stem clumps of notes.
</p>

<p>Musicians are usually more absorbed with performing than with
studying the looks of a piece of music, so nitpicking about
typographical details may seem academical.  But it is not.  In
larger pieces with monotonous rhythms, spacing corrections lead to
subtle variations in the layout of every line, giving each one a
distinct visual signature.  Without this signature all lines would
look the same, and they become like a labyrinth.  If a musician
looks away once or has a lapse in concentration, the lines might
lose their place on the page.
</p>
<p>Similarly, the strong visual look of bold symbols on heavy staff
lines stands out better when the music is far away from the
reader, for example, if it is on a music stand.  A careful
distribution of white space allows music to be set very tightly
without cluttering symbols together.  The result minimizes the
number of page turns, which is a great advantage.
</p>
<p>This is a common characteristic of typography.  Layout should be
pretty, not only for its own sake, but especially because it helps
the reader in her task.  For performance material like sheet
music, this is of double importance: musicians have a limited
amount of attention.  The less attention they need for reading,
the more they can focus on playing the music.  In other words,
better typography translates to better performances.
</p>
<p>These examples demonstrate that music typography is an art that is
subtle and complex, and that producing it requires considerable
expertise, which musicians usually do not have.  LilyPond is our
effort to bring the graphical excellence of hand-engraved music to
the computer age, and make it available to normal musicians.  We
have tuned our algorithms, font-designs, and program settings to
produce prints that match the quality of the old editions we love
to see and love to play from.
</p>

<hr size="6">
<a name="Automated-engraving"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Introduction" title="Beginning of this chapter or previous chapter"> &lt;&lt; Introduction&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tutorial" title="Next chapter">&nbsp;Tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Engraving" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Engraving&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Background" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Background&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#What-symbols-to-engrave_003f" title="Next section in reading order" accesskey="n" rel="next">&nbsp;What symbols to engrave? &gt; </a>]</td></tr></table>
<a name="Automated-engraving"></a>
<h3 class="unnumberedsubsec">Automated engraving</h3>

<a name="index-engraving_002c-automated"></a>
<a name="index-automated-engraving"></a>

<p>How do we go about implementing typography?  If craftsmen need
over ten years to become true masters, how could we simple hackers
ever write a program to take over their jobs?
</p>
<p>The answer is: we cannot.  Typography relies on human judgment of
appearance, so people cannot be replaced completely.  However,
much of the dull work can be automated.  If LilyPond solves most
of the common situations correctly, this will be a huge
improvement over existing software.  The remaining cases can be
tuned by hand.  Over the course of years, the software can be
refined to do more and more things automatically, so manual
overrides are less and less necessary.
</p>
<p>When we started, we wrote the LilyPond program entirely in the C++
programming language; the program&rsquo;s functionality was set in stone
by the developers.  That proved to be unsatisfactory for a number
of reasons:
</p>
<ul>
<li> When LilyPond makes mistakes, users need to override
formatting decisions.  Therefore, the user must have access to the
formatting engine.  Hence, rules and settings cannot be fixed by
us at compile-time but must be accessible for users at run-time.

</li><li> Engraving is a matter of visual judgment, and therefore a
matter of taste.  As knowledgeable as we are, users can disagree
with our personal decisions.  Therefore, the definitions of
typographical style must also be accessible to the user.

</li><li> Finally, we continually refine the formatting algorithms, so
we need a flexible approach to rules.  The C++ language forces a
certain method of grouping rules that do not match well with how
music notation works.

</li></ul>

<a name="index-Scheme-programming-language"></a>

<p>These problems have been addressed by integrating an interpreter
for the Scheme programming language and rewriting parts of
LilyPond in Scheme.  The current formatting architecture is built
around the notion of graphical objects, described by Scheme
variables and functions.  This architecture encompasses formatting
rules, typographical style and individual formatting decisions.
The user has direct access to most of these controls.
</p>
<p>Scheme variables control layout decisions.  For example, many
graphical objects have a direction variable that encodes the
choice between up and down (or left and right).  Here you see two
chords, with accents and arpeggios.  In the first chord, the
graphical objects have all directions down (or left).  The second
chord has all directions up (right).
</p>
<blockquote><p>
 <a href="ad/lily-a808e181.ly">
  <img align="middle"
       border="0"
       src="ad/lily-a808e181.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="index-score-formatting"></a>
<a name="index-formatting-a-score"></a>
<a name="index-formatting-rules"></a>

<p>The process of formatting a score consists of reading and writing
the variables of graphical objects.  Some variables have a preset
value.  For example, the thickness of many lines &ndash; a
characteristic of typographical style &ndash; is a variable with a
preset value.  You are free to alter this value, giving your score
a different typographical impression.
</p>
<blockquote><p>
 <a href="45/lily-b8e84cc1.ly">
  <img align="middle"
       border="0"
       src="45/lily-b8e84cc1.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Formatting rules are also preset variables: each object has
variables containing procedures.  These procedures perform the
actual formatting, and by substituting different ones, we can
change the appearance of objects.  In the following example, the
rule which note head objects are used to produce their symbol is
changed during the music fragment.
</p>
<blockquote><p>
 <a href="dd/lily-4ee665c7.ly">
  <img align="middle"
       border="0"
       src="dd/lily-4ee665c7.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<hr size="6">
<a name="What-symbols-to-engrave_003f"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Introduction" title="Beginning of this chapter or previous chapter"> &lt;&lt; Introduction&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tutorial" title="Next chapter">&nbsp;Tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Automated-engraving" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Automated engraving&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Background" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Background&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Music-representation" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Music representation &gt; </a>]</td></tr></table>
<a name="What-symbols-to-engrave_003f"></a>
<h3 class="unnumberedsubsec">What symbols to engrave?</h3>

<a name="index-engraving-1"></a>
<a name="index-typography"></a>
<a name="index-engraver"></a>
<a name="index-plug_002din"></a>

<p>The formatting process decides where to place symbols.  However,
this can only be done once it is decided <em>what</em> symbols
should be printed, in other words what notation to use.
</p>
<p>Common music notation is a system of recording music that has
evolved over the past 1000 years.  The form that is now in common
use dates from the early renaissance.  Although the basic form
(i.e., note heads on a 5-line staff) has not changed, the details
still evolve to express the innovations of contemporary notation.
Hence, it encompasses some 500 years of music.  Its applications
range from monophonic melodies to monstrous counterpoints for
large orchestras.
</p>
<p>How can we get a grip on such a many-headed beast, and force it
into the confines of a computer program?  Our solution is to break
up the problem of notation (as opposed to engraving, i.e.,
typography) into digestible and programmable chunks: every type of
symbol is handled by a separate module, a so-called plug-in.  Each
plug-in is completely modular and independent, so each can be
developed and improved separately.  Such plug-ins are called
<code>engraver</code>s, by analogy with craftsmen who translate musical
ideas to graphic symbols.
</p>
<p>In the following example, we see how we start out with a plug-in
for note heads, the <code>Note_heads_engraver</code>.
</p>
<blockquote><p>
 <a href="38/lily-e26fb32e.ly">
  <img align="middle"
       border="0"
       src="38/lily-e26fb32e.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Then a <code>Staff_symbol_engraver</code> adds the staff
</p>
<blockquote><p>
 <a href="2e/lily-09b3a4db.ly">
  <img align="middle"
       border="0"
       src="2e/lily-09b3a4db.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>the <code>Clef_engraver</code> defines a reference point for the staff
</p>
<blockquote><p>
 <a href="ad/lily-b7b430b0.ly">
  <img align="middle"
       border="0"
       src="ad/lily-b7b430b0.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>and the <code>Stem_engraver</code> adds stems.
</p>
<blockquote><p>
 <a href="de/lily-dde85252.ly">
  <img align="middle"
       border="0"
       src="de/lily-dde85252.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The <code>Stem_engraver</code> is notified of any note head coming
along.  Every time one (or more, for a chord) note head is seen, a
stem object is created and connected to the note head.  By adding
engravers for beams, slurs, accents, accidentals, bar lines, time
signature, and key signature, we get a complete piece of notation.
</p>
<blockquote><p>
 <a href="48/lily-aa409614.ly">
  <img align="middle"
       border="0"
       src="48/lily-aa409614.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="index-polyphony"></a>
<a name="index-engraving-multiple-voices"></a>
<a name="index-contexts"></a>

<p>This system works well for monophonic music, but what about
polyphony?  In polyphonic notation, many voices can share a staff.
</p>
<blockquote><p>
 <a href="81/lily-ac7b5eb7.ly">
  <img align="middle"
       border="0"
       src="81/lily-ac7b5eb7.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>In this situation, the accidentals and staff are shared, but the
stems, slurs, beams, etc., are private to each voice.  Hence,
engravers should be grouped.  The engravers for note heads, stems,
slurs, etc., go into a group called &lsquo;Voice context,&rsquo; while the
engravers for key, accidental, bar, etc., go into a group called
&lsquo;Staff context.&rsquo;  In the case of polyphony, a single Staff
context contains more than one Voice context.  Similarly, multiple
Staff contexts can be put into a single Score context.  The Score
context is the top level notation context.
</p>

<a name="See-also-15"></a>
<h4 class="subsubheading">See also</h4>
<p>Internals Reference: <a name="index-Contexts"></a>
<a href="lilypond-internals-big-page.html#Contexts">Contexts</a>.
</p>

<blockquote><p>
 <a href="d5/lily-4da76545.ly">
  <img align="middle"
       border="0"
       src="d5/lily-4da76545.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<hr size="6">
<a name="Music-representation"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Introduction" title="Beginning of this chapter or previous chapter"> &lt;&lt; Introduction&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tutorial" title="Next chapter">&nbsp;Tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#What-symbols-to-engrave_003f" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; What symbols to engrave?&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Background" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Background&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Example-applications" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Example applications &gt; </a>]</td></tr></table>
<a name="Music-representation"></a>
<h3 class="unnumberedsubsec">Music representation</h3>

<a name="index-syntax"></a>
<a name="index-recursive-structures"></a>

<p>Ideally, the input format for any high-level formatting system is
an abstract description of the content.  In this case, that would
be the music itself.  This poses a formidable problem: how can we
define what music really is? Instead of trying to find an answer,
we have reversed the question.  We write a program capable of
producing sheet music, and adjust the format to be as lean as
possible.  When the format can no longer be trimmed down, by
definition we are left with content itself.  Our program serves as
a formal definition of a music document.
</p>
<p>The syntax is also the user-interface for LilyPond, hence it is
easy to type:
</p>
<blockquote><pre class="example">{
  c'4 d'8
}
</pre></blockquote>

<p>to create a quarter note C1 (middle C) and an eighth note D1 (D
above middle C).
</p>
<blockquote><p>
 <a href="a3/lily-4ac8db18.ly">
  <img align="middle"
       border="0"
       src="a3/lily-4ac8db18.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>On a microscopic scale, such syntax is easy to use.  On a larger
scale, syntax also needs structure.  How else can you enter
complex pieces like symphonies and operas?  The structure is
formed by the concept of music expressions: by combining small
fragments of music into larger ones, more complex music can be
expressed.  For example
</p>
<blockquote><pre class="verbatim">f4
</pre><p>
 <a href="71/lily-4525b349.ly">
  <img align="middle"
       border="0"
       src="71/lily-4525b349.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Simultaneous notes can be constructed by enclosing them with
<code>&lt;&lt;</code> and <code>&gt;&gt;</code>:
</p>
<blockquote><pre class="example">&lt;&lt;c4 d4 e4&gt;&gt;
</pre></blockquote>

<blockquote><p>
 <a href="ca/lily-8d9298b5.ly">
  <img align="middle"
       border="0"
       src="ca/lily-8d9298b5.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>This expression is put in sequence by enclosing it in curly braces
<code>{&nbsp;&hellip;&nbsp;}</code>:
</p>
<blockquote><pre class="example">{ f4 &lt;&lt;c4 d4 e4&gt;&gt; }
</pre></blockquote>

<blockquote><p>
 <a href="48/lily-f2a8b3f3.ly">
  <img align="middle"
       border="0"
       src="48/lily-f2a8b3f3.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The above is also an expression, and so it may be combined again
with another simultaneous expression (a half note) using
<code>&lt;&lt;</code>, <code>\\</code>, and <code>&gt;&gt;</code>:
</p>
<blockquote><pre class="example">&lt;&lt; g2 \\ { f4 &lt;&lt;c4 d4 e4&gt;&gt; } &gt;&gt;
</pre></blockquote>

<blockquote><p>
 <a href="a0/lily-41ba6474.ly">
  <img align="middle"
       border="0"
       src="a0/lily-41ba6474.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Such recursive structures can be specified neatly and formally in
a context-free grammar.  The parsing code is also generated from
this grammar.  In other words, the syntax of LilyPond is clearly
and unambiguously defined.
</p>
<p>User-interfaces and syntax are what people see and deal with most.
They are partly a matter of taste, and also subject of much
discussion.  Although discussions on taste do have their merit,
they are not very productive.  In the larger picture of LilyPond,
the importance of input syntax is small: inventing neat syntax is
easy, while writing decent formatting code is much harder.  This
is also illustrated by the line-counts for the respective
components: parsing and representation take up less than 10% of
the source code.
</p>

<hr size="6">
<a name="Example-applications"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Introduction" title="Beginning of this chapter or previous chapter"> &lt;&lt; Introduction&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tutorial" title="Next chapter">&nbsp;Tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Music-representation" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Music representation&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Background" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Background&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#About-the-documentation" title="Next section in reading order" accesskey="n" rel="next">&nbsp;About the documentation &gt; </a>]</td></tr></table>
<a name="Example-applications"></a>
<h3 class="unnumberedsubsec">Example applications</h3>

<a name="index-simple-examples"></a>
<a name="index-examples_002c-simple"></a>

<p>We have written LilyPond as an experiment of how to condense the
art of music engraving into a computer program.  Thanks to all
that hard work, the program can now be used to perform useful
tasks.  The simplest application is printing notes.
</p>
<blockquote><p>
 <a href="63/lily-bbccbca9.ly">
  <img align="middle"
       border="0"
       src="63/lily-bbccbca9.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>By adding chord names and lyrics we obtain a lead sheet.
</p>
<blockquote><p>
 <a href="34/lily-1f1cc0c4.ly">
  <img align="middle"
       border="0"
       src="34/lily-1f1cc0c4.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Polyphonic notation and piano music can also be printed.  The
following example combines some more exotic constructs.
</p>
<blockquote><p>
 <a href="2c/lily-647cf69c.ly">
  <img align="middle"
       border="0"
       src="2c/lily-647cf69c.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The fragments shown above have all been written by hand, but that
is not a requirement.  Since the formatting engine is mostly
automatic, it can serve as an output means for other programs that
manipulate music.  For example, it can also be used to convert
databases of musical fragments to images for use on websites and
multimedia presentations.
</p>
<p>This manual also shows an application: the input format is text,
and can therefore be easily embedded in other text-based formats
such as LaTeX, HTML, or in the case of this manual, Texinfo.
By means of a special program, the input fragments can be replaced
by music images in the resulting PDF or HTML output files.  This
makes it easy to mix music and text in documents.
</p>

<hr size="6">
<a name="About-the-documentation"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Introduction" title="Beginning of this chapter or previous chapter"> &lt;&lt; Introduction&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tutorial" title="Next chapter">&nbsp;Tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Example-applications" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Example applications&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Introduction" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Introduction&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#About-the-Learning-Manual" title="Next section in reading order" accesskey="n" rel="next">&nbsp;About the Learning Manual &gt; </a>]</td></tr></table>
<a name="About-the-documentation"></a>
<h2 class="section">1.2 About the documentation</h2>

<p>This section explains the different portions of the documentation.
</p>
<a name="index-Learning-Manual"></a>
<a name="index-Music-Glossary"></a>
<a name="index-Notation-Reference"></a>
<a name="index-Application-Usage"></a>
<a name="index-Snippet-List"></a>
<a name="index-Internals-Reference"></a>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#About-the-Learning-Manual" accesskey="1">About the Learning Manual</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  this manual introduces LilyPond, giving in-depth explanations of how to create notation.
</td></tr>
<tr><td align="left" valign="top"><a href="#About-the-Music-Glossary" accesskey="2">About the Music Glossary</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  this manual explains musical terms and gives translations of terms in other languages.
</td></tr>
<tr><td align="left" valign="top"><a href="#About-the-Notation-Reference" accesskey="3">About the Notation Reference</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  this manual is the main portion of the documentation.  It provides detailed information about creating notation.  This book assumes that the reader knows basic material covered in the Learning Manual and is familiar with the English musical terms presented in the Musical Glossary.
</td></tr>
<tr><td align="left" valign="top"><a href="#About-the-Application-Usage" accesskey="4">About the Application Usage</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  this discusses the actual programs and operating system-specific issues.
</td></tr>
<tr><td align="left" valign="top"><a href="#About-the-Snippet-List" accesskey="5">About the Snippet List</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  this is a collection of short LilyPond examples.
</td></tr>
<tr><td align="left" valign="top"><a href="#About-the-Internals-Reference" accesskey="6">About the Internals Reference</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">  this document gives reference information about LilyPond&rsquo;s internal structures, which is required for constructing tweaks.
</td></tr>
<tr><td align="left" valign="top"><a href="#Other-documentation" accesskey="7">Other documentation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">         there are a few other portions of the documentation, such as News items and the mailist archives.
</td></tr>
</table>


<hr size="6">
<a name="About-the-Learning-Manual"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Introduction" title="Beginning of this chapter or previous chapter"> &lt;&lt; Introduction&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tutorial" title="Next chapter">&nbsp;Tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#About-the-documentation" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; About the documentation&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#About-the-documentation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;About the documentation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#About-the-Music-Glossary" title="Next section in reading order" accesskey="n" rel="next">&nbsp;About the Music Glossary &gt; </a>]</td></tr></table>
<a name="About-the-Learning-Manual"></a>
<h3 class="unnumberedsubsec">About the Learning Manual</h3>

<a name="index-Learning-Manual-1"></a>

<p>This book explains how to begin learning LilyPond, as well as
explaining some key concepts in easy terms.  You should read these
chapters in a linear fashion.
</p>
<p>There is a paragraph <strong>See also</strong> at the end of each section,
which contains cross-references to other sections: you should not
follow these cross-references at first reading; when you have read all
of the Learning Manual, you may want to read some sections again and
follow cross-references for further reading.
</p>
<ul>
<li>
<a href="#Introduction">Introduction</a>: explains the background and overall goal of
LilyPond.

</li><li>
<a href="#Tutorial">Tutorial</a>: gives a gentle introduction to typesetting music.
First time users should start here.

</li><li>
<a href="#Fundamental-concepts">Fundamental concepts</a>: explains some general concepts about
the LilyPond file format.  If you are not certain where to place a
command, read this chapter!

</li><li>
<a href="#Tweaking-output">Tweaking output</a>: shows how to change the default engraving
that LilyPond produces.

</li><li>
<a href="#Working-on-LilyPond-projects">Working on LilyPond projects</a>: discusses practical uses of
LilyPond and how to avoid some common problems.  Read this before
undertaking large projects!

</li></ul>

<p>The Learning Manual also contains appendices which are not part of the
recommended linear reading.  They may be useful for later
viewing:
</p>
<ul>
<li>
<a href="#Templates">Templates</a>: shows ready-made templates of LilyPond pieces.
Just cut and paste a template into a file, add notes, and you&rsquo;re
done!

</li><li>
<a href="#Scheme-tutorial">Scheme tutorial</a>: presents a short introduction to Scheme,
the programming language that music functions use.  This is
material for advanced tweaks; many users never touch Scheme at
all.

</li></ul>


<hr size="6">
<a name="About-the-Music-Glossary"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Introduction" title="Beginning of this chapter or previous chapter"> &lt;&lt; Introduction&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tutorial" title="Next chapter">&nbsp;Tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#About-the-Learning-Manual" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; About the Learning Manual&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#About-the-documentation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;About the documentation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#About-the-Notation-Reference" title="Next section in reading order" accesskey="n" rel="next">&nbsp;About the Notation Reference &gt; </a>]</td></tr></table>
<a name="About-the-Music-Glossary"></a>
<h3 class="unnumberedsubsec">About the Music Glossary</h3>

<a name="index-Music-Glossary-1"></a>
<a name="index-idiom"></a>
<a name="index-jargon"></a>
<a name="index-terminology"></a>
<a name="index-foreign-languages"></a>
<a name="index-language"></a>

<a name="index-Top"></a>
<p><a href="music-glossary-big-page.html#Top">Music glossary</a>
this explains musical terms, and includes translations to various
languages.  If you are not familiar with music notation or music
terminology (especially if you are a non-native English speaker),
it is highly advisable to consult the glossary.
</p>

<hr size="6">
<a name="About-the-Notation-Reference"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Introduction" title="Beginning of this chapter or previous chapter"> &lt;&lt; Introduction&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tutorial" title="Next chapter">&nbsp;Tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#About-the-Music-Glossary" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; About the Music Glossary&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#About-the-documentation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;About the documentation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#About-the-Application-Usage" title="Next section in reading order" accesskey="n" rel="next">&nbsp;About the Application Usage &gt; </a>]</td></tr></table>
<a name="About-the-Notation-Reference"></a>
<h3 class="unnumberedsubsec">About the Notation Reference</h3>

<a name="index-Notation-Reference-1"></a>
<a name="index-appendices"></a>
<a name="index-reference-charts"></a>
<a name="index-charts_002c-reference"></a>

<p>This book explains all the LilyPond commands which produce
notation.  It assumes that readers are familiar with the concepts
in the Learning Manual.
</p>
<ul>
<li>
<a name="index-Musical-notation"></a>
<a href="lilypond-big-page.html#Musical-notation">Musical notation</a>:
discusses topics grouped by notation construct.  This section
gives details about basic notation that will be useful in almost
any notation project.

</li><li>
<a name="index-Specialist-notation"></a>
<a href="lilypond-big-page.html#Specialist-notation">Specialist notation</a>:
discusses topics grouped by notation construct.  This section
gives details about special notation that will only be useful for
particular instrument (or vocal) groups.

</li><li>
<a name="index-General-input-and-output"></a>
<a href="lilypond-big-page.html#General-input-and-output">General input and output</a>:
discusses general information about LilyPond input files and
controlling output.

</li><li>
<a name="index-Spacing-issues"></a>
<a href="lilypond-big-page.html#Spacing-issues">Spacing issues</a>:
discusses issues which affect the global output, such as selecting
paper size or specifying page breaks.

</li><li>
<a name="index-Changing-defaults"></a>
<a href="lilypond-big-page.html#Changing-defaults">Changing defaults</a>:
explains how to tweak LilyPond to produce exactly the notation you
want.

</li><li>
<a name="index-Interfaces-for-programmers"></a>
<a href="lilypond-big-page.html#Interfaces-for-programmers">Interfaces for programmers</a>:
explains how to create music functions with scheme.

</li></ul>

<p>The Notation Reference also contains appendices with useful
reference charts.
</p>
<ul>
<li>
<a name="index-Literature-list"></a>
<a href="lilypond-big-page.html#Literature-list">Literature list</a>:
contains a set of useful reference books for those who wish to
know more on notation and engraving.

</li><li>
<a name="index-Notation-manual-tables"></a>
<a href="lilypond-big-page.html#Notation-manual-tables">Notation manual tables</a>:
are a set of tables showing the chord names, MIDI instruments, a
list of color names, and the Feta font.

</li><li>
<a name="index-Cheat-sheet"></a>
<a href="lilypond-big-page.html#Cheat-sheet">Cheat sheet</a>:
is a handy reference of the most common LilyPond commands.

</li><li>
<a name="index-LilyPond-command-index"></a>
<a href="lilypond-big-page.html#LilyPond-command-index">LilyPond command index</a>:
an index of all LilyPond <code>\commands</code>.

</li><li>
<a name="index-LilyPond-index"></a>
<a href="lilypond-big-page.html#LilyPond-index">LilyPond index</a>:
a complete index.

</li></ul>


<hr size="6">
<a name="About-the-Application-Usage"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Introduction" title="Beginning of this chapter or previous chapter"> &lt;&lt; Introduction&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tutorial" title="Next chapter">&nbsp;Tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#About-the-Notation-Reference" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; About the Notation Reference&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#About-the-documentation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;About the documentation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#About-the-Snippet-List" title="Next section in reading order" accesskey="n" rel="next">&nbsp;About the Snippet List &gt; </a>]</td></tr></table>
<a name="About-the-Application-Usage"></a>
<h3 class="unnumberedsubsec">About the Application Usage</h3>

<a name="index-Application-Usage-1"></a>
<a name="index-integrating-LilyPond-with-other-programs"></a>

<p>This book explains how to execute the programs and how to integrate
LilyPond notation with other programs.
</p>
<ul>
<li>
<a name="index-Install"></a>
<a href="lilypond-program-big-page.html#Install">Install</a>:
explains how to install LilyPond, including compilation if
desired.

</li><li>
<a name="index-Setup"></a>
<a href="lilypond-program-big-page.html#Setup">Setup</a>:
describes how to configure your computer for optimum LilyPond
usage, such as using special environments for certain text
editors.

</li><li>
<a name="index-Running-LilyPond"></a>
<a href="lilypond-program-big-page.html#Running-LilyPond">Running LilyPond</a>:
shows how to run LilyPond and its helper programs.  In addition,
this section explains how to upgrade input files from previous
versions of LilyPond.

</li><li>
<a name="index-LilyPond_002dbook"></a>
<a href="lilypond-program-big-page.html#LilyPond_002dbook">LilyPond-book</a>:
explains the details behind creating documents with in-line music
examples, like this manual.

</li><li>
<a name="index-Converting-from-other-formats"></a>
<a href="lilypond-program-big-page.html#Converting-from-other-formats">Converting from other formats</a>:
explains how to run the conversion programs.  These programs are
supplied with the LilyPond package, and convert a variety of music
formats to the <code>.ly</code> format.

</li></ul>


<hr size="6">
<a name="About-the-Snippet-List"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Introduction" title="Beginning of this chapter or previous chapter"> &lt;&lt; Introduction&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tutorial" title="Next chapter">&nbsp;Tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#About-the-Application-Usage" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; About the Application Usage&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#About-the-documentation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;About the documentation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#About-the-Internals-Reference" title="Next section in reading order" accesskey="n" rel="next">&nbsp;About the Internals Reference &gt; </a>]</td></tr></table>
<a name="About-the-Snippet-List"></a>
<h3 class="unnumberedsubsec">About the Snippet List</h3>

<a name="index-snippets"></a>
<a name="index-LSR"></a>
<a name="index-Snippet-List-1"></a>
<a name="index-LilyPond-Snippet-Repository"></a>

<p><a href="../../input/lsr/lilypond-snippets-big-page.html#Top">LilyPond Snippet List</a>: this shows a
selected set of LilyPond snippets from the
<a href="http://lsr.dsi.unimi.it">LilyPond Snippet Repository</a>
(LSR).  All the snippets are in the public domain.
</p>
<p>Please note that this document is not an exact subset of LSR.  LSR
is running a stable LilyPond version, so any snippet which
demonstrates new features of a development version must be added
separately.  These are stored in &lsquo;<tt>input/new/</tt>&rsquo; in the LilyPond
source tree.
</p>
<p>The list of snippets for each subsection of the Notation Reference are
also linked from the <strong>See also</strong> portion.
</p>

<hr size="6">
<a name="About-the-Internals-Reference"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Introduction" title="Beginning of this chapter or previous chapter"> &lt;&lt; Introduction&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tutorial" title="Next chapter">&nbsp;Tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#About-the-Snippet-List" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; About the Snippet List&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#About-the-documentation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;About the documentation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Other-documentation" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Other documentation &gt; </a>]</td></tr></table>
<a name="About-the-Internals-Reference"></a>
<h3 class="unnumberedsubsec">About the Internals Reference</h3>

<a name="index-Internals-Reference-1"></a>

<a name="index-Top-1"></a>
<p><a href="lilypond-internals-big-page.html#Top">Internals Reference</a>: this is a set
of heavily cross linked HTML pages which document the nitty-gritty
details of each and every LilyPond class, object, and function.
It is produced directly from the formatting definitions in the
source code.
</p>
<p>Almost all formatting functionality that is used internally is
available directly to the user.  For example, most variables that
control thickness values, distances, etc., can be changed in input
files.  There are a huge number of formatting options, and all of
them are described in this document.  Each section of the Notation
Reference has a <b>See also</b> subsection, which refers to the
generated documentation.  In the HTML document, these subsections
have clickable links.
</p>

<hr size="6">
<a name="Other-documentation"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Introduction" title="Beginning of this chapter or previous chapter"> &lt;&lt; Introduction&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tutorial" title="Next chapter">&nbsp;Tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#About-the-Internals-Reference" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; About the Internals Reference&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#About-the-documentation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;About the documentation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Tutorial" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tutorial &gt; </a>]</td></tr></table>
<a name="Other-documentation"></a>
<h3 class="unnumberedsubsec">Other documentation</h3>

<p>There are a number of other sources of information which may be
very valuable.
</p>
<ul>
<li>
<a href="../topdocs/NEWS.html">News</a>:
this is a summary of important changes
and new features in LilyPond since the previous version.

</li><li> <a href="http://lists.gnu.org/archive/html/lilypond-user/">The lilypond-user mailist archives</a>: this is a collection of previous
emails sent to the user list.  Many questions have been asked
multiple times; there is a very good chance that if you have a
question, the answer might be found in these archives.

</li><li> <a href="http://lists.gnu.org/archive/html/lilypond-devel/">The lilypond-devel mailist archives</a>: this is a collection of previous
emails sent to the developer&rsquo;s list.  The discussion here is more
technical; if you have an advanced question about lilypond
internals, the answer might be in these archives.

</li><li> Embedded music fragments: in all HTML documents that have
music fragments embedded, the exact LilyPond input that was used
to produce that image can be viewed by clicking the image.

</li><li> Init files: the location of the documentation files that are
mentioned here can vary from system to system.  On occasion, this
manual refers to initialization and example files.  Throughout this
manual, we refer to input files relative to the top-directory of the
source archive.  For example, &lsquo;<tt>input/lsr/dirname/bla.ly</tt>&rsquo;
may refer to the file
&lsquo;<tt>lilypond2.x.y/input/lsr/dirname/bla.ly</tt>&rsquo;.  On binary
packages for the UNIX platform, the documentation and examples can
typically be found somewhere below
&lsquo;<tt>/usr/share/doc/lilypond/</tt>&rsquo;.  Initialization files, for
example &lsquo;<tt>scm/lily.scm</tt>&rsquo;, or &lsquo;<tt>ly/engraver-init.ly</tt>&rsquo;,
are usually found in the directory &lsquo;<tt>/usr/share/lilypond/</tt>&rsquo;.
For more details, see <a href="#Other-sources-of-information">Other sources of information</a>.

</li></ul>





<hr size="6">
<a name="Tutorial"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Introduction" title="Beginning of this chapter or previous chapter"> &lt;&lt; Introduction&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Other-documentation" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Other documentation&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Top" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#First-steps" title="Next section in reading order" accesskey="n" rel="next">&nbsp;First steps &gt; </a>]</td></tr></table>
<a name="Tutorial"></a>
<h1 class="chapter">2. Tutorial</h1>

<p>This tutorial starts with an introduction to the LilyPond music
language and explains how to produce printed music.  After this first
contact we will explain how to create beautiful printed music
containing common musical notation.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#First-steps" accesskey="1">2.1 First steps</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Single-staff-notation" accesskey="2">2.2 Single staff notation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Multiple-notes-at-once" accesskey="3">2.3 Multiple notes at once</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Songs" accesskey="4">2.4 Songs</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Final-touches" accesskey="5">2.5 Final touches</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="First-steps"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Tutorial" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Tutorial" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tutorial&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Compiling-a-file" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Compiling a file &gt; </a>]</td></tr></table>
<a name="First-steps"></a>
<h2 class="section">2.1 First steps</h2>

<p>This section gives a basic introduction to working with LilyPond.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Compiling-a-file" accesskey="1">2.1.1 Compiling a file</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Simple-notation" accesskey="2">2.1.2 Simple notation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Working-on-input-files" accesskey="3">2.1.3 Working on input files</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#How-to-read-the-manual" accesskey="4">2.1.4 How to read the manual</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="Compiling-a-file"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#First-steps" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; First steps&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#First-steps" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;First steps&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Simple-notation" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Simple notation &gt; </a>]</td></tr></table>
<a name="Compiling-a-file"></a>
<h3 class="subsection">2.1.1 Compiling a file</h3>

<a name="index-compiling"></a>
<a name="index-first-example"></a>
<a name="index-example_002c-first"></a>
<a name="index-case-sensitive"></a>

<p>&ldquo;Compiling&rdquo; is the term used for processing an input file
in LilyPond format to produce a file which can be printed and
(optionally) a MIDI file which can be played.  LilyPond input
files are simple text files.  The first example
shows what a simple input file looks like.
</p>
<p>To create sheet music, we write an input file that specifies the
notation.  For example, if we write:
</p>
<blockquote><pre class="example">{
  c' e' g' e'
}
</pre></blockquote>

<p>the result looks like this:
</p>
<blockquote><p>
 <a href="a1/lily-fb428739.ly">
  <img align="middle"
       border="0"
       src="a1/lily-fb428739.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<table class="cartouche" border="1"><tr><td>
<p><b>Note:</b> Notes and lyrics in LilyPond input must always be
surrounded by <strong>{ curly braces }</strong>.  The braces
should also be surrounded by a space unless they are at the
beginning or end of a line to avoid ambiguities.  The braces may
be omitted in some examples in this manual, but don&rsquo;t forget them
in your own music!  For more information about the display of
examples in the manual, see <a href="#How-to-read-the-manual">How to read the manual</a>.
</p></td></tr></table>

<p>In addition, LilyPond input is <strong>case sensitive</strong>.
<code>{ c d e }</code> is valid input; <code>{ C D E }</code> will
produce an error message.
</p>
<br>

<a name="Entering-music-and-viewing-output"></a>
<h3 class="subheading">Entering music and viewing output</h3>

<a name="index-PDF-file"></a>
<a name="index-viewing-music"></a>
<a name="index-text-editors"></a>
<a name="index-running-LilyPond-under-MacOS-X"></a>
<a name="index-MacOS-X_002c-running-LilyPond"></a>
<a name="index-running-LilyPond-under-Windows"></a>
<a name="index-Windows_002c-running-LilyPond"></a>
<a name="index-running-LilyPond-under-Unix"></a>
<a name="index-Unix_002c-running-LilyPond"></a>

<p>In this section we will explain what commands to run and how to
view or print the output.
</p>
<p>Note that there are several other text editors available with
better support for LilyPond.  For more information, see
<a name="index-Text-editor-support"></a>
<a href="lilypond-program-big-page.html#Text-editor-support">Text editor support</a>.
</p>
<table class="cartouche" border="1"><tr><td>
<p><b>Note:</b> The first time you ever run LilyPond, it may take a
minute or two because all of the system fonts have to be analyzed
first.  After this, LilyPond will be much faster!
</p></td></tr></table>

<a name="MacOS-X"></a>
<h4 class="subsubheading">MacOS X</h4>

<p>If you double click <code>LilyPond.app</code>, it will open with an
example file.  Save it, for example, to &lsquo;<tt>test.ly</tt>&rsquo; on your
Desktop, and then process it with the menu command
<code>Compile &gt; Typeset File</code>.  The resulting PDF file will be
displayed on your screen.
</p>
<p>For future use of LilyPond, you should begin by selecting &lsquo;New&rsquo;
or &lsquo;Open&rsquo;.  You must save your file before typesetting it.  If
any errors occur in processing, please see the log window.
</p>

<a name="Windows"></a>
<h4 class="subsubheading">Windows</h4>

<p>On Windows, if you double-click in the LilyPond icon on the
Desktop, it will open a simple text editor with an example file.
Save it, for example, to &lsquo;<tt>test.ly</tt>&rsquo; on your Desktop and then
double-click on the file to process it (the file icon looks like a
note).  After some seconds, you will get a file &lsquo;<tt>test.pdf</tt>&rsquo; on
your desktop.  Double-click on this PDF file to view the typeset
score.  An alternative method to process the &lsquo;<tt>test.ly</tt>&rsquo; file
is to drag and drop it onto the LilyPond icon using your mouse
pointer.
</p>
<p>To edit an existing &lsquo;<tt>.ly</tt>&rsquo; file, right-click on it and
select &ldquo;Edit source&rdquo;.  To get an empty file to start from, run
the editor as described above and use &ldquo;New&rdquo; in
the &ldquo;File&rdquo; menu, or right-click on the desktop and select
&ldquo;New..Text Document&rdquo;, change its name to a name of your choice
and change the file extension to <code>.ly</code>.  Double-click the
icon to type in your LilyPond source code as before.
</p>
<p>Double-clicking the file does not only result in a PDF file, but
also produces a &lsquo;<tt>.log</tt>&rsquo; file that contains some information on
what LilyPond has done to the file.  If any errors occur, please
examine this file.
</p>
<a name="UNIX"></a>
<h4 class="subsubheading">UNIX</h4>

<p>Create a text file called &lsquo;<tt>test.ly</tt>&rsquo; and enter:
</p>
<blockquote><pre class="example">{
  c' e' g' e'
}
</pre></blockquote>

<p>To process &lsquo;<tt>test.ly</tt>&rsquo;, proceed as follows:
</p>
<blockquote><pre class="example">lilypond test.ly
</pre></blockquote>

<p>You will see something resembling:
</p>
<blockquote><pre class="example">lilypond test.ly
GNU LilyPond 2.12.3
Processing `test.ly'
Parsing...
Interpreting music...
Preprocessing graphical objects...
Finding the ideal number of pages...
Fitting music on 1 page...
Drawing systems...
Layout output to `test.ps'...
Converting to `test.pdf'...
</pre></blockquote>


<hr size="6">
<a name="Simple-notation"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Compiling-a-file" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Compiling a file&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#First-steps" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;First steps&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Working-on-input-files" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Working on input files &gt; </a>]</td></tr></table>
<a name="Simple-notation"></a>
<h3 class="subsection">2.1.2 Simple notation</h3>

<a name="index-simple-notation"></a>
<a name="index-notation_002c-simple"></a>

<p>LilyPond will add some notation elements automatically.  In the
next example, we have only specified four pitches, but LilyPond
has added a clef, time signature, and rhythms.
</p>
<blockquote><pre class="verbatim">{
  c' e' g' e'
}
</pre><p>
 <a href="1d/lily-960871dd.ly">
  <img align="middle"
       border="0"
       src="1d/lily-960871dd.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>This behavior may be altered, but in most cases these automatic
values are useful.
</p>

<a name="Pitches"></a>
<h3 class="subheading">Pitches</h3>

<a name="index-pitches"></a>
<a name="index-relative-mode"></a>
<a name="index-quote_002c-single"></a>
<a name="index-comma"></a>
<a name="index-accidentals-and-relative-mode"></a>
<a name="index-relative-mode_002c-and-accidentals"></a>

<a name="index-_005crelative"></a>
<a name="index-_005crelative-1"></a>
<a name="index-relative"></a>
<a name="index-relative-1"></a>
<a name="index-_0027"></a>
<a name="index-_0027-1"></a>
<a name="index-_002c"></a>
<a name="index-_002c-1"></a>

<p>Music Glossary: <a name="index-pitch"></a>
<a href="music-glossary-big-page.html#pitch">pitch</a>, <a name="index-interval"></a>
<a href="music-glossary-big-page.html#interval">interval</a>,
<a name="index-scale"></a>
<a href="music-glossary-big-page.html#scale">scale</a>, <a name="index-middle-C"></a>
<a href="music-glossary-big-page.html#middle-C">middle C</a>, <a name="index-octave"></a>
<a href="music-glossary-big-page.html#octave">octave</a>,
<a name="index-accidental"></a>
<a href="music-glossary-big-page.html#accidental">accidental</a>.
</p>
<p>The easiest way to enter notes is by using <code>\relative</code> mode.
In this mode, the octave is chosen automatically by assuming the
following note is always to be placed closest to the previous
note, i.e., it is to be placed in the octave which is within three
staff spaces of the previous note.  We begin by entering the most
elementary piece of music, a <var>scale</var>, in which every note
is within just one staff space of the previous note.
</p>
<blockquote><pre class="verbatim">% set the starting point to middle C
\relative c' {
  c d e f
  g a b c
}
</pre><p>
 <a href="2a/lily-77bae1b3.ly">
  <img align="middle"
       border="0"
       src="2a/lily-77bae1b3.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The initial note is <var>middle C</var>.  Each successive note is
placed closest to the previous note &ndash; in other words, the first
<code>c</code> is the closest C to middle C.  This is followed by the
closest D to the previous note.  We can create melodies which have
larger intervals, still using only <code>\relative</code> mode:
</p>
<blockquote><pre class="verbatim">\relative c' {
  d f a g
  c b f d
}
</pre><p>
 <a href="6d/lily-187354e6.ly">
  <img align="middle"
       border="0"
       src="6d/lily-187354e6.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>It is not necessary for the first note of the melody to start on
the note which specifies the starting pitch.  In the previous
example, the first note &ndash; the <code>d</code> &ndash; is the closest D to
middle C.
</p>
<p>By adding (or removing) quotes <code>'</code> or commas <code>,</code> from
the <code>\relative c' {</code> command, we can change the starting
octave:
</p>
<blockquote><pre class="verbatim">% one octave above middle C
\relative c'' {
  e c a c
}
</pre><p>
 <a href="31/lily-3bffba18.ly">
  <img align="middle"
       border="0"
       src="31/lily-3bffba18.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Relative mode can be confusing initially, but is the easiest way
to enter most melodies.  Let us see how this relative calculation
works in practice.  Starting from a B, which is on the middle line
in a treble clef, you can reach a C, D and E within 3 staff spaces
going up, and an A, G and F within 3 staff spaces going down.  So
if the note following a B is a C, D or E it will be assumed to be
above the B, and an A, G or F will be assumed to be below.
</p>
<blockquote><pre class="verbatim">\relative c'' {
  b c  % c is 1 staff space up, so is the c above
  b d  % d is 2 up or 5 down, so is the d above
  b e  % e is 3 up or 4 down, so is the e above
  b a  % a is 6 up or 1 down, so is the a below
  b g  % g is 5 up or 2 down, so is the g below
  b f  % f is 4 up or 3 down, so is the f below
}
</pre><p>
 <a href="e5/lily-fbce8f2d.ly">
  <img align="middle"
       border="0"
       src="e5/lily-fbce8f2d.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Exactly the same happens even when any of these notes are
sharpened or flattened.  <var>Accidentals</var> are
<strong>totally ignored</strong> in the calculation of relative position.
Precisely the same staff space counting is done from a note at any
other position on the staff.
</p>
<p>To add intervals that are larger than three staff spaces, we can
raise the <var>octave</var> by adding a single quote <code>'</code> (or
apostrophe) to the note name.  We can lower the octave by adding a
comma <code>,</code> to the note name.
</p>
<blockquote><pre class="verbatim">\relative c'' {
  a a, c' f,
  g g'' a,, f'
}
</pre><p>
 <a href="e7/lily-fa9cb7de.ly">
  <img align="middle"
       border="0"
       src="e7/lily-fa9cb7de.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>To change a note by two (or more!) octaves, we use multiple
<code>''</code> or <code>,,</code> &ndash; but be careful that you use two single
quotes <code>''</code> and not one double quote <code>&quot;</code>&nbsp;!  The
initial value in <code>\relative c'</code> may also be modified like
this.
</p>
<a name="Durations-_0028rhythms_0029"></a>
<h3 class="subheading">Durations (rhythms)</h3>

<a name="index-note-durations"></a>
<a name="index-durations"></a>
<a name="index-rhythms"></a>
<a name="index-whole-note"></a>
<a name="index-half-note"></a>
<a name="index-quarter-note"></a>
<a name="index-dotted-note"></a>
<a name="index-notating-durations"></a>

<p>Music Glossary: <a name="index-beam"></a>
<a href="music-glossary-big-page.html#beam">beam</a>, <a name="index-duration"></a>
<a href="music-glossary-big-page.html#duration">duration</a>,
<a name="index-whole-note-1"></a>
<a href="music-glossary-big-page.html#whole-note">whole note</a>, <a name="index-half-note-1"></a>
<a href="music-glossary-big-page.html#half-note">half note</a>, <a name="index-quarter-note-1"></a>
<a href="music-glossary-big-page.html#quarter-note">quarter note</a>,
<a name="index-dotted-note-1"></a>
<a href="music-glossary-big-page.html#dotted-note">dotted note</a>.
</p>
<p>The <var>duration</var> of a note is specified by a number after
the note name.  <code>1</code> for a <var>whole note</var>, <code>2</code> for
a <var>half note</var>, <code>4</code> for a <var>quarter note</var> and
so on.  <var>Beams</var> are added automatically.
</p>
<p>If you do not specify a duration, the previous duration is used
for the next note.  The duration of the first note defaults to a
quarter.
</p>
<blockquote><pre class="verbatim">\relative c'' {
  a1
  a2 a4 a8 a
  a16 a a a a32 a a a a64 a a a a a a a a2
}
</pre><p>
 <a href="be/lily-debc8893.ly">
  <img align="middle"
       border="0"
       src="be/lily-debc8893.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>To create <var>dotted notes</var>, add a dot <code>.</code> to the
duration number.  The duration of a dotted note must be stated
explicitly (i.e., with a number).
</p>
<blockquote><pre class="verbatim">\relative c'' {
  a a a4. a8
  a8. a16 a a8. a8 a4.
}
</pre><p>
 <a href="13/lily-9b2281d2.ly">
  <img align="middle"
       border="0"
       src="13/lily-9b2281d2.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<a name="Rests"></a>
<h3 class="subheading">Rests</h3>

<a name="index-rest"></a>
<a name="index-notating-rests"></a>

<p>Music Glossary: <a name="index-rest-1"></a>
<a href="music-glossary-big-page.html#rest">rest</a>.
</p>
<p>A <var>rest</var> is entered just like a note with the name
<code>r</code>&nbsp;:
</p>
<blockquote><pre class="verbatim">\relative c'' {
  a r r2
  r8 a r4 r4. r8
}
</pre><p>
 <a href="37/lily-366ea140.ly">
  <img align="middle"
       border="0"
       src="37/lily-366ea140.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<a name="Time-signature"></a>
<h3 class="subheading">Time signature</h3>

<a name="index-time-signature"></a>

<a name="index-_005ctime"></a>
<a name="index-_005ctime-1"></a>
<a name="index-time"></a>
<a name="index-time-1"></a>

<p>Music Glossary: <a name="index-time-signature-1"></a>
<a href="music-glossary-big-page.html#time-signature">time signature</a>.
</p>
<p>The <var>time signature</var> can be set with the <code>\time</code>
command:
</p>
<blockquote><pre class="verbatim">\relative c'' {
  \time 3/4
  a4 a a
  \time 6/8
  a4. a
  \time 4/4
  a4 a a a
}
</pre><p>
 <a href="60/lily-bf08b3bf.ly">
  <img align="middle"
       border="0"
       src="60/lily-bf08b3bf.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<a name="Clef"></a>
<h3 class="subheading">Clef</h3>

<a name="index-clef"></a>
<a name="index-treble"></a>
<a name="index-alto"></a>
<a name="index-tenor"></a>
<a name="index-bass"></a>

<a name="index-_005cclef"></a>
<a name="index-_005cclef-1"></a>
<a name="index-clef-1"></a>
<a name="index-clef-2"></a>

<p>Music Glossary: <a name="index-clef-3"></a>
<a href="music-glossary-big-page.html#clef">clef</a>.
</p>
<p>The <var>clef</var> can be set using the <code>\clef</code> command:
</p>
<blockquote><pre class="verbatim">\relative c' {
  \clef treble
  c1
  \clef alto
  c1
  \clef tenor
  c1
  \clef bass
  c1
}
</pre><p>
 <a href="d1/lily-1b80f55d.ly">
  <img align="middle"
       border="0"
       src="d1/lily-1b80f55d.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<a name="All-together"></a>
<h3 class="subheading">All together</h3>

<p>Here is a small example showing all these elements together:
</p>
<blockquote><pre class="verbatim">\relative c, {
  \time 3/4
  \clef bass
  c2 e8 c' g'2.
  f4 e d c4 c, r4
}
</pre><p>
 <a href="73/lily-5f91c834.ly">
  <img align="middle"
       border="0"
       src="73/lily-5f91c834.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<a name="See-also-13"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference: <a name="index-Writing-pitches"></a>
<a href="lilypond-big-page.html#Writing-pitches">Writing pitches</a>,
<a name="index-Writing-rhythms"></a>
<a href="lilypond-big-page.html#Writing-rhythms">Writing rhythms</a>, <a name="index-Writing-rests"></a>
<a href="lilypond-big-page.html#Writing-rests">Writing rests</a>,
<a name="index-Time-signature"></a>
<a href="lilypond-big-page.html#Time-signature">Time signature</a>, <a name="index-Clef"></a>
<a href="lilypond-big-page.html#Clef">Clef</a>.
</p>

<hr size="6">
<a name="Working-on-input-files"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Simple-notation" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Simple notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#First-steps" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;First steps&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#How-to-read-the-manual" title="Next section in reading order" accesskey="n" rel="next">&nbsp;How to read the manual &gt; </a>]</td></tr></table>
<a name="Working-on-input-files"></a>
<h3 class="subsection">2.1.3 Working on input files</h3>

<a name="index-curly-braces"></a>
<a name="index-braces_002c-curly"></a>
<a name="index-comments"></a>
<a name="index-line-comment"></a>
<a name="index-comment_002c-line"></a>
<a name="index-block-comment"></a>
<a name="index-comment_002c-line-1"></a>
<a name="index-case-sensitive-1"></a>
<a name="index-whitespace-insensitive"></a>
<a name="index-expressions"></a>

<a name="index-_002e_002e_002e"></a>
<a name="index-_002e_002e_002e-1"></a>
<a name="index-_0025"></a>
<a name="index-_0025-1"></a>
<a name="index-_0025_007b-_002e_002e_002e-_0025_007d"></a>
<a name="index-_0025_007b-_002e_002e_002e-_0025_007d-1"></a>

<p>LilyPond input files are similar to source files in many common
programming languages.  They are case sensitive, and white-space
is generally ignored.  Expressions are formed with curly braces
{ }, and comments are denoted with <code>%</code> or
<code>%{ ... %}</code>.
</p>
<p>If the previous sentences sound like nonsense, don&rsquo;t worry!  We&rsquo;ll
explain what all these terms mean:
</p>
<ul>
<li>
<strong>Case sensitive</strong>:
it matters whether you enter a letter in lower case (e.g.
<code>a, b, s, t</code>) or upper case (e.g.  <code>A, B, S, T</code>).
Notes are lower case: <code>{ c d e }</code> is valid input;
<code>{ C D E }</code> will produce an error message.

</li><li>
<strong>Whitespace insensitive</strong>:
it does not matter how many spaces (or new lines) you add.
<code>{ c d e }</code> means the same thing as
<code>{ c &nbsp;</code> &nbsp; &nbsp; d e } and:

<blockquote><pre class="example">{ c                        d
                   e   }
</pre></blockquote>

<p>Of course, the previous example is hard to read.  A good rule of
thumb is to indent code blocks with either a tab or two spaces:
</p>
<blockquote><pre class="example">{
  c d e
}
</pre></blockquote>

</li><li>
<strong>Expressions</strong>:
every piece of LilyPond input needs to have <strong>{ curly
braces }</strong> placed around the input.  These braces tell LilyPond
that the input is a single music expression, just like parentheses
<code>()</code> in mathematics.  The braces should be surrounded by a
space unless they are at the beginning or end of a line to avoid
ambiguities.

<p>A LilyPond command followed by a simple expression in braces (such
as <code>\relative { }</code>) also counts as a single music
expression.
</p>
<a name="index-comments-1"></a>
<a name="index-line-comment-1"></a>
<a name="index-block-comment-1"></a>
</li><li>
<strong>Comments</strong>:
a comment is a remark for the human reader of the music input; it
is ignored while parsing, so it has no effect on the printed
output.  There are two types of comments.  The percent symbol
<code>%</code> introduces a line comment; anything after <code>%</code> on
that line is ignored.  By convention, a line comment is placed
<em>above</em> the code it refers to.

<blockquote><pre class="example">a4 a a a
% this comment refers to the Bs
b2 b
</pre></blockquote>

<p>A block comment marks a whole section of music input as a comment.
Anything that is enclosed in <code>%{</code> and <code>%}</code> is ignored.
However, block comments do not &lsquo;nest&rsquo;.  This means that you
cannot place a block comment inside another block comment.  If you
try, the first <code>%}</code> will terminate <em>both</em> block
comments.  The following fragment shows possible uses for
comments:
</p>
<blockquote><pre class="example">% notes for twinkle twinkle follow
  c4 c g' g a a g2

%{
  This line, and the notes below are ignored,
  since they are in a block comment.

  f f e e d d c2
%}
</pre></blockquote>

</li></ul>


<hr size="6">
<a name="How-to-read-the-manual"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Working-on-input-files" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Working on input files&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#First-steps" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;First steps&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Single-staff-notation" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Single staff notation &gt; </a>]</td></tr></table>
<a name="How-to-read-the-manual"></a>
<h3 class="subsection">2.1.4 How to read the manual</h3>

<a name="index-how-to-read-the-manual"></a>
<a name="index-manual_002c-reading"></a>
<a name="index-reading-the-manual"></a>
<a name="index-examples_002c-clickable"></a>
<a name="index-clickable-examples"></a>
<a name="index-tips-for-constructing-files"></a>
<a name="index-templates"></a>
<a name="index-constructing-files_002c-tips"></a>
<a name="index-files_002c-tips-for-constructing"></a>

<p>LilyPond input must be surrounded by { } marks or a
<code>\relative c'' { ... }</code>, as we saw in <a href="#Working-on-input-files">Working on input files</a>.  For the rest of this manual, most examples will
omit this.  To replicate the examples, you may copy and paste the
displayed input, but you <strong>must</strong> add the
<code>\relative c'' { }</code> like this:
</p>
<blockquote><pre class="example">\relative c'' {
  ... example goes here...
}
</pre></blockquote>

<p>Why omit the braces?  Most examples in this manual can be inserted
into the middle of a longer piece of music.  For these examples,
it does not make sense to add <code>\relative c'' { }</code> &ndash;
you should not place a <code>\relative</code> inside another
<code>\relative</code>!  If we included <code>\relative c'' { }</code>
around every example, you would not be able to copy a small
documentation example and paste it inside a longer piece of your
own.  Most people want to add material to an existing piece, so we
format the manual this way.
</p>

<a name="Clickable-examples"></a>
<h3 class="subheading">Clickable examples</h3>

<p>Many people learn programs by trying and fiddling around with the
program.  This is also possible with LilyPond.  If you click on a
picture in the HTML version of this manual, you will see the exact
LilyPond input that was used to generate that image.  Try it on
this image:
</p>
<blockquote><p>
 <a href="45/lily-bad9c906.ly">
  <img align="middle"
       border="0"
       src="45/lily-bad9c906.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>By cutting and pasting everything in the &ldquo;ly snippet&rdquo; section,
you have a starting template for experiments.  To see exactly the
same output (line-width and all), copy everything from &ldquo;Start
cut-&amp;-pastable section&rdquo; to the bottom of the file.
</p>

<a name="See-also-18"></a>
<h4 class="subsubheading">See also</h4>
<p>There are more tips for constructing input files in
<a href="#Suggestions-for-writing-LilyPond-input-files">Suggestions for writing LilyPond input files</a>.  But it might be
best to read through the rest of the tutorial first.
</p>

<hr size="6">
<a name="Single-staff-notation"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#How-to-read-the-manual" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; How to read the manual&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Tutorial" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tutorial&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Accidentals-and-key-signatures" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Accidentals and key signatures &gt; </a>]</td></tr></table>
<a name="Single-staff-notation"></a>
<h2 class="section">2.2 Single staff notation</h2>

<p>This section introduces common notation that is used for one voice
on one staff.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Accidentals-and-key-signatures" accesskey="1">2.2.1 Accidentals and key signatures</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Ties-and-slurs" accesskey="2">2.2.2 Ties and slurs</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Articulation-and-dynamics" accesskey="3">2.2.3 Articulation and dynamics</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Adding-text" accesskey="4">2.2.4 Adding text</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Automatic-and-manual-beams" accesskey="5">2.2.5 Automatic and manual beams</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Advanced-rhythmic-commands" accesskey="6">2.2.6 Advanced rhythmic commands</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="Accidentals-and-key-signatures"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Single-staff-notation" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Single staff notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Single-staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Single staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Ties-and-slurs" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Ties and slurs &gt; </a>]</td></tr></table>
<a name="Accidentals-and-key-signatures"></a>
<h3 class="subsection">2.2.1 Accidentals and key signatures</h3>

<a name="Accidentals"></a>
<h3 class="subheading">Accidentals</h3>

<a name="index-accidentals"></a>
<a name="index-accidentals-and-key-signatures"></a>
<a name="index-sharp"></a>
<a name="index-double-sharp"></a>
<a name="index-sharp_002c-double"></a>
<a name="index-flat"></a>
<a name="index-double-flat"></a>
<a name="index-flat_002c-double"></a>

<a name="index-es"></a>
<a name="index-es-1"></a>
<a name="index-is"></a>
<a name="index-is-1"></a>
<a name="index-eses"></a>
<a name="index-eses-1"></a>
<a name="index-isis"></a>
<a name="index-isis-1"></a>

<p>Music Glossary: <a name="index-sharp-1"></a>
<a href="music-glossary-big-page.html#sharp">sharp</a>, <a name="index-flat-1"></a>
<a href="music-glossary-big-page.html#flat">flat</a>, <a name="index-double-sharp-1"></a>
<a href="music-glossary-big-page.html#double-sharp">double sharp</a>,
<a name="index-double-flat-1"></a>
<a href="music-glossary-big-page.html#double-flat">double flat</a>, <a name="index-accidental-1"></a>
<a href="music-glossary-big-page.html#accidental">accidental</a>.
</p>
<p>A <var>sharp</var> pitch is made by adding <code>is</code> to the name,
and a <var>flat</var> pitch by adding <code>es</code>.  As you might
expect, a <var>double sharp</var> or <var>double flat</var> is
made by adding <code>isis</code> or <code>eses</code>.  This syntax is derived
from note naming conventions in Nordic and Germanic languages,
like German and Dutch.  To use other names for
<var>accidentals</var>, see <a name="index-Note-names-in-other-languages"></a>
<a href="lilypond-big-page.html#Note-names-in-other-languages">Note names in other languages</a>.
</p>
<blockquote><pre class="verbatim">cis1 ees fisis, aeses
</pre><p>
 <a href="94/lily-76b0cd50.ly">
  <img align="middle"
       border="0"
       src="94/lily-76b0cd50.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="index-key-signature_002c-setting"></a>
<a name="Key-signatures"></a>
<h3 class="subheading">Key signatures</h3>

<a name="index-key-signature"></a>
<a name="index-major"></a>
<a name="index-minor"></a>
<a name="index-accidentals-and-key-signature"></a>
<a name="index-content-vs_002e-layout"></a>
<a name="index-layout-vs_002e-content"></a>

<a name="index-_005ckey"></a>
<a name="index-_005ckey-1"></a>
<a name="index-key"></a>
<a name="index-key-1"></a>
<a name="index-_005cmajor"></a>
<a name="index-_005cmajor-1"></a>
<a name="index-major-1"></a>
<a name="index-major-2"></a>
<a name="index-_005cminor"></a>
<a name="index-_005cminor-1"></a>
<a name="index-minor-1"></a>
<a name="index-minor-2"></a>

<p>Music Glossary: <a name="index-key-signature-1"></a>
<a href="music-glossary-big-page.html#key-signature">key signature</a>, <a name="index-major-3"></a>
<a href="music-glossary-big-page.html#major">major</a>,
<a name="index-minor-3"></a>
<a href="music-glossary-big-page.html#minor">minor</a>.
</p>
<p>The <var>key signature</var> is set with the command <code>\key</code>
followed by a pitch and <code>\major</code> or <code>\minor</code>.
</p>
<blockquote><pre class="verbatim">\key d \major
a1
\key c \minor
a
</pre><p>
 <a href="d6/lily-9a1ef467.ly">
  <img align="middle"
       border="0"
       src="d6/lily-9a1ef467.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<br>

<a name="Warning_003a-key-signatures-and-pitches"></a>
<h3 class="subheading">Warning: key signatures and pitches</h3>

<p>Music Glossary: <a name="index-accidental-2"></a>
<a href="music-glossary-big-page.html#accidental">accidental</a>, <a name="index-key-signature-2"></a>
<a href="music-glossary-big-page.html#key-signature">key signature</a>,
<a name="index-pitch-1"></a>
<a href="music-glossary-big-page.html#pitch">pitch</a>, <a name="index-flat-2"></a>
<a href="music-glossary-big-page.html#flat">flat</a>, <a name="index-natural"></a>
<a href="music-glossary-big-page.html#natural">natural</a>, <a name="index-sharp-2"></a>
<a href="music-glossary-big-page.html#sharp">sharp</a>,
<a name="index-transposition"></a>
<a href="music-glossary-big-page.html#transposition">transposition</a>.
</p>
<p>To determine whether to print an <var>accidental</var>, LilyPond
examines the pitches and the <var>key signature</var>.  The key
signature only affects the <em>printed</em> accidentals, not the
note&rsquo;s <var>pitch</var>!  This is a feature that often causes
confusion to newcomers, so let us explain it in more detail.
</p>
<p>LilyPond makes a sharp distinction between musical content and
layout.  The alteration (<var>flat</var>, <var>natural sign</var> or
<var>sharp</var>) of a note is part of the pitch, and is therefore
musical content.  Whether an accidental (a <em>printed</em> flat,
natural or sharp sign) is printed in front of the corresponding
note is a question of layout.  Layout is something that follows
rules, so accidentals are printed automatically according to those
rules.  The pitches in your music are works of art, so they will
not be added automatically, and you must enter what you want to
hear.
</p>
<p>In this example:
</p>
<blockquote><pre class="verbatim">\key d \major
d cis fis
</pre><p>
 <a href="d4/lily-f427e33e.ly">
  <img align="middle"
       border="0"
       src="d4/lily-f427e33e.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>No note has a printed accidental, but you must still add
<code>is</code> and type <code>cis</code> and <code>fis</code> in the input file.
</p>
<p>The code <code>b</code> does not mean &ldquo;print a black dot just on
the middle line of the staff.&rdquo;  Rather, it means &ldquo;there is a
note with pitch B-natural.&rdquo;  In the key of A-flat major, it
<em>does</em> get an accidental:
</p>
<blockquote><pre class="verbatim">\key aes \major
b
</pre><p>
 <a href="0c/lily-4c204a11.ly">
  <img align="middle"
       border="0"
       src="0c/lily-4c204a11.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Adding all alterations explicitly might require a little more
effort when typing, but the advantage is that
<var>transposing</var> is easier, and accidentals can be printed
according to different conventions.  For some examples how
accidentals can be printed according to different rules, see
<a name="index-Automatic-accidentals"></a>
<a href="lilypond-big-page.html#Automatic-accidentals">Automatic accidentals</a>.
</p>

<a name="See-also-2"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference: <a name="index-Note-names-in-other-languages-1"></a>
<a href="lilypond-big-page.html#Note-names-in-other-languages">Note names in other languages</a>,
<a name="index-Accidentals"></a>
<a href="lilypond-big-page.html#Accidentals">Accidentals</a>, <a name="index-Automatic-accidentals-1"></a>
<a href="lilypond-big-page.html#Automatic-accidentals">Automatic accidentals</a>,
<a name="index-Key-signature"></a>
<a href="lilypond-big-page.html#Key-signature">Key signature</a>.
</p>
<p>Music Glossary: <a name="index-Pitch-names"></a>
<a href="music-glossary-big-page.html#Pitch-names">Pitch names</a>.
</p>

<hr size="6">
<a name="Ties-and-slurs"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Accidentals-and-key-signatures" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Accidentals and key signatures&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Single-staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Single staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Articulation-and-dynamics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Articulation and dynamics &gt; </a>]</td></tr></table>
<a name="Ties-and-slurs"></a>
<h3 class="subsection">2.2.2 Ties and slurs</h3>

<a name="index-tie"></a>
<a name="index-slur"></a>
<a name="index-slur_002c-phrasing"></a>
<a name="index-phrasing-slur"></a>

<a name="index-_007e"></a>
<a name="index-_007e-1"></a>
<a name="index-_0028-_002e_002e_002e-_0029"></a>
<a name="index-_0028-_002e_002e_002e-_0029-1"></a>
<a name="index-_005c_0028-_002e_002e_002e-_005c_0029"></a>
<a name="index-_005c_0028-_002e_002e_002e-_005c_0029-1"></a>

<a name="Ties"></a>
<h3 class="subheading">Ties</h3>


<p>Music Glossary: <a name="index-tie-1"></a>
<a href="music-glossary-big-page.html#tie">tie</a>.
</p>
<p>A <var>tie</var> is created by appending a tilde <code>~</code> to the
first note being tied.
</p>
<blockquote><pre class="verbatim">g4~ g c2~
c4 ~ c8 a8 ~ a2
</pre><p>
 <a href="86/lily-022fe95a.ly">
  <img align="middle"
       border="0"
       src="86/lily-022fe95a.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="Slurs"></a>
<h3 class="subheading">Slurs</h3>


<p>Music Glossary: <a name="index-slur-1"></a>
<a href="music-glossary-big-page.html#slur">slur</a>.
</p>
<p>A <var>slur</var> is a curve drawn across many notes.  The
starting note and ending note are marked with <code>(</code> and
<code>)</code> respectively.
</p>
<blockquote><pre class="verbatim">d4( c16) cis( d e c cis d) e( d4)
</pre><p>
 <a href="c2/lily-6359e970.ly">
  <img align="middle"
       border="0"
       src="c2/lily-6359e970.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="Phrasing-slurs"></a>
<h3 class="subheading">Phrasing slurs</h3>

<p>Music Glossary: <a name="index-slur-2"></a>
<a href="music-glossary-big-page.html#slur">slur</a>, <a name="index-phrasing"></a>
<a href="music-glossary-big-page.html#phrasing">phrasing</a>.
</p>
<p>Slurs to indicate longer <var>phrasing</var> can be entered with
<code>\(</code> and <code>\)</code>.  You can have both <var>slurs</var>
and phrasing slurs at the same time, but you cannot have
simultaneous slurs or simultaneous phrasing slurs.
</p>
<blockquote><pre class="verbatim">a8(\( ais b c) cis2 b'2 a4 cis,\)
</pre><p>
 <a href="3e/lily-87ea58ef.ly">
  <img align="middle"
       border="0"
       src="3e/lily-87ea58ef.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<br>

<a name="index-slurs-versus-ties"></a>
<a name="Warnings_003a-slurs-vs_002e-ties"></a>
<h3 class="subheading">Warnings: slurs vs. ties</h3>

<p>Music Glossary: <a name="index-articulation"></a>
<a href="music-glossary-big-page.html#articulation">articulation</a>, <a name="index-slur-3"></a>
<a href="music-glossary-big-page.html#slur">slur</a>, <a name="index-tie-2"></a>
<a href="music-glossary-big-page.html#tie">tie</a>.
</p>
<p>A <var>slur</var> looks like a <var>tie</var>, but it has a
different meaning.  A tie simply makes the first note longer, and
can only be used on pairs of notes with the same pitch.  Slurs
indicate the <var>articulation</var> of notes, and can be used on
larger groups of notes.  Slurs and ties can be nested.
</p>
<blockquote><pre class="verbatim">c2~( c8 fis fis4 ~ fis2 g2)
</pre><p>
 <a href="cf/lily-ba97c65a.ly">
  <img align="middle"
       border="0"
       src="cf/lily-ba97c65a.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<a name="See-also-23"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference: <a name="index-Ties"></a>
<a href="lilypond-big-page.html#Ties">Ties</a>, <a name="index-Slurs"></a>
<a href="lilypond-big-page.html#Slurs">Slurs</a>,
<a name="index-Phrasing-slurs"></a>
<a href="lilypond-big-page.html#Phrasing-slurs">Phrasing slurs</a>.
</p>

<hr size="6">
<a name="Articulation-and-dynamics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Ties-and-slurs" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Ties and slurs&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Single-staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Single staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Adding-text" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Adding text &gt; </a>]</td></tr></table>
<a name="Articulation-and-dynamics"></a>
<h3 class="subsection">2.2.3 Articulation and dynamics</h3>


<a name="Articulations"></a>
<h3 class="subheading">Articulations</h3>

<a name="index-articulation-1"></a>
<a name="index-accent"></a>
<a name="index-staccato"></a>

<p>Music Glossary: <a name="index-articulation-2"></a>
<a href="music-glossary-big-page.html#articulation">articulation</a>.
</p>
<p>Common <var>articulations</var> can be added to a note using a
dash <code>-</code> and a single character:
</p>
<blockquote><pre class="verbatim">c-. c-- c-&gt; c-^ c-+ c-_
</pre><p>
 <a href="40/lily-971a4965.ly">
  <img align="middle"
       border="0"
       src="40/lily-971a4965.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="Fingerings"></a>
<h3 class="subheading">Fingerings</h3>

<a name="index-fingering"></a>

<a name="index-_005e"></a>
<a name="index-_005e-1"></a>
<a name="index-_005f"></a>
<a name="index-_005f-1"></a>

<p>Music Glossary: <a name="index-fingering-1"></a>
<a href="music-glossary-big-page.html#fingering">fingering</a>.
</p>
<p>Similarly, <var>fingering</var> indications can be added to a note
using a dash (<code>-</code>) and the digit to be printed:
</p>
<blockquote><pre class="verbatim">c-3 e-5 b-2 a-1
</pre><p>
 <a href="9f/lily-a52c3d8a.ly">
  <img align="middle"
       border="0"
       src="9f/lily-a52c3d8a.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Articulations and fingerings are usually placed automatically, but
you can specify a direction by replacing the dash (<code>-</code>) with
<code>^</code> (up) or <code>_</code> (down).  You can also use multiple
articulations on the same note.  However, in most cases it is best
to let LilyPond determine the articulation directions.
</p>
<blockquote><pre class="verbatim">c_-^1 d^. f^4_2-&gt; e^-_+
</pre><p>
 <a href="6f/lily-fadec70f.ly">
  <img align="middle"
       border="0"
       src="6f/lily-fadec70f.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="Dynamics-1"></a>
<h3 class="subheading">Dynamics</h3>

<a name="index-dynamics"></a>
<a name="index-decrescendo"></a>
<a name="index-crescendo"></a>

<a name="index-_005cf"></a>
<a name="index-_005cf-1"></a>
<a name="index-_005cff"></a>
<a name="index-_005cff-1"></a>
<a name="index-_005cmp"></a>
<a name="index-_005cmp-1"></a>
<a name="index-_005cp"></a>
<a name="index-_005cp-1"></a>
<a name="index-_005cmf"></a>
<a name="index-_005cmf-1"></a>
<a name="index-_005cpp"></a>
<a name="index-_005cpp-1"></a>
<a name="index-_005c_003c"></a>
<a name="index-_005c_003c-1"></a>
<a name="index-_003c"></a>
<a name="index-_003c-1"></a>
<a name="index-_005c_003e"></a>
<a name="index-_005c_003e-1"></a>
<a name="index-_003e"></a>
<a name="index-_003e-1"></a>
<a name="index-_005c_0021"></a>
<a name="index-_005c_0021-1"></a>
<a name="index-_0021"></a>
<a name="index-_0021-1"></a>

<p>Music Glossary: <a name="index-dynamics-1"></a>
<a href="music-glossary-big-page.html#dynamics">dynamics</a>, <a name="index-crescendo-1"></a>
<a href="music-glossary-big-page.html#crescendo">crescendo</a>,
<a name="index-decrescendo-1"></a>
<a href="music-glossary-big-page.html#decrescendo">decrescendo</a>.
</p>
<p><var>Dynamic</var> signs are made by adding the markings (with a
backslash) to the note:
</p>
<blockquote><pre class="verbatim">c\ff c\mf c\p c\pp
</pre><p>
 <a href="d0/lily-d23a1c9a.ly">
  <img align="middle"
       border="0"
       src="d0/lily-d23a1c9a.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<p><var>Crescendi</var> and <var>decrescendi</var> are started with
the commands <code>\&lt;</code> and <code>\&gt;</code>.  The next dynamics sign, for
example <code>\f</code>, will end the (de)crescendo, or the command
<code>\!</code> can be used:
</p>
<blockquote><pre class="verbatim">c2\&lt; c2\ff\&gt; c2 c2\!
</pre><p>
 <a href="3f/lily-4b5957d8.ly">
  <img align="middle"
       border="0"
       src="3f/lily-4b5957d8.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<a name="See-also-4"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference: <a name="index-Articulations-and-ornamentations"></a>
<a href="lilypond-big-page.html#Articulations-and-ornamentations">Articulations and ornamentations</a>,
<a name="index-Fingering-instructions"></a>
<a href="lilypond-big-page.html#Fingering-instructions">Fingering instructions</a>, <a name="index-Dynamics"></a>
<a href="lilypond-big-page.html#Dynamics">Dynamics</a>.
</p>

<hr size="6">
<a name="Adding-text"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Articulation-and-dynamics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Articulation and dynamics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Single-staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Single staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Automatic-and-manual-beams" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Automatic and manual beams &gt; </a>]</td></tr></table>
<a name="Adding-text"></a>
<h3 class="subsection">2.2.4 Adding text</h3>

<a name="index-text_002c-adding"></a>
<a name="index-adding-text"></a>
<a name="index-markup"></a>

<a name="index-_005cmarkup"></a>
<a name="index-_005cmarkup-1"></a>
<a name="index-markup-1"></a>
<a name="index-markup-2"></a>

<p>Text may be added to your scores:
</p>
<blockquote><pre class="verbatim">c1^&quot;espr&quot; a_&quot;legato&quot;
</pre><p>
 <a href="3b/lily-2742ba34.ly">
  <img align="middle"
       border="0"
       src="3b/lily-2742ba34.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Extra formatting may be added with the <code>\markup</code> command:
</p>
<blockquote><pre class="verbatim">c1^\markup{ \bold espr}
a1_\markup{
  \dynamic f \italic \small { 2nd } \hspace #0.1 \dynamic p
}
</pre><p>
 <a href="5a/lily-ba7ba9ce.ly">
  <img align="middle"
       border="0"
       src="5a/lily-ba7ba9ce.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<a name="See-also-16"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference: <a name="index-Writing-text"></a>
<a href="lilypond-big-page.html#Writing-text">Writing text</a>.
</p>

<hr size="6">
<a name="Automatic-and-manual-beams"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Adding-text" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Adding text&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Single-staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Single staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Advanced-rhythmic-commands" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Advanced rhythmic commands &gt; </a>]</td></tr></table>
<a name="Automatic-and-manual-beams"></a>
<h3 class="subsection">2.2.5 Automatic and manual beams</h3>

<a name="index-beaming"></a>
<a name="index-automatic-beams"></a>
<a name="index-manual-beams"></a>
<a name="index-beams_002c-automatic"></a>
<a name="index-beams_002c-manual"></a>
<a name="index-beams_002c-by-hand"></a>

<a name="index-_005b-_002e_002e_002e-_005d"></a>
<a name="index-_005b-_002e_002e_002e-_005d-1"></a>
<a name="index-_005b"></a>
<a name="index-_005b-1"></a>
<a name="index-_005d"></a>
<a name="index-_005d-1"></a>
<a name="index-_005cautoBeamOff"></a>
<a name="index-_005cautoBeamOff-1"></a>
<a name="index-autoBeamOff"></a>
<a name="index-autoBeamOff-1"></a>
<a name="index-_005cautoBeamOn"></a>
<a name="index-_005cautoBeamOn-1"></a>
<a name="index-autoBeamOn"></a>
<a name="index-autoBeamOn-1"></a>

<p>Music Glossary: <a name="index-beam-1"></a>
<a href="music-glossary-big-page.html#beam">beam</a>.
</p>
<p>All <var>beams</var> are drawn automatically:
</p>
<blockquote><pre class="verbatim">a8 ais d ees r d c16 b a8
</pre><p>
 <a href="7a/lily-59887ece.ly">
  <img align="middle"
       border="0"
       src="7a/lily-59887ece.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>If you do not like the automatic beams, they may be overridden
manually.  To correct just an occasional beam mark the first note
to be beamed with <code>[</code> and the last one with <code>]</code>.
</p>
<blockquote><pre class="verbatim">a8[ ais] d[ ees r d] a b
</pre><p>
 <a href="3a/lily-74fb6363.ly">
  <img align="middle"
       border="0"
       src="3a/lily-74fb6363.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>If you want to turn off automatic beaming entirely or for an
extended section of music, use the command <code>\autoBeamOff</code>
to turn off automatic beaming and <code>\autoBeamOn</code> to turn it
on again.
</p>
<blockquote><pre class="verbatim">\autoBeamOff
a8 c b4 d8. c16 b4
\autoBeamOn
a8 c b4 d8. c16 b4
</pre><p>
 <a href="f2/lily-576b0567.ly">
  <img align="middle"
       border="0"
       src="f2/lily-576b0567.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<a name="See-also-7"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference: <a name="index-Automatic-beams"></a>
<a href="lilypond-big-page.html#Automatic-beams">Automatic beams</a>, <a name="index-Manual-beams"></a>
<a href="lilypond-big-page.html#Manual-beams">Manual beams</a>.
</p>

<hr size="6">
<a name="Advanced-rhythmic-commands"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Automatic-and-manual-beams" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Automatic and manual beams&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Single-staff-notation" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Single staff notation&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Multiple-notes-at-once" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Multiple notes at once &gt; </a>]</td></tr></table>
<a name="Advanced-rhythmic-commands"></a>
<h3 class="subsection">2.2.6 Advanced rhythmic commands</h3>

<a name="Partial-measure"></a>
<h3 class="subheading">Partial measure</h3>

<a name="index-pickup"></a>
<a name="index-anacrusis"></a>
<a name="index-partial-measure"></a>

<a name="index-_005cpartial"></a>
<a name="index-_005cpartial-1"></a>
<a name="index-partial"></a>
<a name="index-partial-1"></a>

<p>Music Glossary: <a name="index-anacrusis-1"></a>
<a href="music-glossary-big-page.html#anacrusis">anacrusis</a>.
</p>
<p>A pickup (or <var>anacrusis</var>) is entered with the keyword
<code>\partial</code>.  It is followed by a duration: <code>\partial 4</code>
is a quarter note pickup and <code>\partial 8</code> an eighth note.
</p>
<blockquote><pre class="verbatim">\partial 8
f8 c2 d
</pre><p>
 <a href="ae/lily-3c657963.ly">
  <img align="middle"
       border="0"
       src="ae/lily-3c657963.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="Tuplets"></a>
<h3 class="subheading">Tuplets</h3>

<a name="index-tuplets"></a>
<a name="index-triplets"></a>

<a name="index-_005ctimes"></a>
<a name="index-_005ctimes-1"></a>
<a name="index-times"></a>
<a name="index-times-1"></a>

<p>Music Glossary: <a name="index-note-value"></a>
<a href="music-glossary-big-page.html#note-value">note value</a>, <a name="index-triplet"></a>
<a href="music-glossary-big-page.html#triplet">triplet</a>.
</p>
<p><var>Tuplets</var> are made with the <code>\times</code> keyword.  It
takes two arguments: a fraction and a piece of music.  The
duration of the piece of music is multiplied by the fraction.
Triplets make notes occupy 2/3 of their notated duration, so a
<var>triplet</var> has 2/3 as its fraction
</p>
<blockquote><pre class="verbatim">\times 2/3 { f8 g a }
\times 2/3 { c r c }
\times 2/3 { f,8 g16[ a g a] }
\times 2/3 { d4 a8 }
</pre><p>
 <a href="78/lily-5a580a75.ly">
  <img align="middle"
       border="0"
       src="78/lily-5a580a75.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="Grace-notes"></a>
<h3 class="subheading">Grace notes</h3>

<a name="index-grace-notes"></a>
<a name="index-acciaccatura"></a>
<a name="index-appoggiatura"></a>

<a name="index-_005cgrace"></a>
<a name="index-_005cgrace-1"></a>
<a name="index-grace"></a>
<a name="index-grace-1"></a>
<a name="index-_005cacciaccatura"></a>
<a name="index-_005cacciaccatura-1"></a>
<a name="index-acciaccatura-1"></a>
<a name="index-acciaccatura-2"></a>
<a name="index-_005cappoggiatura"></a>
<a name="index-_005cappoggiatura-1"></a>
<a name="index-acciaccatura-3"></a>
<a name="index-acciaccatura-4"></a>

<p>Music Glossary: <a name="index-grace-notes-1"></a>
<a href="music-glossary-big-page.html#grace-notes">grace notes</a>, <a name="index-acciaccatura-5"></a>
<a href="music-glossary-big-page.html#acciaccatura">acciaccatura</a>,
<a name="index-appoggiatura-1"></a>
<a href="music-glossary-big-page.html#appoggiatura">appoggiatura</a>.
</p>
<p><var>Grace notes</var> are created with the <code>\grace</code> command,
although they can also be created by prefixing a music expression
with the keyword <code>\appoggiatura</code> or <code>\acciaccatura</code>:
</p>
<blockquote><pre class="verbatim">c2 \grace { a32[ b] } c2
c2 \appoggiatura b16 c2
c2 \acciaccatura b16 c2
</pre><p>
 <a href="d4/lily-2f000789.ly">
  <img align="middle"
       border="0"
       src="d4/lily-2f000789.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<a name="See-also"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference: <a name="index-Grace-notes"></a>
<a href="lilypond-big-page.html#Grace-notes">Grace notes</a>, <a name="index-Tuplets"></a>
<a href="lilypond-big-page.html#Tuplets">Tuplets</a>,
<a name="index-Upbeats"></a>
<a href="lilypond-big-page.html#Upbeats">Upbeats</a>.
</p>

<hr size="6">
<a name="Multiple-notes-at-once"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Advanced-rhythmic-commands" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Advanced rhythmic commands&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Tutorial" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tutorial&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Music-expressions-explained" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Music expressions explained &gt; </a>]</td></tr></table>
<a name="Multiple-notes-at-once"></a>
<h2 class="section">2.3 Multiple notes at once</h2>

<p>This section introduces having more than one note at the same
time: multiple instruments, multiple staves for a single
instrument (i.e. piano), and chords.
</p>
<p>Polyphony in music refers to having more than one voice occurring
in a piece of music.  Polyphony in LilyPond refers to having more
than one voice on the same staff.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Music-expressions-explained" accesskey="1">2.3.1 Music expressions explained</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Multiple-staves" accesskey="2">2.3.2 Multiple staves</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Staff-groups" accesskey="3">2.3.3 Staff groups</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Combining-notes-into-chords" accesskey="4">2.3.4 Combining notes into chords</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Single-staff-polyphony" accesskey="5">2.3.5 Single staff polyphony</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="Music-expressions-explained"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Multiple-notes-at-once" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Multiple notes at once&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Multiple-notes-at-once" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Multiple notes at once&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Multiple-staves" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Multiple staves &gt; </a>]</td></tr></table>
<a name="Music-expressions-explained"></a>
<h3 class="subsection">2.3.1 Music expressions explained</h3>

<a name="index-music-expression"></a>
<a name="index-expression_002c-music"></a>
<a name="index-compound-music-expression"></a>
<a name="index-music-expression_002c-compound"></a>

<p>In LilyPond input files, music is represented by <em>music
expressions</em>.  A single note is a music expression:
</p>
<blockquote><pre class="verbatim">a4
</pre><p>
 <a href="a8/lily-1265379a.ly">
  <img align="middle"
       border="0"
       src="a8/lily-1265379a.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Enclosing a note in braces creates a <em>compound music
expression</em>.  Here we have created a compound music expression
with two notes:
</p>
<blockquote><pre class="verbatim">{ a4 g4 }
</pre><p>
 <a href="72/lily-48c50cd8.ly">
  <img align="middle"
       border="0"
       src="72/lily-48c50cd8.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Putting a group of music expressions (e.g. notes) in braces means
that they are in sequence (i.e. each one follows the previous
one).  The result is another music expression:
</p>
<blockquote><pre class="verbatim">{ { a4 g } f g }
</pre><p>
 <a href="03/lily-0832009b.ly">
  <img align="middle"
       border="0"
       src="03/lily-0832009b.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="Analogy_003a-mathematical-expressions"></a>
<h3 class="subheading">Analogy: mathematical expressions</h3>

<p>This mechanism is similar to mathematical formulas: a big formula
is created by composing small formulas.  Such formulas are called
expressions, and they can contain other expressions, so you can
make arbitrarily complex and large expressions.  For example,
</p>
<blockquote><pre class="example">1

1 + 2

(1 + 2) * 3

((1 + 2) * 3) / (4 * 5)
</pre></blockquote>

<p>This is a sequence of expressions, where each expression is
contained in the next (larger) one.  The simplest expressions are
numbers, and larger ones are made by combining expressions with
operators (like <code>+</code>, <code>*</code> and <code>/</code>) and parentheses.
Like mathematical expressions, music expressions can be nested
arbitrarily deep, which is necessary for complex music like
polyphonic scores.
</p>

<a name="Simultaneous-music-expressions_003a-multiple-staves"></a>
<h3 class="subheading">Simultaneous music expressions: multiple staves</h3>

<a name="index-multiple-staves"></a>
<a name="index-staves_002c-multiple"></a>
<a name="index-polyphony-1"></a>
<a name="index-combining-expressions-in-parallel"></a>
<a name="index-parallel-expressions"></a>
<a name="index-expressions_002c-parallel"></a>
<a name="index-relative-notes-and-simultaneous-music"></a>
<a name="index-relative-notes-and-parallel-expressions"></a>
<a name="index-simultaneous-music-and-relative-notes"></a>
<a name="index-parallel-expressions-and-relative-notes"></a>

<a name="index-_003c_003c"></a>
<a name="index-_003c_003c-1"></a>
<a name="index-_003e_003e"></a>
<a name="index-_003e_003e-1"></a>
<a name="index-_003c_003c-_002e_002e_002e-_003e_003e"></a>
<a name="index-_003c_003c-_002e_002e_002e-_003e_003e-1"></a>

<p>Music Glossary: <a name="index-polyphony-2"></a>
<a href="music-glossary-big-page.html#polyphony">polyphony</a>.
</p>
<p>This technique is useful for <var>polyphonic</var> music.  To
enter music with more voices or more staves, we combine
expressions in parallel.  To indicate that two voices should play
at the same time, simply enter a simultaneous combination of music
expressions.  A &lsquo;simultaneous&rsquo; music expression is formed by
enclosing expressions inside <code>&lt;&lt;</code> and <code>&gt;&gt;</code>.  In the
following example, three sequences (all containing two separate
notes) are combined simultaneously:
</p>
<blockquote><pre class="verbatim">\relative c'' {
  &lt;&lt;
    { a4 g }
    { f e }
    { d b }
  &gt;&gt;
}
</pre><p>
 <a href="72/lily-6ff397d7.ly">
  <img align="middle"
       border="0"
       src="72/lily-6ff397d7.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Note that we have indented each level of the input with a
different amount of space.  LilyPond does not care how much (or
little) space there is at the beginning of a line, but indenting
LilyPond code like this makes it much easier for humans to read.
</p>
<table class="cartouche" border="1"><tr><td>
<p><b>Note:</b> each note is relative to the previous note in
the input, not relative to the <code>c''</code> in the initial
<code>\relative</code> command.
</p></td></tr></table>


<a name="Simultaneous-music-expressions_003a-single-staff"></a>
<h3 class="subheading">Simultaneous music expressions: single staff</h3>

<p>To determine the number of staves in a piece, LilyPond looks at
the beginning of the first expression.  If is a single note, there
is one staff; if there is a simultaneous expression, there is more
than one staff.
</p>
<blockquote><pre class="verbatim">\relative c'' {
  c2 &lt;&lt;c e&gt;&gt;
  &lt;&lt; { e f } { c &lt;&lt;b d&gt;&gt; } &gt;&gt;
}
</pre><p>
 <a href="69/lily-a9e64f48.ly">
  <img align="middle"
       border="0"
       src="69/lily-a9e64f48.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<hr size="6">
<a name="Multiple-staves"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Music-expressions-explained" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Music expressions explained&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Multiple-notes-at-once" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Multiple notes at once&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Staff-groups" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Staff groups &gt; </a>]</td></tr></table>
<a name="Multiple-staves"></a>
<h3 class="subsection">2.3.2 Multiple staves</h3>

<a name="index-multiple-staves-1"></a>
<a name="index-staves_002c-multiple-1"></a>
<a name="index-context"></a>
<a name="index-context_002c-notation"></a>
<a name="index-notation-context"></a>

<a name="index-_005cnew-Staff"></a>
<a name="index-_005cnew-Staff-1"></a>
<a name="index-new-Staff"></a>
<a name="index-new-Staff-1"></a>
<a name="index-Staff"></a>
<a name="index-Staff-1"></a>
<a name="index-_005cnew"></a>
<a name="index-_005cnew-1"></a>
<a name="index-new"></a>
<a name="index-new-1"></a>
<a name="index-Score"></a>
<a name="index-Score-1"></a>
<a name="index-Voice"></a>
<a name="index-Voice-1"></a>
<a name="index-Lyrics"></a>
<a name="index-Lyrics-1"></a>
<a name="index-ChordNames"></a>
<a name="index-ChordNames-1"></a>

<p>LilyPond input files are constructed out of music expressions, as
we saw in <a href="#Music-expressions-explained">Music expressions explained</a>.  If the score begins
with simultaneous music expressions, LilyPond creates multiples
staves.  However, it is easier to see what happens if we create
each staff explicitly.
</p>
<p>To print more than one staff, each piece of music that makes up a
staff is marked by adding <code>\new Staff</code> before it.  These
<code>Staff</code> elements are then combined in parallel with <code>&lt;&lt;</code>
and <code>&gt;&gt;</code>:
</p>
<blockquote><pre class="verbatim">\relative c'' {
  &lt;&lt;
    \new Staff { \clef treble c }
    \new Staff { \clef bass c,, }
  &gt;&gt;
}
</pre><p>
 <a href="f4/lily-19f04d23.ly">
  <img align="middle"
       border="0"
       src="f4/lily-19f04d23.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The command <code>\new</code> introduces a &lsquo;notation context.&rsquo;  A
notation context is an environment in which musical events (like
notes or <code>\clef</code> commands) are interpreted.  For simple
pieces, such notation contexts are created automatically.  For
more complex pieces, it is best to mark contexts explicitly.
</p>
<p>There are several types of contexts.  <code>Score</code>, <code>Staff</code>,
and <code>Voice</code> handle melodic notation, while <code>Lyrics</code> sets
lyric texts and <code>ChordNames</code> prints chord names.
</p>
<p>In terms of syntax, prepending <code>\new</code> to a music expression
creates a bigger music expression.  In this way it resembles the
minus sign in mathematics.  The formula <em>(4+5)</em> is an
expression, so <em>-(4+5)</em> is a bigger expression.
</p>
<p>Time signatures entered in one staff affects all other staves by
default.  On the other hand, the key signature of one staff does
<em>not</em> affect other staves.  This different default behavior
is because scores with transposing instruments are more common
than polyrhythmic scores.
</p>
<blockquote><pre class="verbatim">\relative c'' {
  &lt;&lt;
    \new Staff { \clef treble \key d \major \time 3/4 c }
    \new Staff { \clef bass c,, }
  &gt;&gt;
}
</pre><p>
 <a href="3b/lily-caf07281.ly">
  <img align="middle"
       border="0"
       src="3b/lily-caf07281.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>






<hr size="6">
<a name="Staff-groups"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Multiple-staves" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Multiple staves&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Multiple-notes-at-once" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Multiple notes at once&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Combining-notes-into-chords" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Combining notes into chords &gt; </a>]</td></tr></table>
<a name="Staff-groups"></a>
<h3 class="subsection">2.3.3 Staff groups</h3>

<a name="index-piano-staff"></a>
<a name="index-staff_002c-piano"></a>
<a name="index-choir-staff"></a>
<a name="index-staff_002c-choir"></a>
<a name="index-grand-staff"></a>
<a name="index-staff_002c-grand"></a>
<a name="index-staff-group"></a>

<a name="index-PianoStaff"></a>
<a name="index-PianoStaff-1"></a>
<a name="index-GrandStaff"></a>
<a name="index-GrandStaff-1"></a>
<a name="index-ChoirStaff"></a>
<a name="index-ChoirStaff-1"></a>

<p>Music Glossary: <a name="index-brace"></a>
<a href="music-glossary-big-page.html#brace">brace</a>.
</p>
<p>Piano music is typeset in two staves connected by a
<var>brace</var>.
Printing such a staff is similar to the polyphonic example in
<a href="#Multiple-staves">Multiple staves</a>.  However, now this entire expression is
inserted inside a <code>PianoStaff</code>:
</p>
<blockquote><pre class="example">\new PianoStaff &lt;&lt;
  \new Staff &hellip;
  \new Staff &hellip;
&gt;&gt;
</pre></blockquote>

<p>Here is a small example:
</p>
<blockquote><pre class="verbatim">\relative c'' {
  \new PianoStaff &lt;&lt;
    \new Staff { \time 2/4 c4 e g g, }
    \new Staff { \clef bass c,, c' e c }
  &gt;&gt;
}
</pre><p>
 <a href="74/lily-a980fea5.ly">
  <img align="middle"
       border="0"
       src="74/lily-a980fea5.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Other staff groupings are introduced with <code>\new GrandStaff</code>,
suitable for orchestral scores, and <code>\new ChoirStaff</code>,
suitable for vocal scores.  These staff groups each form another
type of context, one that generates the brace at the left end of
every system and also controls the extent of bar lines.
</p>

<a name="See-also-26"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference: <a name="index-Keyboard-and-other-multi_002dstaff"></a>
instruments
<a href="lilypond-big-page.html#Keyboard-and-other-multi_002dstaff-instruments">Keyboard and other multi-staff instruments</a>,
<a name="index-Displaying-staves"></a>
<a href="lilypond-big-page.html#Displaying-staves">Displaying staves</a>.
</p>

<hr size="6">
<a name="Combining-notes-into-chords"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Staff-groups" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Staff groups&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Multiple-notes-at-once" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Multiple notes at once&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Single-staff-polyphony" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Single staff polyphony &gt; </a>]</td></tr></table>
<a name="Combining-notes-into-chords"></a>
<h3 class="subsection">2.3.4 Combining notes into chords</h3>

<a name="index-chords"></a>
<a name="index-note-durations-in-chords"></a>

<a name="index-_003c-2"></a>
<a name="index-_003c-3"></a>
<a name="index-_003e-2"></a>
<a name="index-_003e-3"></a>
<a name="index-_003c-_002e_002e_002e-_003e"></a>
<a name="index-_003c-_002e_002e_002e-_003e-1"></a>

<p>Music Glossary: <a name="index-chord"></a>
<a href="music-glossary-big-page.html#chord">chord</a>.
</p>
<p>We saw earlier how notes can be combined into <var>chords</var> by
indicating they are simultaneous by enclosing them in double angle
brackets.  However, the normal way of indicating a chord is to
surround the pitches with <em>single</em> angle brackets.  Note that
all the notes in a chord must have the same duration, and that the
duration is placed after the closing bracket.
</p>
<blockquote><pre class="verbatim">r4 &lt;c e g&gt;4 &lt;c f a&gt;2
</pre><p>
 <a href="8e/lily-4acaf642.ly">
  <img align="middle"
       border="0"
       src="8e/lily-4acaf642.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Think of chords as almost equivalent to single notes:
almost everything you can attach to a single note can be attached
to a chord, and everything must go <em>outside</em> the angle
brackets.  For example, you can combine markings like beams and
ties with chords.  They must be placed outside the angle brackets.
</p>
<blockquote><pre class="verbatim">r4 &lt;c e g&gt;8[ &lt;c f a&gt;]~ &lt;c f a&gt;2
r4 &lt;c e g&gt;8( &lt;c e g&gt;\&gt; &lt;c e g&gt;4 &lt;c f a&gt;\!)
</pre><p>
 <a href="ad/lily-bec82f8c.ly">
  <img align="middle"
       border="0"
       src="ad/lily-bec82f8c.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<hr size="6">
<a name="Single-staff-polyphony"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Combining-notes-into-chords" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Combining notes into chords&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Multiple-notes-at-once" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Multiple notes at once&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Songs" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Songs &gt; </a>]</td></tr></table>
<a name="Single-staff-polyphony"></a>
<h3 class="subsection">2.3.5 Single staff polyphony</h3>

<a name="index-polyphony-3"></a>
<a name="index-multiple-voices"></a>
<a name="index-voices_002c-more-on-one-staff"></a>
<a name="index-single-staff-polyphony"></a>
<a name="index-spacer-rest"></a>
<a name="index-rest_002c-spacer"></a>

<a name="index-_003c_003c-_002e_002e_002e-_005c_005c-_002e_002e_002e-_003e_003e"></a>
<a name="index-_003c_003c-_002e_002e_002e-_005c_005c-_002e_002e_002e-_003e_003e-1"></a>
<a name="index-_003c_003c-2"></a>
<a name="index-_003c_003c-3"></a>
<a name="index-_005c_005c"></a>
<a name="index-_005c_005c-1"></a>
<a name="index-_003e_003e-2"></a>
<a name="index-_003e_003e-3"></a>

<p>Polyphonic music in lilypond, while not difficult, uses concepts
that we haven&rsquo;t discussed yet, so we&rsquo;re not going to introduce
them here. Instead, the following sections introduce these concepts
and explain them thoroughly.
</p>
<a name="See-also-25"></a>
<h4 class="subsubheading">See also</h4>
<p>Learning Manual: <a href="#Voices-contain-music">Voices contain music</a>.
</p>
<p>Notation Reference: <a name="index-Simultaneous-notes"></a>
<a href="lilypond-big-page.html#Simultaneous-notes">Simultaneous notes</a>.
</p>
<hr size="6">
<a name="Songs"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Single-staff-polyphony" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Single staff polyphony&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Tutorial" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tutorial&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Setting-simple-songs" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Setting simple songs &gt; </a>]</td></tr></table>
<a name="Songs"></a>
<h2 class="section">2.4 Songs</h2>

<p>This section introduces vocal music and simple song sheets.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Setting-simple-songs" accesskey="1">2.4.1 Setting simple songs</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Aligning-lyrics-to-a-melody" accesskey="2">2.4.2 Aligning lyrics to a melody</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Lyrics-to-multiple-staves" accesskey="3">2.4.3 Lyrics to multiple staves</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="Setting-simple-songs"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Songs" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Songs&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Songs" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Songs&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Aligning-lyrics-to-a-melody" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Aligning lyrics to a melody &gt; </a>]</td></tr></table>
<a name="Setting-simple-songs"></a>
<h3 class="subsection">2.4.1 Setting simple songs</h3>

<a name="index-lyrics"></a>
<a name="index-songs"></a>

<a name="index-_005caddlyrics"></a>
<a name="index-_005caddlyrics-1"></a>
<a name="index-addlyrics"></a>
<a name="index-addlyrics-1"></a>

<p>Music Glossary: <a name="index-lyrics-1"></a>
<a href="music-glossary-big-page.html#lyrics">lyrics</a>.
</p>
<p>Here is the start of the melody to a nursery
rhyme, <var>Girls and boys come out to play</var>:
</p>
<blockquote><pre class="verbatim">\relative c'' {
  \key g \major
  \time 6/8
  d4 b8 c4 a8 d4 b8 g4
}
</pre><p>
 <a href="44/lily-cf0e1d30.ly">
  <img align="middle"
       border="0"
       src="44/lily-cf0e1d30.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The <var>lyrics</var> can be set to these notes, combining both
with the <code>\addlyrics</code> keyword.  Lyrics are entered by
separating each syllable with a space.
</p>
<blockquote><pre class="verbatim">&lt;&lt;
  \relative c'' {
    \key g \major
    \time 6/8
    d4 b8 c4 a8 d4 b8 g4
  }
  \addlyrics {
    Girls and boys come out to play,
  }
&gt;&gt;
</pre><p>
 <a href="e4/lily-21d5e7d4.ly">
  <img align="middle"
       border="0"
       src="e4/lily-21d5e7d4.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Note the curly brackets delimiting both the music and the lyrics,
and the double angle brackets <code>&lt;&lt; ... &gt;&gt;</code> around the
whole piece to show that the music and lyrics are to occur at the
same time.
</p>
<hr size="6">
<a name="Aligning-lyrics-to-a-melody"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Setting-simple-songs" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Setting simple songs&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Songs" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Songs&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Lyrics-to-multiple-staves" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Lyrics to multiple staves &gt; </a>]</td></tr></table>
<a name="Aligning-lyrics-to-a-melody"></a>
<h3 class="subsection">2.4.2 Aligning lyrics to a melody</h3>

<a name="index-melisma"></a>
<a name="index-extender-line"></a>
<a name="index-hyphens"></a>
<a name="index-underscore"></a>
<a name="index-lyrics_002c-aligning"></a>
<a name="index-aligning-lyrics"></a>
<a name="index-lyrics_002c-multi_002dsyllable-words"></a>
<a name="index-words-with-multiple-syllables-in-lyrics"></a>

<p>Music Glossary: <a name="index-melisma-1"></a>
<a href="music-glossary-big-page.html#melisma">melisma</a>, <a name="index-extender-line-1"></a>
<a href="music-glossary-big-page.html#extender-line">extender line</a>.
</p>
<p>The next line in the nursery rhyme is <var>The moon doth
shine as bright as day</var>.  Let&rsquo;s extend it:
</p>
<blockquote><pre class="verbatim">&lt;&lt;
  \relative c'' {
    \key g \major
    \time 6/8
    d4 b8 c4 a8 d4 b8 g4
    g8 a4 b8 c b a d4 b8 g4.
  }
  \addlyrics {
    Girls and boys come out to play,
    The moon doth shine as bright as day;
  }
&gt;&gt;
</pre><p>
 <a href="1d/lily-70b69a9f.ly">
  <img align="middle"
       border="0"
       src="1d/lily-70b69a9f.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>We see the extra lyrics do not align properly with the notes.  The
word <var>shine</var> should be sung on two notes, not one.  This
is called a <var>melisma</var>, a single syllable sung to more
than one note.  There are several ways to spread a syllable over
multiple notes, the simplest being to add a slur across them, for
details, see <a href="#Ties-and-slurs">Ties and slurs</a>:
</p>
<blockquote><pre class="verbatim">&lt;&lt;
  \relative c'' {
    \key g \major
    \time 6/8
    d4 b8 c4 a8 d4 b8 g4
    g8 a4 b8 c( b) a d4 b8 g4.
  }
  \addlyrics {
    Girls and boys come out to play,
    The moon doth shine as bright as day;
  }
&gt;&gt;
</pre><p>
 <a href="b0/lily-402587d1.ly">
  <img align="middle"
       border="0"
       src="b0/lily-402587d1.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The words now line up correctly with the notes, but the automatic
beaming for the notes above <var>shine as</var> does not look right.
We can correct this by inserting manual beaming commands to override
the automatic beaming here, for details, see <a href="#Automatic-and-manual-beams">Automatic and manual beams</a>.
</p>
<blockquote><pre class="verbatim">&lt;&lt;
  \relative c'' {
    \key g \major
    \time 6/8
    d4 b8 c4 a8 d4 b8 g4
    g8 a4 b8 c([ b]) a d4 b8 g4.
  }
  \addlyrics {
    Girls and boys come out to play,
    The moon doth shine as bright as day;
  }
&gt;&gt;
</pre><p>
 <a href="46/lily-a9b0e244.ly">
  <img align="middle"
       border="0"
       src="46/lily-a9b0e244.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>As an alternative to using slurs, the melismata may be indicated
in just the lyrics by using an underscore <code>_</code> for each note
that should be included in the melisma:
</p>
<blockquote><pre class="verbatim">&lt;&lt;
  \relative c'' {
    \key g \major
    \time 6/8
    d4 b8 c4 a8 d4 b8 g4
    g8 a4 b8 c[ b] a d4 b8 g4.
  }
  \addlyrics {
    Girls and boys come out to play,
    The moon doth shine _ as bright as day;
  }
&gt;&gt;
</pre><p>
 <a href="a7/lily-feff68e1.ly">
  <img align="middle"
       border="0"
       src="a7/lily-feff68e1.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>If a syllable extends over several notes or a single very long
note an <var>extender line</var> is usually drawn from the
syllable extending under all the notes for that syllable.  It is
entered as two underscores <code>__</code>.  Here is an example from the
first three bars of <var>Dido&rsquo;s Lament</var>, from Purcell&rsquo;s
<var>Dido and Æneas</var>:
</p>
<blockquote><pre class="verbatim">&lt;&lt;
  \relative c'' {
    \key g \minor
    \time 3/2
    g2 a bes bes( a)
    b c4.( bes8 a4. g8 fis4.) g8 fis1
  }
  \addlyrics {
    When I am laid,
    am laid __ in earth,
  }
&gt;&gt;
</pre><p>
 <a href="48/lily-78f23ed7.ly">
  <img align="middle"
       border="0"
       src="48/lily-78f23ed7.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>None of the examples so far have involved words containing more
than one syllable.  Such words are usually split one syllable to a
note, with hyphens between syllables.  Such hyphens are entered as
two dashes, resulting in a centered hyphen between the syllables.
Here is an example showing this and everything we have learned so
far about aligning lyrics to notes.
</p>
<blockquote><pre class="verbatim">&lt;&lt;
  \relative c' {
    \key g \major
    \time 3/4
    \partial 4
    d4 g4 g a8( b) g4 g4
    b8( c) d4 d e4 c2
  }
  \addlyrics {
    A -- way in a __ man -- ger,
    no __ crib for a bed, __
  }
&gt;&gt;
</pre><p>
 <a href="bf/lily-ac082df6.ly">
  <img align="middle"
       border="0"
       src="bf/lily-ac082df6.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Some lyrics, especially those in Italian, require the opposite:
setting more than one syllable to a single note.  This is
achieved by linking the syllables together with a single
underscore <code>_</code> (with no spaces), or enclosing them in quotes.
Here&rsquo;s an example from Rossini&rsquo;s <var>Figaro</var>, where
<var>al</var> has to be sung on the same note as the <var>go</var> of
<var>Largo</var> in Figaro&rsquo;s aria <var>Largo al factotum</var>:
</p>
<blockquote><pre class="verbatim">&lt;&lt;
  \relative c' {
    \clef bass
    \key c \major
    \time 6/8
    c4.~ c8 d b c([ d]) b c d b c
  }
  \addlyrics {
    Lar -- go_al fac -- to -- tum del -- la cit -- tà
  }
&gt;&gt;
</pre><p>
 <a href="90/lily-37672748.ly">
  <img align="middle"
       border="0"
       src="90/lily-37672748.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<a name="See-also-9"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference: <a name="index-Vocal-music"></a>
<a href="lilypond-big-page.html#Vocal-music">Vocal music</a>.
</p>

<hr size="6">
<a name="Lyrics-to-multiple-staves"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Aligning-lyrics-to-a-melody" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Aligning lyrics to a melody&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Songs" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Songs&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Final-touches" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Final touches &gt; </a>]</td></tr></table>
<a name="Lyrics-to-multiple-staves"></a>
<h3 class="subsection">2.4.3 Lyrics to multiple staves</h3>

<a name="index-lyrics-and-multiple-staves"></a>
<a name="index-multiple-staves-and-lyrics"></a>

<p>The simple approach using <code>\addlyrics</code> can be used for
placing lyrics under more than one staff.  Here is an
example from Handel&rsquo;s <var>Judas Maccabæus</var>:
</p>
<blockquote><pre class="verbatim">&lt;&lt;
  \relative c'' {
    \key f \major
    \time 6/8
    \partial 8
    c8 c([ bes]) a a([ g]) f f'4. b, c4.~ c4
  }
  \addlyrics {
    Let flee -- cy flocks the hills a -- dorn, __
  }
  \relative c' {
    \key f \major
    \time 6/8
    \partial 8
    r8 r4. r4 c8 a'([ g]) f f([ e]) d e([ d]) c bes'4
  }
  \addlyrics {
    Let flee -- cy flocks the hills a -- dorn,
  }
&gt;&gt;
</pre><p>
 <a href="47/lily-7a6be237.ly">
  <img align="middle"
       border="0"
       src="47/lily-7a6be237.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Scores any more complex than this simple example are better
produced by separating out the score structure from the notes and
lyrics with variables.  These are discussed in <a href="#Organizing-pieces-with-variables">Organizing pieces with variables</a>.
</p>

<a name="See-also-17"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference: <a name="index-Vocal-music-1"></a>
<a href="lilypond-big-page.html#Vocal-music">Vocal music</a>.
</p>

<hr size="6">
<a name="Final-touches"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Lyrics-to-multiple-staves" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Lyrics to multiple staves&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Tutorial" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tutorial&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Organizing-pieces-with-variables" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Organizing pieces with variables &gt; </a>]</td></tr></table>
<a name="Final-touches"></a>
<h2 class="section">2.5 Final touches</h2>

<p>This is the final section of the tutorial; it demonstrates how to
add the final touches to simple pieces, and provides an
introduction to the rest of the manual.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Organizing-pieces-with-variables" accesskey="1">2.5.1 Organizing pieces with variables</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Version-number" accesskey="2">2.5.2 Version number</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Adding-titles" accesskey="3">2.5.3 Adding titles</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Absolute-note-names" accesskey="4">2.5.4 Absolute note names</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#After-the-tutorial" accesskey="5">2.5.5 After the tutorial</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="Organizing-pieces-with-variables"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Final-touches" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Final touches&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Final-touches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Final touches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Version-number" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Version number &gt; </a>]</td></tr></table>
<a name="Organizing-pieces-with-variables"></a>
<h3 class="subsection">2.5.1 Organizing pieces with variables</h3>

<a name="index-variables"></a>
<a name="index-variables_002c-defining"></a>
<a name="index-identifiers"></a>
<a name="index-macros"></a>
<a name="index-assigning-variables"></a>
<a name="index-using-variables"></a>
<a name="index-variables_002c-using"></a>
<a name="index-variables_002c-characters-allowed-in"></a>
<a name="index-characters-allowed-in-variables"></a>

<p>When all of the elements discussed earlier are combined to produce
larger files, the music expressions get a lot bigger.  In
polyphonic music with many staves, the input files can become very
confusing.  We can reduce this confusion by using
<em>variables</em>.
</p>
<p>With variables (also known as identifiers or macros), we can break
up complex music expressions.  A variable is assigned as
follows:
</p>
<blockquote><pre class="example">namedMusic = { &hellip; }
</pre></blockquote>

<p>The contents of the music expression <code>namedMusic</code> can be used
later by placing a backslash in front of the name
(<code>\namedMusic</code>, just like a normal LilyPond command).
</p>
<blockquote><pre class="verbatim">violin = \new Staff {
  \relative c'' {
    a4 b c b
  }
}
cello = \new Staff {
  \relative c {
    \clef bass
    e2 d
  }
}
{
  &lt;&lt;
    \violin
    \cello
  &gt;&gt;
}
</pre><p>
 <a href="6f/lily-ad578db3.ly">
  <img align="middle"
       border="0"
       src="6f/lily-ad578db3.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The name of a variable must have alphabetic characters only, no
numbers, underscores, or dashes.
</p>
<p>Variables must be defined <em>before</em> the main music
expression, but may be used as many times as required anywhere after
they have been defined.  They may even be used in a later definition
of another variable, giving a way of shortening the input if a
section of music is repeated many times.
</p>
<blockquote><pre class="verbatim">tripletA = \times 2/3 { c,8 e g }
barA = { \tripletA \tripletA \tripletA \tripletA }

\relative c'' {
 \barA \barA
}
</pre><p>
 <a href="86/lily-6979f0bb.ly">
  <img align="middle"
       border="0"
       src="86/lily-6979f0bb.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Variables may be used for many other types of objects in
the input.  For example,
</p>
<blockquote><pre class="example">width = 4.5\cm
name = &quot;Wendy&quot;
aFivePaper = \paper { paperheight = 21.0 \cm }
</pre></blockquote>

<p>Depending on its contents, the variable can be used in different
places.  The following example uses the above variables:
</p>
<blockquote><pre class="example">\paper {
  \aFivePaper
  line-width = \width
}
{
  c4^\name
}
</pre></blockquote>


<hr size="6">
<a name="Version-number"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Organizing-pieces-with-variables" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Organizing pieces with variables&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Final-touches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Final touches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Adding-titles" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Adding titles &gt; </a>]</td></tr></table>
<a name="Version-number"></a>
<h3 class="subsection">2.5.2 Version number</h3>

<a name="index-versioning"></a>
<a name="index-version"></a>
<a name="index-version-number"></a>
<a name="index-upgrades"></a>
<a name="index-future-upgrades"></a>
<a name="index-updating-files"></a>
<a name="index-files_002c-updating"></a>

<a name="index-_005cversion"></a>
<a name="index-_005cversion-1"></a>
<a name="index-version-1"></a>
<a name="index-version-2"></a>
<a name="index-convert_002dly"></a>
<a name="index-convert_002dly-1"></a>

<p>The <code>\version</code> statement records the version of LilyPond that
was used to write the file:
</p>
<blockquote><pre class="example">\version &quot;2.12.3&quot;
</pre></blockquote>

<p>By convention, this is placed at the top of your LilyPond file.
</p>
<p>These annotations make future upgrades of LilyPond go more
smoothly.  Changes in the syntax are handled with a special
program, <code>convert-ly</code>, and it uses <code>\version</code> to
determine what rules to apply.  For details, see
<a name="index-Updating-files-with-convert_002dly"></a>
<a href="lilypond-program-big-page.html#Updating-files-with-convert_002dly">Updating files with convert-ly</a>.
</p>

<hr size="6">
<a name="Adding-titles"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Version-number" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Version number&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Final-touches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Final touches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Absolute-note-names" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Absolute note names &gt; </a>]</td></tr></table>
<a name="Adding-titles"></a>
<h3 class="subsection">2.5.3 Adding titles</h3>

<a name="index-title"></a>
<a name="index-headers"></a>
<a name="index-header-block"></a>

<a name="index-_005cheader"></a>
<a name="index-_005cheader-1"></a>
<a name="index-header"></a>
<a name="index-header-1"></a>

<p>The title, composer, opus number, and similar information are
entered in the <code>\header</code> block.  This exists outside of the
main music expression; the <code>\header</code> block is usually placed
underneath the version number.
</p>
<blockquote><pre class="example">\version &quot;2.12.3&quot;
\header {
  title = &quot;Symphony&quot;
  composer = &quot;Me&quot;
  opus = &quot;Op. 9&quot;
}

{
  &hellip; music &hellip;
}
</pre></blockquote>

<p>When the file is processed, the title and composer are printed
above the music.  More information on titling can be found in
<a name="index-Creating-titles"></a>
<a href="lilypond-big-page.html#Creating-titles">Creating titles</a>.
</p>

<hr size="6">
<a name="Absolute-note-names"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Adding-titles" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Adding titles&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Final-touches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Final touches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#After-the-tutorial" title="Next section in reading order" accesskey="n" rel="next">&nbsp;After the tutorial &gt; </a>]</td></tr></table>
<a name="Absolute-note-names"></a>
<h3 class="subsection">2.5.4 Absolute note names</h3>

<a name="index-note-names"></a>
<a name="index-note-names_002c-absolute"></a>
<a name="index-absolute-mode"></a>
<a name="index-absolute-values-for-pitches"></a>
<a name="index-pitches_002c-absolute-values"></a>
<a name="index-absolute-note-names"></a>

<p>So far we have always used <code>\relative</code> to define pitches.
This is the easiest way to enter most music, but another way of
defining pitches exists: absolute mode.
</p>
<p>If you omit the <code>\relative</code>, LilyPond treats all pitches as
absolute values.  A <code>c'</code> will always mean middle C, a
<code>b</code> will always mean the note one step below middle C, and a
<code>g,</code> will always mean the note on the bottom staff of the
bass clef.
</p>
<blockquote><pre class="verbatim">{
  \clef bass
  c' b g, g,
  g, f, f c'
}
</pre><p>
 <a href="2e/lily-5016017f.ly">
  <img align="middle"
       border="0"
       src="2e/lily-5016017f.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Here is a four-octave scale:
</p>
<blockquote><pre class="verbatim">{
  \clef bass
  c, d, e, f,
  g, a, b, c
  d e f g
  a b c' d'
  \clef treble
  e' f' g' a'
  b' c'' d'' e''
  f'' g'' a'' b''
  c'''1
}
</pre><p>
 <a href="92/lily-da64aa67.ly">
  <img align="middle"
       border="0"
       src="92/lily-da64aa67.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>As you can see, writing a melody in the treble clef involves a lot
of quote <code>'</code> marks.  Consider this fragment from Mozart:
</p>
<blockquote><pre class="verbatim">{
  \key a \major
  \time 6/8
  cis''8. d''16 cis''8 e''4 e''8
  b'8. cis''16 b'8 d''4 d''8
}
</pre><p>
 <a href="ae/lily-ba5c96dd.ly">
  <img align="middle"
       border="0"
       src="ae/lily-ba5c96dd.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>All these quotes makes the input less readable and they are a source
of errors.  With <code>\relative</code>, the previous example is much
easier to read and type:
</p>
<blockquote><pre class="verbatim">\relative c'' {
  \key a \major
  \time 6/8
  cis8. d16 cis8 e4 e8
  b8. cis16 b8 d4 d8
}
</pre><p>
 <a href="0f/lily-8fe80bb1.ly">
  <img align="middle"
       border="0"
       src="0f/lily-8fe80bb1.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>If you make a mistake with an octave mark (<code>'</code> or <code>,</code>)
while working in <code>\relative</code> mode, it is very obvious &ndash; many
notes will be in the wrong octave.  When working in absolute mode,
a single mistake will not be as visible, and will not be as easy
to find.
</p>
<p>However, absolute mode is useful for music which has large
intervals, and is extremely useful for computer-generated LilyPond
files.
</p>


<hr size="6">
<a name="After-the-tutorial"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Fundamental-concepts" title="Next chapter">&nbsp;Fundamental concepts &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Absolute-note-names" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Absolute note names&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Final-touches" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Final touches&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Fundamental-concepts" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fundamental concepts &gt; </a>]</td></tr></table>
<a name="After-the-tutorial"></a>
<h3 class="subsection">2.5.5 After the tutorial</h3>

<p>After finishing the tutorial, you should probably try writing a
piece or two.  Start by adding notes to one of the
<a href="#Templates">Templates</a>.  If you need any notation that was not covered in
the tutorial, look at the Notation Reference, starting with
<a name="index-Musical-notation-1"></a>
<a href="lilypond-big-page.html#Musical-notation">Musical notation</a>.  If you want to write for an instrument
ensemble that is not covered in the templates, take a look at
<a href="#Extending-the-templates">Extending the templates</a>.
</p>
<p>Once you have written a few short pieces, read the rest of the
Learning Manual (chapters 3-5).  There&rsquo;s nothing wrong with
reading it now, of course!  However, the rest of the Learning
Manual assumes that you are familiar with LilyPond input.  You may
wish to skim these chapters right now, and come back to them after
you have more experience.
</p>
<p>In this tutorial and in the rest of the Learning Manual, there is a
paragraph <strong>See also</strong> at the end of each section, which contains
cross-references to other sections: you should not follow these
cross-references at first reading; when you have read all of the
Learning Manual, you may want to read some sections again and follow
cross-references for further reading.
</p>
<p>If you have not done so already, <em>please</em> read <a href="#About-the-documentation">About the documentation</a>.  There is a lot of information about LilyPond, so
newcomers often do not know where they should look for help.  If
you spend five minutes reading that section carefully, you might
save yourself hours of frustration looking in the wrong places!
</p>


<hr size="6">
<a name="Fundamental-concepts"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tweaking-output" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#After-the-tutorial" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; After the tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Top" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#How-LilyPond-input-files-work" title="Next section in reading order" accesskey="n" rel="next">&nbsp;How LilyPond input files work &gt; </a>]</td></tr></table>
<a name="Fundamental-concepts"></a>
<h1 class="chapter">3. Fundamental concepts</h1>

<p>You&rsquo;ve seen in the Tutorial how to produce beautifully printed
music from a simple text file.  This section introduces the
concepts and techniques required to produce equally beautiful
but more complex scores.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#How-LilyPond-input-files-work" accesskey="1">3.1 How LilyPond input files work</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Voices-contain-music" accesskey="2">3.2 Voices contain music</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Contexts-and-engravers" accesskey="3">3.3 Contexts and engravers</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Extending-the-templates" accesskey="4">3.4 Extending the templates</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="How-LilyPond-input-files-work"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Fundamental-concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tweaking-output" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Fundamental-concepts" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Fundamental-concepts" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Introduction-to-the-LilyPond-file-structure" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Introduction to the LilyPond file structure &gt; </a>]</td></tr></table>
<a name="How-LilyPond-input-files-work"></a>
<h2 class="section">3.1 How LilyPond input files work</h2>

<p>The LilyPond input format is quite free-form, giving experienced
users a lot of flexibility to structure their files however they
wish.  But this flexibility can make things confusing for new
users.  This section will explain some of this structure, but may
gloss over some details in favor of simplicity.  For a complete
description of the input format, see <a name="index-File-structure"></a>
<a href="lilypond-big-page.html#File-structure">File structure</a>.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Introduction-to-the-LilyPond-file-structure" accesskey="1">3.1.1 Introduction to the LilyPond file structure</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Score-is-a-_0028single_0029-compound-musical-expression" accesskey="2">3.1.2 Score is a (single) compound musical expression</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Nesting-music-expressions" accesskey="3">3.1.3 Nesting music expressions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#On-the-un_002dnestedness-of-brackets-and-ties" accesskey="4">3.1.4 On the un-nestedness of brackets and ties</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Introduction-to-the-LilyPond-file-structure"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Fundamental-concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tweaking-output" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#How-LilyPond-input-files-work" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; How LilyPond input files work&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#How-LilyPond-input-files-work" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;How LilyPond input files work&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Score-is-a-_0028single_0029-compound-musical-expression" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Score is a (single) compound musical expression &gt; </a>]</td></tr></table>
<a name="Introduction-to-the-LilyPond-file-structure"></a>
<h3 class="subsection">3.1.1 Introduction to the LilyPond file structure</h3>

<a name="index-input-format"></a>
<a name="index-file-structure"></a>

<p>A basic example of a LilyPond input file is
</p>
<blockquote><pre class="example">\version &quot;2.12.3&quot;
\header { }
\score {
  <var>...compound music expression...</var>  % all the music goes here!
  \layout { }
  \midi { }
}
</pre></blockquote>

<p>There are many variations of this basic pattern, but this
example serves as a useful starting place.
</p>
<a name="index-_005cbook"></a>
<a name="index-_005cbook-1"></a>
<a name="index-book"></a>
<a name="index-book-1"></a>
<a name="index-_005cscore"></a>
<a name="index-_005cscore-1"></a>
<a name="index-score"></a>
<a name="index-score-1"></a>
<a name="index-book-2"></a>
<a name="index-score-2"></a>

<p>Up to this point none of the examples you have seen has used a
<code>\score{}</code> command.  This is because LilyPond automatically
adds the extra commands which are needed when you give it simple
input.  LilyPond treats input like this:
</p>
<blockquote><pre class="example">\relative c'' {
  c4 a d c
}
</pre></blockquote>

<p>as shorthand for this:
</p>
<blockquote><pre class="example">\book {
  \score {
    \new Staff {
      \new Voice {
        \relative c'' {
          c4 a b c
        }
      }
    }
    \layout { }
  }
}
</pre></blockquote>

<p>In other words, if the input contains a single music expression,
LilyPond will interpret the file as though the music expression
was wrapped up inside the commands shown above.
</p>
<a name="index-implicit-contexts"></a>
<a name="index-contexts_002c-implicit"></a>

<p><strong>A word of warning!</strong>  Many of the examples in the LilyPond
documentation will omit the <code>\new Staff</code> and <code>\new Voice</code>
commands, leaving them to be created implicitly.  For simple
examples this works well, but for more complex examples, especially
when additional commands are used, the implicit creation of contexts
can give surprising results, maybe creating extra unwanted staves.
The way to create contexts explicitly is explained in
<a href="#Contexts-and-engravers">Contexts and engravers</a>.
</p>
<table class="cartouche" border="1"><tr><td>
<p><b>Note:</b> When entering more than a few lines of music it is
advisable to always create staves and voices explicitly.
</p></td></tr></table>

<p>For now, though, let us return to the first example and examine the
<code>\score</code> command, leaving the others to default.
</p>
<p>A <code>\score</code> block must always contain just one music expression,
and this must appear immediately after the <code>\score</code> command.
Remember that a music expression could be anything from a single
note to a huge compound expression like
</p>
<blockquote><pre class="example">{
  \new StaffGroup &lt;&lt;
    <var>...insert the whole score of a Wagner opera in here...</var>
  &gt;&gt;
}
</pre></blockquote>

<p>Since everything is inside <code>{ ... }</code>, it counts
as one music expression.
</p>
<p>As we saw previously, the <code>\score</code> block can contain other
things, such as
</p>
<blockquote><pre class="example">\score {
  { c'4 a b c' }
  \header { }
  \layout { }
  \midi { }
}
</pre></blockquote>

<a name="index-_005cheader-2"></a>
<a name="index-_005cheader-3"></a>
<a name="index-header-2"></a>
<a name="index-header-3"></a>
<a name="index-_005clayout"></a>
<a name="index-_005clayout-1"></a>
<a name="index-layout"></a>
<a name="index-layout-1"></a>
<a name="index-_005cmidi"></a>
<a name="index-_005cmidi-1"></a>
<a name="index-midi"></a>
<a name="index-midi-1"></a>
<a name="index-header-4"></a>
<a name="index-layout-2"></a>
<a name="index-midi-2"></a>

<p>Note that these three commands &ndash; <code>\header</code>, <code>\layout</code> and
<code>\midi</code> &ndash; are special: unlike many other commands which begin
with a backward slash (<code>\</code>) they are <em>not</em> music expressions
and are not part of any music expression.  So they may be placed
inside a <code>\score</code> block or outside it.  In fact, these commands
are commonly placed outside the <code>\score</code> block &ndash; for example,
<code>\header</code> is often placed above the <code>\score</code> command, as the
example at the beginning of this section shows.
</p>
<p>Two more commands you have not previously seen are
<code>\layout { }</code> and <code>\midi {}</code>.  If these appear as
shown they will cause LilyPond to produce a printed output and a
MIDI output respectively.  They are described fully in the
Notation Reference &ndash; <a name="index-Score-layout"></a>
<a href="lilypond-big-page.html#Score-layout">Score layout</a>, and
<a name="index-Creating-MIDI-files"></a>
<a href="lilypond-big-page.html#Creating-MIDI-files">Creating MIDI files</a>.
</p>
<a name="index-scores_002c-multiple"></a>
<a name="index-book-block_002c-implicit"></a>
<a name="index-implicit-book-block"></a>
<a name="index-_005cbook-2"></a>
<a name="index-_005cbook-3"></a>
<a name="index-book-3"></a>
<a name="index-book-4"></a>

<p>You may code multiple <code>\score</code> blocks.  Each will be
treated as a separate score, but they will be all combined into
a single output file.  A <code>\book</code> command is not necessary
&ndash; one will be implicitly created.  However, if you would like
separate output files from one <code>.ly</code> file then the
<code>\book</code> command should be used to separate the different
sections: each <code>\book</code> block will produce a
separate output file.
</p>
<p>In summary:
</p>
<p>Every <code>\book</code> block creates a separate output file (e.g., a
PDF file).  If you haven&rsquo;t explicitly added one, LilyPond wraps
your entire input code in a <code>\book</code> block implicitly.
</p>
<p>Every <code>\score</code> block is a separate chunk of music within a
<code>\book</code> block.
</p>
<a name="index-layout-block_002c-effect-of-location"></a>

<p>Every <code>\layout</code> block affects the <code>\score</code> or
<code>\book</code> block in which it appears &ndash; i.e., a <code>\layout</code>
block inside a <code>\score</code> block affects only that <code>\score</code>
block, but a <code>\layout</code> block outside of a <code>\score</code> block
(and thus in a <code>\book</code> block, either explicitly or
implicitly) will affect every <code>\score</code> in that <code>\book</code>.
</p>
<p>For details see <a name="index-Multiple-scores-in-a-book"></a>
<a href="lilypond-big-page.html#Multiple-scores-in-a-book">Multiple scores in a book</a>.
</p>
<a name="index-variables-1"></a>

<p>Another great shorthand is the ability to define variables.  All
the templates use this
</p>
<blockquote><pre class="example">melody = \relative c' {
  c4 a b c
}

\score {
  \melody
}
</pre></blockquote>

<p>When LilyPond looks at this file, it takes the value of
<code>melody</code> (everything after the equals sign) and inserts it
whenever it sees <code>\melody</code>.  There&rsquo;s nothing special about
the names &ndash; it could be <code>melody</code>, <code>global</code>,
<code>TimeKey</code>,
<code>pianorighthand</code>, or <code>foofoobarbaz</code>.  For more details,
see <a href="#Saving-typing-with-variables-and-functions">Saving typing with variables and functions</a>.
Remember that you can use almost any name you like as long
as it contains just alphabetic characters and is distinct from
LilyPond command names.  The exact
limitations on variable names are detailed in
<a name="index-File-structure-1"></a>
<a href="lilypond-big-page.html#File-structure">File structure</a>.
</p>

<a name="See-also-12"></a>
<h4 class="subsubheading">See also</h4>
<p>For a complete definition of the input format, see
<a name="index-File-structure-2"></a>
<a href="lilypond-big-page.html#File-structure">File structure</a>.
</p>

<hr size="6">
<a name="Score-is-a-_0028single_0029-compound-musical-expression"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Fundamental-concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tweaking-output" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Introduction-to-the-LilyPond-file-structure" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Introduction to the LilyPond file structure&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#How-LilyPond-input-files-work" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;How LilyPond input files work&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Nesting-music-expressions" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Nesting music expressions &gt; </a>]</td></tr></table>
<a name="Score-is-a-_0028single_0029-compound-musical-expression"></a>
<h3 class="subsection">3.1.2 Score is a (single) compound musical expression</h3>

<a name="index-_005cscore-2"></a>
<a name="index-_005cscore-3"></a>
<a name="index-score-3"></a>
<a name="index-score-4"></a>
<a name="index-score-5"></a>
<a name="index-contents-of-a-score-block"></a>
<a name="index-score-block_002c-contents-of"></a>
<a name="index-compound-music-expression-1"></a>
<a name="index-music-expression_002c-compound-1"></a>

<p>We saw the general organization of LilyPond input files in the
previous section, <a href="#Introduction-to-the-LilyPond-file-structure">Introduction to the LilyPond file structure</a>.
But we seemed to skip over the most important part: how do we figure
out what to write after <code>\score</code>?
</p>
<p>We didn&rsquo;t skip over it at all.  The big mystery is simply that
there <em>is</em> no mystery.  This line explains it all:
</p>
<blockquote><p><em>A <code>\score</code> block must begin with a compound music expression.</em>
</p></blockquote>

<p>To understand what is meant by a music expression and a compound
music expression, you may find it useful to review the tutorial,
<a href="#Music-expressions-explained">Music expressions explained</a>.  In that section, we saw how to
build big music expressions from small pieces &ndash; we started from
notes, then chords, etc.  Now we&rsquo;re going to start from a big
music expression and work our way down.
</p>
<blockquote><pre class="example">\score {
  { % this brace begins the overall compound music expression
    \new StaffGroup &lt;&lt;
      <var>...insert the whole score of a Wagner opera in here...</var>
    &gt;&gt;
  } % this brace ends the overall compound music expression
  \layout { }
}
</pre></blockquote>

<p>A whole Wagner opera would easily double the length of this
manual, so let&rsquo;s just add a singer and piano.  We don&rsquo;t need a
<code>StaffGroup</code> for this ensemble, which simply groups a number
of staves together with a bracket at the left, so we shall remove
it.  We <em>do</em> need a singer and a piano, though.
</p>
<blockquote><pre class="example">\score {
  &lt;&lt;
    \new Staff = &quot;singer&quot; &lt;&lt;
    &gt;&gt;
    \new PianoStaff = &quot;piano&quot; &lt;&lt;
    &gt;&gt;
  &gt;&gt;
  \layout { }
}
</pre></blockquote>

<p>Remember that we use <code>&lt;&lt; ... &gt;&gt;</code> instead of <code>{ ... }</code> to
show simultaneous music.  And we definitely want to show the vocal
part and piano part at the same time, not one after the other!  Note
that the <code>&lt;&lt; ... &gt;&gt;</code> construct is not really necessary for the
Singer staff, as it contains only one sequential music expression;
however, using <code>&lt;&lt; ... &gt;&gt;</code> instead of braces is still necessary
if the music in the Staff is made of two simultaneous expressions,
e.g. two simultaneous Voices, or a Voice with lyrics.  We&rsquo;ll add some
real music later; for now let&rsquo;s just put in some dummy notes and
lyrics.
</p>
<blockquote><pre class="verbatim">\score {
  &lt;&lt;
    \new Staff = &quot;singer&quot; &lt;&lt;
      \new Voice = &quot;vocal&quot; { c'1 }
      \addlyrics { And }
    &gt;&gt;
    \new PianoStaff = &quot;piano&quot; &lt;&lt;
      \new Staff = &quot;upper&quot; { c'1 }
      \new Staff = &quot;lower&quot; { c'1 }
    &gt;&gt;
  &gt;&gt;
  \layout { }
}
</pre><p>
 <a href="6f/lily-73bfa928.ly">
  <img align="middle"
       border="0"
       src="6f/lily-73bfa928.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Now we have a lot more details.  We have the singer&rsquo;s staff: it
contains a <code>Voice</code> (in LilyPond, this term refers to a set of
notes, not necessarily vocal notes &ndash; for example, a violin
generally plays one voice) and some lyrics.  We also have a piano
staff: it contains an upper staff (right hand) and a lower staff
(left hand).
</p>
<p>At this stage, we could start filling in notes.  Inside the curly
braces next to <code>\new Voice = &quot;vocal&quot;</code>, we could start writing
</p>
<blockquote><pre class="example">\relative c'' {
  r4 d8\noBeam g, c4 r
}
</pre></blockquote>

<p>But if we did that, the <code>\score</code> section would get pretty
long, and it would be harder to understand what was happening.  So
let&rsquo;s use variables instead.  These were introduced at the end
of the previous section, remember?  So, adding a few notes, we
now have a piece of real music:
</p>
<blockquote><pre class="verbatim">melody = \relative c'' { r4 d8\noBeam g, c4 r }
text   = \lyricmode { And God said, }
upper  = \relative c'' { &lt;g d g,&gt;2~ &lt;g d g,&gt; }
lower  = \relative c { b2 e2 }

\score {
  &lt;&lt;
    \new Staff = &quot;singer&quot; &lt;&lt;
      \new Voice = &quot;vocal&quot; { \melody }
      \addlyrics { \text }
    &gt;&gt;
    \new PianoStaff = &quot;piano&quot; &lt;&lt;
      \new Staff = &quot;upper&quot; { \upper }
      \new Staff = &quot;lower&quot; {
        \clef &quot;bass&quot;
        \lower
      }
    &gt;&gt;
  &gt;&gt;
  \layout { }
}
</pre><p>
 <a href="02/lily-2cfcdf1a.ly">
  <img align="middle"
       border="0"
       src="02/lily-2cfcdf1a.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<p>Be careful about the difference between notes, which are introduced
with <code>\relative</code> or which are directly included in a music
expression, and lyrics, which are introduced with
<code>\lyricmode</code>.  These are essential to tell LilyPond
to interpret the following content as music and text
respectively.
</p>
<p>When writing (or reading) a <code>\score</code> section, just take it
slowly and carefully.  Start with the outer level, then work on
each smaller level.  It also really helps to be strict with
indentation &ndash; make sure that each item on the same level starts
on the same horizontal position in your text editor.
</p>

<a name="See-also-21"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference: <a name="index-Structure-of-a-score"></a>
<a href="lilypond-big-page.html#Structure-of-a-score">Structure of a score</a>.
</p>

<hr size="6">
<a name="Nesting-music-expressions"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Fundamental-concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tweaking-output" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Score-is-a-_0028single_0029-compound-musical-expression" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Score is a (single) compound musical expression&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#How-LilyPond-input-files-work" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;How LilyPond input files work&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#On-the-un_002dnestedness-of-brackets-and-ties" title="Next section in reading order" accesskey="n" rel="next">&nbsp;On the un-nestedness of brackets and ties &gt; </a>]</td></tr></table>
<a name="Nesting-music-expressions"></a>
<h3 class="subsection">3.1.3 Nesting music expressions</h3>

<a name="index-staves_002c-temporary"></a>
<a name="index-temporary-staves"></a>
<a name="index-ossias"></a>

<p>It is not essential to declare all staves at the beginning; they may
be introduced temporarily at any point.  This is particularly useful
for creating ossia sections &ndash; see <a name="index-ossia"></a>
<a href="music-glossary-big-page.html#ossia">ossia</a>.  Here is a simple
example showing how to introduce a new staff temporarily for the
duration of three notes:
</p>
<blockquote><pre class="verbatim">\new Staff {
  \relative g' {
    r4 g8 g c4 c8 d |
    e4 r8
    &lt;&lt;
      { f c c }
      \new Staff {
        f8 f c
      }
    &gt;&gt;
    r4 |
  }
}
</pre><p>
 <a href="a5/lily-c7456892.ly">
  <img align="middle"
       border="0"
       src="a5/lily-c7456892.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Note that the size of the clef is the same as a clef printed
following a clef change &ndash; slightly smaller than the clef
at the beginning of the line.  This is usual for clefs printed
in the middle of a line.
</p>
<a name="index-staff_002c-positioning"></a>

<p>The ossia section may be placed above the staff
as follows:
</p>
<blockquote><pre class="verbatim">\new Staff = &quot;main&quot; {
  \relative g' {
    r4 g8 g c4 c8 d |
    e4 r8
    &lt;&lt;
      { f c c }
      \new Staff \with {
        alignAboveContext = #&quot;main&quot; }
      { f8 f c }
    &gt;&gt;
    r4 |
  }
}
</pre><p>
 <a href="d1/lily-e6a32bdc.ly">
  <img align="middle"
       border="0"
       src="d1/lily-e6a32bdc.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>This example uses <code>\with</code>, which will be explained more
fully later.  It is a means of modifying the default behavior
of a single Staff.  Here it says that the new staff should be
placed above the staff called &ldquo;main&rdquo; instead of the default
position which is below.
</p>

<a name="See-also-27"></a>
<h4 class="subsubheading">See also</h4>
<p>Ossia are often written without clef and without
time signature and are usually in a smaller font.
These require further commands which
have not yet been introduced.  See <a href="#Size-of-objects">Size of objects</a>,
and <a name="index-Ossia-staves"></a>
<a href="lilypond-big-page.html#Ossia-staves">Ossia staves</a>.
</p>

<hr size="6">
<a name="On-the-un_002dnestedness-of-brackets-and-ties"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Fundamental-concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tweaking-output" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Nesting-music-expressions" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Nesting music expressions&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#How-LilyPond-input-files-work" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;How LilyPond input files work&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Voices-contain-music" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Voices contain music &gt; </a>]</td></tr></table>
<a name="On-the-un_002dnestedness-of-brackets-and-ties"></a>
<h3 class="subsection">3.1.4 On the un-nestedness of brackets and ties</h3>

<a name="index-brackets_002c-nesting"></a>
<a name="index-bracket-types"></a>
<a name="index-brackets_002c-enclosing-vs_002e-marking"></a>

<p>You have already met a number of different types of bracket in
writing the input file to LilyPond.  These obey different rules
which can be confusing at first.  Before we explain the rules
let&rsquo;s first review the different types of bracket.
</p>
<table>
<thead><tr><th width="30%"><p> Bracket Type
  </p></th><th width="70%"><p> Function
</p></th></tr></thead>
<tr><td width="30%"><p> <code>{ .. }</code>
  </p></td><td width="70%"><p> Encloses a sequential segment of music
</p></td></tr>
<tr><td width="30%"><p> <code>&lt; .. &gt;</code>
  </p></td><td width="70%"><p> Encloses the notes of a chord
</p></td></tr>
<tr><td width="30%"><p> <code>&lt;&lt; .. &gt;&gt;</code>
  </p></td><td width="70%"><p> Encloses simultaneous music expressions
</p></td></tr>
<tr><td width="30%"><p> <code>( .. )</code>
  </p></td><td width="70%"><p> Marks the start and end of a slur
</p></td></tr>
<tr><td width="30%"><p> <code>\( .. \)</code>
  </p></td><td width="70%"><p> Marks the start and end of a phrasing slur
</p></td></tr>
<tr><td width="30%"><p> <code>[ .. ]</code>
  </p></td><td width="70%"><p> Marks the start and end of a manual beam
</p></td></tr>
</table>

<p>To these we should add other constructs which generate lines
between or across notes: ties (marked by a tilde, <code>~</code>),
tuplets written as <code>\times x/y {..}</code>, and grace notes
written as <code>\grace{..}</code>.
</p>
<p>Outside LilyPond, the conventional use of brackets requires the
different types to be properly nested, like this, <code>&lt;&lt; [ { ( .. )
} ] &gt;&gt;</code>, with the closing brackets being encountered in exactly the
opposite order to the opening brackets.  This <strong>is</strong> a
requirement for the three types of bracket described by the word
&lsquo;Encloses&rsquo; in the table above &ndash; they must nest properly.  However,
the remaining brackets, described with the word &lsquo;Marks&rsquo; in the table
above together with ties and tuplets, do <strong>not</strong> have to nest
properly with any of the brackets.  In fact, these are not brackets in
the sense that they enclose something &ndash; they are simply markers to
indicate where something starts and ends.
</p>
<p>So, for example, a phrasing slur can start before a manually
inserted beam and end before the end of the beam &ndash; not very
musical, perhaps, but possible:
</p>
<blockquote><pre class="verbatim"> { g8\( a b[ c b\) a] }
</pre><p>
 <a href="81/lily-46a51cea.ly">
  <img align="middle"
       border="0"
       src="81/lily-46a51cea.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>In general, different kinds of brackets, and those implied by
tuplets, ties and grace notes, may be mixed freely.
This example shows a beam extending into a tuplet (line 1),
a slur extending into a tuplet (line 2),
a beam and a slur extending into a tuplet, a tie crossing
two tuplets, and a phrasing slur extending out of a tuplet
(lines 3 and 4).
</p>
<blockquote><pre class="verbatim">{
  r16[ g16 \times 2/3 {r16 e'8] }
  g16( a \times 2/3 {b d) e' }
  g8[( a \times 2/3 {b d') e'~]}
  \times 4/5 {e'32\( a b d' e'} a'4.\)
}
</pre><p>
 <a href="fb/lily-18298ac6.ly">
  <img align="middle"
       border="0"
       src="fb/lily-18298ac6.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<hr size="6">
<a name="Voices-contain-music"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Fundamental-concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tweaking-output" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#On-the-un_002dnestedness-of-brackets-and-ties" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; On the un-nestedness of brackets and ties&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Fundamental-concepts" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#I_0027m-hearing-Voices" title="Next section in reading order" accesskey="n" rel="next">&nbsp;I'm hearing Voices &gt; </a>]</td></tr></table>
<a name="Voices-contain-music"></a>
<h2 class="section">3.2 Voices contain music</h2>

<p>Singers need voices to sing, and so does LilyPond.
The actual music for all instruments in a score
is contained in Voices &ndash; the most fundamental
of all LilyPond&rsquo;s concepts.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#I_0027m-hearing-Voices" accesskey="1">3.2.1 I&rsquo;m hearing Voices</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Explicitly-instantiating-voices" accesskey="2">3.2.2 Explicitly instantiating voices</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Voices-and-vocals" accesskey="3">3.2.3 Voices and vocals</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="I_0027m-hearing-Voices"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Fundamental-concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tweaking-output" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Voices-contain-music" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Voices contain music&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Voices-contain-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Voices contain music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Explicitly-instantiating-voices" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Explicitly instantiating voices &gt; </a>]</td></tr></table>
<a name="I_0027m-hearing-Voices"></a>
<h3 class="subsection">3.2.1 I&rsquo;m hearing Voices</h3>

<a name="index-polyphony-4"></a>
<a name="index-layers"></a>
<a name="index-multiple-voices-1"></a>
<a name="index-voices_002c-multiple"></a>
<a name="index-Voice-context"></a>
<a name="index-context_002c-Voice"></a>
<a name="index-simultaneous-music"></a>
<a name="index-music_002c-simultaneous"></a>
<a name="index-concurrent-music"></a>
<a name="index-music_002c-concurrent"></a>
<a name="index-voices-vs_002e-chords"></a>
<a name="index-chords-vs_002e-voices"></a>

<p>The lowest, most fundamental or innermost layers in a LilyPond
score are called &lsquo;Voice contexts&rsquo; or just &lsquo;Voices&rsquo; for short.
Voices are sometimes called &lsquo;layers&rsquo; in other notation
packages.
</p>
<p>In fact, a Voice layer or context is the only one which can contain
music.  If a Voice context is not explicitly declared one is created
automatically, as we saw at the beginning of this chapter.  Some
instruments such as an Oboe can play only one note at a time.  Music
written for such instruments is monophonic and requires just a single
voice.  Instruments which can play more than one note at a time like
the piano will often require multiple voices to encode the different
concurrent notes and rhythms they are capable of playing.
</p>
<p>A single voice can contain many notes in a chord, of course,
so when exactly are multiple voices needed?  Look first at
this example of four chords:
</p>
<blockquote><pre class="verbatim">\key g \major
&lt;d g&gt;4 &lt;d fis&gt; &lt;d a'&gt; &lt;d g&gt;
</pre><p>
 <a href="e0/lily-a1556e90.ly">
  <img align="middle"
       border="0"
       src="e0/lily-a1556e90.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>This can be expressed using just the single angle bracket chord
symbols, <code>&lt; ... &gt;</code>, and for this just a single voice is
needed.  But suppose the F-sharp were actually an eighth-note
followed by an eighth-note G, a passing note on the way to the A?
Now we have two notes which start at the same time but have
different durations: the quarter-note D and the eighth-note
F-sharp.  How are these to be coded?  They cannot be written as
a chord because all the notes in a chord must have the same
duration.  And they cannot be written as two sequential notes
as they need to start at the same time.  This is when two
voices are required.
</p>
<p>Let us see how this is done in LilyPond input syntax.
</p>
<a name="index-_003c_003c-_005c_005c-_003e_003e"></a>
<a name="index-_003c_003c-_005c_005c-_003e_003e-1"></a>
<a name="index-_005c_005c-2"></a>
<a name="index-_005c_005c-3"></a>

<p>The easiest way to enter fragments with more than one voice on a
staff is to enter each voice as a sequence (with <code>{...}</code>),
and combine them simultaneously with angle brackets, <code>&lt;&lt;...&gt;&gt;</code>.
The fragments must also be separated with double backward slashes,
<code>\\</code>, to place them in separate voices.  Without these, the
notes would be entered into a single voice, which would usually
cause errors.  This technique is particularly suited to pieces of
music which are largely monophonic with occasional short sections
of polyphony.
</p>
<p>Here&rsquo;s how we split the chords above into two voices and add both
the passing note and a slur:
</p>
<blockquote><pre class="verbatim">\key g \major
%    Voice &quot;1&quot;                  Voice &quot;2&quot;
&lt;&lt; { g4 fis8( g) a4 g }    \\ { d4 d d d }  &gt;&gt; |
</pre><p>
 <a href="99/lily-0f34d97f.ly">
  <img align="middle"
       border="0"
       src="99/lily-0f34d97f.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Notice how the stems of the second voice now point down.
</p>
<p>Here&rsquo;s another simple example:
</p>
<blockquote><pre class="verbatim">\key d \minor
%    Voice &quot;1&quot;             Voice &quot;2&quot;
&lt;&lt; { r4 g g4. a8 }    \\ { d,2 d4 g }       &gt;&gt; |
&lt;&lt; { bes4 bes c bes } \\ { g4 g g8( a) g4 } &gt;&gt; |
&lt;&lt; { a2. r4 }         \\ { fis2. s4 }       &gt;&gt; |
</pre><p>
 <a href="43/lily-65cc3b6e.ly">
  <img align="middle"
       border="0"
       src="43/lily-65cc3b6e.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>It is not necessary to use a separate <code>&lt;&lt; \\ &gt;&gt;</code> construct
for each bar. For music with few notes in each bar this layout
can help the legibility of the code, but if there are many
notes in each bar it may be better to split out each voice
separately, like this:
</p>
<blockquote><pre class="verbatim">\key d \minor
&lt;&lt; {
  % Voice &quot;1&quot;
  r4 g g4. a8 |
  bes4 bes c bes |
  a2. r4 |
} \\ {
  % Voice &quot;2&quot;
  d,2 d4 g |
  g4 g g8( a) g4 |
  fis2. s4 |
} &gt;&gt;
</pre><p>
 <a href="ad/lily-a9b8e031.ly">
  <img align="middle"
       border="0"
       src="ad/lily-a9b8e031.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<a name="index-voices_002c-naming"></a>
<a name="index-voices-crossing-brackets"></a>
<a name="index-slurs-crossing-brackets"></a>
<a name="index-ties-crossing-brackest"></a>

<p>This example has just two voices, but the same construct may be
used to encode three or more voices by adding more back-slash
separators.
</p>
<p>The Voice contexts bear the names <code>&quot;1&quot;</code>, <code>&quot;2&quot;</code>, etc.
In each of these contexts, the vertical direction of slurs,
stems, ties, dynamics etc., is set appropriately.
</p>
<blockquote><pre class="verbatim">\new Staff \relative c' {
  % Main voice
  c16 d e f
  %    Voice &quot;1&quot;     Voice &quot;2&quot;                 Voice &quot;3&quot;
  &lt;&lt; { g4 f e } \\ { r8 e4 d c8 ~ } &gt;&gt; |
  &lt;&lt; { d2 e2 }  \\ { c8 b16 a b8 g ~ g2 } \\ { s4 b4 c2 } &gt;&gt; |
}
</pre><p>
 <a href="7b/lily-3c5031a0.ly">
  <img align="middle"
       border="0"
       src="7b/lily-3c5031a0.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>These voices are all separate from the main voice that contains
the notes just outside the <code>&lt;&lt; .. &gt;&gt;</code> construct.  Let&rsquo;s call
this the <em>simultaneous construct</em>.  Slurs and ties may only
connect notes within the same voice, so slurs and ties cannot go
into or out of a simultaneous construct.  Conversely,
parallel voices from separate simultaneous constructs on the same
staff are the same voice.  Other voice-related properties also
carry across simultaneous constructs.  Here is the same example,
with different colors and note heads for each voice.  Note that
changes in one voice do not affect other voices, but they do
persist in the same voice later.  Note also that tied notes may be
split across the same voices in two constructs, shown here in the
blue triangle voice.
</p>
<blockquote><pre class="verbatim">\new Staff \relative c' {
  % Main voice
  c16 d e f
  &lt;&lt; % Bar 1
    {
      \voiceOneStyle
      g4 f e
    }
  \\
    {
      \voiceTwoStyle
      r8 e4 d c8 ~
    }
  &gt;&gt;
  &lt;&lt; % Bar 2
     % Voice 1 continues
    { d2 e2 }
  \\
     % Voice 2 continues
    { c8 b16 a b8 g ~ g2 }
  \\
    {
      \voiceThreeStyle
      s4 b4 c2
    }
  &gt;&gt;
}
</pre><p>
 <a href="5c/lily-e8480aa0.ly">
  <img align="middle"
       border="0"
       src="5c/lily-e8480aa0.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="index-_005cvoiceOneStyle"></a>
<a name="index-_005cvoiceOneStyle-1"></a>
<a name="index-_005cvoiceTwoStyle"></a>
<a name="index-_005cvoiceTwoStyle-1"></a>
<a name="index-_005cvoiceThreeStyle"></a>
<a name="index-_005cvoiceThreeStyle-1"></a>
<a name="index-_005cvoiceFourStyle"></a>
<a name="index-_005cvoiceFourStyle-1"></a>
<a name="index-_005cvoiceNeutralStyle"></a>
<a name="index-_005cvoiceNeutralStyle-1"></a>

<p>The commands <code>\voiceXXXStyle</code> are mainly intended for use in
educational documents such as this one.  They modify the color
of the note head, the stem and the beams, and the style of the
note head, so that the voices may be easily distinguished.
Voice one is set to red diamonds, voice two to blue triangles,
voice three to green crossed circles, and voice four (not used
here) to magenta crosses;  <code>\voiceNeutralStyle</code> (also not
used here) reverts the style back to the default.
We shall see later how commands like these may be created by the
user.
See <a href="#Visibility-and-color-of-objects">Visibility and color of objects</a> and
<a href="#Using-variables-for-tweaks">Using variables for tweaks</a>.
</p>
<a name="index-polyphony-and-relative-note-entry"></a>
<a name="index-relative-note-entry-and-polyphony"></a>

<p>Polyphony does not change the relationship of notes within a
<code>\relative { }</code> block.  Each note is still calculated
relative to the note immediately preceding it, or to the first
note of the preceding chord.  So in
</p>
<blockquote><pre class="example">\relative c' { noteA &lt;&lt; &lt; noteB noteC &gt; \\ noteD &gt;&gt; noteE }
</pre></blockquote>

<p><code>noteB</code> is relative to <code>noteA</code>                      <br>
<code>noteC</code> is relative to <code>noteB</code>, not <code>noteA</code>;   <br>
<code>noteD</code> is relative to <code>noteB</code>, not <code>noteA</code> or
<code>noteC</code>;                                                 <br>
<code>noteE</code> is relative to <code>noteD</code>, not <code>noteA</code>.
</p>
<p>An alternative way, which may be clearer if the notes in the
voices are widely separated, is to place a <code>\relative</code>
command at the start of each voice:
</p>
<blockquote><pre class="example">\relative c' { noteA ... }
&lt;&lt;
  \relative c'' { &lt; noteB noteC &gt; ... }
\\
  \relative g' { noteD ... }
&gt;&gt;
\relative c' { noteE ... }
</pre></blockquote>

<p>Let us finally analyze the voices in a more complex piece of music.
Here are the notes from the first two bars of the second of Chopin&rsquo;s
Deux Nocturnes, Op 32.  This example will be used at later stages in
this and the next chapter to illustrate several techniques for
producing notation, so please ignore for now anything in the
underlying code which looks mysterious and concentrate just on the
music and the voices &ndash; the complications will all be explained in
later sections.
</p>
<blockquote><p>
 <a href="37/lily-45dc2b76.ly">
  <img align="middle"
       border="0"
       src="37/lily-45dc2b76.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The direction of the stems is often used to indicate the continuity of
two simultaneous melodic lines.  Here the stems of the highest notes
are all pointing up and the stems of the lower notes are all pointing
down.  This is the first indication that more than one voice is
required.
</p>
<p>But the real need for multiple voices arises when notes
which start at the same time have different durations.
Look at the notes which start at beat three in the first
bar.  The A-flat is a dotted quarter note, the F is a
quarter note and the D-flat is a half note.  These
cannot be written as a chord as all the notes in a chord
must have the same duration.  Neither can they be written
as sequential notes, as they must start at the same time.
This section of the bar requires three voices, and the
normal practice would be to write the whole bar as three
voices, as shown below, where we have used different note heads
and colors for the three voices.  Again, the code behind this
example will be explained later, so ignore anything you do
not understand.
</p>
<blockquote><p>
 <a href="68/lily-a5e9fab9.ly">
  <img align="middle"
       border="0"
       src="68/lily-a5e9fab9.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<p>Let us try to encode this music from scratch.  As we
shall see, this encounters some difficulties.  We begin as
we have learnt, using the <code>&lt;&lt; \\  &gt;&gt;</code> construct to
enter the music of the first bar in three voices:
</p>
<blockquote><pre class="verbatim">\new Staff \relative c'' {
  \key aes \major
  &lt;&lt;
    { c2 aes4. bes8 } \\ { aes2 f4 fes } \\ { &lt;ees c&gt;2 des2 }
  &gt;&gt;
  &lt;c ees aes c&gt;1
}
</pre><p>
 <a href="75/lily-a60286ba.ly">
  <img align="middle"
       border="0"
       src="75/lily-a60286ba.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="index-stem-down"></a>
<a name="index-voices-and-stem-directions"></a>
<a name="index-stem-directions-and-voices"></a>
<a name="index-stem-up"></a>

<p>The stem directions are automatically assigned with the
odd-numbered voices taking upward stems and the even-numbered
voices downward ones.  The stems for voices 1 and 2 are right,
but the stems in voice 3 should go down in this particular piece
of music.  We can correct this simply by missing out voice three
and placing the music in voice four:
</p>
<blockquote><pre class="verbatim">\new Staff \relative c'' {
  \key aes \major
  &lt;&lt; % Voice one
    { c2 aes4. bes8 }
  \\ % Voice two
    { aes2 f4 fes   }
  \\ % Omit Voice three
  \\ % Voice four
    { &lt;ees c&gt;2 des2 }
  &gt;&gt; |
  &lt;c ees aes c&gt;1 |
}
</pre><p>
 <a href="9f/lily-ab572487.ly">
  <img align="middle"
       border="0"
       src="9f/lily-ab572487.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>We see that this fixes the stem direction, but exposes a problem
sometimes encountered with multiple voices &ndash; the stems of the notes
in one voice can collide with the note heads in other voices.  In
laying out the notes, LilyPond allows the notes or chords from two
voices to occupy the same vertical note column provided the stems are
in opposite directions, but the notes from the third and fourth voices
are displaced, if necessary, to avoid the note heads colliding.  This
usually works well, but in this example the notes of the lowest voice
are clearly not well placed by default. LilyPond provides several ways
to adjust the horizontal placing of notes.  We are not quite ready yet
to see how to correct this, so we shall leave this problem until a
later section &mdash; see the <code>force-hshift</code> property in <a href="#Fixing-overlapping-notation">Fixing overlapping notation</a>.
</p>

<a name="See-also-3"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference: <a name="index-Multiple-voices"></a>
<a href="lilypond-big-page.html#Multiple-voices">Multiple voices</a>.
</p>

<hr size="6">
<a name="Explicitly-instantiating-voices"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Fundamental-concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tweaking-output" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#I_0027m-hearing-Voices" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; I'm hearing Voices&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Voices-contain-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Voices contain music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Voices-and-vocals" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Voices and vocals &gt; </a>]</td></tr></table>
<a name="Explicitly-instantiating-voices"></a>
<h3 class="subsection">3.2.2 Explicitly instantiating voices</h3>

<a name="index-_005cvoiceOne"></a>
<a name="index-_005cvoiceOne-1"></a>
<a name="index-voiceOne"></a>
<a name="index-voiceOne-1"></a>
<a name="index-_005cvoiceTwo"></a>
<a name="index-_005cvoiceTwo-1"></a>
<a name="index-voiceTwo"></a>
<a name="index-voiceTwo-1"></a>
<a name="index-_005cvoiceThree"></a>
<a name="index-_005cvoiceThree-1"></a>
<a name="index-voiceThree"></a>
<a name="index-voiceThree-1"></a>
<a name="index-_005cvoiceFour"></a>
<a name="index-_005cvoiceFour-1"></a>
<a name="index-voiceFour"></a>
<a name="index-voiceFour-1"></a>
<a name="index-_005coneVoice"></a>
<a name="index-_005coneVoice-1"></a>
<a name="index-oneVoice"></a>
<a name="index-oneVoice-1"></a>
<a name="index-_005cnew-Voice"></a>
<a name="index-_005cnew-Voice-1"></a>
<a name="index-voice-contexts_002c-creating"></a>

<p>Voice contexts can also be created manually
inside a <code>&lt;&lt; &gt;&gt;</code> block to create polyphonic music, using
<code>\voiceOne</code> ... <code>\voiceFour</code> to indicate the required
directions of stems, slurs, etc.  In longer scores this method
is clearer, as it permits the voices to be separated and to be
given more descriptive names.
</p>
<p>Specifically, the construct <code>&lt;&lt; \\ &gt;&gt;</code> which we used in
the previous section:
</p>
<blockquote><pre class="example">\new Staff {
  \relative c' {
    &lt;&lt; { e4 f g a } \\ { c,4 d e f } &gt;&gt;
  }
}
</pre></blockquote>

<p>is equivalent to
</p>
<blockquote><pre class="example">\new Staff &lt;&lt;
  \new Voice = &quot;1&quot; { \voiceOne \relative c' { e4 f g a } }
  \new Voice = &quot;2&quot; { \voiceTwo \relative c' { c4 d e f } }
&gt;&gt;
</pre></blockquote>

<p>Both of the above would produce
</p>
<blockquote><p>
 <a href="d6/lily-ebdb3d8d.ly">
  <img align="middle"
       border="0"
       src="d6/lily-ebdb3d8d.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="index-voices_002c-reverting-to-single"></a>
<a name="index-reverting-to-a-single-voice"></a>

<p>The <code>\voiceXXX</code> commands set the direction of stems, slurs,
ties, articulations, text annotations, augmentation dots of dotted
notes, and fingerings.  <code>\voiceOne</code> and <code>\voiceThree</code>
make these objects point upwards, while <code>\voiceTwo</code> and
<code>\voiceFour</code> make them point downwards.  These commands also
generate a horizontal shift for each voice when this is required
to avoid clashes of note heads.  The command <code>\oneVoice</code>
reverts the settings back to the normal values for a single voice.
</p>
<p>Let us see in some simple examples exactly what effect
<code>\oneVoice</code>, <code>\voiceOne</code> and <code>voiceTwo</code> have on
markup, ties, slurs, and dynamics:
</p>
<blockquote><pre class="verbatim">\relative c'{
  % Default behavior or behavior after \oneVoice
  c d8 ~ d e4 ( f g a ) b-&gt; c
}
</pre><p>
 <a href="a7/lily-5560211f.ly">
  <img align="middle"
       border="0"
       src="a7/lily-5560211f.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<blockquote><pre class="verbatim">\relative c'{
  \voiceOne
  c d8 ~ d e4 ( f g a ) b-&gt; c
  \oneVoice
  c, d8 ~ d e4 ( f g a ) b-&gt; c
}
</pre><p>
 <a href="87/lily-4fec4957.ly">
  <img align="middle"
       border="0"
       src="87/lily-4fec4957.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<blockquote><pre class="verbatim">\relative c'{
  \voiceTwo
  c d8 ~ d e4 ( f g a ) b-&gt; c
  \oneVoice
  c, d8 ~ d e4 ( f g a ) b-&gt; c
}
</pre><p>
 <a href="af/lily-23340491.ly">
  <img align="middle"
       border="0"
       src="af/lily-23340491.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Now let&rsquo;s look at three different ways to notate the same passage
of polyphonic music, each of which is advantageous in different
circumstances, using the example from the previous section.
</p>
<p>An expression that appears directly inside a <code>&lt;&lt; &gt;&gt;</code> belongs
to the main voice (but, note, <strong>not</strong> in a <code>&lt;&lt; \\ &gt;&gt;</code>
construct).  This is useful when extra voices appear while the
main voice is playing.  Here is a more correct rendition of our
example.  The red diamond-shaped notes
demonstrate that the main melody is now in a single voice context,
permitting a phrasing slur to be drawn over them.
</p>
<blockquote><pre class="verbatim">\new Staff \relative c' {
  \voiceOneStyle
  % The following notes are monophonic
  c16^( d e f
  % Start simultaneous section of three voices
  &lt;&lt;
    % Continue the main voice in parallel
    { g4 f e | d2 e2) }
    % Initiate second voice
    \new Voice {
      % Set stems, etc, down
      \voiceTwo
      r8 e4 d c8 ~ | c8 b16 a b8 g ~ g2
    }
    % Initiate third voice
    \new Voice {
      % Set stems, etc, up
      \voiceThree
      s2. | s4 b4 c2
    }
  &gt;&gt;
}
</pre><p>
 <a href="2d/lily-ebc21dd3.ly">
  <img align="middle"
       border="0"
       src="2d/lily-ebc21dd3.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="index-nesting-music-expressions"></a>
<a name="index-nesting-simultaneous-constructs"></a>
<a name="index-nesting-voices"></a>
<a name="index-voices_002c-temporary"></a>
<a name="index-voices_002c-nesting"></a>

<p>More deeply nested polyphony constructs are possible, and if a
voice appears only briefly this might be a more natural way to
typeset the music:
</p>
<blockquote><pre class="verbatim">\new Staff \relative c' {
  c16^( d e f
  &lt;&lt;
    { g4 f e | d2 e2) }
    \new Voice {
      \voiceTwo
      r8 e4 d c8 ~ |
      &lt;&lt;
        {c8 b16 a b8 g ~ g2}
        \new Voice {
          \voiceThree
          s4 b4 c2
        }
      &gt;&gt;
    }
  &gt;&gt;
}
</pre><p>
 <a href="1c/lily-5cae8f99.ly">
  <img align="middle"
       border="0"
       src="1c/lily-5cae8f99.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="index-spacing-notes"></a>

<p>This method of nesting new voices briefly is useful
when only small sections of the music
are polyphonic, but when the whole staff is largely polyphonic
it can be clearer to use multiple voices throughout, using
spacing notes to step over sections where the voice is silent,
as here:
</p>
<blockquote><pre class="verbatim">\new Staff \relative c' &lt;&lt;
  % Initiate first voice
  \new Voice {
    \voiceOne
    c16^( d e f g4 f e | d2 e2) |
  }
  % Initiate second voice
  \new Voice {
    % Set stems, etc, down
    \voiceTwo
    s4 r8 e4 d c8 ~ | c8 b16 a b8 g ~ g2 |
  }
  % Initiate third voice
  \new Voice {
    % Set stems, etc, up
    \voiceThree
    s1 | s4 b4 c2 |
  }
&gt;&gt;
</pre><p>
 <a href="48/lily-61fff348.ly">
  <img align="middle"
       border="0"
       src="48/lily-61fff348.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="Note-columns"></a>
<h4 class="subsubheading">Note columns</h4>

<a name="index-note-column"></a>
<a name="index-note-collisions"></a>
<a name="index-collisions_002c-notes"></a>
<a name="index-shift-commands"></a>
<a name="index-_005cshiftOff"></a>
<a name="index-_005cshiftOff-1"></a>
<a name="index-shiftOff"></a>
<a name="index-shiftOff-1"></a>
<a name="index-_005cshiftOn"></a>
<a name="index-_005cshiftOn-1"></a>
<a name="index-shiftOn"></a>
<a name="index-shiftOn-1"></a>
<a name="index-_005cshiftOnn"></a>
<a name="index-_005cshiftOnn-1"></a>
<a name="index-shiftOnn"></a>
<a name="index-shiftOnn-1"></a>
<a name="index-_005cshiftOnnn"></a>
<a name="index-_005cshiftOnnn-1"></a>
<a name="index-shiftOnnn"></a>
<a name="index-shiftOnnn-1"></a>

<p>Closely spaced notes in a chord, or notes occurring at the same
time in different voices, are arranged in two, occasionally more,
columns to prevent the note heads overlapping.  These are called
note columns.  There are separate columns for each voice, and
the currently specified voice-dependent shift is applied to the
note column if there would otherwise be a collision.  This can
be seen in the example above.  In bar 2 the C in voice two is
shifted to the right relative to the D in voice one, and in the
final chord the C in voice three is also shifted to the right
relative to the other notes.
</p>
<p>The <code>\shiftOn</code>, <code>\shiftOnn</code>, <code>\shiftOnnn</code>, and
<code>\shiftOff</code> commands specify the degree to which notes and
chords of the voice should be shifted if a collision
would otherwise occur. By default, the outer voices (normally
voices one and two) have <code>\shiftOff</code> specified, while the
inner voices (three and four) have <code>\shiftOn</code> specified.
When a shift is applied, voices one and three are shifted to
the right and voices two and four to the left.
</p>
<p><code>\shiftOnn</code> and <code>\shiftOnnn</code> define further shift
levels which may be specified temporarily to resolve collisions
in complex situations &ndash; see <a href="#Real-music-example">Real music example</a>.
</p>
<p>A note column can contain just one note (or chord) from a voice
with stems up and one note (or chord) from a voice with stems
down.  If notes from two voices which have their stems in the
same direction are placed at the same position and both voices
have no shift or the same shift specified, the error message
&ldquo;Too many clashing note columns&rdquo; will be produced.
</p>

<a name="See-also-22"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference: <a name="index-Multiple-voices-1"></a>
<a href="lilypond-big-page.html#Multiple-voices">Multiple voices</a>.
</p>

<hr size="6">
<a name="Voices-and-vocals"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Fundamental-concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tweaking-output" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Explicitly-instantiating-voices" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Explicitly instantiating voices&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Voices-contain-music" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Voices contain music&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Contexts-and-engravers" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts and engravers &gt; </a>]</td></tr></table>
<a name="Voices-and-vocals"></a>
<h3 class="subsection">3.2.3 Voices and vocals</h3>

<p>Vocal music presents a special difficulty: we need to combine two
expressions &ndash; notes and lyrics.
</p>
<a name="index-_005cnew-Lyrics"></a>
<a name="index-_005cnew-Lyrics-1"></a>
<a name="index-_005clyricsto"></a>
<a name="index-_005clyricsto-1"></a>
<a name="index-lyricsto"></a>
<a name="index-lyricsto-1"></a>
<a name="index-Lyrics-2"></a>
<a name="index-Lyrics-3"></a>
<a name="index-Lyrics-context_002c-creating"></a>
<a name="index-lyrics_002c-linking-to-voice"></a>

<p>You have already seen the <code>\addlyrics{}</code> command, which
handles simple scores well.  However, this technique is
quite limited.  For more complex music, you must introduce the
lyrics in a <code>Lyrics</code> context using <code>\new Lyrics</code> and
explicitly link
the lyrics to the notes with <code>\lyricsto{}</code>, using the
name assigned to the Voice.
</p>
<blockquote><pre class="verbatim">&lt;&lt;
  \new Voice = &quot;one&quot; \relative c'' {
    \autoBeamOff
    \time 2/4
    c4 b8. a16 g4. f8 e4 d c2
  }
  \new Lyrics \lyricsto &quot;one&quot; {
    No more let sins and sor -- rows grow.
  }
&gt;&gt;
</pre><p>
 <a href="18/lily-39e03c61.ly">
  <img align="middle"
       border="0"
       src="18/lily-39e03c61.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Note that the lyrics must be linked to a <code>Voice</code> context,
<em>not</em> a <code>Staff</code> context.  This is a case where it is
necessary to create <code>Staff</code> and <code>Voice</code> contexts
explicitly.
</p>
<a name="index-lyrics-and-beaming"></a>
<a name="index-beaming-and-lyrics"></a>
<a name="index-_005cautoBeamOff-2"></a>
<a name="index-_005cautoBeamOff-3"></a>
<a name="index-autoBeamOff-2"></a>
<a name="index-autoBeamOff-3"></a>

<p>The automatic beaming which LilyPond uses by default works well
for instrumental music, but not so well for music with lyrics,
where beaming is either not required at all or is used to indicate
melismata in the lyrics.  In the example above we use the command
<code>\autoBeamOff</code> to turn off the automatic beaming.
</p>
<a name="index-_005cnew-ChoirStaff"></a>
<a name="index-_005cnew-ChoirStaff-1"></a>
<a name="index-ChoirStaff-2"></a>
<a name="index-ChoirStaff-3"></a>
<a name="index-_005clyricmode"></a>
<a name="index-_005clyricmode-1"></a>
<a name="index-lyricmode"></a>
<a name="index-lyricmode-1"></a>
<a name="index-vocal-score-structure"></a>
<a name="index-choir-staff-1"></a>

<p>Let us reuse the earlier example from Judas Maccabæus to
illustrate this more flexible technique.  We first recast
it to use variables so the music and lyrics can be separated
from the staff structure.  We also introduce a ChoirStaff
bracket.  The lyrics themselves must be introduced with
<code>\lyricmode</code> to ensure they are interpreted as lyrics
rather than music.
</p>
<blockquote><pre class="verbatim">global = { \time 6/8 \partial 8 \key f \major}
SopOneMusic = \relative c'' {
  c8 | c([ bes)] a a([ g)] f | f'4. b, | c4.~ c4 }
SopTwoMusic = \relative c' {
  r8 | r4. r4 c8 | a'([ g)] f f([ e)] d | e([ d)] c bes' }
SopOneLyrics = \lyricmode {
  Let | flee -- cy flocks the | hills a -- dorn, __ }
SopTwoLyrics = \lyricmode {
  Let | flee -- cy flocks the | hills a -- dorn, }

\score {
  \new ChoirStaff &lt;&lt;
    \new Staff &lt;&lt;
      \new Voice = &quot;SopOne&quot; {
        \global
        \SopOneMusic
      }
      \new Lyrics \lyricsto &quot;SopOne&quot; {
        \SopOneLyrics
      }
    &gt;&gt;
    \new Staff &lt;&lt;
      \new Voice = &quot;SopTwo&quot; {
        \global
        \SopTwoMusic
      }
      \new Lyrics \lyricsto &quot;SopTwo&quot; {
        \SopTwoLyrics
      }
    &gt;&gt;
  &gt;&gt;
}
</pre><p>
 <a href="43/lily-6f4805f7.ly">
  <img align="middle"
       border="0"
       src="43/lily-6f4805f7.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>This is the basic structure of all vocal scores.  More staves may be
added as required, more voices may be added to the staves, more verses
may be added to the lyrics, and the variables containing the music can
easily be placed in separate files should they become too long.
</p>
<a name="index-hymn-structure"></a>
<a name="index-SATB-structure"></a>
<a name="index-vocal-scores-with-multiple-verses"></a>
<a name="index-multiple-vocal-verses"></a>
<a name="index-verses_002c-multiple-vocal"></a>

<p>Here is an example of the first line of a hymn with four
verses, set for SATB.  In this case the words for all four
parts are the same.  Note how we use variables to separate the
music notation and words from the staff structure.  See too
how a variable, which we have chosen to call &lsquo;TimeKey&rsquo;, is used
to hold several commands for use within the two staves.  In other
examples this is often called &lsquo;global&rsquo;.
</p>
<blockquote><pre class="verbatim">TimeKey = { \time 4/4 \partial 4 \key c \major}
SopMusic   = \relative c' { c4 | e4. e8 g4  g  | a a g }
AltoMusic  = \relative c' { c4 | c4. c8 e4  e  | f f e }
TenorMusic = \relative c  { e4 | g4. g8 c4. b8 | a8 b c d e4 }
BassMusic  = \relative c  { c4 | c4. c8 c4  c  | f8 g a b c4 }
VerseOne   = \lyricmode {
  E -- | ter -- nal fa -- ther, | strong to save, }
VerseTwo   = \lyricmode {
  O | Christ, whose voice the | wa -- ters heard, }
VerseThree = \lyricmode {
  O | Ho -- ly Spi -- rit, | who didst brood }
VerseFour  = \lyricmode {
  O | Tri -- ni -- ty of | love and pow'r }

\score {
  \new ChoirStaff &lt;&lt;
    \new Staff &lt;&lt;
      \clef &quot;treble&quot;
      \new Voice = &quot;Sop&quot;  { \voiceOne \TimeKey \SopMusic }
      \new Voice = &quot;Alto&quot; { \voiceTwo \AltoMusic }
      \new Lyrics \lyricsto &quot;Sop&quot; { \VerseOne   }
      \new Lyrics \lyricsto &quot;Sop&quot; { \VerseTwo   }
      \new Lyrics \lyricsto &quot;Sop&quot; { \VerseThree }
      \new Lyrics \lyricsto &quot;Sop&quot; { \VerseFour  }
    &gt;&gt;
    \new Staff &lt;&lt;
      \clef &quot;bass&quot;
      \new Voice = &quot;Tenor&quot; { \voiceOne \TimeKey \TenorMusic }
      \new Voice = &quot;Bass&quot;  { \voiceTwo \BassMusic  }
    &gt;&gt;
  &gt;&gt;
}
</pre><p>
 <a href="38/lily-af8d5bef.ly">
  <img align="middle"
       border="0"
       src="38/lily-af8d5bef.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="index-verse-and-refrain"></a>

<p>We end with an example to show how we might code a solo verse which
continues into a two-part refrain in two staves.  The
positioning of the sequential and simultaneous sections to achieve
this within a single score is quite tricky, so follow the
explanation carefully!
</p>
<p>Let&rsquo;s start with a score block containing a <code>ChoirStaff</code>, as
we would like the brace to appear at the start of the chorus.
Normally you would need angle brackets after <code>\new ChoirStaff</code>
to bring in all the staves in parallel, but here we want to
defer the parallelism during the solo so we use braces, although
angle brackets here wouldn&rsquo;t hurt.  Inside the <code>ChoirStaff</code> we
want first the staff which will contain the verse.  This must
contain notes and lyrics in parallel, so here we need angle
brackets around the <code>\new Voice</code> and <code>\new Lyrics</code> to
start them at the same time:
</p>
<blockquote><pre class="verbatim">versenotes = \relative c'' {
  \clef &quot;treble&quot;
  \key g \major
  \time 3/4 g g g b b b
}
versewords = \lyricmode {
  One two three four five six
}
\score {
  \new ChoirStaff {
    \new Staff &lt;&lt;
      \new Voice = &quot;verse&quot; {
        \versenotes \break
      }
      \new Lyrics \lyricsto verse {
        \versewords
      }
    &gt;&gt;
  }
}
</pre><p>
 <a href="1c/lily-0c38bed1.ly">
  <img align="middle"
       border="0"
       src="1c/lily-0c38bed1.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>That gives the verse line.
</p>
<p>Now we want to continue with refrainA on the same staff while a
second staff is introduced in parallel with it for refrainB, so
this is a parallel section which must be positioned immediately
following the <code>\break</code> in the verse Voice.  Yes, <em>within</em>
the verse Voice!  Here&rsquo;s that parallel section.  More staves
could be introduced here in the same way.
</p>
<blockquote><pre class="example">&lt;&lt;
  \refrainnotesA
  \new Lyrics \lyricsto verse {
    \refrainwordsA
  }
  \new Staff &lt;&lt;
    \new Voice = &quot;refrainB&quot; {
      \refrainnotesB
    }
    \new Lyrics \lyricsto &quot;refrainB&quot; {
      \refrainwordsB
    }
  &gt;&gt;
&gt;&gt;
</pre></blockquote>

<p>Here&rsquo;s the final result with two staves in the chorus showing
how the parallel section is positioned within the verse Voice:
</p>
<blockquote><pre class="verbatim">versenotes = \relative c'' {
  \clef &quot;treble&quot;
  \key g \major
  \time 3/4 g g g b b b
}
refrainnotesA = \relative c'' {
  \time 2/4
  c c g g \bar &quot;|.&quot;
}
refrainnotesB = \relative c {
  \clef &quot;bass&quot;
  \key g \major
  c e d d
}
versewords = \lyricmode {
  One two three four five six
}
refrainwordsA = \lyricmode {
  la la la la
}
refrainwordsB = \lyricmode {
  dum dum dum dum
}
\score {
  \new ChoirStaff {
    \new Staff &lt;&lt;
      \new Voice = &quot;verse&quot; {
        \versenotes \break
        &lt;&lt;
          \refrainnotesA
          \new Lyrics \lyricsto &quot;verse&quot; {
            \refrainwordsA
          }
          \new Staff &lt;&lt;
            \new Voice = &quot;refrainB&quot; {
              \refrainnotesB
            }
            \new Lyrics \lyricsto &quot;refrainB&quot; {
              \refrainwordsB
            }
          &gt;&gt;
        &gt;&gt;
      }
      \new Lyrics \lyricsto &quot;verse&quot; {
        \versewords
      }
    &gt;&gt;
  }
}
</pre><p>
 <a href="b3/lily-caccdb0d.ly">
  <img align="middle"
       border="0"
       src="b3/lily-caccdb0d.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="index-book_002c-example-of-using"></a>
<a name="index-_005cbook-4"></a>
<a name="index-_005cbook-5"></a>
<a name="index-book-5"></a>
<a name="index-book-6"></a>

<p>However, although this is an interesting and useful exercise to
help you to understand how sequential and simultaneous blocks work,
in practice one would perhaps choose to code this as two
<code>\score</code> blocks within an implicit <code>\book</code> block, as
follows:
</p>
<blockquote><pre class="verbatim">versenotes = \relative c'' {
  \clef &quot;treble&quot;
  \key g \major
  \time 3/4 g g g b b b
}
refrainnotesA = \relative c'' {
  \time 2/4
  c c g g \bar &quot;|.&quot;
}
refrainnotesB = \relative c {
  \clef &quot;bass&quot;
  \key g \major
  c e d d
}
versewords = \lyricmode {
  One two three four five six
}
refrainwordsA = \lyricmode {
  la la la la
}
refrainwordsB = \lyricmode {
  dum dum dum dum
}
\score {
  \new Staff &lt;&lt;
    \new Voice = &quot;verse&quot; {
      \versenotes
    }
    \new Lyrics \lyricsto &quot;verse&quot; {
      \versewords
    }
  &gt;&gt;
}

\score {
  \new ChoirStaff &lt;&lt;
    \new Staff &lt;&lt;
      \new Voice = &quot;refrainA&quot; {
        \refrainnotesA
      }
      \new Lyrics \lyricsto &quot;refrainA&quot; {
        \refrainwordsA
      }
    &gt;&gt;
    \new Staff &lt;&lt;
      \new Voice = &quot;refrainB&quot; {
        \refrainnotesB
      }
      \new Lyrics \lyricsto &quot;refrainB&quot; {
        \refrainwordsB
      }
    &gt;&gt;
  &gt;&gt;
}
</pre><p>
 <a href="46/lily-f38529dd.ly">
  <img align="middle"
       border="0"
       src="46/lily-f38529dd.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<a name="See-also-24"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference: <a name="index-Vocal-music-2"></a>
<a href="lilypond-big-page.html#Vocal-music">Vocal music</a>.
</p>

<hr size="6">
<a name="Contexts-and-engravers"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Fundamental-concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tweaking-output" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Voices-and-vocals" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Voices and vocals&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Fundamental-concepts" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Contexts-explained" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Contexts explained &gt; </a>]</td></tr></table>
<a name="Contexts-and-engravers"></a>
<h2 class="section">3.3 Contexts and engravers</h2>

<p>Contexts and engravers have been mentioned informally
in earlier sections; we now must look at
these concepts in more detail, as they are important
in the fine-tuning of LilyPond output.
</p>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Contexts-explained" accesskey="1">3.3.1 Contexts explained</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Creating-contexts" accesskey="2">3.3.2 Creating contexts</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Engravers-explained" accesskey="3">3.3.3 Engravers explained</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Modifying-context-properties" accesskey="4">3.3.4 Modifying context properties</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Adding-and-removing-engravers" accesskey="5">3.3.5 Adding and removing engravers</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Contexts-explained"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Fundamental-concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tweaking-output" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Contexts-and-engravers" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Creating-contexts" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Creating contexts &gt; </a>]</td></tr></table>
<a name="Contexts-explained"></a>
<h3 class="subsection">3.3.1 Contexts explained</h3>

<a name="index-contexts-explained"></a>

<p>When music is printed, many notational elements which do not
appear explicitly in the input file must be added to the
output.  For example, compare the input and output of the
following example:
</p>
<blockquote><pre class="verbatim">cis4 cis2. g4
</pre><p>
 <a href="4e/lily-08769236.ly">
  <img align="middle"
       border="0"
       src="4e/lily-08769236.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The input is rather sparse, but in the output, bar lines,
accidentals, clef, and time signature have been added.  When
LilyPond <em>interprets</em> the input the musical information
is inspected in time order, similar to reading a score from left
to right.  While reading the input, the program remembers where
measure boundaries are, and which pitches require explicit
accidentals.  This information must be held on several levels.
For example, the effect of an accidental is limited
to a single staff, while a bar line must be synchronized across
the entire score.
</p>
<p>Within LilyPond, these rules and bits of information are grouped in
<em>Contexts</em>.  We have already met the <code>Voice</code> context.
Others are the <code>Staff</code> and <code>Score</code> contexts.  Contexts are
hierarchical to reflect the hierarchical nature of a musical score.
For example: a <code>Staff</code> context can contain many <code>Voice</code>
contexts, and a <code>Score</code> context can contain many <code>Staff</code>
contexts.
</p>
<blockquote><img src="context-example.png" alt="context-example">
</blockquote>

<p>Each context has the responsibility for enforcing some notation rules,
creating some notation objects and maintaining the associated
properties.  For example, the <code>Voice</code> context may introduce an
accidental and then the <code>Staff</code> context maintains the rule to
show or suppress the accidental for the remainder of the measure.
</p>
<p>As another example, the synchronization of bar lines is, by default,
handled in the <code>Score</code> context.
However, in some music we may not want the bar lines to be
synchronized &ndash; consider a polymetric score in 4/4 and 3/4 time.
In such cases, we must modify the default settings of the
<code>Score</code> and <code>Staff</code> contexts.
</p>
<p>For very simple scores, contexts are created implicitly, and you need
not be aware of them.  For larger pieces, such as anything with more
than one staff, they must be
created explicitly to make sure that you get as many staves as you
need, and that they are in the correct order.  For typesetting pieces
with specialized notation, it is usual to modify existing, or
even to define totally new, contexts.
</p>
<p>In addition to the <code>Score,</code> <code>Staff</code> and
<code>Voice</code> contexts there are contexts which fit between
the score and staff levels to control staff groups, such as the
<code>PianoStaff</code> and <code>ChoirStaff</code> contexts.  There
are also alternative staff and voice contexts, and contexts for
lyrics, percussion, fret boards, figured bass, etc.
</p>
<p>The names of all context types are formed from one or more
words, each word being capitalized and joined immediately to the
preceding word with no hyphen or underscore, e.g.,
<code>GregorianTranscriptionStaff</code>.
</p>

<a name="See-also-6"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference: <a name="index-Contexts-explained"></a>
<a href="lilypond-big-page.html#Contexts-explained">Contexts explained</a>.
</p>

<hr size="6">
<a name="Creating-contexts"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Fundamental-concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tweaking-output" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Contexts-explained" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Contexts explained&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Engravers-explained" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Engravers explained &gt; </a>]</td></tr></table>
<a name="Creating-contexts"></a>
<h3 class="subsection">3.3.2 Creating contexts</h3>

<a name="index-_005cnew-2"></a>
<a name="index-_005cnew-3"></a>
<a name="index-new-2"></a>
<a name="index-new-3"></a>
<a name="index-new-contexts"></a>
<a name="index-creating-contexts"></a>
<a name="index-contexts_002c-creating"></a>

<p>There can be only one top level context: the <code>Score</code> context.
This is created with the <code>\score</code> command, or, in simple scores,
it is created automatically.
</p>
<p>For scores with only one voice and one staff, the <code>Voice</code> and
<code>Staff</code> contexts may be left to be created automatically, but for
more complex scores it is necessary to create them by hand.  The
simplest command that does this is <code>\new</code>.  It is prepended to a
music expression, for example
</p>
<blockquote><pre class="example">\new <var>type</var> <var>music-expression</var>
</pre></blockquote>

<p>where <var>type</var> is a context name (like <code>Staff</code> or
<code>Voice</code>).  This command creates a new context, and starts
interpreting the <var>music-expression</var> within that context.
</p>
<p>Note that there is no <code>\new Score</code> command;
the single top-level <code>Score</code> context is introduced
with <code>\score</code>.
</p>
<p>You have seen many practical examples which created new
<code>Staff</code> and <code>Voice</code> contexts in earlier sections, but
to remind you how these commands are used in practice, here&rsquo;s an
annotated real-music example:
</p>
<blockquote><pre class="verbatim">\score {  % start of single compound music expression
  &lt;&lt;  % start of simultaneous staves section
    \time 2/4
    \new Staff {  % create RH staff
      \key g \minor
      \clef &quot;treble&quot;
      \new Voice {  % create voice for RH notes
        \relative c'' {  % start of RH notes
          d4 ees16 c8. |
          d4 ees16 c8. |
        }  % end of RH notes
      }  % end of RH voice
    }  % end of RH staff
    \new Staff &lt;&lt;  % create LH staff; needs two simultaneous voices
      \key g \minor
      \clef &quot;bass&quot;
      \new Voice {  % create LH voice one
        \voiceOne
        \relative g {  % start of LH voice one notes
          g8 &lt;bes d&gt; ees, &lt;g c&gt; |
          g8 &lt;bes d&gt; ees, &lt;g c&gt; |
        }  % end of LH voice one notes
      }  % end of LH voice one
      \new Voice {  % create LH voice two
        \voiceTwo
        \relative g {  % start of LH voice two notes
          g4 ees |
          g4 ees |
        }  % end of LH voice two notes
      }  % end of LH voice two
    &gt;&gt;  % end of LH staff
  &gt;&gt;  % end of simultaneous staves section
}  % end of single compound music expression
</pre><p>
 <a href="ca/lily-ddd35409.ly">
  <img align="middle"
       border="0"
       src="ca/lily-ddd35409.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>(Note how all the statements which open a block with either a
curly bracket, <code>{</code>, or double angle brackets, <code>&lt;&lt;</code>,
are indented by two further spaces, and the corresponding
closing bracket is indented by exactly the same amount.  While
this is not required, following this practice will greatly
reduce the number of &lsquo;unmatched bracket&rsquo; errors, and is
strongly recommended.  It enables the structure of the music to
be seen at a glance, and any unmatched brackets will be obvious.
Note too how the LH staff is created using double angle brackets
because it requires two voices for its music, whereas the RH staff
is created with a single music expression surrounded by curly
brackets because it requires only one voice.)
</p>
<a name="index-contexts_002c-naming"></a>
<a name="index-naming-contexts"></a>

<p>The <code>\new</code> command may also give a identifying name to the
context to distinguish it from other contexts of the same type,
</p>
<blockquote><pre class="example">\new <var>type</var> = <var>id</var> <var>music-expression</var>
</pre></blockquote>

<p>Note the distinction between the name of the context type,
<code>Staff</code>, <code>Voice</code>, etc, and the identifying name of a
particular instance of that type, which can be any sequence of letters
invented by the user.  Digits and spaces can also be used in the
identifying name, but then it has to be placed in quotes,
i.e. <code>\new Staff = &quot;MyStaff 1&quot; <var>music-expression</var></code>.
The identifying name is used to
refer back to that particular instance of a context.  We saw this in
use in the section on lyrics, see <a href="#Voices-and-vocals">Voices and vocals</a>.
</p>

<a name="See-also-19"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference: <a name="index-Creating-contexts"></a>
<a href="lilypond-big-page.html#Creating-contexts">Creating contexts</a>.
</p>

<hr size="6">
<a name="Engravers-explained"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Fundamental-concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tweaking-output" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Creating-contexts" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Creating contexts&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Modifying-context-properties" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Modifying context properties &gt; </a>]</td></tr></table>
<a name="Engravers-explained"></a>
<h3 class="subsection">3.3.3 Engravers explained</h3>

<a name="index-engravers"></a>

<p>Every mark on the printed output of a score produced by LilyPond
is produced by an <code>Engraver</code>.  Thus there is an engraver
to print staves, one to print note heads, one for stems, one for
beams, etc, etc.  In total there are over 120 such engravers!
Fortunately, for most scores it is not necessary to know about
more than a few, and for simple scores you do not need to know
about any.
</p>
<p>Engravers live and operate in Contexts.  Engravers such as the
<code>Metronome_mark_engraver</code>, whose action and output apply to the
score as a whole, operate in the highest level context &ndash; the
<code>Score</code> context.
</p>
<p>The <code>Clef_engraver</code> and <code>Key_engraver</code> are to be
found in every <code>Staff</code> Context, as different staves may require
different clefs and keys.
</p>
<p>The <code>Note_heads_engraver</code> and <code>Stem_engraver</code> live
in every <code>Voice</code> context, the lowest level context of all.
</p>
<p>Each engraver processes the particular objects associated
with its function, and maintains the properties that relate
to that function.  These properties, like the properties
associated with contexts, may be modified to change the
operation of the engraver or the appearance of those elements
in the printed score.
</p>
<p>Engravers all have compound names formed from words which
describe their function.  Just the first word is capitalized,
and the remainder are joined to it with underscores.  Thus
the <code>Staff_symbol_engraver</code> is responsible for creating the
lines of the staff, the <code>Clef_engraver</code> determines and sets
the pitch reference point on the staff by drawing a clef symbol.
</p>
<p>Here are some of the most common engravers together with their
function.  You will see it is usually easy to guess the function
from the name, or vice versa.
</p>
<table>
<thead><tr><th width="30%"><p> Engraver
  </p></th><th width="70%"><p> Function
</p></th></tr></thead>
<tr><td width="30%"><p> Accidental_engraver
  </p></td><td width="70%"><p> Makes accidentals, cautionary and suggested accidentals
</p></td></tr>
<tr><td width="30%"><p> Beam_engraver
  </p></td><td width="70%"><p> Engraves beams
</p></td></tr>
<tr><td width="30%"><p> Clef_engraver
  </p></td><td width="70%"><p> Engraves clefs
</p></td></tr>
<tr><td width="30%"><p> Completion_heads_engraver
  </p></td><td width="70%"><p> Splits notes which cross bar lines
</p></td></tr>
<tr><td width="30%"><p> New_dynamic_engraver
  </p></td><td width="70%"><p> Creates hairpins and dynamic texts
</p></td></tr>
<tr><td width="30%"><p> Forbid_line_break_engraver
  </p></td><td width="70%"><p> Prevents line breaks if a musical element is still active
</p></td></tr>
<tr><td width="30%"><p> Key_engraver
  </p></td><td width="70%"><p> Creates the key signature
</p></td></tr>
<tr><td width="30%"><p> Metronome_mark_engraver
  </p></td><td width="70%"><p> Engraves metronome marking
</p></td></tr>
<tr><td width="30%"><p> Note_heads_engraver
  </p></td><td width="70%"><p> Engraves note heads
</p></td></tr>
<tr><td width="30%"><p> Rest_engraver
  </p></td><td width="70%"><p> Engraves rests
</p></td></tr>
<tr><td width="30%"><p> Staff_symbol_engraver
  </p></td><td width="70%"><p> Engraves the five (by default) lines of the staff
</p></td></tr>
<tr><td width="30%"><p> Stem_engraver
  </p></td><td width="70%"><p> Creates stems and single-stem tremolos
</p></td></tr>
<tr><td width="30%"><p> Time_signature_engraver
  </p></td><td width="70%"><p> Creates time signatures
</p></td></tr>
</table>

<br>

<p>We shall see later how the output of LilyPond can be changed
by modifying the action of Engravers.
</p>

<a name="See-also-8"></a>
<h4 class="subsubheading">See also</h4>
<p>Internals reference: <a name="index-Engravers-and-Performers"></a>
<a href="lilypond-internals-big-page.html#Engravers-and-Performers">Engravers and Performers</a>.
</p>

<hr size="6">
<a name="Modifying-context-properties"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Fundamental-concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tweaking-output" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Engravers-explained" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Engravers explained&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Adding-and-removing-engravers" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Adding and removing engravers &gt; </a>]</td></tr></table>
<a name="Modifying-context-properties"></a>
<h3 class="subsection">3.3.4 Modifying context properties</h3>

<a name="index-context-properties"></a>
<a name="index-context-properties_002c-modifying"></a>
<a name="index-modifying-context-properties"></a>
<a name="index-_005cset"></a>
<a name="index-_005cset-1"></a>
<a name="index-set"></a>
<a name="index-set-1"></a>
<a name="index-_005cunset"></a>
<a name="index-_005cunset-1"></a>
<a name="index-unset"></a>
<a name="index-unset-1"></a>

<p>Contexts are responsible for holding the values of a number of
context <em>properties</em>.  Many of them can be changed to
influence the interpretation of the input and so change the
appearance of the output.  They are changed by the
<code>\set</code> command.  This takes the form
</p>
<blockquote><pre class="example">\set <em>ContextName</em>.<em>propertyName</em> = #<em>value</em>
</pre></blockquote>

<p>Where the <em>ContextName</em> is usually <code>Score</code>,
<code>Staff</code> or <code>Voice</code>.  It may be omitted,
in which case <code>Voice</code> is assumed.
</p>
<p>The names of context properties consist of words joined
together with no hyphens or underscores, all except the
first having a capital letter.  Here are a few examples
of some commonly used ones.  There are many more.
</p>
<table>
<thead><tr><th width="25%"><p> propertyName
  </p></th><th width="15%"><p> Type
  </p></th><th width="45%"><p> Function
  </p></th><th width="15%"><p> Example Value
</p></th></tr></thead>
<tr><td width="25%"><p> extraNatural
  </p></td><td width="15%"><p> Boolean
  </p></td><td width="45%"><p> If true, set extra natural signs before accidentals
  </p></td><td width="15%"><p> <code>#t</code>, <code>#f</code>
</p></td></tr>
<tr><td width="25%"><p> currentBarNumber
  </p></td><td width="15%"><p> Integer
  </p></td><td width="45%"><p> Set the current bar number
  </p></td><td width="15%"><p> <code>50</code>
</p></td></tr>
<tr><td width="25%"><p> doubleSlurs
  </p></td><td width="15%"><p> Boolean
  </p></td><td width="45%"><p> If true, print slurs both above and below notes
  </p></td><td width="15%"><p> <code>#t</code>, <code>#f</code>
</p></td></tr>
<tr><td width="25%"><p> instrumentName
  </p></td><td width="15%"><p> Text
  </p></td><td width="45%"><p> Set the name to be placed at the start of the staff
  </p></td><td width="15%"><p> <code>&quot;Cello I&quot;</code>
</p></td></tr>
<tr><td width="25%"><p> fontSize
  </p></td><td width="15%"><p> Real
  </p></td><td width="45%"><p> Increase or decrease the font size
  </p></td><td width="15%"><p> <code>2.4</code>
</p></td></tr>
<tr><td width="25%"><p> stanza
  </p></td><td width="15%"><p> Text
  </p></td><td width="45%"><p> Set the text to print before the start of a verse
  </p></td><td width="15%"><p> <code>&quot;2&quot;</code>
</p></td></tr>
</table>

<p>where a Boolean is either True (<code>#t</code>) or False (<code>#f</code>),
an Integer is a positive whole number, a Real is a positive
or negative decimal number, and text is enclosed in double
apostrophes.  Note the occurrence of hash signs,
(<code>#</code>), in two different places &ndash; as part of the Boolean
value before the <code>t</code> or <code>f</code>, and before <em>value</em>
in the <code>\set</code> statement.  So when a Boolean is being
entered you need to code two hash signs, e.g., <code>##t</code>.
</p>
<a name="index-properties-operating-in-contexts"></a>
<a name="index-setting-properties-within-contexts"></a>

<p>Before we can set any of these properties we need to know
in which context they operate.  Sometimes this is obvious,
but occasionally it can be tricky.  If the wrong context
is specified, no error message is produced, but the expected
action will not take place.  For example, the
<code>instrumentName</code> clearly lives in the <code>Staff</code> context, since
it is the staff that is to be named.
In this example the first staff is labelled, but not the second,
because we omitted the context name.
</p>
<blockquote><pre class="verbatim">&lt;&lt;
  \new Staff \relative c'' {
    \set Staff.instrumentName = #&quot;Soprano&quot;
    c4 c
 }
  \new Staff \relative c' {
  \set instrumentName = #&quot;Alto&quot;  % Wrong!
  d4 d
 }
&gt;&gt;
</pre><p>
 <a href="29/lily-9e13c984.ly">
  <img align="middle"
       border="0"
       src="29/lily-9e13c984.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Remember the default context name is <code>Voice</code>, so the second
<code>\set</code> command set the property <code>instrumentName</code> in the
<code>Voice</code> context to &ldquo;Alto&rdquo;, but as LilyPond does not look
for any such property in the <code>Voice</code> context, no
further action took place.  This is not an error, and no error
message is logged in the log file.
</p>
<p>Similarly, if the property name is mis-spelt no error message is
produced, and clearly the expected action cannot be performed.  In
fact, you can set any (fictitious) &lsquo;property&rsquo; using any name you
like in any context that exists by using the <code>\set</code> command.  But
if the name is not known to LilyPond it will not cause any action to
be taken.  Some text editors with special support for LilyPond input
files document property names with bullets when you hover them with
the mouse, like JEdit with LilyPondTool, or highlight unknown property
names differently, like ConTEXT.  If you do not use an editor with
such features, it is recommended to check the property name in the
Internals Reference: see <a name="index-Tunable-context-properties"></a>
<a href="lilypond-internals-big-page.html#Tunable-context-properties">Tunable context properties</a>, or
<a name="index-Contexts-1"></a>
<a href="lilypond-internals-big-page.html#Contexts">Contexts</a>.
</p>
<p>The <code>instrumentName</code> property will take effect only
if it is set in the <code>Staff</code> context, but
some properties can be set in more than one context.
For example, the property <code>extraNatural</code> is by
default set to ##t (true) for all staves.
If it is set to ##f (false) in one particular <code>Staff</code>
context it applies just to the accidentals on that staff.
If it is set to false in the <code>Score</code> context
it applies to all staves.
</p>
<p>So this turns off extra naturals in one staff:
</p>
<blockquote><pre class="verbatim">&lt;&lt;
  \new Staff \relative c'' {
    ais4 aes
 }
  \new Staff \relative c'' {
    \set Staff.extraNatural = ##f
    ais4 aes
 }
&gt;&gt;
</pre><p>
 <a href="5b/lily-d0a3125b.ly">
  <img align="middle"
       border="0"
       src="5b/lily-d0a3125b.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>and this turns them off in all staves:
</p>
<blockquote><pre class="verbatim">&lt;&lt;
  \new Staff \relative c'' {
    ais4 aes
 }
  \new Staff \relative c'' {
    \set Score.extraNatural = ##f
    ais4 aes
 }
&gt;&gt;
</pre><p>
 <a href="c2/lily-ce8468f7.ly">
  <img align="middle"
       border="0"
       src="c2/lily-ce8468f7.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>As another example, if <code>clefOctavation</code> is set in
the <code>Score</code> context this immediately changes the value
of the octavation in all current staves and sets a new default
value which will be applied to all staves.
</p>
<p>The opposite command, <code>\unset</code>, effectively removes the
property from the context, which causes most properties to
revert to their default value.  Usually <code>\unset</code> is not
required as a new <code>\set</code> command will achieve what is
wanted.
</p>
<p>The <code>\set</code> and <code>\unset</code> commands can appear anywhere
in the input file and will take effect from the time they are
encountered until the end of the score or until the property is
<code>\set</code> or <code>\unset</code> again.  Let&rsquo;s try changing the
font size, which affects the size of the note heads (among
other things) several times.  The change is from the default
value, not the most recently set value.
</p>
<blockquote><pre class="verbatim">c4
% make note heads smaller
\set fontSize = #-4
d e
% make note heads larger
\set fontSize = #2.5
f g
% return to default size
\unset fontSize
a b
</pre><p>
 <a href="c7/lily-499a61d2.ly">
  <img align="middle"
       border="0"
       src="c7/lily-499a61d2.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>We have now seen how to set the values of several different types of
property.  Note that integers and numbers are always preceded by a
hash sign, <code>#</code>, while a true or false value is specified by
<code>##t</code> and <code>##f</code>, with two hash signs.  A text property
should be enclosed in double quotation signs, as above, although we
shall see later that text can actually be specified in a much more
general way by using the very powerful <code>markup</code> command.
</p>
<a name="Setting-context-properties-with-_005cwith"></a>
<h4 class="subsubheading">Setting context properties with <code>\with</code></h4>

<a name="index-_005cwith"></a>
<a name="index-_005cwith-1"></a>
<a name="index-with"></a>
<a name="index-with-1"></a>
<a name="index-context-properties_002c-setting-with-_005cwith"></a>

<p>Context properties may also be set at the time the context is
created.  Sometimes this is a clearer way of specifying a
property value if it is to remain fixed for the duration of
the context.  When a context is created with a <code>\new</code>
command it may be followed immediately by a
<code>\with { .. }</code> block in which the property values are
set.  For example, if we wish to suppress the printing of
extra naturals for the duration of a staff we would write:
</p>
<blockquote><pre class="example">\new Staff \with { extraNatural = ##f }
</pre></blockquote>

<p>like this:
</p>
<blockquote><pre class="verbatim">&lt;&lt;
  \new Staff
  \relative c'' {
    gis ges aes ais
  }
  \new Staff \with { extraNatural = ##f }
  \relative c'' {
    gis ges aes ais
  }
&gt;&gt;
</pre><p>
 <a href="7f/lily-609e50dc.ly">
  <img align="middle"
       border="0"
       src="7f/lily-609e50dc.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Properties set in this way may still be changed dynamically using
<code>\set</code> and returned to their default value with <code>\unset</code>.
</p>
<a name="index-fontSize_002c-default-and-setting"></a>

<p>The <code>fontSize</code> property is treated differently.  If this is
set in a <code>\with</code> clause it effectively resets the default
value of the font size.  If it is later changed with <code>\set</code>,
this new default value may be restored with the
<code>\unset fontSize</code> command.
</p>
<a name="Setting-context-properties-with-_005ccontext"></a>
<h4 class="subsubheading">Setting context properties with <code>\context</code></h4>

<a name="index-context-properties_002c-setting-with-_005ccontext"></a>
<a name="index-_005ccontext"></a>
<a name="index-_005ccontext-1"></a>
<a name="index-context-1"></a>
<a name="index-context-2"></a>

<p>The values of context properties may be set in <em>all</em> contexts
of a particular type, such as all <code>Staff</code> contexts, with a single
command.  The context type is identified by using its
type name, like <code>Staff</code>, prefixed by a back-slash: <code>\Staff</code>.
The statement which sets the property value is the same as that in a
<code>\with</code> block, introduced above.  It is placed in a
<code>\context</code> block within a <code>\layout</code> block.  Each
<code>\context</code> block will affect all contexts of the type specified
throughout the <code>\score</code> or <code>\book</code> block in which the
<code>\layout</code> block appears.  Here is a example to show the format:
</p>
<blockquote><pre class="verbatim">\score {
  \new Staff {
    \relative c'' {
      cis4 e d ces
    }
  }
  \layout {
    \context {
      \Staff
      extraNatural = ##t
    }
  }
}
</pre><p>
 <a href="e5/lily-dcb98145.ly">
  <img align="middle"
       border="0"
       src="e5/lily-dcb98145.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Context properties set in this way may be overridden for particular
instances of contexts by statements in a <code>\with</code> block, and by
<code>\set</code> commands embedded in music statements.
</p>

<a name="See-also-20"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference:
<a name="index-Changing-context-default-settings"></a>
<a href="lilypond-big-page.html#Changing-context-default-settings">Changing context default settings</a>.
</p>
<p>Internals Reference:
<a name="index-Contexts-2"></a>
<a href="lilypond-internals-big-page.html#Contexts">Contexts</a>,
<a name="index-Tunable-context-properties-1"></a>
<a href="lilypond-internals-big-page.html#Tunable-context-properties">Tunable context properties</a>.
</p>

<hr size="6">
<a name="Adding-and-removing-engravers"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Fundamental-concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tweaking-output" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Modifying-context-properties" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Modifying context properties&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Contexts-and-engravers" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Contexts and engravers&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Extending-the-templates" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Extending the templates &gt; </a>]</td></tr></table>
<a name="Adding-and-removing-engravers"></a>
<h3 class="subsection">3.3.5 Adding and removing engravers</h3>

<a name="index-engravers_002c-adding"></a>
<a name="index-adding-engravers"></a>
<a name="index-engravers_002c-removing"></a>
<a name="index-removing-engravers"></a>

<a name="index-_005cconsists"></a>
<a name="index-_005cconsists-1"></a>
<a name="index-consists"></a>
<a name="index-consists-1"></a>
<a name="index-_005cremove"></a>
<a name="index-_005cremove-1"></a>
<a name="index-remove"></a>
<a name="index-remove-1"></a>

<p>We have seen that contexts each contain several engravers, each
of which is responsible for producing a particular part of the
output, like bar lines, staves, note heads, stems, etc.  If an
engraver is removed from a context, it can no longer produce its
output.  This is a crude way of modifying the output, but it
can sometimes be useful.
</p>
<a name="Changing-a-single-context"></a>
<h4 class="subsubheading">Changing a single context</h4>

<p>To remove an engraver from a single context we use the
<code>\with</code> command placed immediately after the context creation
command, as in the previous section.
</p>
<p>As an illustration, let&rsquo;s repeat an example from the previous section
with the staff lines removed.  Remember that the staff lines are
produced by the <code>Staff_symbol_engraver</code>.
</p>
<blockquote><pre class="verbatim">\new Staff \with {
  \remove Staff_symbol_engraver
}
\relative c' {
  c4
  \set fontSize = #-4  % make note heads smaller
  d e
  \set fontSize = #2.5  % make note heads larger
  f g
  \unset fontSize  % return to default size
  a b
}
</pre><p>
 <a href="d6/lily-4e513b79.ly">
  <img align="middle"
       border="0"
       src="d6/lily-4e513b79.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="index-ambitus-engraver"></a>

<p>Engravers can also be added to individual contexts.
The command to do this is
</p>
<p><code>\consists <var>Engraver_name</var></code>,
</p>
<p>placed inside a <code>\with</code> block.  Some vocal scores have an ambitus
placed at the beginning of a staff to indicate the range of notes in
that staff &ndash; see <a name="index-ambitus"></a>
<a href="music-glossary-big-page.html#ambitus">ambitus</a>.  The ambitus is produced by the
<code>Ambitus_engraver</code>, which is not normally included in any
context.  If we add it to the <code>Voice</code> context, it calculates the
range from that voice only:
</p>
<blockquote><pre class="verbatim">\new Staff &lt;&lt;
  \new Voice \with {
    \consists Ambitus_engraver
  }
  \relative c'' {
    \voiceOne
    c a b g
  }
  \new Voice
  \relative c' {
    \voiceTwo
    c e d f
  }
&gt;&gt;
</pre><p>
 <a href="5a/lily-1a7ef6c3.ly">
  <img align="middle"
       border="0"
       src="5a/lily-1a7ef6c3.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>but if we add the ambitus engraver to the
<code>Staff</code> context, it calculates the range from all
the notes in all the voices on that staff:
</p>
<blockquote><pre class="verbatim">\new Staff \with {
    \consists Ambitus_engraver
  }
  &lt;&lt;
  \new Voice
  \relative c'' {
    \voiceOne
    c a b g
  }
  \new Voice
  \relative c' {
    \voiceTwo
    c e d f
  }
&gt;&gt;
</pre><p>
 <a href="0d/lily-d7b96de6.ly">
  <img align="middle"
       border="0"
       src="0d/lily-d7b96de6.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="Changing-all-contexts-of-the-same-type"></a>
<h4 class="subsubheading">Changing all contexts of the same type</h4>

<a name="index-_005clayout-2"></a>
<a name="index-_005clayout-3"></a>
<a name="index-layout-3"></a>
<a name="index-layout-4"></a>

<p>The examples above show how to remove or add engravers to
individual contexts.  It is also possible to remove or add
engravers to every context of a specific type by placing the
commands in the appropriate context in a <code>\layout</code>
block.  For example, if we wanted to show an ambitus for every
staff in a four-staff score, we could write
</p>
<blockquote><pre class="verbatim">\score {
  &lt;&lt;
    \new Staff &lt;&lt;
      \relative c'' { c a b g }
    &gt;&gt;
    \new Staff &lt;&lt;
      \relative c' { c a b g }
    &gt;&gt;
    \new Staff &lt;&lt;
      \clef &quot;G_8&quot;
      \relative c' { c a b g }
    &gt;&gt;
    \new Staff &lt;&lt;
      \clef &quot;bass&quot;
      \relative c { c a b g }
    &gt;&gt;
  &gt;&gt;
  \layout {
    \context {
      \Staff
      \consists Ambitus_engraver
    }
  }
}
</pre><p>
 <a href="e6/lily-052402f6.ly">
  <img align="middle"
       border="0"
       src="e6/lily-052402f6.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The values of context properties may also be set
for all contexts of a particular type by including the
<code>\set</code> command in a <code>\context</code> block in the
same way.
</p>

<a name="See-also-14"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference: <a name="index-Modifying-context-plug_002dins"></a>
<a href="lilypond-big-page.html#Modifying-context-plug_002dins">Modifying context plug-ins</a>,
<a name="index-Changing-context-default-settings-1"></a>
<a href="lilypond-big-page.html#Changing-context-default-settings">Changing context default settings</a>.
</p>

<hr size="6">
<a name="Extending-the-templates"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Fundamental-concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tweaking-output" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Adding-and-removing-engravers" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Adding and removing engravers&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Fundamental-concepts" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Soprano-and-cello" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Soprano and cello &gt; </a>]</td></tr></table>
<a name="Extending-the-templates"></a>
<h2 class="section">3.4 Extending the templates</h2>

<p>You&rsquo;ve read the tutorial, you know how to write music, you
understand the fundamental concepts.  But how can you
get the staves that you want?  Well, you can find lots of
templates (see <a href="#Templates">Templates</a>) which may give you a start.
But what if you want something that isn&rsquo;t covered there?  Read on.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Soprano-and-cello" accesskey="1">3.4.1 Soprano and cello</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Four_002dpart-SATB-vocal-score" accesskey="2">3.4.2 Four-part SATB vocal score</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Building-a-score-from-scratch" accesskey="3">3.4.3 Building a score from scratch</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Soprano-and-cello"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Fundamental-concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tweaking-output" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Extending-the-templates" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Extending the templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Extending-the-templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Extending the templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Four_002dpart-SATB-vocal-score" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Four-part SATB vocal score &gt; </a>]</td></tr></table>
<a name="Soprano-and-cello"></a>
<h3 class="subsection">3.4.1 Soprano and cello</h3>

<a name="index-template_002c-modifying"></a>
<a name="index-modifying-templates"></a>

<p>Start off with the template that seems closest to what you want to end
up with.  Let&rsquo;s say that you want to write something for soprano and
cello.  In this case, we would start with &lsquo;Notes and lyrics&rsquo; (for the
soprano part).
</p>
<blockquote><pre class="example">\version &quot;2.12.3&quot;
melody = \relative c' {
  \clef treble
  \key c \major
  \time 4/4
  a4 b c d
}

text = \lyricmode {
  Aaa Bee Cee Dee
}

\score {
  &lt;&lt;
    \new Voice = &quot;one&quot; {
      \autoBeamOff
      \melody
    }
    \new Lyrics \lyricsto &quot;one&quot; \text
  &gt;&gt;
  \layout { }
  \midi { }
}
</pre></blockquote>

<p>Now we want to add a cello part.  Let&rsquo;s look at the &lsquo;Notes only&rsquo; example:
</p>
<blockquote><pre class="example">\version &quot;2.12.3&quot;
melody = \relative c' {
  \clef treble
  \key c \major
  \time 4/4
  a4 b c d
}

\score {
  \new Staff \melody
  \layout { }
  \midi { }
}
</pre></blockquote>

<p>We don&rsquo;t need two <code>\version</code> commands.  We&rsquo;ll need the
<code>melody</code> section.  We don&rsquo;t want two <code>\score</code> sections
&ndash; if we had two <code>\score</code>s, we&rsquo;d get the two parts separately.
We want them together, as a duet.  Within the <code>\score</code>
section, we don&rsquo;t need two <code>\layout</code> or <code>\midi</code>.
</p>
<p>If we simply cut and paste the <code>melody</code> section, we would
end up with two <code>melody</code> definitions.  This would not generate
an error, but the second one would be used for both melodies.
So let&rsquo;s rename them to make them distinct.  We&rsquo;ll call the
section for the soprano <code>sopranoMusic</code> and the section for
the cello <code>celloMusic</code>.  While we&rsquo;re doing this, let&rsquo;s rename
<code>text</code> to be <code>sopranoLyrics</code>.  Remember to rename both
instances of all these names &ndash; both the initial definition (the
<code>melody = \relative c' { </code> part) and the name&rsquo;s use (in the
<code>\score</code> section).
</p>
<p>While we&rsquo;re doing this, let&rsquo;s change the cello part&rsquo;s staff &ndash;
celli normally use bass clef.  We&rsquo;ll also give the cello some
different notes.
</p>
<blockquote><pre class="example">\version &quot;2.12.3&quot;
sopranoMusic = \relative c' {
  \clef treble
  \key c \major
  \time 4/4
  a4 b c d
}

sopranoLyrics = \lyricmode {
  Aaa Bee Cee Dee
}

celloMusic = \relative c {
  \clef bass
  \key c \major
  \time 4/4
  d4 g fis8 e d4
}

\score {
  &lt;&lt;
    \new Voice = &quot;one&quot; {
      \autoBeamOff
      \sopranoMusic
    }
    \new Lyrics \lyricsto &quot;one&quot; \sopranoLyrics
  &gt;&gt;
  \layout { }
  \midi { }
}
</pre></blockquote>

<p>This is looking promising, but the cello part won&rsquo;t appear in the
score &ndash; we haven&rsquo;t used it in the <code>\score</code> section.  If we
want the cello part to appear under the soprano part, we need to add
</p>
<blockquote><pre class="example">\new Staff \celloMusic
</pre></blockquote>

<p>underneath the soprano stuff.  We also need to add <code>&lt;&lt;</code> and
<code>&gt;&gt;</code> around the music &ndash; that tells LilyPond that there&rsquo;s
more than one thing (in this case, two <code>Staves</code>) happening
at once.  The <code>\score</code> looks like this now:
</p>
<blockquote><pre class="example">\score {
  &lt;&lt;
  &lt;&lt;
    \new Voice = &quot;one&quot; {
      \autoBeamOff
      \sopranoMusic
    }
    \new Lyrics \lyricsto &quot;one&quot; \sopranoLyrics
  &gt;&gt;
  \new Staff \celloMusic
  &gt;&gt;
  \layout { }
  \midi { }
}
</pre></blockquote>

<p>This looks a bit messy; the indentation is messed up now.  That is
easily fixed.  Here&rsquo;s the complete soprano and cello template.
</p>
<blockquote><blockquote><pre class="example">\version &quot;2.12.3&quot;
</pre></blockquote>
<pre class="verbatim">sopranoMusic = \relative c' {
  \clef treble
  \key c \major
  \time 4/4
  a4 b c d
}

sopranoLyrics = \lyricmode {
  Aaa Bee Cee Dee
}

celloMusic = \relative c {
  \clef bass
  \key c \major
  \time 4/4
  d4 g fis8 e d4
}

\score {
  &lt;&lt;
    &lt;&lt;
      \new Voice = &quot;one&quot; {
        \autoBeamOff
        \sopranoMusic
      }
      \new Lyrics \lyricsto &quot;one&quot; \sopranoLyrics
    &gt;&gt;
    \new Staff \celloMusic
  &gt;&gt;
  \layout { }
  \midi { }
}
</pre><p>
 <a href="7d/lily-265723ce.ly">
  <img align="middle"
       border="0"
       src="7d/lily-265723ce.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<a name="See-also-5"></a>
<h4 class="subsubheading">See also</h4>
<p>The starting templates can be found in the &lsquo;Templates&rsquo; appendix,
see <a href="#Single-staff">Single staff</a>.
</p>

<hr size="6">
<a name="Four_002dpart-SATB-vocal-score"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Fundamental-concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tweaking-output" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Soprano-and-cello" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Soprano and cello&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Extending-the-templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Extending the templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Building-a-score-from-scratch" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Building a score from scratch &gt; </a>]</td></tr></table>
<a name="Four_002dpart-SATB-vocal-score"></a>
<h3 class="subsection">3.4.2 Four-part SATB vocal score</h3>

<a name="index-template_002c-SATB"></a>
<a name="index-SATB-template"></a>

<p>Most vocal scores of music written for four-part mixed choir
with orchestral accompaniment such as Mendelssohn&rsquo;s Elijah or
Handel&rsquo;s Messiah have the choral music and words on four
staves, one for each of SATB, with a piano reduction of the
orchestral accompaniment underneath.  Here&rsquo;s an example
from Handel&rsquo;s Messiah:
</p>
<blockquote><p>
 <a href="ab/lily-fabbe8be.ly">
  <img align="middle"
       border="0"
       src="ab/lily-fabbe8be.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>None of the templates provides this layout exactly.  The nearest is
&lsquo;SATB vocal score and automatic piano reduction&rsquo; &ndash; see <a href="#Vocal-ensembles">Vocal ensembles</a> &ndash; but we need to change the layout and add a piano
accompaniment which is not derived automatically from the vocal parts.
The variables holding the music and words for the vocal parts are
fine, but we shall need to add variables for the piano reduction.
</p>
<p>The order in which the contexts appear in the ChoirStaff of the
template do not correspond with the order in the vocal score shown
above.  We need to rearrange them so there are four staves with the
words written directly underneath the notes for each part.  All the
voices should be <code>\voiceOne</code>, which is the default, so the
<code>\voiceXXX</code> commands should be removed.  We also need to specify
the tenor clef for the tenors.  The way in which lyrics are specified
in the template has not yet been encountered so we need to use the
method with which we are familiar.  We should also add the names of
each staff.
</p>
<p>Doing this gives for our ChoirStaff:
</p>
<blockquote><pre class="example">    \new ChoirStaff &lt;&lt;
      \new Staff = &quot;sopranos&quot; &lt;&lt;
        \set Staff.instrumentName = #&quot;Soprano&quot;
        \new Voice = &quot;sopranos&quot; { \global \sopranoMusic }
      &gt;&gt;
      \new Lyrics \lyricsto &quot;sopranos&quot; { \sopranoWords }
      \new Staff = &quot;altos&quot; &lt;&lt;
        \set Staff.instrumentName = #&quot;Alto&quot;
        \new Voice = &quot;altos&quot; { \global \altoMusic }
      &gt;&gt;
      \new Lyrics \lyricsto &quot;altos&quot; { \altoWords }
      \new Staff = &quot;tenors&quot; &lt;&lt;
        \set Staff.instrumentName = #&quot;Tenor&quot;
        \new Voice = &quot;tenors&quot; { \global \tenorMusic }
      &gt;&gt;
      \new Lyrics \lyricsto &quot;tenors&quot; { \tenorWords }
      \new Staff = &quot;basses&quot; &lt;&lt;
        \set Staff.instrumentName = #&quot;Bass&quot;
        \new Voice = &quot;basses&quot; { \global \bassMusic }
      &gt;&gt;
      \new Lyrics \lyricsto &quot;basses&quot; { \bassWords }
    &gt;&gt;  % end ChoirStaff
</pre></blockquote>

<p>Next we must work out the piano part.  This is
easy - we just pull out the piano part from the
&lsquo;Solo piano&rsquo; template:
</p>
<blockquote><pre class="example">\new PianoStaff &lt;&lt;
  \set PianoStaff.instrumentName = #&quot;Piano  &quot;
  \new Staff = &quot;upper&quot; \upper
  \new Staff = &quot;lower&quot; \lower
&gt;&gt;
</pre></blockquote>

<p>and add the variable definitions for <code>upper</code>
and <code>lower</code>.
</p>
<p>The ChoirStaff and PianoStaff must be combined
using angle brackets as we want them to be
stacked one above the other:
</p>
<blockquote><pre class="example">&lt;&lt;  % combine ChoirStaff and PianoStaff one above the other
  \new ChoirStaff &lt;&lt;
    \new Staff = &quot;sopranos&quot; &lt;&lt;
      \new Voice = &quot;sopranos&quot; { \global \sopranoMusic }
    &gt;&gt;
    \new Lyrics \lyricsto &quot;sopranos&quot; { \sopranoWords }
    \new Staff = &quot;altos&quot; &lt;&lt;
      \new Voice = &quot;altos&quot; { \global \altoMusic }
    &gt;&gt;
    \new Lyrics \lyricsto &quot;altos&quot; { \altoWords }
    \new Staff = &quot;tenors&quot; &lt;&lt;
      \clef &quot;G_8&quot;  % tenor clef
      \new Voice = &quot;tenors&quot; { \global \tenorMusic }
    &gt;&gt;
    \new Lyrics \lyricsto &quot;tenors&quot; { \tenorWords }
    \new Staff = &quot;basses&quot; &lt;&lt;
      \clef &quot;bass&quot;
      \new Voice = &quot;basses&quot; { \global \bassMusic }
    &gt;&gt;
    \new Lyrics \lyricsto &quot;basses&quot; { \bassWords }
  &gt;&gt;  % end ChoirStaff

  \new PianoStaff &lt;&lt;
    \set PianoStaff.instrumentName = #&quot;Piano&quot;
    \new Staff = &quot;upper&quot; \upper
    \new Staff = &quot;lower&quot; \lower
  &gt;&gt;
&gt;&gt;
</pre></blockquote>

<p>Combining all these together and adding the music
for the three bars of the example above gives:
</p>
<blockquote><blockquote><pre class="example">\version &quot;2.12.3&quot;
</pre></blockquote>
<pre class="verbatim">global = { \key d \major \time 4/4 }
sopranoMusic = \relative c'' {
  \clef &quot;treble&quot;
  r4 d2 a4 | d4. d8 a2 | cis4 d cis2 |
}
sopranoWords = \lyricmode {
  Wor -- thy is the lamb that was slain
}
altoMusic = \relative a' {
  \clef &quot;treble&quot;
  r4 a2 a4 | fis4. fis8 a2 | g4 fis fis2 |
}
altoWords = \sopranoWords
tenorMusic = \relative c' {
  \clef &quot;G_8&quot;
  r4 fis2 e4 | d4. d8 d2 | e4 a, cis2 |
}
tenorWords = \sopranoWords
bassMusic = \relative c' {
  \clef &quot;bass&quot;
  r4 d2 cis4 | b4. b8 fis2 | e4 d a'2 |
}
bassWords = \sopranoWords
upper = \relative a' {
  \clef &quot;treble&quot;
  \global
  r4 &lt;a d fis&gt;2 &lt;a e' a&gt;4 |
  &lt;d fis d'&gt;4. &lt;d fis d'&gt;8 &lt;a d a'&gt;2 |
  &lt;g cis g'&gt;4 &lt;a d fis&gt; &lt;a cis e&gt;2 |
}
lower = \relative c, {
  \clef &quot;bass&quot;
  \global
  &lt;d d'&gt;4 &lt;d d'&gt;2 &lt;cis cis'&gt;4 |
  &lt;b b'&gt;4. &lt;b' b'&gt;8 &lt;fis fis'&gt;2 |
  &lt;e e'&gt;4 &lt;d d'&gt; &lt;a' a'&gt;2 |
}

\score {
  &lt;&lt;  % combine ChoirStaff and PianoStaff in parallel
    \new ChoirStaff &lt;&lt;
      \new Staff = &quot;sopranos&quot; &lt;&lt;
        \set Staff.instrumentName = #&quot;Soprano&quot;
        \new Voice = &quot;sopranos&quot; { \global \sopranoMusic }
      &gt;&gt;
      \new Lyrics \lyricsto &quot;sopranos&quot; { \sopranoWords }
      \new Staff = &quot;altos&quot; &lt;&lt;
        \set Staff.instrumentName = #&quot;Alto&quot;
        \new Voice = &quot;altos&quot; { \global \altoMusic }
      &gt;&gt;
      \new Lyrics \lyricsto &quot;altos&quot; { \altoWords }
      \new Staff = &quot;tenors&quot; &lt;&lt;
        \set Staff.instrumentName = #&quot;Tenor&quot;
        \new Voice = &quot;tenors&quot; { \global \tenorMusic }
      &gt;&gt;
      \new Lyrics \lyricsto &quot;tenors&quot; { \tenorWords }
      \new Staff = &quot;basses&quot; &lt;&lt;
        \set Staff.instrumentName = #&quot;Bass&quot;
        \new Voice = &quot;basses&quot; { \global \bassMusic }
      &gt;&gt;
      \new Lyrics \lyricsto &quot;basses&quot; { \bassWords }
    &gt;&gt;  % end ChoirStaff

    \new PianoStaff &lt;&lt;
      \set PianoStaff.instrumentName = #&quot;Piano  &quot;
      \new Staff = &quot;upper&quot; \upper
      \new Staff = &quot;lower&quot; \lower
    &gt;&gt;
  &gt;&gt;
}
</pre><p>
 <a href="3b/lily-3423b623.ly">
  <img align="middle"
       border="0"
       src="3b/lily-3423b623.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<hr size="6">
<a name="Building-a-score-from-scratch"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Fundamental-concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Tweaking-output" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Four_002dpart-SATB-vocal-score" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Four-part SATB vocal score&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Extending-the-templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Extending the templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Tweaking-output" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaking output &gt; </a>]</td></tr></table>
<a name="Building-a-score-from-scratch"></a>
<h3 class="subsection">3.4.3 Building a score from scratch</h3>

<a name="index-template_002c-writing-your-own"></a>
<a name="index-example-of-writing-a-score"></a>
<a name="index-writing-a-score_002c-example"></a>
<a name="index-score_002c-example-of-writing"></a>

<p>After gaining some facility with writing LilyPond code, you
may find that it is easier to build a score from scratch
rather than modifying one of the templates.  You can also
develop your own style this way to suit the sort of music you
like.  Let&rsquo;s see how to put together the score for an organ
prelude as an example.
</p>
<p>We begin with a header section.  Here go the title, name
of composer, etc, then come any variable definitions, and
finally the score block.  Let&rsquo;s start with these in outline
and fill in the details later.
</p>
<p>We&rsquo;ll use the first two bars of Bach&rsquo;s prelude
based on <em>Jesu, meine Freude</em> which is written for two
manuals and pedal organ.  You can see these two bars of music
at the bottom of this section.  The top manual part has two voices,
the lower and pedal organ one each.  So we need four
music definitions and one to define the time signature
and key:
</p>
<blockquote><pre class="example">\version &quot;2.12.3&quot;
\header {
  title = &quot;Jesu, meine Freude&quot;
  composer = &quot;J S Bach&quot;
}
TimeKey = { \time 4/4 \key c \minor }
ManualOneVoiceOneMusic = {s1}
ManualOneVoiceTwoMusic = {s1}
ManualTwoMusic = {s1}
PedalOrganMusic = {s1}

\score {
}
</pre></blockquote>

<p>For now we&rsquo;ve just used a spacer note, <code>s1</code>,
instead of the real music.  We&rsquo;ll add that later.
</p>
<p>Next let&rsquo;s see what should go in the score block.
We simply mirror the staff structure we want.
Organ music is usually written on three staves,
one for each manual and one for the pedals.  The
manual staves should be bracketed together, so we
need to use a PianoStaff for them.  The first
manual part needs two voices and the second manual
part just one.
</p>
<blockquote><pre class="example">  \new PianoStaff &lt;&lt;
    \new Staff = &quot;ManualOne&quot; &lt;&lt;
      \new Voice { \ManualOneVoiceOneMusic }
      \new Voice { \ManualOneVoiceTwoMusic }
    &gt;&gt;  % end ManualOne Staff context
    \new Staff = &quot;ManualTwo&quot; &lt;&lt;
      \new Voice { \ManualTwoMusic }
    &gt;&gt;  % end ManualTwo Staff context
  &gt;&gt;  % end PianoStaff context
</pre></blockquote>

<p>Next we need to add a staff for the pedal organ.
This goes underneath the PianoStaff, but it must
be simultaneous with it, so we need angle brackets
around the two.  Missing these out would generate
an error in the log file.  It&rsquo;s a common mistake
which you&rsquo;ll make sooner or later!  Try copying
the final example at the end of this section,
remove these angle brackets, and compile it to
see what errors it generates.
</p>
<blockquote><pre class="example">&lt;&lt;  % PianoStaff and Pedal Staff must be simultaneous
  \new PianoStaff &lt;&lt;
    \new Staff = &quot;ManualOne&quot; &lt;&lt;
      \new Voice { \ManualOneVoiceOneMusic }
      \new Voice { \ManualOneVoiceTwoMusic }
    &gt;&gt;  % end ManualOne Staff context
    \new Staff = &quot;ManualTwo&quot; &lt;&lt;
      \new Voice { \ManualTwoMusic }
    &gt;&gt;  % end ManualTwo Staff context
  &gt;&gt;  % end PianoStaff context
  \new Staff = &quot;PedalOrgan&quot; &lt;&lt;
    \new Voice { \PedalOrganMusic }
  &gt;&gt;
&gt;&gt;
</pre></blockquote>

<p>It is not necessary to use the simultaneous construct
<code>&lt;&lt; .. &gt;&gt;</code> for the manual two staff and the pedal organ staff,
since they contain only one music expression, but it does no harm,
and always using angle brackets after <code>\new Staff</code> is a good
habit to cultivate in case there are multiple voices.  The opposite
is true for Voices: these should habitually be followed by braces
<code>{ .. }</code> in case your music is coded in several variables
which need to run consecutively.
</p>
<p>Let&rsquo;s add this structure to the score block, and adjust the indenting.
We also add the appropriate clefs, ensure stems, ties and slurs in
each voice on the upper staff point to the right direction with
<code>\voiceOne</code> and <code>\voiceTwo</code>, and enter the time signature
and key to each staff using our predefined variable, <code>\TimeKey</code>.
</p>
<blockquote><pre class="example">\score {
  &lt;&lt;  % PianoStaff and Pedal Staff must be simultaneous
    \new PianoStaff &lt;&lt;
      \new Staff = &quot;ManualOne&quot; &lt;&lt;
        \TimeKey  % set time signature and key
        \clef &quot;treble&quot;
        \new Voice { \voiceOne \ManualOneVoiceOneMusic }
        \new Voice { \voiceTwo \ManualOneVoiceTwoMusic }
      &gt;&gt;  % end ManualOne Staff context
      \new Staff = &quot;ManualTwo&quot; &lt;&lt;
        \TimeKey
        \clef &quot;bass&quot;
        \new Voice { \ManualTwoMusic }
      &gt;&gt;  % end ManualTwo Staff context
    &gt;&gt;  % end PianoStaff context
    \new Staff = &quot;PedalOrgan&quot; &lt;&lt;
      \TimeKey
      \clef &quot;bass&quot;
      \new Voice { \PedalOrganMusic }
    &gt;&gt;  % end PedalOrgan Staff
  &gt;&gt;
}  % end Score context
</pre></blockquote>

<p>That completes the structure.  Any three-staff organ music
will have a similar structure, although the number of voices
may vary.  All that remains now
is to add the music, and combine all the parts together.
</p>
<blockquote><blockquote><pre class="example">\version &quot;2.12.3&quot;
</pre></blockquote>
<pre class="verbatim">\header {
  title = &quot;Jesu, meine Freude&quot;
  composer = &quot;J S Bach&quot;
}
TimeKey = { \time 4/4 \key c \minor }
ManualOneVoiceOneMusic = \relative g' {
  g4 g f ees | d2 c2 |
}
ManualOneVoiceTwoMusic = \relative c' {
  ees16 d ees8~ ees16 f ees d c8 d~ d c~ |
  c c4 b8 c8. g16 c b c d |
}
ManualTwoMusic = \relative c' {
  c16 b c8~ c16 b c g a8 g~ g16 g aes ees |
  f ees f d g aes g f ees d e8~ ees16 f ees d |
}
PedalOrganMusic = \relative c {
  r8 c16 d ees d ees8~ ees16 a, b g c b c8 |
  r16 g ees f g f g8 c,2 |
  }

\score {
  &lt;&lt;  % PianoStaff and Pedal Staff must be simultaneous
    \new PianoStaff &lt;&lt;
      \new Staff = &quot;ManualOne&quot; &lt;&lt;
        \TimeKey  % set time signature and key
        \clef &quot;treble&quot;
        \new Voice { \voiceOne \ManualOneVoiceOneMusic }
        \new Voice { \voiceTwo \ManualOneVoiceTwoMusic }
      &gt;&gt;  % end ManualOne Staff context
      \new Staff = &quot;ManualTwo&quot; &lt;&lt;
        \TimeKey
        \clef &quot;bass&quot;
        \new Voice { \ManualTwoMusic }
      &gt;&gt;  % end ManualTwo Staff context
    &gt;&gt;  % end PianoStaff context
    \new Staff = &quot;PedalOrgan&quot; &lt;&lt;
      \TimeKey
      \clef &quot;bass&quot;
      \new Voice { \PedalOrganMusic }
    &gt;&gt;  % end PedalOrgan Staff context
  &gt;&gt;
}  % end Score context
</pre><p>
 <a href="bb/lily-25a97e74.ly">
  <img align="middle"
       border="0"
       src="bb/lily-25a97e74.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>






<hr size="6">
<a name="Tweaking-output"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Fundamental-concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Building-a-score-from-scratch" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Building a score from scratch&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Top" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Tweaking-basics" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaking basics &gt; </a>]</td></tr></table>
<a name="Tweaking-output"></a>
<h1 class="chapter">4. Tweaking output</h1>

<p>This chapter discusses how to modify output.  LilyPond is extremely
configurable; virtually every fragment of output may be changed.
</p>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Tweaking-basics" accesskey="1">4.1 Tweaking basics</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#The-Internals-Reference-manual" accesskey="2">4.2 The Internals Reference manual</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Appearance-of-objects" accesskey="3">4.3 Appearance of objects</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Placement-of-objects" accesskey="4">4.4 Placement of objects</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Collisions-of-objects" accesskey="5">4.5 Collisions of objects</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Further-tweaking" accesskey="6">4.6 Further tweaking</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Tweaking-basics"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Tweaking-output" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Tweaking-output" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaking output&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Introduction-to-tweaks" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Introduction to tweaks &gt; </a>]</td></tr></table>
<a name="Tweaking-basics"></a>
<h2 class="section">4.1 Tweaking basics</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Introduction-to-tweaks" accesskey="1">4.1.1 Introduction to tweaks</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Objects-and-interfaces" accesskey="2">4.1.2 Objects and interfaces</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Naming-conventions-of-objects-and-properties" accesskey="3">4.1.3 Naming conventions of objects and properties</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Tweaking-methods" accesskey="4">4.1.4 Tweaking methods</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Introduction-to-tweaks"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Tweaking-basics" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaking basics&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Tweaking-basics" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaking basics&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Objects-and-interfaces" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Objects and interfaces &gt; </a>]</td></tr></table>
<a name="Introduction-to-tweaks"></a>
<h3 class="subsection">4.1.1 Introduction to tweaks</h3>

<p>&lsquo;Tweaking&rsquo; is a LilyPond term for the various methods available
to the user for modifying the actions taken during interpretation
of the input file and modifying the appearance of the printed
output.  Some tweaks are very easy to use; others are more
complex.  But taken together the methods available for tweaking
permit almost any desired appearance of the printed music to be
achieved.
</p>
<p>In this section we cover the basic concepts required to understand
tweaking.  Later we give a variety of ready-made commands which can
simply be copied to obtain the same effect in your own scores, and
at the same time we show how these commands may be constructed so
that you may learn how to develop your own tweaks.
</p>
<p>Before starting on this Chapter you may wish to review the section
<a href="#Contexts-and-engravers">Contexts and engravers</a>, as Contexts, Engravers, and the
Properties contained within them are fundamental to understanding
and constructing Tweaks.
</p>
<hr size="6">
<a name="Objects-and-interfaces"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Introduction-to-tweaks" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Introduction to tweaks&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Tweaking-basics" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaking basics&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Naming-conventions-of-objects-and-properties" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Naming conventions of objects and properties &gt; </a>]</td></tr></table>
<a name="Objects-and-interfaces"></a>
<h3 class="subsection">4.1.2 Objects and interfaces</h3>

<a name="index-object"></a>
<a name="index-grob"></a>
<a name="index-spanner"></a>
<a name="index-interface"></a>
<a name="index-properties_002c-object"></a>
<a name="index-object-properties"></a>
<a name="index-layout-object"></a>
<a name="index-object_002c-layout"></a>
<a name="index-interface-1"></a>

<p>Tweaking involves modifying the internal operation and structures
of the LilyPond program, so we must first introduce some terms
which are used to describe those internal operations and
structures.
</p>
<p>The term &lsquo;Object&rsquo; is a generic term used to refer to the
multitude of internal structures built by LilyPond during the
processing of an input file.  So when a command like <code>\new
Staff</code> is encountered a new object of type <code>Staff</code> is
constructed.  That <code>Staff</code> object then holds all the
properties associated with that particular staff, for example, its
name and its key signature, together with details of the engravers
which have been assigned to operate within that staff&rsquo;s context.
Similarly, there are objects to hold the properties of all other
contexts, such as <code>Voice</code> objects, <code>Score</code> objects,
<code>Lyrics</code> objects, as well as objects to represent all
notational elements such as bar lines,
note heads, ties, dynamics, etc.  Every object has its own set of
property values.
</p>
<p>Some types of object are given special names.  Objects which represent
items of notation on the printed output such as note heads, stems,
slurs, ties, fingering, clefs, etc are called &lsquo;Layout objects&rsquo;,
often known as &lsquo;Graphical Objects&rsquo;, or &lsquo;Grobs&rsquo; for short.  These
are still objects in the generic sense above, and so they too all have
properties associated with them, such as their position, size, color,
etc.
</p>
<p>Some layout objects are still more specialized.  Phrasing slurs,
crescendo hairpins, ottava marks, and many other grobs are not
localized in a single place &ndash; they have a starting point, an
ending point, and maybe other properties concerned with their
shape.  Objects with an extended shape like these are called
&lsquo;Spanners&rsquo;.
</p>
<p>It remains to explain what &lsquo;Interfaces&rsquo; are.  Many objects, even
though they are quite different, share common features which need to
be processed in the same way.  For example, all grobs have a color, a
size, a position, etc, and all these properties are processed in the
same way during LilyPond&rsquo;s interpretation of the input file.  To
simplify these internal operations these common actions and properties
are grouped together in an object called a <code>grob-interface</code>.
There are many other groupings of common properties like this, each
one given a name ending in <code>interface</code>.  In total there are over
100 such interfaces.  We shall see later why this is of interest and
use to the user.
</p>
<p>These, then, are the main terms relating to objects which we
shall use in this chapter.
</p>
<hr size="6">
<a name="Naming-conventions-of-objects-and-properties"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Objects-and-interfaces" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Objects and interfaces&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Tweaking-basics" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaking basics&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Tweaking-methods" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaking methods &gt; </a>]</td></tr></table>
<a name="Naming-conventions-of-objects-and-properties"></a>
<h3 class="subsection">4.1.3 Naming conventions of objects and properties</h3>

<a name="index-naming-conventions-for-objects"></a>
<a name="index-naming-conventions-for-properties"></a>
<a name="index-objects_002c-naming-conventions"></a>
<a name="index-properties_002c-naming-conventions"></a>

<p>We met some object naming conventions previously, in
<a href="#Contexts-and-engravers">Contexts and engravers</a>.  Here for reference is a list
of the most common object and property types together with
the conventions for naming them and a couple of examples of
some real names.  We have used &lsquo;A&rsquo; to stand for any capitalized
alphabetic character and &lsquo;aaa&rsquo; to stand for any number of
lower-case alphabetic characters.  Other characters are used
verbatim.
</p>
<table>
<thead><tr><th width="33%"><p> Object/property type
  </p></th><th width="33%"><p> Naming convention
  </p></th><th width="33%"><p> Examples
</p></th></tr></thead>
<tr><td width="33%"><p> Contexts
  </p></td><td width="33%"><p> Aaaa or AaaaAaaaAaaa
  </p></td><td width="33%"><p> Staff, GrandStaff
</p></td></tr>
<tr><td width="33%"><p> Layout Objects
  </p></td><td width="33%"><p> Aaaa or AaaaAaaaAaaa
  </p></td><td width="33%"><p> Slur, NoteHead
</p></td></tr>
<tr><td width="33%"><p> Engravers
  </p></td><td width="33%"><p> Aaaa_aaa_engraver
  </p></td><td width="33%"><p> Clef_engraver, Note_heads_engraver
</p></td></tr>
<tr><td width="33%"><p> Interfaces
  </p></td><td width="33%"><p> aaa-aaa-interface
  </p></td><td width="33%"><p> grob-interface, break-aligned-interface
</p></td></tr>
<tr><td width="33%"><p> Context Properties
  </p></td><td width="33%"><p> aaa or aaaAaaaAaaa
  </p></td><td width="33%"><p> alignAboveContext, skipBars
</p></td></tr>
<tr><td width="33%"><p> Layout Object Properties
  </p></td><td width="33%"><p> aaa or aaa-aaa-aaa
  </p></td><td width="33%"><p> direction, beam-thickness
</p></td></tr>
</table>

<p>As we shall see shortly, the properties of different types of
object are modified by different commands, so it is useful to
be able to recognize the type of object from the names of its
properties.
</p>

<hr size="6">
<a name="Tweaking-methods"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Naming-conventions-of-objects-and-properties" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Naming conventions of objects and properties&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Tweaking-basics" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaking basics&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#The-Internals-Reference-manual" title="Next section in reading order" accesskey="n" rel="next">&nbsp;The Internals Reference manual &gt; </a>]</td></tr></table>
<a name="Tweaking-methods"></a>
<h3 class="subsection">4.1.4 Tweaking methods</h3>

<a name="index-tweaking-methods"></a>

<p><strong>\override command</strong>
</p>
<a name="index-override-command"></a>
<a name="index-override-syntax"></a>

<a name="index-_005coverride"></a>
<a name="index-_005coverride-1"></a>
<a name="index-override"></a>
<a name="index-override-1"></a>

<p>We have already met the commands <code>\set</code> and <code>\with</code>, used to
change the properties of <strong>contexts</strong> and to remove and add
<strong>engravers</strong>, in <a href="#Modifying-context-properties">Modifying context properties</a>, and
<a href="#Adding-and-removing-engravers">Adding and removing engravers</a>.  We now must meet some more
important commands.
</p>
<p>The command to change the properties of <strong>layout objects</strong> is
<code>\override</code>.  Because this command has to modify
internal properties deep within LilyPond its syntax is not
as simple as the commands you have met so far.  It needs to
know precisely which property of which object in which context
has to be modified, and what its new value is to be.  Let&rsquo;s see
how this is done.
</p>
<p>The general syntax of this command is:
</p>
<blockquote><pre class="example">\override <var>Context</var>.<var>LayoutObject</var> #'<var>layout-property</var> =
#<var>value</var>
</pre></blockquote>

<p>This will set the property with the name <var>layout-property</var> of the
layout object with the name <var>LayoutObject</var>, which is a member of
the <var>Context</var> context, to the value <var>value</var>.
</p>
<p>The <var>Context</var> can be omitted (and usually is) when the
required context is unambiguously implied and is one of lowest
level contexts, i.e., <code>Voice</code>, <code>ChordNames</code> or
<code>Lyrics</code>, and we shall omit it in many of the following
examples.  We shall see later when it must be specified.
</p>
<p>Later sections deal comprehensively with properties and their
values, but to illustrate the format and use of these commands
we shall use just a few simple properties and values which are
easily understood.
</p>
<p>For now, don&rsquo;t worry about the <code>#'</code>, which must precede the
layout property, and the <code>#</code>, which must precede the value.
These must always be present in exactly this form.  This is the
most common command used in tweaking, and most of the rest of
this chapter will be directed to presenting examples of how it is
used.  Here is a simple example to change the color of the
note head:
</p>
<a name="index-color-property_002c-example"></a>
<a name="index-NoteHead_002c-example-of-overriding"></a>

<blockquote><pre class="verbatim">c d
\override NoteHead #'color = #red
e f g
\override NoteHead #'color = #green
a b c
</pre><p>
 <a href="f9/lily-4f473a9f.ly">
  <img align="middle"
       border="0"
       src="f9/lily-4f473a9f.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p><strong>\revert command</strong>
</p>
<a name="index-revert-command"></a>

<a name="index-_005crevert"></a>
<a name="index-_005crevert-1"></a>
<a name="index-revert"></a>
<a name="index-revert-1"></a>

<p>Once overridden, the property retains its new value until it is
overridden again or a <code>\revert</code> command is encountered.
The <code>\revert</code> command has the following syntax and causes
the value of the property to revert to its original default
value; note, not its previous value if several <code>\override</code>
commands have been issued.
</p>
<blockquote><pre class="example">\revert <var>Context</var>.<var>LayoutObject</var> #'<var>layout-property</var>
</pre></blockquote>

<p>Again, just like <var>Context</var> in the <code>\override</code> command,
<var>Context</var> is often not needed.  It will be omitted
in many of the following examples.  Here we revert the color
of the note head to the default value for the final two notes:
</p>
<a name="index-color-property_002c-example-1"></a>
<a name="index-NoteHead_002c-example-of-overriding-1"></a>

<blockquote><pre class="verbatim">c d
\override NoteHead #'color = #red
e f g
\override NoteHead #'color = #green
a
\revert NoteHead #'color
b c
</pre><p>
 <a href="cf/lily-1f14311b.ly">
  <img align="middle"
       border="0"
       src="cf/lily-1f14311b.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p><strong>\once prefix</strong>
</p>
<a name="index-_005conce"></a>
<a name="index-_005conce-1"></a>
<a name="index-once"></a>
<a name="index-once-1"></a>

<p>Both the <code>\override</code> and the <code>\set</code> commands may be
prefixed by <code>\once</code>.  This causes the following
<code>\override</code> or <code>\set</code> command to be effective only
during the current musical moment before the property reverts
back to its default value.  Using the same example, we can
change the color of a single note like this:
</p>
<a name="index-color-property_002c-example-2"></a>
<a name="index-NoteHead_002c-example-of-overriding-2"></a>

<blockquote><pre class="verbatim">c d
\once \override NoteHead #'color = #red
e f g
\once \override NoteHead #'color = #green
a b c
</pre><p>
 <a href="fb/lily-43897e3b.ly">
  <img align="middle"
       border="0"
       src="fb/lily-43897e3b.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p><strong>\overrideProperty command</strong>
</p>
<a name="index-overrideProperty-command"></a>

<a name="index-_005coverrideProperty"></a>
<a name="index-_005coverrideProperty-1"></a>
<a name="index-overrideProperty"></a>
<a name="index-overrideProperty-1"></a>

<p>There is another form of the override command,
<code>\overrideProperty</code>, which is occasionally required.
We mention it here for completeness, but for details see
<a name="index-Difficult-tweaks"></a>
<a href="lilypond-big-page.html#Difficult-tweaks">Difficult tweaks</a>.
</p>
<p><strong>\tweak command</strong>
</p>
<a name="index-tweak-command"></a>

<a name="index-_005ctweak"></a>
<a name="index-_005ctweak-1"></a>
<a name="index-tweak"></a>
<a name="index-tweak-1"></a>

<p>The final tweaking command which is available is <code>\tweak</code>.
This should be used to change the properties of objects which
occur at the same musical moment, such as the notes within a
chord.  Using <code>\override</code> would affect all the notes
within a chord, whereas <code>\tweak</code> affects just the following
item in the input stream.
</p>
<p>Here&rsquo;s an example.  Suppose we wish to change the size of the
middle note head (the E) in a C major chord.  Let&rsquo;s first see what
<code>\once \override</code> would do:
</p>
<a name="index-font_002dsize-property_002c-example"></a>
<a name="index-NoteHead_002c-example-of-overriding-3"></a>

<blockquote><pre class="verbatim">  &lt;c e g&gt;4
  \once \override NoteHead #'font-size = #-3
  &lt;c e g&gt;
  &lt;c e g&gt;
</pre><p>
 <a href="bb/lily-f9d99845.ly">
  <img align="middle"
       border="0"
       src="bb/lily-f9d99845.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>We see the override affects <em>all</em> the note heads in the chord.
This is because all the notes of a chord occur at the same
<em>musical moment</em>, and the action of <code>\once</code> is to
apply the override to all layout objects of the type specified
which occur at the same musical moment as the <code>\override</code>
command itself.
</p>
<p>The <code>\tweak</code> command operates in a different way.  It acts
on the immediately following item in the input stream.  However,
it is effective only on objects which are created directly from
the input stream, essentially note heads and articulations;
objects such as stems and accidentals are created later and
cannot be tweaked in this way.  Furthermore, when it is applied
to note heads these <em>must</em> be within a chord, i.e., within
single angle brackets, so to tweak a single note the <code>\tweak</code>
command must be placed inside single angle brackets with the
note.
</p>
<p>So to return to our example, the size of the middle note of
a chord would be changed in this way:
</p>
<a name="index-font_002dsize-property_002c-example-1"></a>
<a name="index-_005ctweak_002c-example"></a>

<blockquote><pre class="verbatim">  &lt;c e g&gt;4
  &lt;c \tweak #'font-size #-3 e g&gt;4
</pre><p>
 <a href="cb/lily-d74215cc.ly">
  <img align="middle"
       border="0"
       src="cb/lily-d74215cc.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Note that the syntax of <code>\tweak</code> is different from that
of the <code>\override</code> command.  Neither the context nor the
layout object should be specified; in fact, it would generate
an error to do so.  These are both implied by the following
item in the input stream.  Note also that an equals sign should
not be present.  So the general syntax of the
<code>\tweak</code> command is simply
</p>
<blockquote><pre class="example">\tweak #'<var>layout-property</var> #<var>value</var>
</pre></blockquote>

<p>A <code>\tweak</code> command can also be used to modify just one in
a series of articulations, as shown here:
</p>
<a name="index-color-property_002c-example-3"></a>
<a name="index-_005ctweak_002c-example-1"></a>

<blockquote><pre class="verbatim">a ^Black
  -\tweak #'color #red ^Red
  -\tweak #'color #green _Green
</pre><p>
 <a href="44/lily-3ad4290c.ly">
  <img align="middle"
       border="0"
       src="44/lily-3ad4290c.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Note that the <code>\tweak</code> command must be preceded by an
articulation mark as if it were an articulation itself.
</p>
<a name="index-tuplets_002c-nested"></a>
<a name="index-triplets_002c-nested"></a>
<a name="index-bracket_002c-tuplet"></a>
<a name="index-bracket_002c-triplet"></a>
<a name="index-tuplet-bracket"></a>
<a name="index-triplet-bracket"></a>

<a name="index-TupletBracket"></a>
<a name="index-TupletBracket-1"></a>

<p>The <code>\tweak</code> command must also be used to change the
appearance of one of a set of nested tuplets which begin at the
same musical moment.  In the following example, the long tuplet
bracket and the first of the three short brackets begin at the
same musical moment, so any <code>\override</code> command would apply
to both of them.  In the example, <code>\tweak</code> is used to
distinguish between them.  The first <code>\tweak</code> command
specifies that the long tuplet bracket is to be placed above the
notes and the second one specifies that the tuplet number is to be
printed in red on the first short tuplet bracket.
</p>
<a name="index-_005ctweak_002c-example-2"></a>
<a name="index-direction-property_002c-example"></a>
<a name="index-color-property_002c-example-4"></a>

<blockquote><pre class="verbatim">\tweak #'direction #up
\times 4/3 {
  \tweak #'color #red
  \times 2/3 { c8[ c8 c8] }
  \times 2/3 { c8[ c8 c8] }
  \times 2/3 { c8[ c8 c8] }
}
</pre><p>
 <a href="a3/lily-9404f6c2.ly">
  <img align="middle"
       border="0"
       src="a3/lily-9404f6c2.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>If nested tuplets do not begin at the same moment, their
appearance may be modified in the usual way with
<code>\override</code> commands:
</p>
<a name="index-text-property_002c-example"></a>
<a name="index-tuplet_002dnumber-function_002c-example"></a>
<a name="index-transparent-property_002c-example"></a>
<a name="index-TupletNumber_002c-example-of-overriding"></a>

<blockquote><pre class="verbatim">\times 2/3 { c8[ c c]}
\once \override TupletNumber
  #'text = #tuplet-number::calc-fraction-text
\times 2/3 {
  c[ c]
  c[ c]
  \once \override TupletNumber #'transparent = ##t
  \times 2/3 { c8[ c c] }
\times 2/3 { c8[ c c]}
}
</pre><p>
 <a href="4a/lily-5b03d21b.ly">
  <img align="middle"
       border="0"
       src="4a/lily-5b03d21b.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<a name="See-also-11"></a>
<h4 class="subsubheading">See also</h4>
<p>Notation Reference:
<a name="index-The-tweak-command"></a>
<a href="lilypond-big-page.html#The-tweak-command">The tweak command</a>.
</p>

<hr size="6">
<a name="The-Internals-Reference-manual"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Tweaking-methods" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaking methods&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Tweaking-output" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaking output&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Properties-of-layout-objects" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Properties of layout objects &gt; </a>]</td></tr></table>
<a name="The-Internals-Reference-manual"></a>
<h2 class="section">4.2 The Internals Reference manual</h2>

<a name="index-Internals-Reference-2"></a>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Properties-of-layout-objects" accesskey="1">4.2.1 Properties of layout objects</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Properties-found-in-interfaces" accesskey="2">4.2.2 Properties found in interfaces</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Types-of-properties" accesskey="3">4.2.3 Types of properties</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Properties-of-layout-objects"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#The-Internals-Reference-manual" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; The Internals Reference manual&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#The-Internals-Reference-manual" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;The Internals Reference manual&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Properties-found-in-interfaces" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Properties found in interfaces &gt; </a>]</td></tr></table>
<a name="Properties-of-layout-objects"></a>
<h3 class="subsection">4.2.1 Properties of layout objects</h3>

<a name="index-properties-of-layout-objects"></a>
<a name="index-properties-of-grobs"></a>
<a name="index-grobs_002c-properties-of"></a>
<a name="index-layout-objects_002c-properties-of"></a>
<a name="index-Internals-Reference-manual"></a>

<p>Suppose you have a slur in a score which, to your mind,
appears too thin and you&rsquo;d like to draw it a little heavier.
How do you go about doing this?  You know from the statements
earlier about the flexibility of LilyPond that such a thing
should be possible, and you would probably guess that an
<code>\override</code> command would be needed.  But is there a
heaviness property for a slur, and if there is, how might it
be modified?  This is where the Internals Reference manual
comes in.  It contains all the information you might need to
construct this and all other <code>\override</code> commands.
</p>
<p>Before we look at the Internals Reference a word of warning.
This is a <strong>reference</strong> document, which means there is
little or no explanation contained within it: its purpose is
to present information precisely and concisely.  This
means it might look daunting at first sight.  Don&rsquo;t worry!
The guidance and explanation presented here will enable you
to extract the information from the Internals Reference for
yourself with just a little practice.
</p>
<a name="index-override-example"></a>
<a name="index-Internals-Reference_002c-example-of-using"></a>
<a name="index-_005caddlyrics-example"></a>

<p>Let&rsquo;s use a concrete example with a simple fragment of real
music:
</p>
<blockquote><pre class="verbatim">{
  \time 6/8
  {
    r4 b8 b[( g]) g |
    g[( e]) e d[( f]) a |
    a g
  }
  \addlyrics {
    The man who feels love's sweet e -- mo -- tion
  }
}
</pre><p>
 <a href="95/lily-e1b61d37.ly">
  <img align="middle"
       border="0"
       src="95/lily-e1b61d37.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Suppose now that we decide we would like the slurs to be a
little heavier.  Is this possible?  The slur is certainly a
layout object, so the question is, &lsquo;Is there a property
belonging to a slur which controls the heaviness?&rsquo;  To answer
this we must look in the Internals Reference, or IR for short.
</p>
<p>The IR for the version of LilyPond you are using may be found
on the LilyPond website at <a href="http://lilypond.org">http://lilypond.org</a>.  Go to the
documentation page and click on the Internals Reference link.
For learning purposes you should use the standard HTML version,
not the &lsquo;one big page&rsquo; or the PDF.  For the next few
paragraphs to make sense you will need to actually do this
as you read.
</p>
<p>Under the heading <strong>Top</strong> you will see five links.  Select
the link to the <em>Backend</em>, which is where information about
layout objects is to be found.  There, under the heading
<strong>Backend</strong>, select the link to <em>All layout objects</em>.
The page that appears lists all the layout objects used in your
version of LilyPond, in alphabetic order.  Select the link to
Slur, and the properties of Slurs are listed.
</p>
<p>An alternative way of finding this page is from the Notation
Reference.  On one of the pages that deals with slurs you may find a
link to the Internals Reference.  This link will take you directly to
this page, but if you have an idea about the name of the layout object
to be tweaked, it is easier to go straight to the IR and search there.
</p>
<p>This Slur page in the IR tells us first that Slur objects are created
by the Slur_engraver.  Then it lists the standard settings.  Note
these are <strong>not</strong> in alphabetic order.  Browse down them looking
for a property that might control the heaviness of slurs, and you
should find
</p>
<blockquote><pre class="example"><code>thickness</code> (number)
     <code>1.2</code>
     Line thickness, generally measured in <code>line-thickness</code>
</pre></blockquote>

<p>This looks a good bet to change the heaviness. It tells us that
the value of <code>thickness</code> is a simple <em>number</em>,
that the default value is 1.2, and that the units are
in another property called <code>line-thickness</code>.
</p>
<p>As we said earlier, there are few to no explanations in the IR,
but we already have enough information to try changing the
slur thickness.  We see that the name of the layout object
is <code>Slur</code>, that the name of the property to change is
<code>thickness</code> and that the new value should be a number
somewhat larger than 1.2 if we are to make slurs thicker.
</p>
<p>We can now construct the <code>\override</code> command by simply
substituting the values we have found for the names, omitting
the context.  Let&rsquo;s use a very large value for the thickness
at first, so we can be sure the command is working.  We get:
</p>
<blockquote><pre class="example">\override Slur #'thickness = #5.0
</pre></blockquote>

<p>Don&rsquo;t forget the <code>#'</code> preceding the
property name and a <code>#</code> preceding the new value!
</p>
<p>The final question is, &lsquo;Where should this command be
placed?&rsquo;  While you are unsure and learning, the best
answer is, &lsquo;Within the music, before the first slur and
close to it.&rsquo;  Let&rsquo;s do that:
</p>
<a name="index-Slur-example-of-overriding"></a>
<a name="index-thickness-property_002c-example"></a>

<blockquote><pre class="verbatim">{
  \time 6/8
  {
    % Increase thickness of all following slurs from 1.2 to 5.0
    \override Slur #'thickness = #5.0
    r4 b8 b[( g]) g |
    g[( e]) e d[( f]) a |
    a g
  }
  \addlyrics {
    The man who feels love's sweet e -- mo -- tion
  }
}
</pre><p>
 <a href="48/lily-d586392c.ly">
  <img align="middle"
       border="0"
       src="48/lily-d586392c.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>and we see that the slur is indeed heavier.
</p>
<p>So this is the basic way of constructing <code>\override</code>
commands.  There are a few more complications that we
shall meet in later sections, but you now know all the
essentials required to make up your own &ndash; but you will
still need some practice.  This is provided in the examples
which follow.
</p>
<a name="Finding-the-context"></a>
<h3 class="subheading">Finding the context</h3>

<a name="index-context_002c-finding"></a>
<a name="index-context_002c-identifying-correct"></a>

<p>But first, what if we had needed to specify the Context?
What should it be?  We could guess that slurs are in
the Voice context, as they are clearly closely associated
with individual lines of music, but can we be sure?  To
find out, go back to the top of the IR page describing the
Slur, where it says &lsquo;Slur objects are created by: Slur
engraver&rsquo;.  So slurs will be created in whichever context
the <code>Slur_engraver</code> is in.  Follow the link to the
<code>Slur_engraver</code> page.  At the very bottom it tells
us that <code>Slur_engraver</code> is part of five Voice contexts,
including the standard voice context, <code>Voice</code>, so our
guess was correct.  And because <code>Voice</code> is one of the
lowest level contexts which is implied unambiguously by
the fact that we are entering notes, we can omit it in this
location.
</p>
<a name="Overriding-once-only"></a>
<h3 class="subheading">Overriding once only</h3>

<a name="index-overriding-once-only"></a>
<a name="index-once-override"></a>

<a name="index-_005conce-2"></a>
<a name="index-_005conce-3"></a>
<a name="index-once-2"></a>
<a name="index-once-3"></a>

<p>As you can see, <em>all</em> the slurs are thicker in the final example
above.  But what if we wanted just the first slur to be thicker?  This
is achieved with the <code>\once</code> command.  Placed immediately before
the <code>\override</code> command it causes it to change only the slur
which begins on the <strong>immediately following</strong> note.  If the
immediately following note does not begin a slur the command has no
effect at all &ndash; it is not remembered until a slur is encountered, it
is simply discarded.  So the command with <code>\once</code> must be
repositioned as follows:
</p>
<a name="index-Slur_002c-example-of-overriding"></a>
<a name="index-thickness-property_002c-example-1"></a>

<blockquote><pre class="verbatim">{
  \time 6/8
  {
    r4 b8
    % Increase thickness of immediately following slur only
    \once \override Slur #'thickness = #5.0
    b[( g]) g |
    g[( e]) e d[( f]) a |
    a g
  }
  \addlyrics {
    The man who feels love's sweet e -- mo -- tion
  }
}
</pre><p>
 <a href="8d/lily-19a1c9d0.ly">
  <img align="middle"
       border="0"
       src="8d/lily-19a1c9d0.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Now only the first slur is made heavier.
</p>
<p>The <code>\once</code> command can also be used before the <code>\set</code>
command.
</p>
<a name="Reverting"></a>
<h3 class="subheading">Reverting</h3>

<a name="index-revert-2"></a>
<a name="index-default-properties_002c-reverting-to"></a>

<a name="index-_005crevert-2"></a>
<a name="index-_005crevert-3"></a>
<a name="index-revert-3"></a>
<a name="index-revert-4"></a>

<p>Finally, what if we wanted just the first two slurs to be
heavier?  Well, we could use two commands, each preceded by
<code>\once</code> placed immediately before each of the notes where
the slurs begin:
</p>
<a name="index-Slur_002c-example-of-overriding-1"></a>
<a name="index-thickness-property_002c-example-2"></a>

<blockquote><pre class="verbatim">{
  \time 6/8
  {
    r4 b8
    % Increase thickness of immediately following slur only
    \once \override Slur #'thickness = #5.0
    b[( g]) g |
    % Increase thickness of immediately following slur only
    \once \override Slur #'thickness = #5.0
    g[( e]) e d[( f]) a |
    a g
  }
  \addlyrics {
    The man who feels love's sweet e -- mo -- tion
  }
}
</pre><p>
 <a href="19/lily-51a55a73.ly">
  <img align="middle"
       border="0"
       src="19/lily-51a55a73.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>or we could omit the <code>\once</code> command and use the <code>\revert</code>
command to return the <code>thickness</code> property to its default value
after the second slur:
</p>
<a name="index-Slur_002c-example-of-overriding-2"></a>
<a name="index-thickness-property_002c-example-3"></a>

<blockquote><pre class="verbatim">{
  \time 6/8
  {
    r4 b8
    % Increase thickness of all following slurs from 1.2 to 5.0
    \override Slur #'thickness = #5.0
    b[( g]) g |
    g[( e])
    % Revert thickness of all following slurs to default of 1.2
    \revert Slur #'thickness
    e d[( f]) a |
    a g
  }
  \addlyrics {
    The man who feels love's sweet e -- mo -- tion
  }
}
</pre><p>
 <a href="b0/lily-baa25992.ly">
  <img align="middle"
       border="0"
       src="b0/lily-baa25992.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The <code>\revert</code> command can be used to return any property
changed with <code>\override</code> back to its default value.
You may use whichever method best suits what you want to do.
</p>
<p>That concludes our introduction to the IR, and the basic
method of tweaking.  Several examples follow in the later
sections of this Chapter, partly to introduce you to some of the
additional features of the IR, and partly to give you more
practice in extracting information from it.  These examples will
contain progressively fewer words of guidance and explanation.
</p>

<hr size="6">
<a name="Properties-found-in-interfaces"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Properties-of-layout-objects" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Properties of layout objects&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#The-Internals-Reference-manual" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;The Internals Reference manual&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Types-of-properties" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Types of properties &gt; </a>]</td></tr></table>
<a name="Properties-found-in-interfaces"></a>
<h3 class="subsection">4.2.2 Properties found in interfaces</h3>

<a name="index-interface-2"></a>
<a name="index-interface-properties"></a>
<a name="index-properties-in-interfaces"></a>

<p>Suppose now that we wish to print the lyrics in italics.  What form of
<code>\override</code> command do we need to do this?  We first look in the
IR page listing &lsquo;All layout objects&rsquo;, as before, and look for an
object that might control lyrics.  We find <code>LyricText</code>, which
looks right.  Clicking on this shows the settable properties for lyric
text.  These include the <code>font-series</code> and <code>font-size</code>, but
nothing that might give an italic shape.  This is because the shape
property is one that is common to all font objects, so, rather than
including it in every layout object, it is grouped together with other
similar common properties and placed in an <strong>Interface</strong>, the
<code>font-interface</code>.
</p>
<p>So now we need to learn how to find the properties of interfaces,
and to discover what objects use these interface properties.
</p>
<p>Look again at the IR page which describes LyricText.  At the bottom of
the page is a list of clickable interfaces which LyricText supports.
The list has several items, including <code>font-interface</code>.  Clicking
on this brings up the properties associated with this interface, which
are also properties of all the objects which support it, including
LyricText.
</p>
<p>Now we see all the user-settable properties which control fonts,
including <code>font-shape(symbol)</code>, where <code>symbol</code> can be
set to <code>upright</code>, <code>italics</code> or <code>caps</code>.
</p>
<p>You will notice that <code>font-series</code> and <code>font-size</code> are also
listed there.  This immediately raises the question: Why are the
common font properties <code>font-series</code> and <code>font-size</code> listed
under <code>LyricText</code> as well as under the interface
<code>font-interface</code> but <code>font-shape</code> is not?  The answer is
that <code>font-series</code> and <code>font-size</code> are changed from their
global default values when a <code>LyricText</code> object is created, but
<code>font-shape</code> is not.  The entries in <code>LyricText</code> then tell
you the values for those two properties which apply to
<code>LyricText</code>.  Other objects which support <code>font-interface</code>
will set these properties differently when they are created.
</p>
<p>Let&rsquo;s see if we can now construct the <code>\override</code> command
to change the lyrics to italics.  The object is <code>LyricText</code>,
the property is <code>font-shape</code> and the value is
<code>italic</code>.  As before, we&rsquo;ll omit the context.
</p>
<p>As an aside, although it is an important one, note that because the
values of <code>font-shape</code> are symbols they must be introduced with a
single apostrophe, <code>'</code>.  That is why apostrophes are needed
before <code>thickness</code> in the earlier example and <code>font-shape</code>.
These are both symbols too.  Symbols are then read internally by
LilyPond.  Some of them are the names of properties, like
<code>thickness</code> or <code>font-shape</code>, others are used as values that
can be given to properties, like <code>italic</code>.  Note the distinction
from arbitrary text strings, which would appear as <code>&quot;a text
string&quot;</code>; for more details about symbols and strings, see <a href="#Scheme-tutorial">Scheme tutorial</a>.
</p>
<p>Ok, so the <code>\override</code> command we need to print the lyrics
in italics should be
</p>
<blockquote><pre class="example">\override LyricText #'font-shape = #'italic
</pre></blockquote>

<p>and this should be placed just in front of and close to the
lyrics which it should affect, like this:
</p>
<a name="index-font_002dshape-property_002c-example"></a>
<a name="index-italic_002c-example"></a>
<a name="index-LyricText_002c-example-of-overriding"></a>
<a name="index-_005caddlyrics_002c-example"></a>

<blockquote><pre class="verbatim">{
  \time 6/8
  {
    r4 b8 b[( g]) g |
    g[( e]) e d[( f]) a |
    a g
  }
  \addlyrics {
    \override LyricText #'font-shape = #'italic
    The man who feels love's sweet e -- mo -- tion
  }
}
</pre><p>
 <a href="06/lily-92a4be57.ly">
  <img align="middle"
       border="0"
       src="06/lily-92a4be57.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>and the lyrics are all printed in italics.
</p>
<a name="Specifying-the-context-in-lyric-mode"></a>
<h3 class="subheading">Specifying the context in lyric mode</h3>

<a name="index-context_002c-specifying-in-lyric-mode"></a>
<a name="index-lyric-mode_002c-specifying-context"></a>

<p>In the case of lyrics, if you try specifying the context in the
format given earlier the command will fail.  A syllable
entered in lyricmode is terminated by either a space,
a newline or a digit.  All other characters are included
as part of the syllable.  For this reason a space or newline
must appear before the terminating <code>}</code> to prevent it being
included as part of the final syllable.  Similarly,
spaces must be inserted before and after the
period or dot, &lsquo;.&rsquo;, separating the context name from the
object name, as otherwise the two names are run together and
the interpreter cannot recognize them.  So the command should be:
</p>
<blockquote><pre class="example">\override Lyrics . LyricText #'font-shape = #'italic
</pre></blockquote>

<table class="cartouche" border="1"><tr><td>
<p><b>Note:</b> In lyrics always leave whitespace between the final
syllable and the terminating brace.
</p></td></tr></table>

<table class="cartouche" border="1"><tr><td>
<p><b>Note:</b> In overrides in lyrics always place spaces around
the dot between the context name and the object name.
</p></td></tr></table>


<a name="See-also-1"></a>
<h4 class="subsubheading">See also</h4>
<p>Learning Manual: <a href="#Scheme-tutorial">Scheme tutorial</a>.
</p>

<hr size="6">
<a name="Types-of-properties"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Properties-found-in-interfaces" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Properties found in interfaces&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#The-Internals-Reference-manual" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;The Internals Reference manual&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Appearance-of-objects" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Appearance of objects &gt; </a>]</td></tr></table>
<a name="Types-of-properties"></a>
<h3 class="subsection">4.2.3 Types of properties</h3>

<a name="index-property-types"></a>

<p>So far we have seen two types of property: <code>number</code> and
<code>symbol</code>.  To be valid, the value given to a property
must be of the correct type and obey the rules for that type.
The type of property is always shown in brackets after the
property name in the IR.  Here is a list of the types you may
need, together with the rules for that type, and some examples.
You must always add a hash symbol, <code>#</code>, of course,
to the front of these values when they are entered in the
<code>\override</code> command.
</p>
<table>
<thead><tr><th width="20%"><p> Property type
  </p></th><th width="45%"><p> Rules
  </p></th><th width="35%"><p> Examples
</p></th></tr></thead>
<tr><td width="20%"><p> Boolean
  </p></td><td width="45%"><p> Either True or False, represented by #t or #f
  </p></td><td width="35%"><p> <code>#t</code>, <code>#f</code>
</p></td></tr>
<tr><td width="20%"><p> Dimension (in staff space)
  </p></td><td width="45%"><p> A positive decimal number (in units of staff space)
  </p></td><td width="35%"><p> <code>2.5</code>, <code>0.34</code>
</p></td></tr>
<tr><td width="20%"><p> Direction
  </p></td><td width="45%"><p> A valid direction constant or its numerical equivalent (decimal
values between -1 and 1 are allowed)
  </p></td><td width="35%"><p> <code>LEFT</code>, <code>CENTER</code>, <code>UP</code>,
       <code>1</code>, <code>-1</code>
</p></td></tr>
<tr><td width="20%"><p> Integer
  </p></td><td width="45%"><p> A positive whole number
  </p></td><td width="35%"><p> <code>3</code>, <code>1</code>
</p></td></tr>
<tr><td width="20%"><p> List
  </p></td><td width="45%"><p> A set of values separated by spaces, enclosed in parentheses
and preceded by an apostrophe
  </p></td><td width="35%"><p> <code>'(left-edge staff-bar)</code>, <code>'(1)</code>,
       <code>'(1.0 0.25 0.5)</code>
</p></td></tr>
<tr><td width="20%"><p> Markup
  </p></td><td width="45%"><p> Any valid markup
  </p></td><td width="35%"><p> <code>\markup { \italic &quot;cresc.&quot; }</code>
</p></td></tr>
<tr><td width="20%"><p> Moment
  </p></td><td width="45%"><p> A fraction of a whole note constructed with the
make-moment function
  </p></td><td width="35%"><p> <code>(ly:make-moment 1 4)</code>,
       <code>(ly:make-moment 3 8)</code>
</p></td></tr>
<tr><td width="20%"><p> Number
  </p></td><td width="45%"><p> Any positive or negative decimal value
  </p></td><td width="35%"><p> <code>3.5</code>, <code>-2.45</code>
</p></td></tr>
<tr><td width="20%"><p> Pair (of numbers)
  </p></td><td width="45%"><p> Two numbers separated by a &lsquo;space . space&rsquo; and enclosed
in brackets preceded by an apostrophe
  </p></td><td width="35%"><p> <code>'(2 . 3.5)</code>, <code>'(0.1 . -3.2)</code>
</p></td></tr>
<tr><td width="20%"><p> Symbol
  </p></td><td width="45%"><p> Any of the set of permitted symbols for that property,
preceded by an apostrophe
  </p></td><td width="35%"><p> <code>'italic</code>, <code>'inside</code>
</p></td></tr>
<tr><td width="20%"><p> Unknown
  </p></td><td width="45%"><p> A procedure, or <code>#f</code> to cause no action
  </p></td><td width="35%"><p> <code>bend::print</code>, <code>ly:text-interface::print</code>,
       <code>#f</code>
</p></td></tr>
<tr><td width="20%"><p> Vector
  </p></td><td width="45%"><p> A list of three items enclosed in parentheses and preceded
by apostrophe-hash, <code>'#</code>.
  </p></td><td width="35%"><p> <code>'#(#t #t #f)</code>
</p></td></tr>
</table>


<a name="See-also-10"></a>
<h4 class="subsubheading">See also</h4>
<p>Learning Manual: <a href="#Scheme-tutorial">Scheme tutorial</a>.
</p>

<hr size="6">
<a name="Appearance-of-objects"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Types-of-properties" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Types of properties&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Tweaking-output" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaking output&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Visibility-and-color-of-objects" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Visibility and color of objects &gt; </a>]</td></tr></table>
<a name="Appearance-of-objects"></a>
<h2 class="section">4.3 Appearance of objects</h2>

<p>Let us now put what we have learned into practice with a few
examples which show how tweaks may be used to change the
appearance of the printed music.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Visibility-and-color-of-objects" accesskey="1">4.3.1 Visibility and color of objects</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Size-of-objects" accesskey="2">4.3.2 Size of objects</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Length-and-thickness-of-objects" accesskey="3">4.3.3 Length and thickness of objects</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Visibility-and-color-of-objects"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Appearance-of-objects" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Appearance of objects&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Appearance-of-objects" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Appearance of objects&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Size-of-objects" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Size of objects &gt; </a>]</td></tr></table>
<a name="Visibility-and-color-of-objects"></a>
<h3 class="subsection">4.3.1 Visibility and color of objects</h3>

<p>In the educational use of music we might wish to print a score
with certain elements omitted as an exercise for the student,
who is required to supply them.  As a simple example,
let us suppose the exercise is to supply the missing bar lines
in a piece of music.  But the bar lines are normally inserted
automatically.  How do we prevent them printing?
</p>
<p>Before we tackle this, let us remember that object properties are
grouped in what are called <em>interfaces</em> &ndash; see <a href="#Properties-found-in-interfaces">Properties found in interfaces</a>.  This is simply to group together those
properties that may be used together to tweak a graphical object &ndash; if
one of them is allowed for an object, so are the others.  Some objects
then use the properties in some interfaces, others use them from other
interfaces.  The interfaces which contain the properties used by a
particular grob are listed in the IR at the bottom of the page
describing that grob, and those properties may be viewed by looking at
those interfaces.
</p>
<p>We explained how to find information about grobs in <a href="#Properties-of-layout-objects">Properties of layout objects</a>.  Using the same approach, we go to the IR to find the
layout object which prints bar lines.  Going via <em>Backend</em> and
<em>All layout objects</em> we find there is a layout object called
<code>BarLine</code>.  Its properties include two that control its
visibility: <code>break-visibility</code> and <code>stencil</code>.  Barline also
supports a number of interfaces, including the <code>grob-interface</code>,
where we find the <code>transparent</code> and the <code>color</code> properties.
All of these can affect the visibility of bar lines (and, of course,
by extension, many other layout objects too.)  Let&rsquo;s consider each of
these in turn.
</p>
<a name="stencil"></a>
<h3 class="subheading">stencil</h3>

<a name="index-stencil-property"></a>

<p>This property controls the appearance of the bar lines by specifying
the symbol (glyph) which should be printed.  In common
with many other properties, it can be set to print nothing by
setting its value to <code>#f</code>.  Let&rsquo;s try it, as before, omitting
the implied Context, <code>Voice</code>:
</p>
<a name="index-BarLine_002c-example-of-overriding"></a>
<a name="index-stencil-property_002c-example"></a>

<blockquote><pre class="verbatim">{
  \time 12/16
  \override BarLine #'stencil = ##f
  c4 b8 c d16 c d8 |
  g, a16 b8 c d4 e16 |
  e8
}
</pre><p>
 <a href="a7/lily-1cc66621.ly">
  <img align="middle"
       border="0"
       src="a7/lily-1cc66621.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The bar lines are still printed.  What is wrong?  Go back to the IR
and look again at the page giving the properties of BarLine.  At the
top of the page it says &ldquo;Barline objects are created by:
Bar_engraver&rdquo;.  Go to the <code>Bar_engraver</code> page.  At the bottom it
gives a list of Contexts in which the bar engraver operates.  All of
them are of the type <code>Staff</code>, so the reason the <code>\override</code>
command failed to work as expected is because <code>Barline</code> is not in
the default <code>Voice</code> context.  If the context is specified
wrongly, the command simply does not work.  No error message is
produced, and nothing is logged in the log file.  Let&rsquo;s try correcting
it by adding the correct context:
</p>
<a name="index-BarLine_002c-example-of-overriding-1"></a>
<a name="index-stencil-property_002c-example-1"></a>

<blockquote><pre class="verbatim">{
  \time 12/16
  \override Staff.BarLine #'stencil = ##f
  c4 b8 c d16 c d8 |
  g, a16 b8 c d4 e16 |
  e8
}
</pre><p>
 <a href="af/lily-22da988b.ly">
  <img align="middle"
       border="0"
       src="af/lily-22da988b.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Now the bar lines have vanished.
</p>
<a name="break_002dvisibility"></a>
<h3 class="subheading">break-visibility</h3>

<a name="index-break_002dvisibility-property"></a>

<p>We see from the <code>BarLine</code> properties in the IR that the
<code>break-visibility</code> property requires a vector of three booleans.
These control respectively whether bar lines are printed at the end of
a line, in the middle of lines, and at the beginning of lines.  For
our example we want all bar lines to be suppressed, so the value we
need is <code>'#(#f #f #f)</code>.  Let&rsquo;s try that, remembering to include
the <code>Staff</code> context.  Note also that in writing this value we
have <code>#'#</code> before the opening bracket.  The <code>'#</code> is required
as part of the value to introduce a vector, and the first <code>#</code> is
required, as always, to precede the value itself in the
<code>\override</code> command.
</p>
<a name="index-BarLine_002c-example-of-overriding-2"></a>
<a name="index-break_002dvisibility-property_002c-example"></a>

<blockquote><pre class="verbatim">{
  \time 12/16
  \override Staff.BarLine #'break-visibility = #'#(#f #f #f)
  c4 b8 c d16 c d8 |
  g, a16 b8 c d4 e16 |
  e8
}
</pre><p>
 <a href="db/lily-5a5a3823.ly">
  <img align="middle"
       border="0"
       src="db/lily-5a5a3823.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>And we see this too removes all the bar lines.
</p>
<a name="transparent"></a>
<h3 class="subheading">transparent</h3>

<a name="index-transparent-property"></a>
<a name="index-transparency"></a>

<p>We see from the properties specified in the <code>grob-interface</code> page
in the IR that the <code>transparent</code> property is a boolean.  This
should be set to <code>#t</code> to make the grob transparent.  In this next
example let us make the time signature invisible rather than the bar
lines.  To do this we need to find the grob name for the time
signature.  Back to the &lsquo;All layout objects&rsquo; page in the IR to find
the properties of the <code>TimeSignature</code> layout object.  This is
produced by the <code>Time_signature_engraver</code> which you can check
also lives in the <code>Staff</code> context and also supports the
<code>grob-interface</code>.  So the command to make the time signature
transparent is:
</p>
<a name="index-TimeSignature_002c-example-of-overriding"></a>
<a name="index-transparent-property_002c-example-1"></a>

<blockquote><pre class="verbatim">{
  \time 12/16
  \override Staff.TimeSignature #'transparent = ##t
  c4 b8 c d16 c d8 |
  g, a16 b8 c d4 e16 |
  e8
}
</pre><p>
 <a href="98/lily-7a19ec15.ly">
  <img align="middle"
       border="0"
       src="98/lily-7a19ec15.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The time signature is gone, but this command leaves a gap where
the time signature should be.  Maybe this is what is wanted for
an exercise for the student to fill it in, but in other
circumstances a gap might be undesirable.  To remove it, the
stencil for the time signature should be set to <code>#f</code>
instead:
</p>
<a name="index-TimeSignature_002c-example-of-overriding-1"></a>
<a name="index-stencil-property_002c-example-2"></a>

<blockquote><pre class="verbatim">{
  \time 12/16
  \override Staff.TimeSignature #'stencil = ##f
  c4 b8 c d16 c d8 |
  g, a16 b8 c d4 e16 |
  e8
}
</pre><p>
 <a href="6c/lily-6937aea0.ly">
  <img align="middle"
       border="0"
       src="6c/lily-6937aea0.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>and the difference is obvious: setting the stencil to <code>#f</code>
removes the object entirely; making the object <code>transparent</code>
leaves it where it is, but makes it invisible.
</p>
<a name="color"></a>
<h3 class="subheading">color</h3>

<a name="index-color-property"></a>

<p>Finally let us try making the bar lines invisible by coloring
them white.  (There is a difficulty with this in that the
white bar line may or may not blank out the staff lines where
they cross.  You may see in some of the examples below that this
happens unpredictably.  The details of why this is so and how to
control it are covered in <a name="index-Painting-objects-white"></a>
<a href="lilypond-big-page.html#Painting-objects-white">Painting objects white</a>.  But at
the moment we are learning about color, so please just accept this
limitation for now.)
</p>
<p>The <code>grob-interface</code> specifies that the
color property value is a list, but there is no
explanation of what that list should be.  The list it
requires is actually a list of values in internal units,
but, to avoid having to know what these are, several ways
are provided to specify colors.  The first way is to use one
of the &lsquo;normal&rsquo; colors listed in the first table in
<a name="index-List-of-colors"></a>
<a href="lilypond-big-page.html#List-of-colors">List of colors</a>.  To set the bar lines to white
we write:
</p>
<a name="index-BarLine_002c-example-of-overriding-3"></a>
<a name="index-color-property_002c-example-5"></a>

<blockquote><pre class="verbatim">{
  \time 12/16
  \override Staff.BarLine #'color = #white
  c4 b8 c d16 c d8 |
  g, a16 b8 c d4 e16 |
  e8
}
</pre><p>
 <a href="24/lily-ead66fae.ly">
  <img align="middle"
       border="0"
       src="24/lily-ead66fae.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>and again, we see the bar lines are not visible.  Note that
<em>white</em> is not preceded by an apostrophe &ndash; it is not
a symbol, but a <em>function</em>.  When called, it provides
the list of internal values required to set the color to
white.  The other colors in the normal list are functions
too.  To convince yourself this is working you might like
to change the color to one of the other functions in the
list.
</p>
<a name="index-color_002c-X11"></a>
<a name="index-X11-colors"></a>

<a name="index-x11_002dcolor"></a>
<a name="index-x11_002dcolor-1"></a>

<p>The second way of changing the color is to use the list of
X11 color names in the second list in <a name="index-List-of-colors-1"></a>
<a href="lilypond-big-page.html#List-of-colors">List of colors</a>.
However, these must be preceded by another function, which
converts X11 color names into the list of internal values,
<code>x11-color</code>, like this:
</p>
<a name="index-BarLine_002c-example-of-overriding-4"></a>
<a name="index-color-property_002c-example-6"></a>

<blockquote><pre class="verbatim">{
  \time 12/16
  \override Staff.BarLine #'color = #(x11-color 'white)
  c4 b8 c d16 c d8 |
  g, a16 b8 c d4 e16 |
  e8
}
</pre><p>
 <a href="6b/lily-7a8b71ec.ly">
  <img align="middle"
       border="0"
       src="6b/lily-7a8b71ec.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Note that in this case the function <code>x11-color</code> takes
a symbol as an argument, so the symbol must be preceded by
an apostrophe and the two enclosed in brackets.
</p>
<a name="index-rgb-colors"></a>
<a name="index-color_002c-rgb"></a>

<a name="index-rgb_002dcolor"></a>
<a name="index-rgb_002dcolor-1"></a>

<p>There is yet a third function, one which converts RGB values into
internal colors &ndash; the <code>rgb-color</code> function.  This takes
three arguments giving the intensities of the red, green and
blue colors.  These take values in the range 0 to 1.  So to
set the color to red the value should be <code>(rgb-color 1 0 0)</code>
and to white it should be <code>(rgb-color 1 1 1)</code>:
</p>
<a name="index-BarLine_002c-example-of-overriding-5"></a>
<a name="index-color-property_002c-example-7"></a>

<blockquote><pre class="verbatim">{
  \time 12/16
  \override Staff.BarLine #'color = #(rgb-color 1 1 1)
  c4 b8 c d16 c d8 |
  g, a16 b8 c d4 e16 |
  e8
}
</pre><p>
 <a href="d2/lily-013d0e0d.ly">
  <img align="middle"
       border="0"
       src="d2/lily-013d0e0d.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Finally, there is also a grey scale available as part of the
X11 set of colors.  These range from black, <code>'grey0'</code>,
to white, <code>'grey100</code>, in steps of 1.  Let&rsquo;s illustrate
this by setting all the layout objects in our example to
various shades of grey:
</p>
<a name="index-StaffSymbol_002c-example-of-overriding"></a>
<a name="index-TimeSignature_002c-example-of-overriding-2"></a>
<a name="index-Clef_002c-example-of-overriding"></a>
<a name="index-NoteHead_002c-example-of-overriding-4"></a>
<a name="index-Stem_002c-example-of-overriding"></a>
<a name="index-BarLine_002c-example-of-overriding-6"></a>
<a name="index-color-property_002c-example-8"></a>
<a name="index-x11_002dcolor_002c-example-of-using"></a>

<blockquote><pre class="verbatim">{
  \time 12/16
  \override Staff.StaffSymbol   #'color = #(x11-color 'grey30)
  \override Staff.TimeSignature #'color = #(x11-color 'grey60)
  \override Staff.Clef          #'color = #(x11-color 'grey60)
  \override Voice.NoteHead      #'color = #(x11-color 'grey85)
  \override Voice.Stem          #'color = #(x11-color 'grey85)
  \override Staff.BarLine       #'color = #(x11-color 'grey10)
  c4 b8 c d16 c d8 |
  g, a16 b8 c d4 e16 |
  e8
}
</pre><p>
 <a href="d4/lily-f6c92178.ly">
  <img align="middle"
       border="0"
       src="d4/lily-f6c92178.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Note the contexts associated with each of the layout objects.
It is important to get these right, or the commands will not
work!  Remember, the context is the one in which the appropriate
engraver is placed.  The default context for engravers can be
found by starting from the layout object, going from there to
the engraver which produces it, and on the engraver page in the
IR it tells you in which context the engraver will normally be
found.
</p>

<hr size="6">
<a name="Size-of-objects"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Visibility-and-color-of-objects" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Visibility and color of objects&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Appearance-of-objects" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Appearance of objects&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Length-and-thickness-of-objects" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Length and thickness of objects &gt; </a>]</td></tr></table>
<a name="Size-of-objects"></a>
<h3 class="subsection">4.3.2 Size of objects</h3>

<a name="index-changing-size-of-objects"></a>
<a name="index-size-of-objects"></a>
<a name="index-objects_002c-size-of"></a>
<a name="index-objects_002c-changing-size-of"></a>

<p>Let us begin by looking again at the earlier example
see <a href="#Nesting-music-expressions">Nesting music expressions</a>) which showed
how to introduce a new temporary staff, as in an <a name="index-ossia-1"></a>
<a href="music-glossary-big-page.html#ossia">ossia</a>.
</p>
<a name="index-alignAboveContext-property_002c-example"></a>
<a name="index-_005cwith_002c-example"></a>

<blockquote><pre class="verbatim">\new Staff =&quot;main&quot; {
       \relative g' {
         r4 g8 g c4 c8 d |
         e4 r8
         &lt;&lt;
           { f c c }
           \new Staff \with {
             alignAboveContext = #&quot;main&quot; }
           { f8 f c }
         &gt;&gt;
         r4 |
       }
     }
</pre><p>
 <a href="f7/lily-3b599688.ly">
  <img align="middle"
       border="0"
       src="f7/lily-3b599688.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Ossia are normally written without clef and time signature, and
are usually printed slightly smaller than the main staff.  We
already know now how to remove the clef and time signature &ndash;
we simply set the stencil of each to <code>#f</code>, as follows:
</p>
<a name="index-alignAboveContext-property_002c-example-1"></a>
<a name="index-_005cwith_002c-example-1"></a>
<a name="index-stencil-property_002c-example-3"></a>
<a name="index-Clef_002c-example-of-overriding-1"></a>
<a name="index-TimeSignature_002c-example-of-overriding-3"></a>

<blockquote><pre class="verbatim">\new Staff =&quot;main&quot; {
  \relative g' {
    r4 g8 g c4 c8 d |
    e4 r8
    &lt;&lt;
      { f c c }
      \new Staff \with {
        alignAboveContext = #&quot;main&quot;
      }
      {
        \override Staff.Clef #'stencil = ##f
        \override Staff.TimeSignature #'stencil = ##f
        { f8 f c }
      }
    &gt;&gt;
    r4 |
  }
}
</pre><p>
 <a href="e9/lily-a0bf21a4.ly">
  <img align="middle"
       border="0"
       src="e9/lily-a0bf21a4.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>where the extra pair of braces after the <code>\with</code> clause are
required to ensure the enclosed overrides and music are applied
to the ossia staff.
</p>
<p>But what is the difference between modifying the staff context by
using <code>\with</code> and modifying the stencils of the clef and the
time signature with \override?  The main difference is that
changes made in a <code>\with</code> clause are made at the time the
context is created, and remain in force as the <strong>default</strong>
values for the duration of that context, whereas
<code>\set</code> or <code>\override</code> commands embedded in the
music are dynamic &ndash; they make changes synchronized with
a particular point in the music.  If changes are unset or
reverted using <code>\unset</code> or <code>\revert</code> they return to
their default values, which will be the ones set in the
<code>\with</code> clause, or if none have been set there, the normal
default values.
</p>
<p>Some context properties can be modified only in <code>\with</code> clauses.
These are those properties which cannot sensibly be changed after the
context has been created.  <code>alignAboveContext</code> and its partner,
<code>alignBelowContext</code>, are two such properties &ndash; once the staff
has been created its alignment is decided and it would make no sense
to try to change it later.
</p>
<p>The default values of layout object properties can also be set
in <code>\with</code> clauses.  Simply use the normal <code>\override</code>
command leaving out the context name, since this is unambiguously
defined as the context which the <code>\with</code> clause is modifying.
If fact, an error will be generated if a context is specified
in this location.
</p>
<p>So we could replace the example above with
</p>
<a name="index-alignAboveContext-property_002c-example-2"></a>
<a name="index-_005cwith_002c-example-2"></a>
<a name="index-Clef_002c-example-of-overriding-2"></a>
<a name="index-TimeSignature_002c-example-of-overriding-4"></a>

<blockquote><pre class="verbatim">\new Staff =&quot;main&quot; {
  \relative g' {
    r4 g8 g c4 c8 d |
    e4 r8
    &lt;&lt;
      { f c c }
      \new Staff \with {
        alignAboveContext = #&quot;main&quot;
        % Don't print clefs in this staff
        \override Clef #'stencil = ##f
        % Don't print time signatures in this staff
        \override TimeSignature #'stencil = ##f
      }
        { f8 f c }
    &gt;&gt;
    r4 |
  }
}
</pre><p>
 <a href="95/lily-b2d26044.ly">
  <img align="middle"
       border="0"
       src="95/lily-b2d26044.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Finally we come to changing the size of layout objects.
</p>
<p>Some layout objects are created as glyphs selected from a typeface
font.  These include note heads, accidentals, markup, clefs, time
signatures, dynamics and lyrics.  Their size is changed by modifying
the <code>font-size</code> property, as we shall shortly see.  Other layout
objects such as slurs and ties &ndash; in general, spanner objects &ndash; are
drawn individually, so there is no <code>font-size</code> associated with
them.  These objects generally derive their size from the objects to
which they are attached, so usually there is no need to change their
size manually.  Still other properties such as the length of stems and
bar lines, thickness of beams and other lines, and the separation of
staff lines all need to be modified in special ways.
</p>
<p>Returning to the ossia example, let us first change the font-size.
We can do this in two ways.  We can either change the size of the
fonts of each object type, like <code>NoteHead</code>s with commands
like
</p>
<blockquote><pre class="example">\override NoteHead #'font-size = #-2
</pre></blockquote>

<p>or we can change the size of all fonts by setting a special
property, <code>fontSize</code>, using <code>\set</code>, or by including
it in a <code>\with</code> clause (but without the <code>\set</code>).
</p>
<blockquote><pre class="example">\set fontSize = #-2
</pre></blockquote>

<p>Both of these statements would cause the font size to be reduced
by 2 steps from its previous value, where each
step reduces or increases the size by approximately 12%.
</p>
<p>Let&rsquo;s try it in our ossia example:
</p>
<a name="index-alignAboveContext-property_002c-example-3"></a>
<a name="index-_005cwith_002c-example-3"></a>
<a name="index-Clef_002c-example-of-overriding-3"></a>
<a name="index-TimeSignature_002c-example-of-overriding-5"></a>
<a name="index-fontSize-property_002c-example"></a>

<blockquote><pre class="verbatim">\new Staff =&quot;main&quot; {
  \relative g' {
    r4 g8 g c4 c8 d |
    e4 r8
    &lt;&lt;
      { f c c }
      \new Staff \with {
        alignAboveContext = #&quot;main&quot;
        \override Clef #'stencil = ##f
        \override TimeSignature #'stencil = ##f
        % Reduce all font sizes by ~24%
        fontSize = #-2
      }
        { f8 f c }
    &gt;&gt;
    r4 |
  }
}
</pre><p>
 <a href="c3/lily-6370cb6c.ly">
  <img align="middle"
       border="0"
       src="c3/lily-6370cb6c.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>This is still not quite right.  The note heads and flags are
smaller, but the stems are too long in proportion and the
staff lines are spaced too widely apart.  These need to be
scaled down in proportion to the font reduction.  The next
sub-section discusses how this is done.
</p>
<hr size="6">
<a name="Length-and-thickness-of-objects"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Size-of-objects" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Size of objects&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Appearance-of-objects" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Appearance of objects&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Placement-of-objects" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Placement of objects &gt; </a>]</td></tr></table>
<a name="Length-and-thickness-of-objects"></a>
<h3 class="subsection">4.3.3 Length and thickness of objects</h3>

<a name="index-distances"></a>
<a name="index-thickness"></a>
<a name="index-length"></a>
<a name="index-magstep"></a>
<a name="index-size_002c-changing"></a>
<a name="index-stem-length_002c-changing"></a>
<a name="index-staff-line-spacing_002c-changing"></a>

<p>Distances and lengths in LilyPond are generally measured in
staff-spaces, the distance between adjacent lines in the staff,
(or occasionally half staff spaces) while most <code>thickness</code>
properties are measured in units of an internal property called
<code>line-thickness.</code>  For example, by default, the lines of
hairpins are given a thickness of 1 unit of <code>line-thickness</code>,
while the <code>thickness</code> of a note stem is 1.3.  Note, though,
that some thickness properties are different; for example, the
thickness of beams is measured in staff-spaces.
</p>
<p>So how are lengths to be scaled in proportion to the font size?
This can be done with the help of a special function called
<code>magstep</code> provided for exactly this purpose.  It takes
one argument, the change in font size (#-2 in the example above)
and returns a scaling factor suitable for reducing other
objects in proportion.  It is used like this:
</p>
<a name="index-alignAboveContext-property_002c-example-4"></a>
<a name="index-_005cwith_002c-example-4"></a>
<a name="index-Clef_002c-example-of-overriding-4"></a>
<a name="index-TimeSignature_002c-example-of-overriding-6"></a>
<a name="index-fontSize-property_002c-example-1"></a>
<a name="index-StaffSymbol_002c-example-of-overriding-1"></a>
<a name="index-magstep-function_002c-example-of-using"></a>
<a name="index-staff_002dspace-property_002c-example"></a>
<a name="index-stencil-property_002c-example-4"></a>

<blockquote><pre class="verbatim">\new Staff =&quot;main&quot; {
  \relative g' {
    r4 g8 g c4 c8 d |
    e4 r8
    &lt;&lt;
      { f c c }
      \new Staff \with {
        alignAboveContext = #&quot;main&quot;
        \override Clef #'stencil = ##f
        \override TimeSignature #'stencil = ##f
        fontSize = #-2
        % Reduce stem length and line spacing to match
        \override StaffSymbol #'staff-space = #(magstep -2)
      }
        { f8 f c }
    &gt;&gt;
    r4 |
  }
}
</pre><p>
 <a href="1a/lily-07e6b1dd.ly">
  <img align="middle"
       border="0"
       src="1a/lily-07e6b1dd.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Since the length of stems and many other length-related properties are
always calculated relative to the value of the <code>staff-space</code>
property these are automatically scaled down in length too.  Note that
this affects only the vertical scale of the ossia &ndash; the horizontal
scale is determined by the layout of the main music in order to remain
synchronized with it, so it is not affected by any of these changes in
size.  Of course, if the scale of all the main music were changed in
this way then the horizontal spacing would be affected.  This is
discussed later in the layout section.
</p>
<p>This, then, completes the creation of an ossia.  The sizes and
lengths of all other objects may be modified in analogous ways.
</p>
<p>For small changes in scale, as in the example above, the
thickness of the various drawn lines such as bar lines,
beams, hairpins, slurs, etc does not usually require global
adjustment.  If the thickness of any particular layout object
needs to be adjusted this can be best achieved by overriding its
<code>thickness</code> property.  An example of changing the thickness
of slurs was shown above in <a href="#Properties-of-layout-objects">Properties of layout objects</a>.
The thickness of all drawn objects (i.e., those not produced
from a font) may be changed in the same way.
</p>

<hr size="6">
<a name="Placement-of-objects"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Length-and-thickness-of-objects" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Length and thickness of objects&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Tweaking-output" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaking output&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Automatic-behavior" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Automatic behavior &gt; </a>]</td></tr></table>
<a name="Placement-of-objects"></a>
<h2 class="section">4.4 Placement of objects</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Automatic-behavior" accesskey="1">4.4.1 Automatic behavior</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Within_002dstaff-objects" accesskey="2">4.4.2 Within-staff objects</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Outside_002dstaff-objects" accesskey="3">4.4.3 Outside-staff objects</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="Automatic-behavior"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Placement-of-objects" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Placement of objects&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Placement-of-objects" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Placement of objects&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Within_002dstaff-objects" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Within-staff objects &gt; </a>]</td></tr></table>
<a name="Automatic-behavior"></a>
<h3 class="subsection">4.4.1 Automatic behavior</h3>

<a name="index-within_002dstaff-objects"></a>
<a name="index-outside_002dstaff-objects"></a>
<a name="index-objects_002c-within_002dstaff"></a>
<a name="index-objects_002c-outside_002dstaff"></a>

<p>There are some objects in musical notation that belong to
the staff and there are other objects that should be
placed outside the staff.  These are called within-staff
objects and outside-staff objects respectively.
</p>
<p>Within-staff objects are those that are located on the staff
&ndash; note heads, stems, accidentals, etc.  The positions of
these are usually fixed by the music itself &ndash; they are
vertically positioned on specific lines of the staff or are
tied to other objects that are so positioned.  Collisions of
note heads, stems and accidentals in closely set chords are
normally avoided automatically.  There are commands and
overrides which can modify this automatic behavior, as we
shall shortly see.
</p>
<p>Objects belonging outside the staff include things such as
rehearsal marks, text and dynamic markings.  LilyPond&rsquo;s rule for
the vertical placement of outside-staff objects is to place them
as close to the staff as possible but not so close that they
collide with any other object.  LilyPond uses the
<code>outside-staff-priority</code> property to determine the order in
which the objects should be placed, as follows.
</p>
<p>First, LilyPond places all the within-staff objects.
Then it sorts the outside-staff objects according to their
<code>outside-staff-priority</code>.  The outside-staff objects are
taken one by one, beginning with the object with the lowest
<code>outside-staff-priority</code>, and placed so that they do not
collide with any objects that have already been placed. That is,
if two outside-staff grobs are competing for the same space, the
one with the lower <code>outside-staff-priority</code> will be placed
closer to the staff.  If two objects have the same
<code>outside-staff-priority</code> the one encountered first will be
placed closer to the staff.
</p>
<p>In the following example all the markup texts have the same
priority (since it is not explicitly set).  Note that &lsquo;Text3&rsquo;
is automatically positioned close to the staff again, nestling
under &lsquo;Text2&rsquo;.
</p>
<a name="index-markup-example"></a>

<blockquote><pre class="verbatim">c2^&quot;Text1&quot;
c^&quot;Text2&quot;
c^&quot;Text3&quot;
c^&quot;Text4&quot;
</pre><p>
 <a href="fc/lily-8784dc6a.ly">
  <img align="middle"
       border="0"
       src="fc/lily-8784dc6a.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Staves are also positioned, by default, as closely together as
possible (subject to a minimum separation).  If notes project
a long way towards an adjacent staff they will force the
staves further apart only if an overlap of the notation
would otherwise occur.  The following example demonstrates
this &lsquo;nestling&rsquo; of the notes on adjacent staves:
</p>
<blockquote><pre class="verbatim">&lt;&lt;
  \new Staff {
    \relative c' { c a, }
  }
  \new Staff {
    \relative c'''' { c a, }
  }
&gt;&gt;
</pre><p>
 <a href="83/lily-e15e62d6.ly">
  <img align="middle"
       border="0"
       src="83/lily-e15e62d6.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<hr size="6">
<a name="Within_002dstaff-objects"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Automatic-behavior" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Automatic behavior&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Placement-of-objects" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Placement of objects&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Outside_002dstaff-objects" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Outside-staff objects &gt; </a>]</td></tr></table>
<a name="Within_002dstaff-objects"></a>
<h3 class="subsection">4.4.2 Within-staff objects</h3>

<p>We have already seen how the commands <code>\voiceXXX</code> affect
the direction of slurs, ties, fingering and
everything else which depends on the direction of the stems.
These commands are essential when writing polyphonic music to
permit interweaving melodic lines to be distinguished.
But occasionally it may be necessary to override this automatic
behavior.  This can be done for whole sections of music or even
for an individual note.  The property which controls this
behavior is the <code>direction</code> property of each layout object.
We first explain what this does, and then introduce a number of
ready-made commands which avoid your having to code explicit
overrides for the more common modifications.
</p>
<p>Some layout objects like slurs and ties curve, bend or point
either up or down; others like stems and flags also move to
right or left when they point up or down.  This is controlled
automatically when <code>direction</code> is set.
</p>
<a name="index-down"></a>
<a name="index-up"></a>
<a name="index-center"></a>
<a name="index-neutral"></a>

<p>The following example shows in bar 1 the default behavior of stems,
with those on high notes pointing down and those on low notes pointing
up, followed by four notes with all stems forced down, four notes with
all stems forced up, and finally four notes reverted back to the
default behavior.
</p>
<a name="index-Stem_002c-example-of-overriding-1"></a>
<a name="index-direction-property_002c-example-1"></a>

<blockquote><pre class="verbatim">a4 g c a
\override Stem #'direction = #DOWN
a g c a
\override Stem #'direction = #UP
a g c a
\revert Stem #'direction
a g c a
</pre><p>
 <a href="43/lily-26b5f6d6.ly">
  <img align="middle"
       border="0"
       src="43/lily-26b5f6d6.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Here we use the constants <code>DOWN</code> and <code>UP</code>.
These have the values <code>-1</code> and <code>+1</code> respectively, and
these numerical values may be used instead.  The value <code>0</code>
may also be used in some cases.  It is simply treated as meaning
<code>UP</code> for stems, but for some objects it means &lsquo;center&rsquo;.
There is a constant, <code>CENTER</code> which has the value <code>0</code>.
</p>
<p>However, these explicit overrides are not usually used, as there are
simpler equivalent predefined commands available.  Here is a table of
the commonest.  The meaning of each is stated where it is not obvious.
</p>
<table>
<thead><tr><th width="20%"><p> Down/Left
  </p></th><th width="20%"><p> Up/Right
  </p></th><th width="25%"><p> Revert
  </p></th><th width="35%"><p> Effect
</p></th></tr></thead>
<tr><td width="20%"><p> <code>\arpeggioArrowDown</code>
  </p></td><td width="20%"><p> <code>\arpeggioArrowUp</code>
  </p></td><td width="25%"><p> <code>\arpeggioNormal</code>
  </p></td><td width="35%"><p> Arrow is at bottom, at top, or no arrow
</p></td></tr>
<tr><td width="20%"><p> <code>\dotsDown</code>
  </p></td><td width="20%"><p> <code>\dotsUp</code>
  </p></td><td width="25%"><p> <code>\dotsNeutral</code>
  </p></td><td width="35%"><p> Direction of movement to avoid staff lines
</p></td></tr>
<tr><td width="20%"><p> <code>\dynamicDown</code>
  </p></td><td width="20%"><p> <code>\dynamicUp</code>
  </p></td><td width="25%"><p> <code>\dynamicNeutral</code>
  </p></td><td width="35%"></td></tr>
<tr><td width="20%"><p> <code>\phrasingSlurDown</code>
  </p></td><td width="20%"><p> <code>\phrasingSlurUp</code>
  </p></td><td width="25%"><p> <code>\phrasingSlurNeutral</code>
  </p></td><td width="35%"><p> Note: distinct from slur commands
</p></td></tr>
<tr><td width="20%"><p> <code>\slurDown</code>
  </p></td><td width="20%"><p> <code>\slurUp</code>
  </p></td><td width="25%"><p> <code>\slurNeutral</code>
  </p></td><td width="35%"></td></tr>
<tr><td width="20%"><p> <code>\stemDown</code>
  </p></td><td width="20%"><p> <code>\stemUp</code>
  </p></td><td width="25%"><p> <code>\stemNeutral</code>
  </p></td><td width="35%"></td></tr>
<tr><td width="20%"><p> <code>\textSpannerDown</code>
  </p></td><td width="20%"><p> <code>\textSpannerUp</code>
  </p></td><td width="25%"><p> <code>\textSpannerNeutral</code>
  </p></td><td width="35%"><p> Text entered as spanner is below/above staff
</p></td></tr>
<tr><td width="20%"><p> <code>\tieDown</code>
  </p></td><td width="20%"><p> <code>\tieUp</code>
  </p></td><td width="25%"><p> <code>\tieNeutral</code>
  </p></td><td width="35%"></td></tr>
<tr><td width="20%"><p> <code>\tupletDown</code>
  </p></td><td width="20%"><p> <code>\tupletUp</code>
  </p></td><td width="25%"><p> <code>\tupletNeutral</code>
  </p></td><td width="35%"><p> Tuplets are below/above notes
</p></td></tr>
</table>

<p>Note that these predefined commands may <strong>not</strong> be
preceded by <code>\once</code>.  If you wish to limit the
effect to a single note you must either use the equivalent
<code>\once \override</code> command or use the predefined command
followed after the affected note by the corresponding
<code>\xxxNeutral</code> command.
</p>
<a name="Fingering"></a>
<h3 class="subheading">Fingering</h3>

<a name="index-fingering_002c-placement"></a>
<a name="index-fingering_002c-chords"></a>

<p>The placement of fingering on single notes can also be controlled
by the <code>direction</code> property, but changing <code>direction</code>
has no effect on chords.  As we shall see, there are special
commands which allow the fingering of individual notes
of chords to be controlled, with the fingering being placed
above, below, to the left or to the right of each note.
</p>
<p>First, here&rsquo;s the effect of <code>direction</code> on the fingering
attached to single notes.  The first bar shows the default
behaviour, and the following two bars shows the effect of
specifying <code>DOWN</code> and <code>UP</code>:
</p>
<a name="index-Fingering_002c-example-of-overriding"></a>
<a name="index-direction-property_002c-example-2"></a>

<blockquote><pre class="verbatim">c-5 a-3 f-1 c'-5
\override Fingering #'direction = #DOWN
c-5 a-3 f-1 c'-5
\override Fingering #'direction = #UP
c-5 a-3 f-1 c'-5
</pre><p>
 <a href="25/lily-7de8e3f4.ly">
  <img align="middle"
       border="0"
       src="25/lily-7de8e3f4.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>However, overriding the <code>direction</code> property is not the
easiest way of manually setting the fingering above or below
the notes; using <code>_</code> or <code>^</code> instead of <code>-</code> before
the fingering number is usually preferable.  Here is the previous
example using this method:
</p>
<a name="index-fingering-example"></a>

<blockquote><pre class="verbatim">c-5 a-3 f-1 c'-5
c_5 a_3 f_1 c'_5
c^5 a^3 f^1 c'^5
</pre><p>
 <a href="60/lily-2f7d2e09.ly">
  <img align="middle"
       border="0"
       src="60/lily-2f7d2e09.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The <code>direction</code> property is ignored for chords, but the
directional prefixes, <code>_</code> and <code>^</code> do work.  By default,
the fingering is automatically placed both above and below the
notes of a chord, as shown:
</p>
<a name="index-fingering-example-1"></a>

<blockquote><pre class="verbatim">&lt;c-5 g-3&gt;
&lt;c-5 g-3 e-2&gt;
&lt;c-5 g-3 e-2 c-1&gt;
</pre><p>
 <a href="dc/lily-ca2c476e.ly">
  <img align="middle"
       border="0"
       src="dc/lily-ca2c476e.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>but this may be overriden to manually force all or any of the
individual fingering numbers above or below:
</p>
<a name="index-fingering-example-2"></a>

<blockquote><pre class="verbatim">&lt;c-5 g-3 e-2 c-1&gt;
&lt;c^5 g_3 e_2 c_1&gt;
&lt;c^5 g^3 e^2 c_1&gt;
</pre><p>
 <a href="8c/lily-b920601e.ly">
  <img align="middle"
       border="0"
       src="8c/lily-b920601e.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Even greater control over the placement of fingering of the
individual notes in a chord is possible by using the
<code>\set fingeringOrientations</code> command.  The format of this
command is:
</p>
<blockquote><pre class="example"><code>\set fingeringOrientations = #'([up] [left/right] [down])</code>
</pre></blockquote>

<p><code>\set</code> is used because <code>fingeringOrientations</code> is a
property of the <code>Voice</code> context, created and used by the
<code>New_fingering_engraver</code>.
</p>
<p>The property may be set to a list of one to three values.
It controls whether fingerings may be placed above (if
<code>up</code> appears in the list), below (if <code>down</code> appears),
to the left (if <code>left</code> appears, or to the right
(if <code>right</code> appears).  Conversely, if a location is not
listed, no fingering is placed there.  LilyPond takes these
constraints and works out the best placement for the fingering
of the notes of the following chords.  Note that <code>left</code> and
<code>right</code> are mutually exclusive &ndash; fingering may be placed
only on one side or the other, not both.
</p>
<table class="cartouche" border="1"><tr><td>
<p><b>Note:</b> To control the placement of the fingering of a single
note using this command it is necessary to write it as a single
note chord by placing angle brackets round it.
</p></td></tr></table>

<p>Here are a few examples:
</p>
<a name="index-fingering-example-3"></a>
<a name="index-_005cset_002c-example-of-using"></a>
<a name="index-fingeringOrientations-property_002c-example"></a>

<blockquote><pre class="verbatim">\set fingeringOrientations = #'(left)
&lt;f-2&gt;
&lt; c-1  e-2 g-3 b-5 &gt; 4
\set fingeringOrientations = #'(left)
&lt;f-2&gt;
&lt; c-1  e-2 g-3 b-5 &gt; 4
\set fingeringOrientations = #'(up left down)
&lt;f-2&gt;
&lt; c-1  e-2 g-3 b-5 &gt; 4
\set fingeringOrientations = #'(up left)
&lt;f-2&gt;
&lt; c-1  e-2 g-3 b-5 &gt; 4
\set fingeringOrientations = #'(right)
&lt;f-2&gt;
&lt; c-1  e-2 g-3 b-5 &gt; 4
</pre><p>
 <a href="91/lily-02580353.ly">
  <img align="middle"
       border="0"
       src="91/lily-02580353.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>If the fingering seems a little crowded the <code>font-size</code>
could be reduced.  The default value can be seen from the
<code>Fingering</code> object in the IR to be <code>-5</code>, so let&rsquo;s
try <code>-7</code>:
</p>
<blockquote><pre class="verbatim">\override Fingering #'font-size = #-7
\set fingeringOrientations = #'(left)
&lt;f-2&gt;
&lt; c-1  e-2 g-3 b-5 &gt; 4
\set fingeringOrientations = #'(left)
&lt;f-2&gt;
&lt; c-1  e-2 g-3 b-5 &gt; 4
\set fingeringOrientations = #'(up left down)
&lt;f-2&gt;
&lt; c-1  e-2 g-3 b-5 &gt; 4
\set fingeringOrientations = #'(up left)
&lt;f-2&gt;
&lt; c-1  e-2 g-3 b-5 &gt; 4
\set fingeringOrientations = #'(right)
&lt;f-2&gt;
&lt; c-1  e-2 g-3 b-5 &gt; 4
</pre><p>
 <a href="44/lily-6c73088a.ly">
  <img align="middle"
       border="0"
       src="44/lily-6c73088a.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<hr size="6">
<a name="Outside_002dstaff-objects"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Within_002dstaff-objects" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Within-staff objects&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Placement-of-objects" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Placement of objects&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Collisions-of-objects" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Collisions of objects &gt; </a>]</td></tr></table>
<a name="Outside_002dstaff-objects"></a>
<h3 class="subsection">4.4.3 Outside-staff objects</h3>

<p>Outside-staff objects are automatically placed to avoid collisions.
Objects with the lower value of the <code>outside-staff-priority</code>
property are placed nearer to the staff, and other outside-staff
objects are then raised as far as necessary to avoid collisions.
The <code>outside-staff-priority</code> is defined in the
<code>grob-interface</code> and so is a property of all layout objects.
By default it is set to <code>#f</code> for all within-staff objects,
and to a numerical value appropriate to each outside-staff object
when the object is created.  The following table shows
the default numerical values for some of the commonest
outside-staff objects which are, by default, placed in the
<code>Staff</code> or <code>Voice</code> contexts.
</p>
<table>
<thead><tr><th width="30%"><p> Layout Object
  </p></th><th width="30%"><p> Priority
  </p></th><th width="30%"><p> Controls position of:
</p></th></tr></thead>
<tr><td width="30%"><p> <code>MultiMeasureRestText</code>
  </p></td><td width="30%"><p> <code>450</code>
  </p></td><td width="30%"><p> Text over full-bar rests
</p></td></tr>
<tr><td width="30%"><p> <code>TextScript</code>
  </p></td><td width="30%"><p> <code>450</code>
  </p></td><td width="30%"><p> Markup text
</p></td></tr>
<tr><td width="30%"><p> <code>OttavaBracket</code>
  </p></td><td width="30%"><p> <code>400</code>
  </p></td><td width="30%"><p> Ottava brackets
</p></td></tr>
<tr><td width="30%"><p> <code>TextSpanner</code>
  </p></td><td width="30%"><p> <code>350</code>
  </p></td><td width="30%"><p> Text spanners
</p></td></tr>
<tr><td width="30%"><p> <code>DynamicLineSpanner</code>
  </p></td><td width="30%"><p> <code>250</code>
  </p></td><td width="30%"><p> All dynamic markings
</p></td></tr>
<tr><td width="30%"><p> <code>VoltaBracketSpanner</code>
  </p></td><td width="30%"><p> <code>100</code>
  </p></td><td width="30%"><p> Volta brackets
</p></td></tr>
<tr><td width="30%"><p> <code>TrillSpanner</code>
  </p></td><td width="30%"><p> <code>50</code>
  </p></td><td width="30%"><p> Spanning trills
</p></td></tr>
</table>

<p>Here is an example showing the default placement of some of
these.
</p>
<a name="index-text-spanner"></a>
<a name="index-ottava-bracket"></a>

<a name="index-_005cstartTextSpan"></a>
<a name="index-_005cstartTextSpan-1"></a>
<a name="index-startTextSpan"></a>
<a name="index-startTextSpan-1"></a>
<a name="index-_005cstopTextSpan"></a>
<a name="index-_005cstopTextSpan-1"></a>
<a name="index-stopTextSpan"></a>
<a name="index-stopTextSpan-1"></a>

<a name="index-TextSpanner_002c-example-of-overriding"></a>
<a name="index-bound_002ddetails-property_002c-example"></a>

<blockquote><pre class="verbatim">% Set details for later Text Spanner
\override TextSpanner #'(bound-details left text)
    = \markup { \small \bold Slower }
% Place dynamics above staff
\dynamicUp
% Start Ottava Bracket
\ottava #1
c' \startTextSpan
% Add Dynamic Text
c\pp
% Add Dynamic Line Spanner
c\&lt;
% Add Text Script
c^Text
c c
% Add Dynamic Text
c\ff c \stopTextSpan
% Stop Ottava Bracket
\ottava #0
c, c c c
</pre><p>
 <a href="fe/lily-51107612.ly">
  <img align="middle"
       border="0"
       src="fe/lily-51107612.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>This example also shows how to create Text Spanners &ndash;
text with extender lines above a section of music.  The
spanner extends from the <code>\startTextSpan</code> command to
the <code>\stopTextSpan</code> command, and the format of the
text is defined by the <code>\override TextSpanner</code> command.
For more details see <a name="index-Text-spanners"></a>
<a href="lilypond-big-page.html#Text-spanners">Text spanners</a>.
</p>
<p>It also shows how ottava brackets are created.
</p>
<a name="index-tweaking-bar-number-placement"></a>
<a name="index-bar-numbers_002c-tweaking-placement"></a>
<a name="index-tweaking-metronome-mark-placement"></a>
<a name="index-metronome-mark_002c-tweaking-placement"></a>
<a name="index-tweaking-rehearsal-mark-placement"></a>
<a name="index-rehearsal-marks_002c-tweaking-placement"></a>

<p>Note that bar numbers, metronome marks and rehearsal marks are not
shown. By default these are created in the <code>Score</code> context and
their <code>outside-staff-priority</code> is ignored relative to the layout
objects which are created in the <code>Staff</code> context.  If you wish to
place bar numbers, metronome marks or rehearsal marks in accordance
with the value of their <code>outside-staff-priority</code> the
<code>Bar_number_engraver</code>, <code>Metronome_mark_engraver</code> or
<code>Mark_engraver</code> respectively should be removed from the
<code>Score</code> context and placed in the top <code>Staff</code> context.  If
this is done, these marks will be given the following default
<code>outside-staff-priority</code> values:
</p>
<table>
<thead><tr><th width="30%"><p> Layout Object           </p></th><th width="30%"><p> Priority
</p></th></tr></thead>
<tr><td width="30%"><p> <code>RehearsalMark</code>        </p></td><td width="30%"><p> <code>1500</code>
</p></td></tr>
<tr><td width="30%"><p> <code>MetronomeMark</code>        </p></td><td width="30%"><p> <code>1000</code>
</p></td></tr>
<tr><td width="30%"><p> <code>BarNumber</code>            </p></td><td width="30%"><p> <code> 100</code>
</p></td></tr>
</table>

<p>If the default values of <code>outside-staff-priority</code> do not give you
the placing you want, the priority of any of the objects may be
overridden.  Suppose we would like the ottava bracket to be placed
below the text spanner in the example above.  All we need to do is to
look up the priority of <code>OttavaBracket</code> in the IR or in the
tables above, and reduce it to a value lower than that of a
<code>TextSpanner</code>, remembering that <code>OttavaBracket</code> is created
in the <code>Staff</code> context:
</p>
<a name="index-TextSpanner_002c-example-of-overriding-1"></a>
<a name="index-bound_002ddetails-property_002c-example-1"></a>

<blockquote><pre class="verbatim">% Set details for later Text Spanner
\override TextSpanner #'(bound-details left text)
    = \markup { \small \bold Slower }
% Place dynamics above staff
\dynamicUp
%Place following Ottava Bracket below Text Spanners
\once \override Staff.OttavaBracket #'outside-staff-priority = #340
% Start Ottava Bracket
\ottava #1
c' \startTextSpan
% Add Dynamic Text
c\pp
% Add Dynamic Line Spanner
c\&lt;
% Add Text Script
c^Text
c c
% Add Dynamic Text
c\ff c \stopTextSpan
% Stop Ottava Bracket
\ottava #0
c, c c c
</pre><p>
 <a href="7c/lily-090c803e.ly">
  <img align="middle"
       border="0"
       src="7c/lily-090c803e.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="index-slurs-and-outside_002dstaff_002dpriority"></a>
<a name="index-slurs-and-articulations"></a>
<a name="index-articulations-and-slurs"></a>

<p>Slurs by default are classed as within-staff objects, but
they often appear above the staff if the notes to
which they are attached are high on the staff.  This can push
outside-staff objects such as articulations too high, as the slur
will be placed first.  The <code>avoid-slur</code> property of the
articulation can be set to <code>'inside</code> to bring the articulation
inside the slur, but the <code>avoid-slur</code> property is effective
only if the <code>outside-staff-priority</code> is also set to <code>#f</code>.
Alternatively, the <code>outside-staff-priority</code> of the slur
can be set to a numerical value to cause it to be placed along with
other outside-staff objects according to that value.  Here&rsquo;s an
example showing the effect of the two methods:
</p>
<blockquote><pre class="verbatim">c4( c^\markup\tiny\sharp d4.) c8
c4(
\once \override TextScript #'avoid-slur = #'inside
\once \override TextScript #'outside-staff-priority = ##f
c^\markup\tiny\sharp d4.) c8
\once \override Slur #'outside-staff-priority = #500
c4( c^\markup\tiny\sharp d4.) c8
</pre><p>
 <a href="f0/lily-c05b32ab.ly">
  <img align="middle"
       border="0"
       src="f0/lily-c05b32ab.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Changing the <code>outside-staff-priority</code> can also be used to
control the vertical placement of individual objects, although
the results may not always be desirable.  Suppose we would
like &ldquo;Text3&rdquo; to be placed above &ldquo;Text4&rdquo; in the example
under Automatic behavior, above (see <a href="#Automatic-behavior">Automatic behavior</a>).
All we need to do is to look up the priority of <code>TextScript</code>
in the IR or in the tables above, and increase the priority of
&ldquo;Text3&rdquo; to a higher value:
</p>
<a name="index-TextScript_002c-example-of-overriding"></a>
<a name="index-outside_002dstaff_002dpriority-property_002c-example"></a>

<blockquote><pre class="verbatim">c2^&quot;Text1&quot;
c^&quot;Text2&quot;
\once \override TextScript #'outside-staff-priority = #500
c^&quot;Text3&quot;
c^&quot;Text4&quot;
</pre><p>
 <a href="1a/lily-fc504e94.ly">
  <img align="middle"
       border="0"
       src="1a/lily-fc504e94.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>This certainly lifts &ldquo;Text3&rdquo; above &ldquo;Text4&rdquo; but it also lifts it
above &ldquo;Text2&rdquo;, and &ldquo;Text4&rdquo; now drops down.  Perhaps this is not
so good.  What we would really like to do is to position all the
annotation at the same distance above the staff.  To do this, we
clearly will need to space the notes out horizontally to make more
room for the text.  This is done using the <code>textLengthOn</code>
command.
</p>
<a name="g_t_005ctextLengthOn"></a>
<h3 class="subheading">\textLengthOn</h3>

<a name="index-notes_002c-spreading-out-with-text"></a>

<a name="index-_005ctextLengthOn"></a>
<a name="index-_005ctextLengthOn-1"></a>
<a name="index-textLengthOn"></a>
<a name="index-textLengthOn-1"></a>
<a name="index-_005ctextLengthOff"></a>
<a name="index-_005ctextLengthOff-1"></a>
<a name="index-textLengthOff"></a>
<a name="index-textLengthOff-1"></a>

<p>By default, text produced by markup takes up no horizontal space
as far as laying out the music is concerned.  The <code>\textLengthOn</code>
command reverses this behavior, causing the notes to be spaced
out as far as is necessary to accommodate the text:
</p>
<blockquote><pre class="verbatim">\textLengthOn  % Cause notes to space out to accommodate text
c2^&quot;Text1&quot;
c^&quot;Text2&quot;
c^&quot;Text3&quot;
c^&quot;Text4&quot;
</pre><p>
 <a href="bd/lily-0d55b59d.ly">
  <img align="middle"
       border="0"
       src="bd/lily-0d55b59d.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The command to revert to the default behavior is
<code>\textLengthOff</code>.  Remember <code>\once</code> only works with
<code>\override</code>, <code>\set</code>, <code>\revert</code> or <code>unset</code>,
so cannot be used with <code>\textLengthOn</code>.
</p>
<a name="index-markup-text_002c-allowing-collisions"></a>

<p>Markup text will also avoid notes which project above the staff.
If this is not desired, the automatic displacement upwards may
be turned off by setting the priority to <code>#f</code>.  Here&rsquo;s an
example to show how markup text interacts with such notes.
</p>
<a name="index-TextScript_002c-example-of-overriding-1"></a>
<a name="index-outside_002dstaff_002dpriority-property_002c-example-1"></a>

<blockquote><pre class="verbatim">% This markup is short enough to fit without collision
c2^&quot;Tex&quot;
c''2
R1
% This is too long to fit, so it is displaced upwards
c,,2^&quot;Text&quot;
c''2
R1
% Turn off collision avoidance
\once \override TextScript #'outside-staff-priority = ##f
c,,2^&quot;Long Text   &quot;
c''2
R1
% Turn off collision avoidance
\once \override TextScript #'outside-staff-priority = ##f
\textLengthOn  % and turn on textLengthOn
c,,2^&quot;Long Text   &quot;  % Spaces at end are honored
c''2
</pre><p>
 <a href="bb/lily-a725154b.ly">
  <img align="middle"
       border="0"
       src="bb/lily-a725154b.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<a name="Dynamics"></a>
<h3 class="subheading">Dynamics</h3>

<a name="index-tweaking-dynamics-placement"></a>
<a name="index-dynamics_002c-tweaking-placement"></a>

<p>Dynamic markings will normally be positioned beneath the
staff, but may be positioned above with the <code>dynamicUp</code>
command.  They will be positioned vertically relative to the
note to which they are attached, and will float below (or above)
all within-staff objects such as phrasing slurs and bar numbers.
This can give quite acceptable results, as this example
shows:
</p>
<blockquote><pre class="verbatim">\clef &quot;bass&quot;
\key aes \major
\time 9/8
\dynamicUp
bes4.~\f\&lt; \( bes4 bes8 des4\ff\&gt; c16 bes\! |
ees,2.~\)\mf ees4 r8 |
</pre><p>
 <a href="dd/lily-938eacbb.ly">
  <img align="middle"
       border="0"
       src="dd/lily-938eacbb.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>However, if the notes and attached dynamics are close
together the automatic placement will avoid collisions
by displacing later dynamic markings further away, but this may
not be the optimum placement, as this rather artificial example
shows:
</p>
<blockquote><pre class="verbatim">\dynamicUp
a4\f b\mf c\mp b\p
</pre><p>
 <a href="cd/lily-19bb42da.ly">
  <img align="middle"
       border="0"
       src="cd/lily-19bb42da.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Should a similar situation arise in &lsquo;real&rsquo; music, it may be
preferable to space out the notes a little further, so the dynamic
markings can all fit at the same vertical distance from the staff.  We
were able to do this for markup text by using the <code>\textLengthOn</code>
command, but there is no equivalent command for dynamic marks.  So we
shall have to work out how to do this using <code>\override</code> commands.
</p>
<a name="Grob-sizing"></a>
<h3 class="subheading">Grob sizing</h3>

<a name="index-grob-sizing"></a>
<a name="index-sizing-grobs"></a>

<p>First we must learn how grobs are sized.  All grobs have a
reference point defined within them which is used to position
them relative to their parent object.  This point in the grob
is then positioned at a horizontal distance, <code>X-offset</code>,
and at a vertical distance, <code>Y-offset</code>, from its parent.
The horizontal extent of the object is given by a pair of
numbers, <code>X-extent</code>, which say where the left and right
edges are relative to the reference point.  The vertical extent
is similarly defined by a pair of numbers, <code>Y-extent</code>.
These are properties of all grobs which support the
<code>grob-interface</code>.
</p>
<a name="index-extra_002dspacing_002dwidth"></a>

<p>By default, outside-staff objects are given a width of zero so
that they may overlap in the horizontal direction.  This is done
by the trick of adding infinity to the leftmost extent and
minus infinity to the rightmost extent by setting the
<code>extra-spacing-width</code> to <code>'(+inf.0 . -inf.0)</code>.  So
to ensure they do not overlap in the horizontal direction we
must override this value of <code>extra-spacing-width</code> to
<code>'(0 . 0)</code> so the true width shines through.  This is
the command to do this for dynamic text:
</p>
<blockquote><pre class="example">\override DynamicText #'extra-spacing-width = #'(0 . 0)
</pre></blockquote>

<p>Let&rsquo;s see if this works in our previous example:
</p>
<a name="index-DynamicText_002c-example-of-overriding"></a>
<a name="index-extra_002dspacing_002dwidth-property_002c-example"></a>

<blockquote><pre class="verbatim">\dynamicUp
\override DynamicText #'extra-spacing-width = #'(0 . 0)
a4\f b\mf c\mp b\p
</pre><p>
 <a href="66/lily-069667c5.ly">
  <img align="middle"
       border="0"
       src="66/lily-069667c5.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Well, it has certainly stopped the dynamic marks being
displaced, but two problems remain.  The marks should be
spaced a little further apart and it would be better
if they were all the same distance from the staff.
We can solve the first problem easily.  Instead of making
the <code>extra-spacing-width</code> zero we could add a little
more to it.  The units are the space between two staff
lines, so moving the left edge half a unit to the left and the
right edge half a unit to the right should do it:
</p>
<a name="index-DynamicText_002c-example-of-overriding-1"></a>
<a name="index-extra_002dspacing_002dwidth-property_002c-example-1"></a>

<blockquote><pre class="verbatim">\dynamicUp
% Extend width by 1 staff space
\override DynamicText #'extra-spacing-width = #'(-0.5 . 0.5)
a4\f b\mf c\mp b\p
</pre><p>
 <a href="17/lily-9f772390.ly">
  <img align="middle"
       border="0"
       src="17/lily-9f772390.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>This looks better, but maybe we would prefer the dynamic marks
to be aligned along the same baseline rather than going up and
down with the notes.  The property to do this is
<code>staff-padding</code> which is covered in the following section.
</p>

<hr size="6">
<a name="Collisions-of-objects"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Outside_002dstaff-objects" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Outside-staff objects&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Tweaking-output" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaking output&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Moving-objects" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Moving objects &gt; </a>]</td></tr></table>
<a name="Collisions-of-objects"></a>
<h2 class="section">4.5 Collisions of objects</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Moving-objects" accesskey="1">4.5.1 Moving objects</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Fixing-overlapping-notation" accesskey="2">4.5.2 Fixing overlapping notation</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Real-music-example" accesskey="3">4.5.3 Real music example</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Moving-objects"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Collisions-of-objects" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Collisions of objects&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Collisions-of-objects" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Collisions of objects&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Fixing-overlapping-notation" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Fixing overlapping notation &gt; </a>]</td></tr></table>
<a name="Moving-objects"></a>
<h3 class="subsection">4.5.1 Moving objects</h3>

<a name="index-moving-overlapping-objects"></a>
<a name="index-moving-colliding-objects"></a>
<a name="index-moving-colliding-grobs"></a>
<a name="index-objects_002c-moving-colliding"></a>
<a name="index-grobs_002c-moving-colliding"></a>

<p>This may come as a surprise, but LilyPond is not perfect.  Some
notation elements can overlap.  This is unfortunate, but in fact
rather rare.  Usually the need to move objects is for clarity or
aesthetic reasons &ndash; they would look better with a little more
or a little less space around them.
</p>
<p>There are three main approaches to resolving overlapping
notation.  They should be considered in the following order:
</p>
<ol>
<li>
The <strong>direction</strong> of one of the overlapping objects may
be changed using the predefined commands listed above for
within-staff objects (see <a href="#Within_002dstaff-objects">Within-staff objects</a>).
Stems, slurs, beams, ties, dynamics, text and tuplets may be
repositioned easily in this way.  The limitation is that you
have a choice of only two positions, and neither may be
suitable.

</li><li>
The <strong>object properties</strong>, which LilyPond uses when positioning
layout objects, may be modified using <code>\override</code>.  The
advantages of making changes to this type of property are (a) that
some other objects will be moved automatically if necessary to make
room and (b) the single override can apply to all instances of the
same type of object.  Such properties include:

<ul>
<li>
<code>direction</code>

<p>This has already been covered in some detail &ndash; see
<a href="#Within_002dstaff-objects">Within-staff objects</a>.
</p>
</li><li>
<code>padding</code>, <code>left-padding</code>,
<code>right-padding</code>, <code>staff-padding</code>

<a name="index-padding"></a>
<a name="index-left_002dpadding-property"></a>
<a name="index-padding-property"></a>
<a name="index-right_002dpadding-property"></a>
<a name="index-staff_002dpadding-property"></a>

<p>As an object is being positioned the value of its <code>padding</code>
property specifies the gap that must be left between itself and the
nearest edge of the object against which it is being positioned.  Note
that it is the <code>padding</code> value of the object <strong>being
placed</strong> that is used; the <code>padding</code> value of the object which is
already placed is ignored.  Gaps specified by <code>padding</code> can be
applied to all objects which support the
<code>side-position-interface</code>.
</p>
<p>Instead of <code>padding</code>, the placement of groups of accidentals
is controlled by <code>left-padding</code> and <code>right-padding</code>.
These properties are to be found in the <code>AccidentalPlacement</code>
object which, note, lives in the <strong>staff</strong> context.  In the
type-setting process the note heads are type-set first and then
the accidentals, if any, are added to the left of the note heads
using the <code>right-padding</code> property to determine the separation
from the note heads. So only the <code>right-padding</code> property of the
<code>AccidentalPlacement</code> object has any effect on the placement
of the accidentals.
</p>
<p>The <code>staff-padding</code> property is closely related to the
<code>padding</code> property: <code>padding</code> controls the minimum amount of
space between any object which supports the
<code>side-position-interface</code> and the nearest other object (generally
the note or the staff lines); <code>staff-padding</code> applies only to
those objects which are always set outside the staff &ndash; it controls
the minimum amount of space that should be inserted between that
object and the staff.  Note that <code>staff-padding</code> has no effect on
objects which are positioned relative to the note rather than the
staff, even though it may be overridden without error for such objects
&ndash; it is simply ignored.
</p>
<p>To discover which padding property is required for the object you wish
to reposition, you need to return to the IR and look up the object&rsquo;s
properties.  Be aware that the padding properties might not be located
in the obvious object, so look in objects that appear to be related.
</p>
<p>All padding values are measured in staff spaces.  For most
objects, this value is set by default to be around 1.0 or less
(it varies with each object).  It may be overridden if a larger
(or smaller) gap is required.
</p>
</li><li>
<code>self-alignment-X</code>

<a name="index-self_002dalignment_002dX-property"></a>

<p>This property can be used to align the object to the left, to
the right, or to center it with respect to the parent object&rsquo;s
reference point.  It may be used with all objects which support
the <code>self-alignment-interface</code>.  In general these are objects
that contain text.  The values are <code>LEFT</code>, <code>RIGHT</code>
or <code>CENTER</code>.  Alternatively, a numerical value between
<code>-1</code> and <code>+1</code> may be specified, where <code>-1</code> is
left-aligned, <code>+1</code> is right-aligned, and numbers in between
move the text progressively from left-aligned to right-aligned.
Numerical values greater than <code>1</code> may be specified to move
the text even further to the left, or less than <code>-1</code> to
move the text even further to the right.  A change of <code>1</code>
in the value corresponds to a movement of half the text&rsquo;s length.
</p>
</li><li>
<code>extra-spacing-width</code>

<a name="index-extra_002dspacing_002dwidth-property"></a>

<p>This property is available for all objects which support the
<code>item-interface</code>.  It takes two numbers, the first is added
to the leftmost extent and the second is added to the rightmost
extent.  Negative numbers move the edge to the left, positive to
the right, so to widen an object the first number must be negative,
the second positive.  Note that not all objects honor both
numbers.  For example, the <code>Accidental</code> object only takes
notice of the first (left edge) number.
</p>
</li><li>
<code>staff-position</code>

<a name="index-staff_002dposition-property"></a>

<p><code>staff-position</code> is a property of the
<code>staff-symbol-referencer-interface</code>, which is supported by
objects which are positioned relative to the staff.  It specifies
the vertical position of the object relative to the center line
of the staff in half staff-spaces.  It is useful in resolving
collisions between layout objects like multi-measure rests, ties
and notes in different voices.
</p>
</li><li>
<code>force-hshift</code>

<a name="index-force_002dhshift-property"></a>

<p>Closely spaced notes in a chord, or notes occurring at the same
time in different voices, are arranged in two, occasionally more,
columns to prevent the note heads overlapping.  These are called
note columns, and an object called <code>NoteColumn</code> is created
to lay out the notes in that column.
</p>
<p>The <code>force-hshift</code> property is a property of a <code>NoteColumn</code>
(actually of the <code>note-column-interface</code>).  Changing it permits a
note column to be moved in units appropriate to a note column,
viz. the note head width of the first voice note.  It should be used
in complex situations where the normal <code>\shiftOn</code> commands (see
<a href="#Explicitly-instantiating-voices">Explicitly instantiating voices</a>) do not resolve the note
conflict.  It is preferable to the <code>extra-offset</code> property for
this purpose as there is no need to work out the distance in
staff-spaces, and moving the notes into or out of a <code>NoteColumn</code>
affects other actions such as merging note heads.
</p>
</li></ul>

</li><li>
Finally, when all else fails, objects may be manually repositioned
relative to the staff center line vertically, or by displacing them by
any distance to a new position.  The disadvantages are that the
correct values for the repositioning have to be worked out, often by
trial and error, for every object individually, and, because the
movement is done after LilyPond has placed all other objects, the user
is responsible for avoiding any collisions that might ensue.  But the
main difficulty with this approach is that the repositioning values
may need to be reworked if the music is later modified.  The
properties that can be used for this type of manual repositioning are:

<dl compact="compact">
<dt> <code>extra-offset</code></dt>
<dd>
<a name="index-extra_002doffset-property"></a>

<p>This property applies to any layout object supporting the
<code>grob-interface</code>.  It takes a pair of numbers which specify the
extra displacement in the horizontal and vertical directions.
Negative numbers move the object to the left or down.  The units are
staff-spaces.  The extra displacement is made after the typesetting of
objects is finished, so an object may be repositioned anywhere without
affecting anything else.
</p>
</dd>
<dt> <code>positions</code></dt>
<dd>
<a name="index-positions-property"></a>

<p>This is most useful for manually adjusting the slope and height
of beams, slurs, and tuplets.   It takes a pair of numbers
giving the position of the left and right ends of the beam, slur,
etc. relative to the center line of the staff.  Units are
staff-spaces.  Note, though, that slurs and phrasing slurs cannot
be repositioned by arbitrarily large amounts.  LilyPond first
generates a list of possible positions for the slur and by default
finds the slur that &ldquo;looks best&rdquo;.  If the <code>positions</code>
property has been overridden the slur that is closest to the
requested positions is selected from the list.
</p></dd>
</dl>

</li></ol>

<p>A particular object may not have all of these properties.
It is necessary to go to the IR to look up which properties
are available for the object in question.
</p>
<p>Here is a list of the objects which are most likely to be
involved in collisions, together with the name of the object which
should be looked up in the IR in order to discover which properties
should be used to move them.
</p>
<table>
<thead><tr><th width="50%"><p> Object type           </p></th><th width="50%"><p> Object name
</p></th></tr></thead>
<tr><td width="50%"><p> Articulations             </p></td><td width="50%"><p> <code>Script</code>
</p></td></tr>
<tr><td width="50%"><p> Beams                     </p></td><td width="50%"><p> <code>Beam</code>
</p></td></tr>
<tr><td width="50%"><p> Dynamics (vertically)     </p></td><td width="50%"><p> <code>DynamicLineSpanner</code>
</p></td></tr>
<tr><td width="50%"><p> Dynamics (horizontally)   </p></td><td width="50%"><p> <code>DynamicText</code>
</p></td></tr>
<tr><td width="50%"><p> Fingerings                </p></td><td width="50%"><p> <code>Fingering</code>
</p></td></tr>
<tr><td width="50%"><p> Rehearsal / Text marks    </p></td><td width="50%"><p> <code>RehearsalMark</code>
</p></td></tr>
<tr><td width="50%"><p> Slurs                     </p></td><td width="50%"><p> <code>Slur</code>
</p></td></tr>
<tr><td width="50%"><p> Text e.g. <code>^&quot;text&quot;</code>  </p></td><td width="50%"><p> <code>TextScript</code>
</p></td></tr>
<tr><td width="50%"><p> Ties                      </p></td><td width="50%"><p> <code>Tie</code>
</p></td></tr>
<tr><td width="50%"><p> Tuplets                   </p></td><td width="50%"><p> <code>TupletBracket</code>
</p></td></tr>
</table>


<hr size="6">
<a name="Fixing-overlapping-notation"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Moving-objects" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Moving objects&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Collisions-of-objects" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Collisions of objects&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Real-music-example" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Real music example &gt; </a>]</td></tr></table>
<a name="Fixing-overlapping-notation"></a>
<h3 class="subsection">4.5.2 Fixing overlapping notation</h3>

<p>Let&rsquo;s now see how the properties in the previous section can
help to resolve overlapping notation.
</p>
<a name="padding-property"></a>
<h3 class="subheading">padding property</h3>

<a name="index-padding-1"></a>
<a name="index-fixing-overlapping-notation"></a>
<a name="index-overlapping-notation"></a>

<p>The <code>padding</code> property can be set to increase
(or decrease) the distance between symbols that are printed
above or below notes.
</p>
<a name="index-Script_002c-example-of-overriding"></a>
<a name="index-padding-property_002c-example"></a>

<blockquote><pre class="verbatim">c2\fermata
\override Script #'padding = #3
b2\fermata
</pre><p>
 <a href="e5/lily-5c063b1d.ly">
  <img align="middle"
       border="0"
       src="e5/lily-5c063b1d.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="index-MetronomeMark_002c-example-of-overriding"></a>
<a name="index-padding-property_002c-example-1"></a>

<blockquote><pre class="verbatim">% This will not work, see below:
\override MetronomeMark #'padding = #3
\tempo 4=120
c1
% This works:
\override Score.MetronomeMark #'padding = #3
\tempo 4=80
d1
</pre><p>
 <a href="4a/lily-470d8b8d.ly">
  <img align="middle"
       border="0"
       src="4a/lily-470d8b8d.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Note in the second example how important it is to figure out what
context handles a certain object.  Since the <code>MetronomeMark</code>
object is handled in the <code>Score</code> context, property changes in the
<code>Voice</code> context will not be noticed.  For more details, see
<a name="index-Modifying-properties"></a>
<a href="lilypond-big-page.html#Modifying-properties">Modifying properties</a>.
</p>
<p>If the <code>padding</code> property of an object is increased when that
object is in a stack of objects being positioned according to
their <code>outside-staff-priority</code>, then that object and all
objects outside it are moved.
</p>

<a name="left_002dpadding-and-right_002dpadding"></a>
<h3 class="subheading">left-padding and right-padding</h3>

<a name="index-left_002dpadding-property-1"></a>
<a name="index-right_002dpadding-property-1"></a>

<p>The <code>right-padding</code> property affects the spacing between the
accidental and the note to which it applies.  It is not often
required, but the following example shows one situation where it
is needed.  Suppose we wish to show a chord containing both
a B-natural and a B-flat.  To avoid ambiguity we would like to
precede the notes with both a natural and a flat sign.  Here
are a few attempts to do this:
</p>
<blockquote><pre class="verbatim">&lt;b bes&gt;
&lt;b! bes&gt;
&lt;b? bes&gt;
</pre><p>
 <a href="db/lily-e37502f3.ly">
  <img align="middle"
       border="0"
       src="db/lily-e37502f3.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>None work, with the second two showing bad collisions between
the two signs.
</p>
<p>One way of achieving this is to override the accidental stencil
with a markup containing the natural and flat symbols in the
order we would like, like this:
</p>
<a name="index-Accidental_002c-example-of-overriding"></a>
<a name="index-text-property_002c-example-1"></a>
<a name="index-stencil-property_002c-example-5"></a>
<a name="index-AccidentalPlacement_002c-example-of-overriding"></a>
<a name="index-right_002dpadding-property_002c-example"></a>

<blockquote><pre class="verbatim">naturalplusflat = \markup { \natural \flat }
\relative c'' {
  \once \override Accidental
    #'stencil = #ly:text-interface::print
  \once \override Accidental #'text = #naturalplusflat
  \once \override Score.AccidentalPlacement #'right-padding = #1.5
  &lt;b bes&gt;
}
</pre><p>
 <a href="29/lily-c0cb897b.ly">
  <img align="middle"
       border="0"
       src="29/lily-c0cb897b.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>This necessarily uses an override for the accidental stencil which
will not be covered until later.  The stencil type must be a
procedure, here changed to print the contents of the <code>text</code>
property of <code>Accidental</code>, which itself is set to be a natural
sign followed by a flat sign.  These are then moved further away
from the note head by overriding <code>right-padding</code>.
</p>

<a name="staff_002dpadding-property"></a>
<h3 class="subheading">staff-padding property</h3>

<a name="index-aligning-objects-on-a-baseline"></a>
<a name="index-objects_002c-aligning-on-a-baseline"></a>

<p><code>staff-padding</code> can be used to align objects such as dynamics
along a baseline at a fixed height above the staff, rather than at a
height dependent on the position of the note to which they are
attached.  It is not a property of <code>DynamicText</code> but of
<code>DynamicLineSpanner</code>.  This is because the baseline should apply
equally to <strong>all</strong> dynamics, including those created as extended
spanners.  So this is the way to align the dynamic marks in the
example taken from the previous section:
</p>
<a name="index-DynamicText_002c-example-of-overriding-2"></a>
<a name="index-extra_002dspacing_002dwidth-property_002c-example-2"></a>
<a name="index-DynamicLineSpanner_002c-example-of-overriding"></a>
<a name="index-staff_002dpadding-property_002c-example"></a>

<blockquote><pre class="verbatim">\dynamicUp
% Extend width by 1 unit
\override DynamicText #'extra-spacing-width = #'(-0.5 . 0.5)
% Align dynamics to a base line 2 units above staff
\override DynamicLineSpanner #'staff-padding = #2
a4\f b\mf c\mp b\p
</pre><p>
 <a href="7e/lily-d91822e2.ly">
  <img align="middle"
       border="0"
       src="7e/lily-d91822e2.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<a name="self_002dalignment_002dX-property"></a>
<h3 class="subheading">self-alignment-X property</h3>

<p>The following example shows how this can resolve the collision
of a string fingering object with a note&rsquo;s stem by aligning the
right edge with the reference point of the parent note:
</p>
<a name="index-StringNumber_002c-example-of-overriding"></a>
<a name="index-self_002dalignment_002dX-property_002c-example"></a>

<blockquote><pre class="verbatim">\voiceOne
&lt; a \2 &gt;
\once \override StringNumber #'self-alignment-X = #RIGHT
&lt; a \2 &gt;
</pre><p>
 <a href="0a/lily-c077f631.ly">
  <img align="middle"
       border="0"
       src="0a/lily-c077f631.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="staff_002dposition-property"></a>
<h3 class="subheading">staff-position property</h3>

<a name="index-object-collision-within-a-staff"></a>

<p>Multimeasure rests in one voice can collide with notes in another.
Since these rests are typeset centered between the bar lines, it
would require significant effort for LilyPond to figure out which
other notes might collide with it, since all the current collision
handling between notes and between notes and rests is done only
for notes and rests that occur at the same time.  Here&rsquo;s an
example of a collision of this type:
</p>
<blockquote><pre class="verbatim">&lt;&lt; {c c c c} \\ {R1} &gt;&gt;
</pre><p>
 <a href="cf/lily-714425f7.ly">
  <img align="middle"
       border="0"
       src="cf/lily-714425f7.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The best solution here is to move the multimeasure rest down, since
the rest is in voice two.  The default in <code>\voiceTwo</code> (i.e. in
the second voice of a <code>&lt;&lt;{...} \\ {...}&gt;&gt;</code> construct) is that
<code>staff-position</code> is set to -4 for MultiMeasureRest, so we need to
move it, say, four half-staff spaces down to <code>-8</code>.
</p>
<a name="index-MultiMeasureRest_002c-example-of-overriding"></a>
<a name="index-staff_002dposition-property_002c-example"></a>

<blockquote><pre class="verbatim">&lt;&lt;
  {c c c c}
\\
  \override MultiMeasureRest #'staff-position = #-8
  {R1}
&gt;&gt;
</pre><p>
 <a href="71/lily-b1e84be6.ly">
  <img align="middle"
       border="0"
       src="71/lily-b1e84be6.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>This is better than using, for example, <code>extra-offset</code>,
because the ledger line above the rest is inserted automatically.
</p>
<a name="extra_002doffset-property"></a>
<h3 class="subheading">extra-offset property</h3>

<a name="index-positioning-objects"></a>
<a name="index-positioning-grobs"></a>
<a name="index-objects_002c-positioning"></a>
<a name="index-grobs_002c-positioning"></a>

<p>The <code>extra-offset</code> property provides complete control over the
positioning of an object both horizontally and vertically.
</p>
<p>In the following example, the second fingering is moved a little to
the left, and 1.8 staff space downwards:
</p>
<a name="index-Fingering_002c-example-of-overriding-1"></a>
<a name="index-extra_002doffset-property_002c-example"></a>

<blockquote><pre class="verbatim">\stemUp
f-5
\once \override Fingering
    #'extra-offset = #'(-0.3 . -1.8)
f-5
</pre><p>
 <a href="c8/lily-d8df21f7.ly">
  <img align="middle"
       border="0"
       src="c8/lily-d8df21f7.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<a name="positions-property"></a>
<h3 class="subheading">positions property</h3>

<a name="index-controlling-tuplets_002c-slurs_002c-phrasing-slurs_002c-and-beams-manually"></a>
<a name="index-manually-controlling-tuplets_002c-slurs_002c-phrasing-slurs_002c-and-beams"></a>
<a name="index-tuplet-beams_002c-controlling-manually"></a>
<a name="index-slurs_002c-controlling-manually"></a>
<a name="index-phrasing-slurs_002c-controlling-manually"></a>
<a name="index-beams_002c-controlling-manually"></a>

<p>The <code>positions</code> property allows the position and slope of
tuplets, slurs, phrasing slurs and beams to be controlled manually.
Here&rsquo;s an example which has an ugly phrasing slur due to its trying to
avoid the slur on the acciaccatura.
</p>
<blockquote><pre class="verbatim">r4  \acciaccatura e8\( d8 c ~c d c d\)
</pre><p>
 <a href="f7/lily-c1e3be68.ly">
  <img align="middle"
       border="0"
       src="f7/lily-c1e3be68.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>We could simply move the phrasing slur above the notes, and this
would be the preferred solution:
</p>
<blockquote><pre class="verbatim">r4
\phrasingSlurUp
\acciaccatura e8\( d8 c ~c d c d\)
</pre><p>
 <a href="b1/lily-3fb34c45.ly">
  <img align="middle"
       border="0"
       src="b1/lily-3fb34c45.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>But if there were some reason why this could not be done the
other alternative would be to move the left end of the phrasing
slur down a little using the <code>positions</code> property.  This
also resolves the rather nasty shape.
</p>
<a name="index-PhrasingSlur_002c-example-of-overriding"></a>
<a name="index-positions-property_002c-example"></a>

<blockquote><pre class="verbatim">r4
\once \override PhrasingSlur #'positions = #'(-4 . -3)
\acciaccatura
e8\( d8 c ~c d c d\)
</pre><p>
 <a href="3f/lily-3aa6043a.ly">
  <img align="middle"
       border="0"
       src="3f/lily-3aa6043a.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Here&rsquo;s a further example taken from the opening of the left-hand
staff of Chopin&rsquo;s Prelude Op 28 No. 2.  We see that the beam
collides with the upper notes:
</p>
<blockquote><pre class="verbatim">{
\clef &quot;bass&quot;
&lt;&lt; {b,8 ais, b, g,} \\ {e, g e, g} &gt;&gt;
&lt;&lt; {b,8 ais, b, g,} \\ {e, g e, g} &gt;&gt;
}
</pre><p>
 <a href="68/lily-044d10c6.ly">
  <img align="middle"
       border="0"
       src="68/lily-044d10c6.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>This can be resolved by manually moving both ends of the beam
up from their position at 2 staff-spaces above the center line to,
say, 3:
</p>
<a name="index-Beam_002c-example-of-overriding"></a>
<a name="index-positions-property_002c-example-1"></a>

<blockquote><pre class="verbatim">{
  \clef &quot;bass&quot;
  &lt;&lt;
    \override Beam #'positions = #'(3 . 3)
    {b,8 ais, b, g,}
  \\
    {e, g e, g}
  &gt;&gt;
  &lt;&lt; {b,8 ais, b, g,} \\ {e, g e, g} &gt;&gt;
}
</pre><p>
 <a href="ed/lily-58d56dce.ly">
  <img align="middle"
       border="0"
       src="ed/lily-58d56dce.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Note that the override continues to apply in the first voice of
the second block of quavers, but not to any of the beams in the
second voice.
</p>
<a name="force_002dhshift-property"></a>
<h3 class="subheading">force-hshift property</h3>


<p>We can now see how to apply the final corrections to the Chopin
example introduced at the end of <a href="#I_0027m-hearing-Voices">I&rsquo;m hearing Voices</a>, which
was left looking like this:
</p>
<blockquote><pre class="verbatim">\new Staff \relative c'' {
  \key aes \major
  &lt;&lt;
    { c2 aes4. bes8 } \\
    { aes2 f4 fes   } \\
    { \voiceFour
      &lt;ees c&gt;2
      des2
    }
  &gt;&gt; |
  &lt;c ees aes c&gt;1 |
}
</pre><p>
 <a href="88/lily-71120d6a.ly">
  <img align="middle"
       border="0"
       src="88/lily-71120d6a.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The lower two notes of the first chord (i.e, those in the third voice)
should not be shifted away from the note column of the higher two
notes.  To correct this we set <code>force-hshift</code>, which is a
property of <code>NoteColumn</code>, of these notes to zero.  The lower note
of the second chord is best placed just to the right of the higher
notes.  We achieve this by setting <code>force-hshift</code> of this note to
0.5, ie half a note head&rsquo;s width to the right of the note column of
the higher notes.
</p>
<p>Here&rsquo;s the final result:
</p>
<a name="index-NoteColumn_002c-example-of-overriding"></a>
<a name="index-force_002dhshift-property_002c-example"></a>

<blockquote><pre class="verbatim">\new Staff \relative c'' {
  \key aes \major
  &lt;&lt;
    { c2 aes4. bes8 } \\
    { aes2 f4 fes   } \\
    { \voiceFour
      \once \override NoteColumn #'force-hshift = #0 &lt;ees c&gt;2
      \once \override NoteColumn #'force-hshift = #0.5 des2
    }
  &gt;&gt; |
  &lt;c ees aes c&gt;1 |
}
</pre><p>
 <a href="5e/lily-1b6c9a6e.ly">
  <img align="middle"
       border="0"
       src="5e/lily-1b6c9a6e.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<hr size="6">
<a name="Real-music-example"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Fixing-overlapping-notation" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Fixing overlapping notation&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Collisions-of-objects" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Collisions of objects&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Further-tweaking" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Further tweaking &gt; </a>]</td></tr></table>
<a name="Real-music-example"></a>
<h3 class="subsection">4.5.3 Real music example</h3>

<p>We end this section on Tweaks by showing the steps to be taken to
deal with a tricky example which needs several tweaks to produce
the desired output.  The example has been deliberately chosen to
illustrate the use of the Notation Reference to resolve unusual
problems with notation.  It is not representative of more usual
engraving process, so please do not let these difficulties put
you off!  Fortunately, difficulties like these are not very common!
</p>
<p>The example is from Chopin&rsquo;s Première Ballade, Op. 23, bars 6 to
9, the transition from the opening Lento to Moderato.
Here, first, is what we want the output to look like, but to avoid
over-complicating the example too much we have left out the
dynamics, fingering and pedalling.
</p>
<blockquote><p>
 <a href="b2/lily-648610d0.ly">
  <img align="middle"
       border="0"
       src="b2/lily-648610d0.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>We note first that the right hand part in the third bar
requires four voices.  These are the five beamed eighth notes,
the tied C, the half-note D which is merged with the eighth note
D, and the dotted quarter note F-sharp, which is also merged with
the eighth note at the same pitch.  Everything else is in a single
voice, so the easiest way is to introduce these four voices
temporarily at the time they are needed.  If you have forgotten
how to do this, look at <a href="#I_0027m-hearing-Voices">I&rsquo;m hearing Voices</a>.  Let us begin
by entering the notes as two variables and setting up the staff
structure in a score block, and see what LilyPond produces by
default:
</p>
<blockquote><pre class="verbatim">rhMusic = \relative c'' {
  r2 c4. g8 |
  bes1~ |
  \time 6/4
  bes2. r8
  % Start polyphonic section of four voices
  &lt;&lt;
    {c,8 d fis bes a | }
  \\
    {c,8~ c2 | }
  \\
    {s8 d2 | }
  \\
    {s4 fis4. | }
  &gt;&gt;
  g2.
}

lhMusic = \relative c' {
  r2 &lt;c g ees&gt;2 |
  &lt;d g, d&gt;1 |
  r2. d,,4 r4 r |
  r4
}

\score {
  \new PianoStaff &lt;&lt;
    \new Staff = &quot;RH&quot;  &lt;&lt;
      \key g \minor
      \rhMusic
    &gt;&gt;
    \new Staff = &quot;LH&quot; &lt;&lt;
      \key g \minor
      \clef &quot;bass&quot;
      \lhMusic
    &gt;&gt;
  &gt;&gt;
}
</pre><p>
 <a href="74/lily-c344957e.ly">
  <img align="middle"
       border="0"
       src="74/lily-c344957e.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>All the notes are right, but the appearance is far from satisfactory.
The tie clashes with the change in time signature, the beaming in the
third bar is wrong, the notes are not merged together, and several
notation elements are missing.  Let&rsquo;s first deal with the easier
things.  We can correct the beaming by inserting a beam manually, and
we can easily add the left hand slur and the right hand phrasing slur,
since these were all covered in the Tutorial.  Doing this gives:
</p>
<blockquote><pre class="verbatim">rhMusic = \relative c'' {
  r2 c4.\( g8 |
  bes1~ |
  \time 6/4
  bes2. r8
  % Start polyphonic section of four voices
  &lt;&lt;
    {c,8[ d fis bes a] | }
  \\
    {c,8~ c2 | }
  \\
    {s8 d2 | }
  \\
    {s4 fis4. | }
  &gt;&gt;
  g2.\)
}

lhMusic = \relative c' {
  r2 &lt;c g ees&gt;2( |
  &lt;d g, d&gt;1) |
  r2. d,,4 r4 r |
  r4
}

\score {
  \new PianoStaff &lt;&lt;
    \new Staff = &quot;RH&quot;  &lt;&lt;
      \key g \minor
      \rhMusic
    &gt;&gt;
    \new Staff = &quot;LH&quot; &lt;&lt;
      \key g \minor
      \clef &quot;bass&quot;
      \lhMusic
    &gt;&gt;
  &gt;&gt;
}
</pre><p>
 <a href="bc/lily-ac09ac40.ly">
  <img align="middle"
       border="0"
       src="bc/lily-ac09ac40.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The first bar is now correct.  The second bar contains an arpeggio and
is terminated by a double bar line.  How do we do these, as they have
not been mentioned in this Learning Manual?  This is where we need to
turn to the Notation Reference.  Looking up &lsquo;arpeggio&rsquo; and &lsquo;bar
line&rsquo; in the index quickly shows us that an arpeggio is produced by
appending <code>\arpeggio</code> to a chord, and a double bar line is
produced by the <code>\bar &quot;||&quot;</code> command.  That&rsquo;s easily done.  We
next need to correct the collision of the tie with the time signature.
This is best done by moving the tie upwards.  Moving objects was
covered earlier in <a href="#Moving-objects">Moving objects</a>, which says that objects
positioned relative to the staff can be moved by overriding their
<code>staff-position</code> property, which is specified in half staff
spaces relative to the center line of the staff.  So the following
override placed just before the first tied note would move the tie up
to 3.5 half staff spaces above the center line:
</p>
<p><code>\once \override Tie #'staff-position = #3.5</code>
</p>
<p>This completes bar two, giving:
</p>
<blockquote><pre class="verbatim">rhMusic = \relative c'' {
  r2 c4.\( g8 |
  \once \override Tie #'staff-position = #3.5
  bes1~ |
  \bar &quot;||&quot;
  \time 6/4
  bes2. r8
  % Start polyphonic section of four voices
  &lt;&lt;
    {c,8[ d fis bes a] | }
  \\
    {c,8~ c2 | }
  \\
    {s8 d2 | }
  \\
    {s4 fis4. | }
  &gt;&gt;
  g2.\)
}

lhMusic = \relative c' {
  r2 &lt;c g ees&gt;2( |
  &lt;d g, d&gt;1)\arpeggio |
  r2. d,,4 r4 r |
  r4
}

\score {
  \new PianoStaff &lt;&lt;
    \new Staff = &quot;RH&quot;  &lt;&lt;
      \key g \minor
      \rhMusic
    &gt;&gt;
    \new Staff = &quot;LH&quot; &lt;&lt;
      \key g \minor
      \clef &quot;bass&quot;
      \lhMusic
    &gt;&gt;
  &gt;&gt;
}
</pre><p>
 <a href="f5/lily-b293eb7e.ly">
  <img align="middle"
       border="0"
       src="f5/lily-b293eb7e.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>On to bar three and the start of the Moderato section.  The tutorial
showed how to add embolded text with the <code>\markup</code> command, so
adding &lsquo;Moderato&rsquo; in bold is easy.  But how do we merge notes in
different voices together?  This is where we need to turn to the
Notation Reference for help.  A search for &ldquo;merge&rdquo; in the Notation
Reference index quickly leads us to the commands for merging
differently headed and differently dotted notes in <a name="index-Collision"></a>
resolution
<a href="lilypond-big-page.html#Collision-resolution">Collision resolution</a>.  In our example we need to merge both types of note for
the duration of the polyphonic section in bar 3, so using the
information we find in the Notation Reference we add
</p>
<blockquote><pre class="example">\mergeDifferentlyHeadedOn
\mergeDifferentlyDottedOn
</pre></blockquote>

<p>to the start of that section and
</p>
<blockquote><pre class="example">\mergeDifferentlyHeadedOff
\mergeDifferentlyDottedOff
</pre></blockquote>

<p>to the end, giving:
</p>
<blockquote><pre class="verbatim">rhMusic = \relative c'' {
  r2 c4.\( g8 |
  \once \override Tie #'staff-position = #3.5
  bes1~ |
  \bar &quot;||&quot;
  \time 6/4
  bes2.^\markup {\bold &quot;Moderato&quot;} r8
  \mergeDifferentlyHeadedOn
  \mergeDifferentlyDottedOn
  % Start polyphonic section of four voices
  &lt;&lt;
    {c,8[ d fis bes a] | }
  \\
    {c,8~ c2 | }
  \\
    {s8 d2 | }
  \\
    {s4 fis4. | }
  &gt;&gt;
  \mergeDifferentlyHeadedOff
  \mergeDifferentlyDottedOff
  g2.\)
}

lhMusic = \relative c' {
  r2 &lt;c g ees&gt;2( |
  &lt;d g, d&gt;1)\arpeggio |
  r2. d,,4 r4 r |
  r4
}

\score {
  \new PianoStaff &lt;&lt;
    \new Staff = &quot;RH&quot;  &lt;&lt;
      \key g \minor
      \rhMusic
    &gt;&gt;
    \new Staff = &quot;LH&quot; &lt;&lt;
      \key g \minor
      \clef &quot;bass&quot;
      \lhMusic
    &gt;&gt;
  &gt;&gt;
}
</pre><p>
 <a href="bc/lily-95f25878.ly">
  <img align="middle"
       border="0"
       src="bc/lily-95f25878.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>These overrides have merged the two F-sharp notes, but not the two
on D.  Why not?  The answer is there in the same section in the
Notation Reference &ndash; notes being merged must have stems in
opposite directions and two notes cannot be merged successfully if
there is a third note in the same note column.  Here the two D&rsquo;s
both have upward stems and there is a third note &ndash; the C.  We know
how to change the stem direction using <code>\stemDown</code>, and
the Notation Reference also says how to move the C &ndash; apply a shift
using one of the <code>\shift</code> commands.  But which one?
The C is in voice two which has shift off, and the two D&rsquo;s are in
voices one and three, which have shift off and shift on,
respectively.  So we have to shift the C a further level still
using <code>\shiftOnn</code> to avoid it interfering with the two D&rsquo;s.
Applying these changes gives:
</p>
<a name="index-Tie_002c-example-of-overriding"></a>
<a name="index-staff_002dposition-property_002c-example-1"></a>

<blockquote><pre class="verbatim">rhMusic = \relative c'' {
  r2 c4.\( g8 |
  \once \override Tie #'staff-position = #3.5
  bes1~ |
  \bar &quot;||&quot;
  \time 6/4
  bes2.^\markup {\bold &quot;Moderato&quot;} r8
  \mergeDifferentlyHeadedOn
  \mergeDifferentlyDottedOn
  % Start polyphonic section of four voices
  &lt;&lt;
    {c,8[ d fis bes a] | }
  \\
    % Move the c2 out of the main note column so the merge will work
    {c,8~ \shiftOnn c2 | }
  \\
    % Stem on the d2 must be down to permit merging
    {s8 \stemDown d2 | }
  \\
    {s4 fis4. | }
  &gt;&gt;
  \mergeDifferentlyHeadedOff
  \mergeDifferentlyDottedOff
  g2.\)
}

lhMusic = \relative c' {
  r2 &lt;c g ees&gt;2( |
  &lt;d g, d&gt;1)\arpeggio |
  r2. d,,4 r4 r |
  r4
}

\score {
  \new PianoStaff &lt;&lt;
    \new Staff = &quot;RH&quot;  &lt;&lt;
      \key g \minor
      \rhMusic
    &gt;&gt;
    \new Staff = &quot;LH&quot; &lt;&lt;
      \key g \minor
      \clef &quot;bass&quot;
      \lhMusic
    &gt;&gt;
  &gt;&gt;
}
</pre><p>
 <a href="31/lily-8925041e.ly">
  <img align="middle"
       border="0"
       src="31/lily-8925041e.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Nearly there.  Only two problems remain: The downward stem on the
merged D should not be there, and the C would be better positioned
to the right of the D&rsquo;s.  We know how to do both of these from the
earlier tweaks: we make the stem transparent, and move the C with
the <code>force-hshift</code> property.  Here&rsquo;s the final result:
</p>
<a name="index-NoteColumn_002c-example-of-overriding-1"></a>
<a name="index-force_002dhshift-property_002c-example-1"></a>
<a name="index-Stem_002c-example-of-overriding-2"></a>
<a name="index-transparent-property_002c-example-2"></a>

<blockquote><pre class="verbatim">rhMusic = \relative c'' {
  r2
  c4.\( g8 |
  \once \override Tie #'staff-position = #3.5
  bes1~ |
  \bar &quot;||&quot;
  \time 6/4
  bes2.^\markup {\bold &quot;Moderato&quot;} r8
  \mergeDifferentlyHeadedOn
  \mergeDifferentlyDottedOn
  &lt;&lt;
    {c,8[ d fis bes a] | }
  \\
    % Reposition the c2 to the right of the merged note
    {c,8~ \once \override NoteColumn #'force-hshift = #1.0
    % Move the c2 out of the main note column so the merge will work
    \shiftOnn c2}
  \\
    % Stem on the d2 must be down to permit merging
    {s8 \stemDown \once \override Stem #'transparent = ##t d2}
  \\
    {s4 fis4.}
  &gt;&gt;
  \mergeDifferentlyHeadedOff
  \mergeDifferentlyDottedOff
  g2.\)
}

lhMusic = \relative c' {
  r2 &lt;c g ees&gt;2( |
  &lt;d g, d&gt;1)\arpeggio |
  r2. d,,4 r4 r |
  r4
}

\score {
  \new PianoStaff &lt;&lt;
    \new Staff = &quot;RH&quot;  &lt;&lt;
      \key g \minor
      \rhMusic
    &gt;&gt;
    \new Staff = &quot;LH&quot; &lt;&lt;
      \key g \minor
      \clef &quot;bass&quot;
      \lhMusic
    &gt;&gt;
  &gt;&gt;
}
</pre><p>
 <a href="63/lily-f40fc10d.ly">
  <img align="middle"
       border="0"
       src="63/lily-f40fc10d.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<hr size="6">
<a name="Further-tweaking"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Real-music-example" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Real music example&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Tweaking-output" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Tweaking output&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Other-uses-for-tweaks" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Other uses for tweaks &gt; </a>]</td></tr></table>
<a name="Further-tweaking"></a>
<h2 class="section">4.6 Further tweaking</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Other-uses-for-tweaks" accesskey="1">4.6.1 Other uses for tweaks</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Using-variables-for-tweaks" accesskey="2">4.6.2 Using variables for tweaks</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Other-sources-of-information" accesskey="3">4.6.3 Other sources of information</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Avoiding-tweaks-with-slower-processing" accesskey="4">4.6.4 Avoiding tweaks with slower processing</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Advanced-tweaks-with-Scheme" accesskey="5">4.6.5 Advanced tweaks with Scheme</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Other-uses-for-tweaks"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Further-tweaking" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Further tweaking&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Further-tweaking" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Further tweaking&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Using-variables-for-tweaks" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Using variables for tweaks &gt; </a>]</td></tr></table>
<a name="Other-uses-for-tweaks"></a>
<h3 class="subsection">4.6.1 Other uses for tweaks</h3>

<a name="index-transparent-property_002c-use-of"></a>
<a name="index-objects_002c-making-invisible"></a>
<a name="index-removing-objects"></a>
<a name="index-objects_002c-removing"></a>
<a name="index-hiding-objects"></a>
<a name="index-objects_002c-hiding"></a>
<a name="index-invisible-objects"></a>
<a name="index-objects_002c-invisible"></a>
<a name="index-tying-notes-across-voices"></a>

<a name="Tying-notes-across-voices"></a>
<h3 class="subheading">Tying notes across voices</h3>

<p>The following example demonstrates how to connect notes in
different voices using ties.  Normally, only two notes in the
same voice can be connected with ties.  By using two voices,
with the tied notes in one of them
</p>
<blockquote><p>
 <a href="a5/lily-10326bfa.ly">
  <img align="middle"
       border="0"
       src="a5/lily-10326bfa.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>and blanking the first up-stem in that voice, the tie appears to
cross voices:
</p>
<a name="index-Stem_002c-example-of-overriding-3"></a>
<a name="index-transparent-property_002c-example-3"></a>

<blockquote><pre class="verbatim">&lt;&lt;
  {
    \once \override Stem #'transparent = ##t
    b8~ b8\noBeam
  }
\\
  { b[ g8] }
&gt;&gt;
</pre><p>
 <a href="e1/lily-8b9851b5.ly">
  <img align="middle"
       border="0"
       src="e1/lily-8b9851b5.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>To make sure that the just-blanked stem doesn&rsquo;t squeeze the tie
too much, we can lengthen the stem by setting the
<code>length</code> to <code>8</code>,
</p>
<blockquote><pre class="verbatim">&lt;&lt;
  {
    \once \override Stem #'transparent = ##t
    \once \override Stem #'length = #8
    b8~ b8\noBeam
  }
\\
  { b[ g8] }
&gt;&gt;
</pre><p>
 <a href="09/lily-9b6918ef.ly">
  <img align="middle"
       border="0"
       src="09/lily-9b6918ef.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="Simulating-a-fermata-in-MIDI"></a>
<h3 class="subheading">Simulating a fermata in MIDI</h3>

<a name="index-stencil-property_002c-use-of"></a>
<a name="index-fermata_002c-implementing-in-MIDI"></a>

<p>For outside-staff objects it is usually better to override the
object&rsquo;s <code>stencil</code> property rather than its <code>transparent</code>
property when you wish to remove it from the printed output.
Setting the <code>stencil</code> property of an object to <code>#f</code> will
remove that object entirely from the printed output.  This means it
has no effect on the placement of other objects placed relative to
it.
</p>
<p>For example, if we wished to change the metronome setting in order
to simulate a fermata in the MIDI output we would not want the
metronome markings to appear in the printed output, and we would
not want it to influence the spacing between the two systems or
the positions of adjacent annotations on the staff.  So setting
its <code>stencil</code> property to <code>#f</code> would be the best way.
We show here the effect of the two methods:
</p>
<a name="index-MetronomeMark_002c-example-of-overriding-1"></a>
<a name="index-transparent-property_002c-example-4"></a>

<blockquote><pre class="verbatim">\score {
  \relative c'' {
    % Visible tempo marking
    \tempo 4=120
    a4 a a
    \once \override Score.MetronomeMark #'transparent = ##t
    % Invisible tempo marking to lengthen fermata in MIDI
    \tempo 4=80
    a\fermata
    % New tempo for next section
    \tempo 4=100
    a a a a
  }
  \layout { }
  \midi { }
}
</pre><p>
 <a href="46/lily-e5f8a322.ly">
  <img align="middle"
       border="0"
       src="46/lily-e5f8a322.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<a name="index-MetronomeMark_002c-example-of-overriding-2"></a>
<a name="index-stencil-property_002c-example-6"></a>

<blockquote><pre class="verbatim">\score {
  \relative c'' {
    % Visible tempo marking
    \tempo 4=120
    a4 a a
    \once \override Score.MetronomeMark #'stencil = ##f
    % Invisible tempo marking to lengthen fermata in MIDI
    \tempo 4=80
    a\fermata
    % New tempo for next section
    \tempo 4=100
    a a a a
  }
  \layout { }
  \midi { }
}
</pre><p>
 <a href="e9/lily-8f26e58c.ly">
  <img align="middle"
       border="0"
       src="e9/lily-8f26e58c.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Both methods remove the metronome mark which lengthens the fermata
from the printed output, and both affect the MIDI timing as
required, but the transparent metronome mark in the first line
forces the following tempo indication too high while the
second (with the stencil removed) does not.
</p>
<hr size="6">
<a name="Using-variables-for-tweaks"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Other-uses-for-tweaks" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Other uses for tweaks&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Further-tweaking" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Further tweaking&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Other-sources-of-information" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Other sources of information &gt; </a>]</td></tr></table>
<a name="Using-variables-for-tweaks"></a>
<h3 class="subsection">4.6.2 Using variables for tweaks</h3>

<a name="index-variables_002c-using-for-tweaks"></a>
<a name="index-using-variables-for-tweaks"></a>
<a name="index-tweaks_002c-using-variables-for"></a>

<p>Override commands are often long and tedious to type, and they
have to be absolutely correct.  If the same overrides are to be
used many times it may be worth defining variables to hold them.
</p>
<p>Suppose we wish to emphasize certain words in lyrics by printing
them in bold italics.  The <code>\italic</code> and <code>\bold</code>
commands only work within lyrics if they are embedded, together with
the word or words to be modified, within a <code>\markup</code> block,
which makes them tedious to enter.  The need to embed the words
themselves prevents their use in simple variables.  As an
alternative can we use <code>\override</code> and <code>\revert</code> commands?
</p>
<blockquote><pre class="example"><code>\override Lyrics . LyricText #'font-shape = #'italic</code>
<code>\override Lyrics . LyricText #'font-series = #'bold</code>

<code>\revert Lyrics . LyricText #'font-shape</code>
<code>\revert Lyrics . LyricText #'font-series</code>
</pre></blockquote>

<p>These would also be extremely tedious to enter if there were many
words requiring emphasis.  But we <em>can</em> define these as two
variables and use those to bracket the words to be emphasized.
Another advantage of using variables for these overrides is that
the spaces around the dot are not necessary, since they are not
being interpreted in <code>\lyricmode</code> directly.  Here&rsquo;s an example
of this, although in practice  we would choose shorter names
for the variables to make them quicker to type:
</p>
<a name="index-LyricText_002c-example-of-overriding-1"></a>
<a name="index-font_002dshape-property_002c-example-1"></a>
<a name="index-font_002dseries-property_002c-example"></a>

<blockquote><pre class="verbatim">emphasize = {
  \override Lyrics.LyricText #'font-shape = #'italic
  \override Lyrics.LyricText #'font-series = #'bold
}
normal = {
  \revert Lyrics.LyricText #'font-shape
  \revert Lyrics.LyricText #'font-series
}

global = { \time 4/4 \partial 4 \key c \major}
SopranoMusic   = \relative c' { c4 | e4. e8 g4  g  | a a g }
AltoMusic  = \relative c' { c4 | c4. c8 e4  e  | f f e }
TenorMusic = \relative c  { e4 | g4. g8 c4. b8 | a8 b c d e4 }
BassMusic  = \relative c  { c4 | c4. c8 c4  c  | f8 g a b c4 }
VerseOne   = \lyrics { E -- | ter -- nal \emphasize Fa -- ther, \normal | strong to save, }
VerseTwo   = \lyricmode { O | \emphasize Christ, \normal whose voice the | wa -- ters heard, }
VerseThree = \lyricmode { O | \emphasize Ho -- ly Spi -- rit, \normal | who didst brood }
VerseFour  = \lyricmode { O | \emphasize Tri -- ni -- ty \normal of | love and pow'r }

\score {
  \new ChoirStaff &lt;&lt;
    \new Staff &lt;&lt;
      \clef &quot;treble&quot;
      \new Voice = &quot;Soprano&quot;  { \voiceOne \global \SopranoMusic }
      \new Voice = &quot;Alto&quot; { \voiceTwo \AltoMusic }
      \new Lyrics \lyricsto &quot;Soprano&quot; { \VerseOne   }
      \new Lyrics \lyricsto &quot;Soprano&quot; { \VerseTwo   }
      \new Lyrics \lyricsto &quot;Soprano&quot; { \VerseThree }
      \new Lyrics \lyricsto &quot;Soprano&quot; { \VerseFour  }
    &gt;&gt;
    \new Staff &lt;&lt;
      \clef &quot;bass&quot;
      \new Voice = &quot;Tenor&quot; { \voiceOne \TenorMusic }
      \new Voice = &quot;Bass&quot;  { \voiceTwo \BassMusic  }
    &gt;&gt;
  &gt;&gt;
}
</pre><p>
 <a href="60/lily-d027f273.ly">
  <img align="middle"
       border="0"
       src="60/lily-d027f273.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>





<hr size="6">
<a name="Other-sources-of-information"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Using-variables-for-tweaks" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Using variables for tweaks&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Further-tweaking" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Further tweaking&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Avoiding-tweaks-with-slower-processing" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Avoiding tweaks with slower processing &gt; </a>]</td></tr></table>
<a name="Other-sources-of-information"></a>
<h3 class="subsection">4.6.3 Other sources of information</h3>

<p>The Internals Reference documentation contains a lot of information
about LilyPond, but even more information can be gathered by
looking at the internal LilyPond files.  To explore these, you must
first find the directory appropriate to your system.  The location
of this directory depends (a) on whether you obtained LilyPond
by downloading a precompiled binary from lilypond.org
or whether you installed it from a package manager (i.e.
distributed with Linux, or installed under fink or cygwin) or
compiled it from source, and (b) on which operating system it is
being used:
</p>
<p><strong>Downloaded from lilypond.org</strong>
</p>
<ul>
<li> Linux

<p>Navigate to
&lsquo;<tt><var>INSTALLDIR</var>/lilypond/usr/share/lilypond/current/</tt>&rsquo;
</p>
</li><li> MacOS X

<p>Navigate to
&lsquo;<tt><var>INSTALLDIR</var>/LilyPond.app/Contents/Resources/share/lilypond/current/</tt>&rsquo;
by either <code>cd</code>-ing into this directory from the
Terminal, or control-clicking on the LilyPond application and
selecting &lsquo;Show Package Contents&rsquo;.
</p>
</li><li> Windows

<p>Using Windows Explorer, navigate to
&lsquo;<tt><var>INSTALLDIR</var>/LilyPond/usr/share/lilypond/current/</tt>&rsquo;
</p>
</li></ul>

<p><strong>Installed from a package manager or compiled from source</strong>
</p>
<p>Navigate to
&lsquo;<tt><var>PREFIX</var>/share/lilypond/<var>X.Y.Z</var>/</tt>&rsquo;, where
<var>PREFIX</var> is set by your package manager or <code>configure</code>
script, and <var>X.Y.Z</var> is the LilyPond version number.
</p>
<br>

<p>Within this directory the two interesting subdirectories are
</p>
<ul>
<li> &lsquo;<tt>ly/</tt>&rsquo; - contains files in LilyPond format
</li><li> &lsquo;<tt>scm/</tt>&rsquo; - contains files in Scheme format
</li></ul>

<p>Let&rsquo;s begin by looking at some files in &lsquo;<tt>ly/</tt>&rsquo;.
Open &lsquo;<tt>ly/property-init.ly</tt>&rsquo; in a text editor.  The one
you normally use for <code>.ly</code> files will be fine.  This file
contains the definitions of all the standard LilyPond predefined
commands, such as <code>\stemUp</code> and <code>\slurDotted</code>.  You will
see that these are nothing more than definitions of variables
containing one or a group of <code>\override</code> commands.  For
example, <code>/tieDotted</code> is defined to be:
</p>
<blockquote><pre class="example">tieDotted = {
  \override Tie #'dash-period = #0.75
  \override Tie #'dash-fraction = #0.1
}
</pre></blockquote>

<p>If you do not like the default values these predefined commands can
be redefined easily, just like any other variable, at the
head of your input file.
</p>
<p>The following are the most useful files to be found in
&lsquo;<tt>ly/</tt>&rsquo;:
</p>
<table>
<thead><tr><th width="40%"><p> Filename
  </p></th><th width="60%"><p> Contents
</p></th></tr></thead>
<tr><td width="40%"><p> &lsquo;<tt>ly/engraver-init.ly</tt>&rsquo;
  </p></td><td width="60%"><p> Definitions of engraver Contexts
</p></td></tr>
<tr><td width="40%"><p> &lsquo;<tt>ly/paper-defaults-init.ly</tt>&rsquo;
  </p></td><td width="60%"><p> Specifications of paper-related defaults
</p></td></tr>
<tr><td width="40%"><p> &lsquo;<tt>ly/performer-init.ly</tt>&rsquo;
  </p></td><td width="60%"><p> Definitions of performer Contexts
</p></td></tr>
<tr><td width="40%"><p> &lsquo;<tt>ly/property-init.ly</tt>&rsquo;
  </p></td><td width="60%"><p> Definitions of all common predefined commands
</p></td></tr>
<tr><td width="40%"><p> &lsquo;<tt>ly/spanner-init.ly</tt>&rsquo;
  </p></td><td width="60%"><p> Definitions of spanner-related predefined commands
</p></td></tr>
</table>

<p>Other settings (such as the definitions of markup commands) are
stored as <code>.scm</code> (Scheme) files.  The Scheme programming
language is used to provide a programmable interface into
LilyPond internal operation.  Further explanation of these files
is currently outside the scope of this manual, as a knowledge of
the Scheme language is required.  Users should be warned that
a substantial amount of technical knowledge or time is required
to understand Scheme and these files (see <a href="#Scheme-tutorial">Scheme tutorial</a>).
</p>
<p>If you have this knowledge, the Scheme files which may be of
interest are:
</p>
<table>
<thead><tr><th width="40%"><p> Filename
  </p></th><th width="60%"><p> Contents
</p></th></tr></thead>
<tr><td width="40%"><p> &lsquo;<tt>scm/auto-beam.scm</tt>&rsquo;
  </p></td><td width="60%"><p> Sub-beaming defaults
</p></td></tr>
<tr><td width="40%"><p> &lsquo;<tt>scm/define-grobs.scm</tt>&rsquo;
  </p></td><td width="60%"><p> Default settings for grob properties
</p></td></tr>
<tr><td width="40%"><p> &lsquo;<tt>scm/define-markup-commands.scm</tt>&rsquo;
  </p></td><td width="60%"><p> Specify all markup commands
</p></td></tr>
<tr><td width="40%"><p> &lsquo;<tt>scm/midi.scm</tt>&rsquo;
  </p></td><td width="60%"><p> Default settings for MIDI output
</p></td></tr>
<tr><td width="40%"><p> &lsquo;<tt>scm/output-lib.scm</tt>&rsquo;
  </p></td><td width="60%"><p> Settings that affect appearance of frets, colors,
       accidentals, bar lines, etc
</p></td></tr>
<tr><td width="40%"><p> &lsquo;<tt>scm/parser-clef.scm</tt>&rsquo;
  </p></td><td width="60%"><p> Definitions of supported clefs
</p></td></tr>
<tr><td width="40%"><p> &lsquo;<tt>scm/script.scm</tt>&rsquo;
  </p></td><td width="60%"><p> Default settings for articulations
</p></td></tr>
</table>



<hr size="6">
<a name="Avoiding-tweaks-with-slower-processing"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Other-sources-of-information" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Other sources of information&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Further-tweaking" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Further tweaking&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Advanced-tweaks-with-Scheme" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Advanced tweaks with Scheme &gt; </a>]</td></tr></table>
<a name="Avoiding-tweaks-with-slower-processing"></a>
<h3 class="subsection">4.6.4 Avoiding tweaks with slower processing</h3>

<p>LilyPond can perform extra checks while it processes input files.  These
checks will take extra time to perform, but fewer manual tweaks
may be required to obtain an acceptable result.  If a text script
or part of the lyrics extends over the margins these checks will
compress that line of the score just enough to fit within the
margins.
</p>
<p>To be effective under all circumstances these checks must be enabled
by placing the overrides in a Score <code>\with</code> block, rather than
in-line in music, as follows:
</p>
<blockquote><pre class="example">\new Score \with {
  % Makes sure text scripts and lyrics are within the paper margins
  \override PaperColumn #'keep-inside-line = ##t
  \override NonMusicalPaperColumn #'keep-inside-line = ##t
} {
   ..
}
</pre></blockquote>

<hr size="6">
<a name="Advanced-tweaks-with-Scheme"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Next chapter">&nbsp;Working on LilyPond projects &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Avoiding-tweaks-with-slower-processing" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Avoiding tweaks with slower processing&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Further-tweaking" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Further tweaking&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Working-on-LilyPond-projects" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Working on LilyPond projects &gt; </a>]</td></tr></table>
<a name="Advanced-tweaks-with-Scheme"></a>
<h3 class="subsection">4.6.5 Advanced tweaks with Scheme</h3>

<p>Although many things are possible with the <code>\override</code> and
<code>\tweak</code> commands, an even more powerful way of modifying
the action of LilyPond is available through a programmable
interface to the LilyPond internal operation.  Code written in
the Scheme programming language can be incorporated directly in
the internal operation of LilyPond.  Of course, at least a basic
knowledge of programming in Scheme is required to do this, and an
introduction is provided in the <a href="#Scheme-tutorial">Scheme tutorial</a>.
</p>
<p>As an illustration of one of the many possibilities, instead of
setting a property to a constant it can be set to a Scheme
procedure which is then called whenever that property is accessed
by LilyPond.  The property can then be set dynamically to a value
determined by the procedure at the time it is called.  In this
example we color the note head in accordance with its position on
the staff.
</p>
<a name="index-x11_002dcolor-function_002c-example-of-using"></a>
<a name="index-NoteHead_002c-example-of-overriding-5"></a>
<a name="index-color-property_002c-setting-to-Scheme-procedure"></a>

<blockquote><pre class="verbatim">#(define (color-notehead grob)
  &quot;Color the notehead according to its position on the staff.&quot;
  (let ((mod-position (modulo (ly:grob-property grob 'staff-position) 7)))
    (case mod-position
      ;;   Return rainbow colors
      ((1) (x11-color 'red    ))  ; for C
      ((2) (x11-color 'orange ))  ; for D
      ((3) (x11-color 'yellow ))  ; for E
      ((4) (x11-color 'green  ))  ; for F
      ((5) (x11-color 'blue   ))  ; for G
      ((6) (x11-color 'purple ))  ; for A
      ((0) (x11-color 'violet ))  ; for B
    )
  )
)

\relative c' {
  % Arrange to obtain color from color-notehead procedure
  \override NoteHead #'color = #color-notehead
  c2 c' |
  b4 g8 a b4 c |
  c,2 a' |
  g1 |
}
\addlyrics {
  Some -- where o -- ver the Rain -- bow, way up high,
}
</pre><p>
 <a href="05/lily-b6ef49f4.ly">
  <img align="middle"
       border="0"
       src="05/lily-b6ef49f4.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Further examples showing the use of these programmable interfaces
can be found in <a href="#Tweaking-with-Scheme">Tweaking with Scheme</a>.
</p>
















<hr size="6">
<a name="Working-on-LilyPond-projects"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Tweaking-output" title="Beginning of this chapter or previous chapter"> &lt;&lt; Tweaking output&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Templates" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Advanced-tweaks-with-Scheme" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Advanced tweaks with Scheme&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Top" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Suggestions-for-writing-LilyPond-input-files" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Suggestions for writing LilyPond input files &gt; </a>]</td></tr></table>
<a name="Working-on-LilyPond-projects"></a>
<h1 class="chapter">5. Working on LilyPond projects</h1>

<p>This section explains how to solve or avoid certain common
problems.  If you have programming experience, many of these
tips may seem obvious, but it is still advisable to read
this chapter.
</p>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Suggestions-for-writing-LilyPond-input-files" accesskey="1">5.1 Suggestions for writing LilyPond input files</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#When-things-don_0027t-work" accesskey="2">5.2 When things don&rsquo;t work</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Scores-and-parts" accesskey="3">5.3 Scores and parts</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="Suggestions-for-writing-LilyPond-input-files"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Beginning of this chapter or previous chapter"> &lt;&lt; Working on LilyPond projects&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Templates" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Working-on-LilyPond-projects" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Working on LilyPond projects&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Working on LilyPond projects&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#General-suggestions" title="Next section in reading order" accesskey="n" rel="next">&nbsp;General suggestions &gt; </a>]</td></tr></table>
<a name="Suggestions-for-writing-LilyPond-input-files"></a>
<h2 class="section">5.1 Suggestions for writing LilyPond input files</h2>

<p>Now you&rsquo;re ready to begin writing larger LilyPond input files &ndash;
not just the little examples in the tutorial, but whole pieces.
But how should you go about doing it?
</p>
<p>As long as LilyPond can understand your input files and produce
the output that you want, it doesn&rsquo;t matter what your input files
look like.  However, there are a few other things to consider when
writing LilyPond input files.
</p>
<ul>
<li> What if you make a mistake?  The structure of a LilyPond
file can make certain errors easier (or harder) to find.

</li><li> What if you want to share your input files with somebody
else?  In fact, what if you want to alter your own input files in
a few years?  Some LilyPond input files are understandable at
first glance; others may leave you scratching your head
for an hour.

</li><li> What if you want to upgrade your LilyPond file for use
with a later version of LilyPond?  The input syntax changes
occasionally as LilyPond improves.  Most changes can be
done automatically with <code>convert-ly</code>, but some changes
might require manual assistance.  LilyPond input files can be
structured in order to be easier (or harder) to update.

</li></ul>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#General-suggestions" accesskey="1">5.1.1 General suggestions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Typesetting-existing-music" accesskey="2">5.1.2 Typesetting existing music</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Large-projects" accesskey="3">5.1.3 Large projects</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Saving-typing-with-variables-and-functions" accesskey="4">5.1.4 Saving typing with variables and functions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Style-sheets" accesskey="5">5.1.5 Style sheets</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="General-suggestions"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Beginning of this chapter or previous chapter"> &lt;&lt; Working on LilyPond projects&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Templates" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Suggestions-for-writing-LilyPond-input-files" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Suggestions for writing LilyPond input files&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Suggestions-for-writing-LilyPond-input-files" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Suggestions for writing LilyPond input files&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Typesetting-existing-music" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Typesetting existing music &gt; </a>]</td></tr></table>
<a name="General-suggestions"></a>
<h3 class="subsection">5.1.1 General suggestions</h3>

<p>Here are a few suggestions that can help you to avoid or fix
problems:
</p>
<ul>
<li> <strong>Include <code>\version</code> numbers in every file</strong>.  Note that all
templates contain <code>\version</code> information.  We
highly recommend that you always include the <code>\version</code>, no matter
how small your file is.  Speaking from personal experience, it&rsquo;s
quite frustrating to try to remember which version of LilyPond you were
using a few years ago.  <code>convert-ly</code> requires you to declare
which version of LilyPond you used.

</li><li> <strong>Include checks</strong>: <a name="index-Bar-and-bar-number-checks"></a>
<a href="lilypond-big-page.html#Bar-and-bar-number-checks">Bar and bar number checks</a>,
<a name="index-Octave-checks"></a>
<a href="lilypond-big-page.html#Octave-checks">Octave checks</a>.  If you include checks every so often, then
if you make a mistake, you can pinpoint it quicker.  How often is
&lsquo;every so often&rsquo;?  It depends on the complexity of the music.
For very simple music, perhaps just once or twice.  For very
complex music, perhaps every bar.

</li><li> <strong>One bar per line of text</strong>.  If there is anything complicated,
either in the music
itself or in the output you desire, it&rsquo;s often good to write only one bar
per line.  Saving screen space by cramming eight bars per line just isn&rsquo;t
worth it if you have to &lsquo;debug&rsquo; your input files.

</li><li> <strong>Comment your input files</strong>.  Use either bar numbers
(every so often) or
references to musical themes (&lsquo;second theme in violins,&rsquo; &lsquo;fourth
variation,&rsquo; etc.).  You may not need comments when you&rsquo;re writing the piece
for the first time, but if you want to go back to change something two or
three years later, or if you pass the source over to a friend, it will
be much more
challenging to determine your intentions or how your file is structured if
you didn&rsquo;t comment the file.

</li><li> <strong>Indent your braces</strong>.  A lot of problems are caused by an
imbalance
in the number of <code>{</code> and <code>}</code>.

</li><li> <strong>Explicitly add durations</strong> at the beginnings of sections
and variables.  If you specify <code>c4 d e</code> at the beginning of a
phrase (instead of just <code>c d e</code>) you can save yourself some
problems if you rearrange your music later.

</li><li> <strong>Separate tweaks</strong> from music definitions.  See
<a href="#Saving-typing-with-variables-and-functions">Saving typing with variables and functions</a>, and
<a href="#Style-sheets">Style sheets</a>.

</li></ul>


<hr size="6">
<a name="Typesetting-existing-music"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Beginning of this chapter or previous chapter"> &lt;&lt; Working on LilyPond projects&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Templates" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#General-suggestions" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; General suggestions&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Suggestions-for-writing-LilyPond-input-files" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Suggestions for writing LilyPond input files&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Large-projects" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Large projects &gt; </a>]</td></tr></table>
<a name="Typesetting-existing-music"></a>
<h3 class="subsection">5.1.2 Typesetting existing music</h3>

<p>If you are entering music from an existing score (i.e., typesetting a
piece of existing sheet music),
</p>
<ul>
<li> Enter one manuscript (the physical copy) system at a time (but still
only one bar per line of text), and
check each system when you finish it.  You may use the
<code>showLastLength</code> or <code>showFirstLength</code> properties to speed up
processing &ndash; see <a name="index-Skipping-corrected-music"></a>
<a href="lilypond-big-page.html#Skipping-corrected-music">Skipping corrected music</a>.

</li><li> Define <code>mBreak = { \break }</code> and insert <code>\mBreak</code>
in the input file whenever the manuscript has a line break.  This
makes it much easier to compare the LilyPond music to the original
music.  When you are finished proofreading your score, you may
define <code>mBreak = { }</code> to remove all those line breaks.  This
will allow LilyPond to place line breaks wherever it feels are
best.

</li><li> When entering a part for a transposing instrument into a
variable, it is recommended that the notes are wrapped in

<blockquote><pre class="example">\transpose c natural-pitch {...}
</pre></blockquote>
<p>(where <code>natural-pitch</code> is the open pitch of the instrument) so
that the music in the variable is effectively in C. You can transpose
it back again when the variable is used, if required, but you might
not want to (e.g., when printing a score in concert pitch,
converting a trombone part from treble to bass clef, etc.)
Mistakes in transpositions are less likely if all the music in
variables is at a consistent pitch.
</p>
<p>Also, only ever transpose to/from C. That means that the only other
keys you will use are the natural pitches of the instruments - bes
for a B-flat trumpet, aes for an A-flat clarinet, etc.
</p>
</li></ul>


<hr size="6">
<a name="Large-projects"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Beginning of this chapter or previous chapter"> &lt;&lt; Working on LilyPond projects&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Templates" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Typesetting-existing-music" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Typesetting existing music&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Suggestions-for-writing-LilyPond-input-files" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Suggestions for writing LilyPond input files&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Saving-typing-with-variables-and-functions" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Saving typing with variables and functions &gt; </a>]</td></tr></table>
<a name="Large-projects"></a>
<h3 class="subsection">5.1.3 Large projects</h3>

<p>When working on a large project, having a clear structure to your
lilypond input files becomes vital.
</p>
<ul>
<li> <strong>Use an variable for each voice</strong>, with a minimum of
structure inside the definition.  The structure of the
<code>\score</code> section is the most likely thing to change;
the <code>violin</code> definition is extremely unlikely to change
in a new version of LilyPond.

<blockquote><pre class="example">violin = \relative c'' {
g4 c'8. e16
}
...
\score {
  \new GrandStaff {
    \new Staff {
      \violin
    }
  }
}
</pre></blockquote>

</li><li> <strong>Separate tweaks from music definitions</strong>.  This
point was made in previously, but for large
projects it is absolutely vital.  We might need to change
the definition of <code>fthenp</code>, but then we only need
to do this once, and we can still avoid touching anything
inside <code>violin</code>.

<blockquote><pre class="example">fthenp = _\markup{
  \dynamic f \italic \small { 2nd } \hspace #0.1 \dynamic p }
violin = \relative c'' {
g4\fthenp c'8. e16
}
</pre></blockquote>

</li></ul>


<hr size="6">
<a name="Saving-typing-with-variables-and-functions"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Beginning of this chapter or previous chapter"> &lt;&lt; Working on LilyPond projects&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Templates" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Large-projects" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Large projects&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Suggestions-for-writing-LilyPond-input-files" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Suggestions for writing LilyPond input files&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Style-sheets" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Style sheets &gt; </a>]</td></tr></table>
<a name="Saving-typing-with-variables-and-functions"></a>
<h3 class="subsection">5.1.4 Saving typing with variables and functions</h3>

<a name="index-variables-2"></a>
<a name="index-variables-3"></a>

<p>By this point, you&rsquo;ve seen this kind of thing:
</p>
<blockquote><pre class="verbatim">hornNotes = \relative c'' { c4 b dis c }
\score {
  {
    \hornNotes
  }
}
</pre><p>
 <a href="34/lily-757ab6de.ly">
  <img align="middle"
       border="0"
       src="34/lily-757ab6de.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>You may even realize that this could be useful in minimalist music:
</p>
<blockquote><pre class="verbatim">fragmentA = \relative c'' { a4 a8. b16 }
fragmentB = \relative c'' { a8. gis16 ees4 }
violin = \new Staff { \fragmentA \fragmentA \fragmentB \fragmentA }
\score {
  {
    \violin
  }
}
</pre><p>
 <a href="30/lily-09536e9c.ly">
  <img align="middle"
       border="0"
       src="30/lily-09536e9c.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>However, you can also use these variables (also known as
variables, macros, or (user-defined) command) for tweaks:
</p>
<blockquote><pre class="verbatim">dolce = \markup{ \italic \bold dolce }
padText = { \once \override TextScript #'padding = #5.0 }
fthenp=_\markup{ \dynamic f \italic \small { 2nd } \hspace #0.1 \dynamic p }
violin = \relative c'' {
  \repeat volta 2 {
    c4._\dolce b8 a8 g a b |
    \padText
    c4.^&quot;hi there!&quot; d8 e' f g d |
    c,4.\fthenp b8 c4 c-. |
  }
}
\score {
  {
    \violin
  }
\layout{ragged-right=##t}
}
</pre><p>
 <a href="22/lily-69d29da0.ly">
  <img align="middle"
       border="0"
       src="22/lily-69d29da0.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>These variables are obviously useful for saving
typing.  But they&rsquo;re worth considering even if you
only use them once &ndash; they reduce complexity.  Let&rsquo;s
look at the previous example without any
variables.  It&rsquo;s a lot harder to read, especially
the last line.
</p>
<blockquote><pre class="example">violin = \relative c'' {
  \repeat volta 2 {
    c4._\markup{ \italic \bold dolce } b8 a8 g a b |
    \once \override TextScript #'padding = #5.0
    c4.^&quot;hi there!&quot; d8 e' f g d |
    c,4.\markup{ \dynamic f \italic \small { 2nd }
      \hspace #0.1 \dynamic p } b8 c4 c-. |
  }
}
</pre></blockquote>


<p>So far we&rsquo;ve seen static substitution &ndash; when LilyPond
sees <code>\padText</code>, it replaces it with the stuff that
we&rsquo;ve defined it to be (ie the stuff to the right of
<code>padtext=</code>).
</p>
<p>LilyPond can handle non-static substitution, too (you
can think of these as functions).
</p>
<blockquote><pre class="verbatim">padText =
#(define-music-function (parser location padding) (number?)
  #{
    \once \override TextScript #'padding = #$padding
  #})

\relative c''' {
  c4^&quot;piu mosso&quot; b a b
  \padText #1.8
  c4^&quot;piu mosso&quot; d e f
  \padText #2.6
  c4^&quot;piu mosso&quot; fis a g
}
</pre><p>
 <a href="57/lily-66c8018b.ly">
  <img align="middle"
       border="0"
       src="57/lily-66c8018b.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Using variables is also a good way to reduce work if the
LilyPond input syntax changes (see <a href="#Updating-old-input-files">Updating old input files</a>).  If
you have a single definition (such as <code>\dolce</code>) for all your
input files (see <a href="#Style-sheets">Style sheets</a>), then if the syntax changes, you
only need to update your single <code>\dolce</code> definition,
instead of making changes throughout every <code>.ly</code> file.
</p>

<hr size="6">
<a name="Style-sheets"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Beginning of this chapter or previous chapter"> &lt;&lt; Working on LilyPond projects&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Templates" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Saving-typing-with-variables-and-functions" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Saving typing with variables and functions&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Suggestions-for-writing-LilyPond-input-files" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Suggestions for writing LilyPond input files&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#When-things-don_0027t-work" title="Next section in reading order" accesskey="n" rel="next">&nbsp;When things don't work &gt; </a>]</td></tr></table>
<a name="Style-sheets"></a>
<h3 class="subsection">5.1.5 Style sheets</h3>

<p>The output that LilyPond produces can be heavily modified; see
<a href="#Tweaking-output">Tweaking output</a>, for details.  But what if you have many
input files that you want to apply your tweaks to?  Or what if you
simply want to separate your tweaks from the actual music?  This
is quite easy to do.
</p>
<p>Let&rsquo;s look at an example.  Don&rsquo;t worry if you don&rsquo;t understand
the parts with all the <code>#()</code>.  This is explained in
<a href="#Advanced-tweaks-with-Scheme">Advanced tweaks with Scheme</a>.
</p>
<blockquote><pre class="verbatim">mpdolce = #(make-dynamic-script (markup #:hspace 1 #:translate (cons 5 0)
  #:line(#:dynamic &quot;mp&quot; #:text #:italic &quot;dolce&quot; )))
tempoMark = #(define-music-function (parser location markp) (string?)
#{
  \once \override Score . RehearsalMark #'self-alignment-X = #left
  \once \override Score . RehearsalMark #'extra-spacing-width = #'(+inf.0 . -inf.0)
  \mark \markup { \bold $markp }
#})

\relative c'' {
  \tempo 4=50
  a4.\mpdolce d8 cis4--\glissando a | b4 bes a2
  \tempoMark &quot;Poco piu mosso&quot;
  cis4.\&lt; d8 e4 fis | g8(\! fis)-. e( d)-. cis2
}
</pre><p>
 <a href="08/lily-8fff3755.ly">
  <img align="middle"
       border="0"
       src="08/lily-8fff3755.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>There are some problems with overlapping output; we&rsquo;ll fix those using
the techniques in <a href="#Moving-objects">Moving objects</a>.  But let&rsquo;s also
do something about the <code>mpdolce</code> and <code>tempoMark</code>
definitions.  They produce the output we desire, but we might want
to use them in another piece.  We could simply copy-and-paste them
at the top of every file, but that&rsquo;s an annoyance.  It also leaves
those definitions in our input files, and I personally find all
the <code>#()</code> somewhat ugly.  Let&rsquo;s hide them in another file:
</p>
<blockquote><pre class="example">%%% save this to a file called &quot;definitions.ly&quot;
mpdolce = #(make-dynamic-script (markup #:hspace 1 #:translate (cons 5 0)
  #:line(#:dynamic &quot;mp&quot; #:text #:italic &quot;dolce&quot; )))
tempoMark = #(define-music-function (parser location markp) (string?)
#{
  \once \override Score . RehearsalMark #'self-alignment-X = #left
  \once \override Score . RehearsalMark #'extra-spacing-width = #'(+inf.0 . -inf.0)
  \mark \markup { \bold $markp }
#})
</pre></blockquote>

<p>Now let&rsquo;s modify our music (let&rsquo;s save this file as &lsquo;<tt>&quot;music.ly&quot;</tt>&rsquo;).
</p>

<blockquote><pre class="example">\include &quot;definitions.ly&quot;

\relative c'' {
  \tempo 4=50
  a4.\mpdolce d8 cis4--\glissando a | b4 bes a2
  \once \override Score.RehearsalMark #'padding = #2.0
  \tempoMark &quot;Poco piu mosso&quot;
  cis4.\&lt; d8 e4 fis | g8(\! fis)-. e( d)-. cis2
}
</pre></blockquote>

<blockquote><p>
 <a href="79/lily-f7728a16.ly">
  <img align="middle"
       border="0"
       src="79/lily-f7728a16.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>That looks better, but let&rsquo;s make a few changes.  The glissando is hard
to see, so let&rsquo;s make it thicker and closer to the note heads.  Let&rsquo;s
put the metronome marking above the clef, instead of over the first
note.  And finally, my composition professor hates &lsquo;C&rsquo; time signatures,
so we&rsquo;d better make that &lsquo;4/4&rsquo; instead.
</p>
<p>Don&rsquo;t change &lsquo;<tt>music.ly</tt>&rsquo;, though.  Replace our &lsquo;<tt>definitions.ly</tt>&rsquo;
with this:
</p>
<blockquote><pre class="example">%%%  definitions.ly
mpdolce = #(make-dynamic-script (markup #:hspace 1 #:translate (cons 5 0)
  #:line( #:dynamic &quot;mp&quot; #:text #:italic &quot;dolce&quot; )))
tempoMark = #(define-music-function (parser location markp) (string?)
#{
  \once \override Score . RehearsalMark #'self-alignment-X = #left
  \once \override Score . RehearsalMark #'extra-spacing-width = #'(+inf.0 . -inf.0)
  \mark \markup { \bold $markp }
#})

\layout{
  \context { \Score
    \override MetronomeMark #'extra-offset = #'(-9 . 0)
    \override MetronomeMark #'padding = #'3
  }
  \context { \Staff
    \override TimeSignature #'style = #'numbered
  }
  \context { \Voice
    \override Glissando #'thickness = #3
    \override Glissando #'gap = #0.1
  }
}
</pre></blockquote>

<blockquote><p>
 <a href="5f/lily-14d6f60a.ly">
  <img align="middle"
       border="0"
       src="5f/lily-14d6f60a.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>That looks nicer!  But now suppose that I want to publish this
piece.  My composition professor doesn&rsquo;t like &lsquo;C&rsquo; time
signatures, but I&rsquo;m somewhat fond of them.  Let&rsquo;s copy the
current &lsquo;<tt>definitions.ly</tt>&rsquo; to &lsquo;<tt>web-publish.ly</tt>&rsquo; and
modify that.  Since this music is aimed at producing a pdf which
will be displayed on the screen, we&rsquo;ll also increase the
overall size of the output.
</p>
<blockquote><pre class="example">%%%  definitions.ly
mpdolce = #(make-dynamic-script (markup #:hspace 1 #:translate (cons 5 0)
  #:line( #:dynamic &quot;mp&quot; #:text #:italic &quot;dolce&quot; )))
tempoMark = #(define-music-function (parser location markp) (string?)
#{
  \once \override Score . RehearsalMark #'self-alignment-X = #left
  \once \override Score . RehearsalMark #'extra-spacing-width = #'(+inf.0 . -inf.0)
  \mark \markup { \bold $markp }
#})

#(set-global-staff-size 23)
\layout{
  \context { \Score
    \override MetronomeMark #'extra-offset = #'(-9 . 0)
    \override MetronomeMark #'padding = #'3
  }
  \context { \Staff
  }
  \context { \Voice
    \override Glissando #'thickness = #3
    \override Glissando #'gap = #0.1
  }
}
</pre></blockquote>

<blockquote><p>
 <a href="04/lily-e49f4361.ly">
  <img align="middle"
       border="0"
       src="04/lily-e49f4361.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Now in our music, I simply replace
<code>\include &quot;definitions.ly&quot;</code> with
<code>\include &quot;web-publish.ly&quot;</code>.  Of course, we could make this
even more convenient.  We could make a &lsquo;<tt>definitions.ly</tt>&rsquo; file which
contains only the definitions of <code>mpdolce</code> and <code>tempoMark</code>, a
&lsquo;<tt>web-publish.ly</tt>&rsquo; file which contains only the <code>\layout</code>
section listed above, and a &lsquo;<tt>university.ly</tt>&rsquo; file which
contains only the tweaks to produce the output that my professor
prefers.  The top of &lsquo;<tt>music.ly</tt>&rsquo; would then look like this:
</p>
<blockquote><pre class="example">\include &quot;definitions.ly&quot;

%%%  Only uncomment one of these two lines!
\include &quot;web-publish.ly&quot;
%\include &quot;university.ly&quot;
</pre></blockquote>

<p>This approach can be useful even if you are only producing
one set of parts.  I use half a dozen different
&lsquo;style sheet&rsquo; files for my projects.  I begin every music
file with <code>\include &quot;../global.ly&quot;</code>, which contains
</p>
<blockquote><pre class="example">%%%   global.ly
\version &quot;2.12.3&quot;
#(ly:set-option 'point-and-click #f)
\include &quot;../init/init-defs.ly&quot;
\include &quot;../init/init-layout.ly&quot;
\include &quot;../init/init-headers.ly&quot;
\include &quot;../init/init-paper.ly&quot;
</pre></blockquote>


<hr size="6">
<a name="When-things-don_0027t-work"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Beginning of this chapter or previous chapter"> &lt;&lt; Working on LilyPond projects&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Templates" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Style-sheets" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Style sheets&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Working on LilyPond projects&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Updating-old-input-files" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Updating old input files &gt; </a>]</td></tr></table>
<a name="When-things-don_0027t-work"></a>
<h2 class="section">5.2 When things don&rsquo;t work</h2>

<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Updating-old-input-files" accesskey="1">5.2.1 Updating old input files</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Troubleshooting-_0028taking-it-all-apart_0029" accesskey="2">5.2.2 Troubleshooting (taking it all apart)</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Minimal-examples" accesskey="3">5.2.3 Minimal examples</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Updating-old-input-files"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Beginning of this chapter or previous chapter"> &lt;&lt; Working on LilyPond projects&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Templates" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#When-things-don_0027t-work" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; When things don't work&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#When-things-don_0027t-work" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;When things don't work&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Troubleshooting-_0028taking-it-all-apart_0029" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Troubleshooting (taking it all apart) &gt; </a>]</td></tr></table>
<a name="Updating-old-input-files"></a>
<h3 class="subsection">5.2.1 Updating old input files</h3>

<p>The LilyPond input syntax occasionally changes.  As LilyPond itself
improves, the syntax (input language) is modified accordingly.  Sometimes
these changes are made to make the input easier to read and write or
sometimes the changes are made to accommodate new features of LilyPond.
</p>
<p>LilyPond comes with a file that makes this updating easier:
<code>convert-ly</code>.  For details about how to run this program, see
<a name="index-Updating-files-with-convert_002dly-1"></a>
<a href="lilypond-program-big-page.html#Updating-files-with-convert_002dly">Updating files with convert-ly</a>.
</p>
<p>Unfortunately, <code>convert-ly</code> cannot handle all input changes.  It
takes care of simple search-and-replace changes (such as <code>raggedright</code>
becoming <code>ragged-right</code>), but some changes are too
complicated.  The syntax changes that <code>convert-ly</code> cannot handle
are listed in <a name="index-Updating-files-with-convert_002dly-2"></a>
<a href="lilypond-program-big-page.html#Updating-files-with-convert_002dly">Updating files with convert-ly</a>.
</p>
<p>For example, in LilyPond 2.4 and earlier, accents and non-English
letters were entered using LaTeX &ndash; for example,
<code>No\&quot;el</code> (this would print the French word for
&lsquo;Christmas&rsquo;).  In LilyPond 2.6 and above, the special
<code>ë</code> must be entered directly into the LilyPond file as an
UTF-8 character.  <code>convert-ly</code> cannot change all the LaTeX
special characters into UTF-8 characters; you must manually update
your old LilyPond input files.
</p>

<hr size="6">
<a name="Troubleshooting-_0028taking-it-all-apart_0029"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Beginning of this chapter or previous chapter"> &lt;&lt; Working on LilyPond projects&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Templates" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Updating-old-input-files" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Updating old input files&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#When-things-don_0027t-work" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;When things don't work&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Minimal-examples" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Minimal examples &gt; </a>]</td></tr></table>
<a name="Troubleshooting-_0028taking-it-all-apart_0029"></a>
<h3 class="subsection">5.2.2 Troubleshooting (taking it all apart)</h3>

<p>Sooner or later, you will write a file that LilyPond cannot
compile.  The messages that LilyPond gives may help
you find the error, but in many cases you need to do some
investigation to determine the source of the problem.
</p>
<p>The most powerful tools for this purpose are the
single line comment (indicated by <code>%</code>) and the block
comment (indicated by <code>%{ ... %}</code>).  If you don&rsquo;t
know where a problem is, start commenting out huge portions
of your input file.  After you comment out a section, try
compiling the file again.  If it works, then the problem
must exist in the portion you just commented.  If it doesn&rsquo;t
work, then keep on commenting out material until you have
something that works.
</p>
<p>In an extreme case, you might end up with only
</p>
<blockquote><pre class="example">\score {
  &lt;&lt;
    % \melody
    % \harmony
    % \bass
  &gt;&gt;
  \layout{}
}
</pre></blockquote>

<p>(in other words, a file without any music)
</p>
<p>If that happens, don&rsquo;t give up.  Uncomment a bit &ndash; say,
the bass part &ndash; and see if it works.  If it doesn&rsquo;t work,
then comment out all of the bass music (but leave
<code>\bass</code> in the <code>\score</code> uncommented.
</p>
<blockquote><pre class="example">bass = \relative c' {
%{
  c4 c c c
  d d d d
%}
}
</pre></blockquote>

<p>Now start slowly uncommenting more and more of the
<code>bass</code> part until you find the problem line.
</p>
<p>Another very useful debugging technique is constructing
<a href="#Minimal-examples">Minimal examples</a>.
</p>

<hr size="6">
<a name="Minimal-examples"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Beginning of this chapter or previous chapter"> &lt;&lt; Working on LilyPond projects&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Templates" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Troubleshooting-_0028taking-it-all-apart_0029" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Troubleshooting (taking it all apart)&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#When-things-don_0027t-work" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;When things don't work&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Scores-and-parts" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Scores and parts &gt; </a>]</td></tr></table>
<a name="Minimal-examples"></a>
<h3 class="subsection">5.2.3 Minimal examples</h3>

<p>A minimal example is an example which is as small as possible.  These
examples are much easier to understand than long examples.  Minimal
examples are used for
</p>
<ul>
<li> Bug reports
</li><li> Sending a help request to mailing lists
</li><li> Adding an example to the <a href="http://lsr.dsi.unimi.it/">LilyPond Snippet Repository</a>
</li></ul>

<p>To construct an example which is as small as possible, the rule is
quite simple: remove anything which is not necessary.  When trying to
remove unnecessary parts of a file, it is a very good idea to comment
out lines instead of deleting them.  That way, if you discover that you
actually <em>do</em> need some lines, you can uncomment them, instead of
typing them in from scratch.
</p>
<p>There are two exceptions to the &ldquo;as small as possible&rdquo; rule:
</p>
<ul>
<li> Include the <code>\version</code> number.
</li><li> If possible, use <code>\paper{ ragged-right=##t }</code> at the
top of your example.
</li></ul>

<p>The whole point of a minimal example is to make it easy to read:
</p>
<ul>
<li> Avoid using complicated notes, keys, or time signatures, unless you
wish to demonstrate something is about the behavior of those items.
</li><li> Do not use <code>\override</code> commands unless that is the point of the
example.
</li></ul>



<hr size="6">
<a name="Scores-and-parts"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Beginning of this chapter or previous chapter"> &lt;&lt; Working on LilyPond projects&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Templates" title="Next chapter">&nbsp;Templates &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Minimal-examples" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Minimal examples&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Working on LilyPond projects&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Templates" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Templates &gt; </a>]</td></tr></table>
<a name="Scores-and-parts"></a>
<h2 class="section">5.3 Scores and parts</h2>

<p>TODO: this is really old stuff from the really old tutorial.
Rewrite, fix, etc.  Or maybe delete entirely.  -gp
Include section on tags   -td
and then move to section 5. Working ...  -td
</p>
<p>In orchestral music, all notes are printed twice.  Once in a part for
the musicians, and once in a full score for the conductor.  Variables can
be used to avoid double work.  The music is entered once, and stored in
a variable.  The contents of that variable is then used to generate
both the part and the full score.
</p>
<p>It is convenient to define the notes in a special file.  For example,
suppose that the file &lsquo;<tt>horn-music.ly</tt>&rsquo; contains the following part
of a horn/bassoon duo
</p>
<blockquote><pre class="example">hornNotes = \relative c {
  \time 2/4
  r4 f8 a cis4 f e d
}
</pre></blockquote>

<p>Then, an individual part is made by putting the following in a file
</p>
<blockquote><pre class="example">\include &quot;horn-music.ly&quot;
\header {
  instrument = &quot;Horn in F&quot;
}

{
 \transpose f c' \hornNotes
}
</pre></blockquote>

<p>The line
</p>
<blockquote><pre class="example">\include &quot;horn-music.ly&quot;
</pre></blockquote>

<p>substitutes the contents of &lsquo;<tt>horn-music.ly</tt>&rsquo; at this position in
the file, so <code>hornNotes</code> is defined afterwards.  The command
<code>\transpose f&nbsp;c'</code> indicates that the argument, being
<code>\hornNotes</code>, should be transposed by a fifth upwards.  Sounding
<code>f</code> is denoted by notated <code>c'</code>, which corresponds with the
tuning of a normal French Horn in&nbsp;F.  The transposition can be seen
in the following output
</p>
<blockquote><p>
 <a href="a4/lily-a1c78edd.ly">
  <img align="middle"
       border="0"
       src="a4/lily-a1c78edd.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>In ensemble pieces, one of the voices often does not play for many
measures.  This is denoted by a special rest, the multi-measure
rest.  It is entered with a capital <code>R</code> followed by a duration
(<code>1</code>&nbsp;for a whole note, <code>2</code>&nbsp;for a half note,
etc.).  By multiplying the
duration, longer rests can be constructed.  For example, this rest
takes 3&nbsp;measures in 2/4 time
</p>
<blockquote><pre class="example">R2*3
</pre></blockquote>

<p>When printing the part, multi-rests
must be condensed.  This is done by setting a run-time variable
</p>
<blockquote><pre class="example">\set Score.skipBars = ##t
</pre></blockquote>

<p>This command sets the property <code>skipBars</code> in the
<code>Score</code> context to true (<code>##t</code>).  Prepending the rest and
this option to the music above, leads to the following result
</p>
<blockquote><p>
 <a href="9c/lily-fc6b4ee7.ly">
  <img align="middle"
       border="0"
       src="9c/lily-fc6b4ee7.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<p>The score is made by combining all of the music together.  Assuming
that the other voice is in <code>bassoonNotes</code> in the file
&lsquo;<tt>bassoon-music.ly</tt>&rsquo;, a score is made with
</p>
<blockquote><pre class="example">\include &quot;bassoon-music.ly&quot;
\include &quot;horn-music.ly&quot;

&lt;&lt;
  \new Staff \hornNotes
  \new Staff \bassoonNotes
&gt;&gt;
</pre></blockquote>

<p>leading to
</p>
<blockquote><p>
 <a href="9a/lily-f96a7fea.ly">
  <img align="middle"
       border="0"
       src="9a/lily-f96a7fea.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>







<hr size="6">
<a name="Templates"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Working-on-LilyPond-projects" title="Beginning of this chapter or previous chapter"> &lt;&lt; Working on LilyPond projects&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Scores-and-parts" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Scores and parts&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Top" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Single-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Single staff &gt; </a>]</td></tr></table>
<a name="Templates"></a>
<h1 class="appendix">A. Templates</h1>

<p>This section of the manual contains templates with the LilyPond score
already set up for you.  Just add notes, run LilyPond, and enjoy
beautiful printed scores!
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Single-staff" accesskey="1">A.1 Single staff</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Piano-templates" accesskey="2">A.2 Piano templates</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#String-quartet" accesskey="3">A.3 String quartet</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Vocal-ensembles" accesskey="4">A.4 Vocal ensembles</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Ancient-notation-templates" accesskey="5">A.5 Ancient notation templates</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#Jazz-combo" accesskey="6">A.6 Jazz combo</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
<tr><td align="left" valign="top"><a href="#lilypond_002dbook-templates" accesskey="7">A.7 lilypond-book templates</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>


<hr size="6">
<a name="Single-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Templates" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Single-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp; &gt; </a>]</td></tr></table>
<a name="Single-staff"></a>
<h2 class="appendixsec">A.1 Single staff</h2>

<hr size="6">
<a name="Single-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Single-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Single staff&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Single-staff" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Single staff&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Single-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp; &gt; </a>]</td></tr></table>
<h3 class="appendixsubsec">A.1.1 Notes only</h3>


<p>This very simple template gives you a staff with notes, suitable for a
solo instrument or a melodic fragment. Cut and paste this into a file,
add notes, and you&rsquo;re finished! 
</p>

<blockquote><blockquote><pre class="example">\version &quot;2.12.3&quot;
</pre></blockquote>
<pre class="verbatim">melody = \relative c' {
  \clef treble
  \key c \major
  \time 4/4
  
  a4 b c d
}

\score {
  \new Staff \melody
  \layout { }
  \midi { }
}

</pre><p>
 <a href="df/lily-a91451a2.ly">
  <img align="middle"
       border="0"
       src="df/lily-a91451a2.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<hr size="6">
<a name="Single-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Single-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; &nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Single-staff" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Single staff&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Single-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp; &gt; </a>]</td></tr></table>
<h3 class="appendixsubsec">A.1.2 Notes and lyrics</h3>


<p>This small template demonstrates a simple melody with lyrics. Cut and
paste, add notes, then words for the lyrics. This example turns off
automatic beaming, which is common for vocal parts. To use automatic
beaming, change or comment out the relevant line.
</p>

<blockquote><blockquote><pre class="example">\version &quot;2.12.3&quot;
</pre></blockquote>
<pre class="verbatim">melody = \relative c' {
  \clef treble
  \key c \major
  \time 4/4
  
  a4 b c d
}

text = \lyricmode {
  Aaa Bee Cee Dee
}

\score{
  &lt;&lt;
    \new Voice = &quot;one&quot; {
      \autoBeamOff
      \melody
    }
    \new Lyrics \lyricsto &quot;one&quot; \text
  &gt;&gt;
  \layout { }
  \midi { }
}

</pre><p>
 <a href="9b/lily-9133e06e.ly">
  <img align="middle"
       border="0"
       src="9b/lily-9133e06e.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<hr size="6">
<a name="Single-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Single-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; &nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Single-staff" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Single staff&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Single-staff" title="Next section in reading order" accesskey="n" rel="next">&nbsp; &gt; </a>]</td></tr></table>
<h3 class="appendixsubsec">A.1.3 Notes and chords</h3>


<p>Want to prepare a lead sheet with a melody and chords? Look no further!
</p>


<blockquote><pre class="verbatim">melody = \relative c' {
  \clef treble
  \key c \major
  \time 4/4
  
  f4 e8[ c] d4 g
  a2 ~ a
}

harmonies = \chordmode {
  c4:m f:min7 g:maj c:aug
  d2:dim b:sus
}

\score {
  &lt;&lt;
    \new ChordNames {
      \set chordChanges = ##t
      \harmonies
    }
    \new Staff \melody
  &gt;&gt;  
  \layout{ }
  \midi { }
}

</pre><p>
 <a href="de/lily-fb00b4b8.ly">
  <img align="middle"
       border="0"
       src="de/lily-fb00b4b8.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<hr size="6">
<a name="Single-staff"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Single-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; &nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Single-staff" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Single staff&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Piano-templates" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Piano templates &gt; </a>]</td></tr></table>
<h3 class="appendixsubsec">A.1.4 Notes, lyrics, and chords.</h3>


<p>This template allows the preparation of a song with melody, words, and
chords. 
</p>

<blockquote><pre class="verbatim">melody = \relative c' {
  \clef treble
  \key c \major
  \time 4/4
  
  a4 b c d
}

text = \lyricmode {
  Aaa Bee Cee Dee
}

harmonies = \chordmode {
  a2 c
}

\score {
  &lt;&lt;
    \new ChordNames {
      \set chordChanges = ##t
      \harmonies
    }
    \new Voice = &quot;one&quot; { \autoBeamOff \melody }
    \new Lyrics \lyricsto &quot;one&quot; \text
  &gt;&gt;
  \layout { }
  \midi { }
}

</pre><p>
 <a href="b3/lily-3768091e.ly">
  <img align="middle"
       border="0"
       src="b3/lily-3768091e.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<hr size="6">
<a name="Piano-templates"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Single-staff" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; &nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Piano-templates" title="Next section in reading order" accesskey="n" rel="next">&nbsp; &gt; </a>]</td></tr></table>
<a name="Piano-templates"></a>
<h2 class="appendixsec">A.2 Piano templates</h2>

<hr size="6">
<a name="Piano-templates"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Piano-templates" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Piano templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Piano-templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Piano templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Piano-templates" title="Next section in reading order" accesskey="n" rel="next">&nbsp; &gt; </a>]</td></tr></table>
<h3 class="appendixsubsec">A.2.1 Solo piano</h3>


<p>Here is a simple piano staff with some notes.
</p>

<blockquote><pre class="verbatim">upper = \relative c'' {
  \clef treble
  \key c \major
  \time 4/4
  
  a4 b c d  
}

lower = \relative c {
  \clef bass
  \key c \major
  \time 4/4
  
  a2 c  
}

\score {
  \new PianoStaff &lt;&lt;
    \set PianoStaff.instrumentName = #&quot;Piano  &quot;
    \new Staff = &quot;upper&quot; \upper
    \new Staff = &quot;lower&quot; \lower
  &gt;&gt;
  \layout { }
  \midi { }
}

</pre><p>
 <a href="1a/lily-f29c847f.ly">
  <img align="middle"
       border="0"
       src="1a/lily-f29c847f.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<hr size="6">
<a name="Piano-templates"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Piano-templates" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; &nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Piano-templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Piano templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Piano-templates" title="Next section in reading order" accesskey="n" rel="next">&nbsp; &gt; </a>]</td></tr></table>
<h3 class="appendixsubsec">A.2.2 Piano and melody with lyrics</h3>


<p>Here is a typical song format: one staff with the melody and lyrics,
with piano accompaniment underneath. 
</p>

<blockquote><pre class="verbatim">melody = \relative c'' {
  \clef treble
  \key c \major
  \time 4/4
  
  a b c d  
}

text = \lyricmode {
  Aaa Bee Cee Dee
}

upper = \relative c'' {
  \clef treble
  \key c \major
  \time 4/4
  
  a4 b c d  
}

lower = \relative c {
  \clef bass
  \key c \major
  \time 4/4
  
  a2 c  
}

\score {
  &lt;&lt;
    \new Voice = &quot;mel&quot; { \autoBeamOff \melody }
    \new Lyrics \lyricsto mel \text    
    \new PianoStaff &lt;&lt;
      \new Staff = &quot;upper&quot; \upper
      \new Staff = &quot;lower&quot; \lower
    &gt;&gt;
  &gt;&gt;
  \layout {
    \context { \RemoveEmptyStaffContext }
  }
  \midi { }
}

</pre><p>
 <a href="69/lily-5a39e90c.ly">
  <img align="middle"
       border="0"
       src="69/lily-5a39e90c.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<hr size="6">
<a name="Piano-templates"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Piano-templates" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; &nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Piano-templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Piano templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Piano-templates" title="Next section in reading order" accesskey="n" rel="next">&nbsp; &gt; </a>]</td></tr></table>
<h3 class="appendixsubsec">A.2.3 Piano centered lyrics</h3>


<p>Instead of having a full staff for the melody and lyrics, lyrics can be
centered between the staves of a piano staff.
</p>

<blockquote><pre class="verbatim">upper = \relative c'' {
  \clef treble
  \key c \major
  \time 4/4
  
  a4 b c d  
}

lower = \relative c {
  \clef bass
  \key c \major
  \time 4/4
  
  a2 c  
}

text = \lyricmode {
  Aaa Bee Cee Dee
}

\score {
  \new GrandStaff &lt;&lt;
    \new Staff = upper { \new Voice = &quot;singer&quot; \upper }
    \new Lyrics \lyricsto &quot;singer&quot; \text
    \new Staff = lower { \lower }
  &gt;&gt;
  \layout {
    \context {
      \GrandStaff
      \accepts &quot;Lyrics&quot;
    }
    \context {
      \Lyrics
      \consists &quot;Bar_engraver&quot;
    }
  }
  \midi { }
}

</pre><p>
 <a href="31/lily-154a8f2c.ly">
  <img align="middle"
       border="0"
       src="31/lily-154a8f2c.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<hr size="6">
<a name="Piano-templates"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Piano-templates" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; &nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Piano-templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Piano templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#String-quartet" title="Next section in reading order" accesskey="n" rel="next">&nbsp;String quartet &gt; </a>]</td></tr></table>
<h3 class="appendixsubsec">A.2.4 Piano centered dynamics</h3>


<p>Many piano scores have the dynamics centered between the two staves.
This requires a bit of tweaking to implement, but since the template is
right here, you don&rsquo;t have to do the tweaking yourself.
</p>

<blockquote><pre class="verbatim">global = {
  \key c \major
  \time 4/4
}

upper = \relative c'' {
  \clef treble
  a4 b c d
}

lower = \relative c {
  \clef bass
  a2 c
}

dynamics = {
  s2\fff\&gt; s4 s\!\pp
}

pedal = {
  s2\sustainOn s\sustainOff
}

\score {
  \new PianoStaff = &quot;PianoStaff_pf&quot; &lt;&lt;
    \new Staff = &quot;Staff_pfUpper&quot; &lt;&lt; \global \upper &gt;&gt;
    \new Dynamics = &quot;Dynamics_pf&quot; \dynamics
    \new Staff = &quot;Staff_pfLower&quot; &lt;&lt; \global \lower &gt;&gt;
    \new Dynamics = &quot;pedal&quot; \pedal
  &gt;&gt;

  \layout {
    % define Dynamics context
    \context {
      \type &quot;Engraver_group&quot;
      \name Dynamics
      \alias Voice
      \consists &quot;Output_property_engraver&quot;
      \consists &quot;Piano_pedal_engraver&quot;
      \consists &quot;Script_engraver&quot;
      \consists &quot;New_dynamic_engraver&quot;
      \consists &quot;Dynamic_align_engraver&quot;
      \consists &quot;Text_engraver&quot;
      \consists &quot;Skip_event_swallow_translator&quot;
      \consists &quot;Axis_group_engraver&quot;

      pedalSustainStrings = #'(&quot;Ped.&quot; &quot;*Ped.&quot; &quot;*&quot;)
      pedalUnaCordaStrings = #'(&quot;una corda&quot; &quot;&quot; &quot;tre corde&quot;)
      \override DynamicLineSpanner #'Y-offset = #0
      \override TextScript #'font-size = #2
      \override TextScript #'font-shape = #'italic
      \override VerticalAxisGroup #'minimum-Y-extent = #'(-1 . 1)
    }
    % modify PianoStaff context to accept Dynamics context
    \context {
      \PianoStaff
      \accepts Dynamics
    }
  }
}

\score {
  \new PianoStaff = &quot;PianoStaff_pf&quot; &lt;&lt;
    \new Staff = &quot;Staff_pfUpper&quot; &lt;&lt; \global \upper \dynamics \pedal &gt;&gt;
    \new Staff = &quot;Staff_pfLower&quot; &lt;&lt; \global \lower \dynamics \pedal &gt;&gt;
  &gt;&gt;
  \midi { }
}
</pre><p>
 <a href="65/lily-465c3030.ly">
  <img align="middle"
       border="0"
       src="65/lily-465c3030.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<hr size="6">
<a name="String-quartet"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Piano-templates" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; &nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#String-quartet" title="Next section in reading order" accesskey="n" rel="next">&nbsp; &gt; </a>]</td></tr></table>
<a name="String-quartet"></a>
<h2 class="appendixsec">A.3 String quartet</h2>

<hr size="6">
<a name="String-quartet"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#String-quartet" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; String quartet&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#String-quartet" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;String quartet&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#String-quartet" title="Next section in reading order" accesskey="n" rel="next">&nbsp; &gt; </a>]</td></tr></table>
<h3 class="appendixsubsec">A.3.1 String quartet</h3>


<p>This template demonstrates a simple string quartet. It also uses a
<code>\global</code> section for time and key signatures
</p>

<blockquote><pre class="verbatim">global= {
  \time 4/4
  \key c \major
}

violinOne = \new Voice \relative c'' {
  \set Staff.instrumentName = #&quot;Violin 1 &quot;
  
  c2 d
  e1
  
  \bar &quot;|.&quot;
}
 
violinTwo = \new Voice \relative c'' {
  \set Staff.instrumentName = #&quot;Violin 2 &quot;
  
  g2 f
  e1
  
  \bar &quot;|.&quot;
}

viola = \new Voice \relative c' {
  \set Staff.instrumentName = #&quot;Viola &quot;  
  \clef alto
  
  e2 d
  c1
  
  \bar &quot;|.&quot;
}

cello = \new Voice \relative c' {
  \set Staff.instrumentName = #&quot;Cello &quot;
  \clef bass
  
  c2 b
  a1
  
  \bar &quot;|.&quot;
}

\score {
  \new StaffGroup &lt;&lt;
    \new Staff &lt;&lt; \global \violinOne &gt;&gt;
    \new Staff &lt;&lt; \global \violinTwo &gt;&gt;
    \new Staff &lt;&lt; \global \viola &gt;&gt;
    \new Staff &lt;&lt; \global \cello &gt;&gt;
  &gt;&gt;
  \layout { }
  \midi { }
}

</pre><p>
 <a href="66/lily-bbaab637.ly">
  <img align="middle"
       border="0"
       src="66/lily-bbaab637.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<hr size="6">
<a name="String-quartet"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#String-quartet" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; &nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#String-quartet" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;String quartet&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Vocal-ensembles" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Vocal ensembles &gt; </a>]</td></tr></table>
<h3 class="appendixsubsec">A.3.2 String quartet parts</h3>


<p>The &quot;String quartet template&quot; snippet produces a nice string quartet,
but what if you needed to print parts? This new template demonstrates
how to use the <code>\tag</code> feature to easily split a piece into
individual parts.
</p>
<p>You need to split this template into separate files; the filenames are
contained in comments at the beginning of each file. <code>piece.ly</code>
contains all the music definitions. The other files – <code>score.ly</code>,
<code>vn1.ly</code>, <code>vn2.ly</code>, <code>vla.ly</code>, and <code>vlc.ly</code> –
produce the appropriate part.
</p>

<p>Do not forget to remove specified comments when using separate files! 
</p>

<blockquote><pre class="verbatim">%%%%% piece.ly
%%%%% (This is the global definitions file)

global= {
  \time 4/4
  \key c \major
}

Violinone = \new Voice { \relative c''{
  \set Staff.instrumentName = #&quot;Violin 1 &quot;

  c2 d e1

\bar &quot;|.&quot; }}   %*********************************
Violintwo = \new Voice { \relative c''{
  \set Staff.instrumentName = #&quot;Violin 2 &quot;

  g2 f e1

\bar &quot;|.&quot; }}   %*********************************
Viola = \new Voice { \relative c' {
  \set Staff.instrumentName = #&quot;Viola &quot;
  \clef alto

  e2 d c1

\bar &quot;|.&quot; }}   %*********************************
Cello = \new Voice { \relative c' {
  \set Staff.instrumentName = #&quot;Cello &quot;
  \clef bass

  c2 b a1

\bar &quot;|.&quot;}}   %**********************************

music = {
  &lt;&lt;
    \tag #'score \tag #'vn1 \new Staff { &lt;&lt; \global \Violinone &gt;&gt; }
    \tag #'score \tag #'vn2 \new Staff { &lt;&lt; \global \Violintwo&gt;&gt; }
    \tag #'score \tag #'vla \new Staff { &lt;&lt; \global \Viola&gt;&gt; }
    \tag #'score \tag #'vlc \new Staff { &lt;&lt; \global \Cello&gt;&gt; }
  &gt;&gt;
}

%%% These are the other files you need to save on your computer

%%%%% score.ly
%%%%% (This is the main file)


%\include &quot;piece.ly&quot;             %%% uncomment this line when using a separate file
#(set-global-staff-size 14)
\score {
  \new StaffGroup \keepWithTag #'score \music
  \layout { }
  \midi { }
}


%{ Uncomment this block when using separate files

%%%%% vn1.ly
%%%%% (This is the Violin 1 part file)

\include &quot;piece.ly&quot;
\score {
  \keepWithTag #'vn1 \music
  \layout { }
}


%%%%% vn2.ly
%%%%% (This is the Violin 2 part file)

\include &quot;piece.ly&quot;
\score {
  \keepWithTag #'vn2 \music
  \layout { }
}


%%%%% vla.ly
%%%%% (This is the Viola part file)

\include &quot;piece.ly&quot;
\score {
  \keepWithTag #'vla \music
  \layout { }
}


%%%%% vlc.ly
%%%%% (This is the Cello part file)

\include &quot;piece.ly&quot;
\score {
  \keepWithTag #'vlc \music
  \layout { }
}

%}

</pre><p>
 <a href="5e/lily-a1097351.ly">
  <img align="middle"
       border="0"
       src="5e/lily-a1097351.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<hr size="6">
<a name="Vocal-ensembles"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#String-quartet" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; &nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Vocal-ensembles" title="Next section in reading order" accesskey="n" rel="next">&nbsp; &gt; </a>]</td></tr></table>
<a name="Vocal-ensembles"></a>
<h2 class="appendixsec">A.4 Vocal ensembles</h2>

<hr size="6">
<a name="Vocal-ensembles"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Vocal-ensembles" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Vocal ensembles&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Vocal-ensembles" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal ensembles&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Vocal-ensembles" title="Next section in reading order" accesskey="n" rel="next">&nbsp; &gt; </a>]</td></tr></table>
<h3 class="appendixsubsec">A.4.1 SATB vocal score</h3>


<p>Here is a standard four-part SATB vocal score. With larger ensembles,
it is often useful to include a section which is included in all parts.
For example, the time signature and key signature are almost always the
same for all parts. Like in the &quot;Hymn&quot; template, the four voices are
regrouped on only two staves.
</p>

<blockquote><pre class="verbatim">global = {
  \key c \major
  \time 4/4
}

sopMusic = \relative c'' {
  c4 c c8[( b)] c4
}
sopWords = \lyricmode {
  hi hi hi hi
}

altoMusic = \relative c' {
  e4 f d e
}
altoWords = \lyricmode {
  ha ha ha ha
}

tenorMusic = \relative c' {
  g4 a f g
}
tenorWords = \lyricmode {
  hu hu hu hu
}

bassMusic = \relative c {
  c4 c g c
}
bassWords = \lyricmode {
  ho ho ho ho
}

\score {
  \new ChoirStaff &lt;&lt;
    \new Lyrics = sopranos { s1 }
    \new Staff = women &lt;&lt;
      \new Voice = &quot;sopranos&quot; {
        \voiceOne
        &lt;&lt; \global \sopMusic &gt;&gt;
      }
      \new Voice = &quot;altos&quot; {
        \voiceTwo
        &lt;&lt; \global \altoMusic &gt;&gt;
      }
    &gt;&gt;
    \new Lyrics = &quot;altos&quot; { s1 }
    \new Lyrics = &quot;tenors&quot; { s1 }
    \new Staff = men &lt;&lt;
      \clef bass
      \new Voice = &quot;tenors&quot; {
        \voiceOne
        &lt;&lt; \global \tenorMusic &gt;&gt;
      }
      \new Voice = &quot;basses&quot; {
        \voiceTwo &lt;&lt; \global \bassMusic &gt;&gt;
      }
    &gt;&gt;
    \new Lyrics = basses { s1 }    
    \context Lyrics = sopranos \lyricsto sopranos \sopWords
    \context Lyrics = altos \lyricsto altos \altoWords
    \context Lyrics = tenors \lyricsto tenors \tenorWords
    \context Lyrics = basses \lyricsto basses \bassWords
  &gt;&gt;  
  \layout {
    \context {
      % a little smaller so lyrics
      % can be closer to the staff
      \Staff
      \override VerticalAxisGroup #'minimum-Y-extent = #'(-3 . 3)
    }
  }
}

</pre><p>
 <a href="a5/lily-9a4ee660.ly">
  <img align="middle"
       border="0"
       src="a5/lily-9a4ee660.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<hr size="6">
<a name="Vocal-ensembles"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Vocal-ensembles" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; &nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Vocal-ensembles" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal ensembles&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Vocal-ensembles" title="Next section in reading order" accesskey="n" rel="next">&nbsp; &gt; </a>]</td></tr></table>
<h3 class="appendixsubsec">A.4.2 SATB vocal score and automatic piano reduction</h3>


<p>This template adds an automatic piano reduction to the standard SATB
vocal score demonstrated in &quot;Vocal ensemble template&quot;. This
demonstrates one of the strengths of LilyPond – you can use a music
definition more than once. If any changes are made to the vocal notes
(say, <code>tenorMusic</code>), then the changes will also apply to the piano
reduction.
</p>

<blockquote><pre class="verbatim">global = {
  \key c \major
  \time 4/4
}

sopMusic = \relative c'' {
  c4 c c8[( b)] c4
}
sopWords = \lyricmode {
  hi hi hi hi
}

altoMusic = \relative c' {
  e4 f d e
}
altoWords =\lyricmode {
  ha ha ha ha
}

tenorMusic = \relative c' {
  g4 a f g
}
tenorWords = \lyricmode {
  hu hu hu hu
}

bassMusic = \relative c {
  c4 c g c
}
bassWords = \lyricmode {
  ho ho ho ho
}

\score {
  &lt;&lt;
    \new ChoirStaff &lt;&lt;
      \new Lyrics = sopranos { s1 }
      \new Staff = women &lt;&lt;
        \new Voice = sopranos { \voiceOne &lt;&lt; \global \sopMusic &gt;&gt; }
        \new Voice = altos { \voiceTwo &lt;&lt; \global \altoMusic &gt;&gt; }
      &gt;&gt;
      \new Lyrics = altos { s1 }
      \new Lyrics = tenors { s1 }
      \new Staff = men &lt;&lt;
        \clef bass
        \new Voice = tenors { \voiceOne &lt;&lt;\global \tenorMusic &gt;&gt; }
        \new Voice = basses { \voiceTwo &lt;&lt;\global \bassMusic &gt;&gt; }
      &gt;&gt;
      \new Lyrics = basses { s1 }
      \context Lyrics = sopranos \lyricsto sopranos \sopWords
      \context Lyrics = altos \lyricsto altos \altoWords
      \context Lyrics = tenors \lyricsto tenors \tenorWords
      \context Lyrics = basses \lyricsto basses \bassWords
    &gt;&gt;
    \new PianoStaff &lt;&lt;
      \new Staff &lt;&lt;
        \set Staff.printPartCombineTexts = ##f
        \partcombine
        &lt;&lt; \global \sopMusic &gt;&gt;
        &lt;&lt; \global \altoMusic &gt;&gt;
      &gt;&gt;
      \new Staff &lt;&lt;
        \clef bass
        \set Staff.printPartCombineTexts = ##f
        \partcombine
        &lt;&lt; \global \tenorMusic &gt;&gt;
        &lt;&lt; \global \bassMusic &gt;&gt;
      &gt;&gt;
    &gt;&gt;
  &gt;&gt;
  \layout {
    \context {
      % a little smaller so lyrics
      % can be closer to the staff
      \Staff
      \override VerticalAxisGroup #'minimum-Y-extent = #'(-3 . 3)
    }
  }
}

</pre><p>
 <a href="65/lily-321be979.ly">
  <img align="middle"
       border="0"
       src="65/lily-321be979.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<hr size="6">
<a name="Vocal-ensembles"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Vocal-ensembles" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; &nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Vocal-ensembles" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Vocal ensembles&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Ancient-notation-templates" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Ancient notation templates &gt; </a>]</td></tr></table>
<h3 class="appendixsubsec">A.4.3 SATB with aligned contexts</h3>


<p>This template is basically the same as the simple &quot;Vocal ensemble&quot;
template, with the exception that here all the lyrics lines are placed
using <code>alignAboveContext</code> and <code>alignBelowContext</code>.
</p>

<blockquote><pre class="verbatim">global = {
  \key c \major
  \time 4/4
}

sopMusic = \relative c'' {
  c4 c c8[( b)] c4
}
sopWords = \lyricmode {
  hi hi hi hi
}

altoMusic = \relative c' {
  e4 f d e
}
altoWords = \lyricmode {
  ha ha ha ha
}

tenorMusic = \relative c' {
  g4 a f g
}
tenorWords = \lyricmode {
  hu hu hu hu
}

bassMusic = \relative c {
  c4 c g c
}
bassWords = \lyricmode {
  ho ho ho ho
}

\score {
  \new ChoirStaff &lt;&lt;
    \new Staff = women &lt;&lt;
      \new Voice = &quot;sopranos&quot; { \voiceOne &lt;&lt; \global \sopMusic &gt;&gt; }
      \new Voice = &quot;altos&quot; { \voiceTwo &lt;&lt; \global \altoMusic &gt;&gt; }
    &gt;&gt;
    \new Lyrics \with { alignAboveContext = women } \lyricsto sopranos \sopWords
    \new Lyrics \with { alignBelowContext = women } \lyricsto altos \altoWords
    % we could remove the line about this with the line below, since we want
    % the alto lyrics to be below the alto Voice anyway.
    % \new Lyrics \lyricsto altos \altoWords
    
    \new Staff = men &lt;&lt;
      \clef bass
      \new Voice = &quot;tenors&quot; { \voiceOne &lt;&lt; \global \tenorMusic &gt;&gt; }
      \new Voice = &quot;basses&quot; { \voiceTwo &lt;&lt; \global \bassMusic &gt;&gt; }
    &gt;&gt;
    \new Lyrics \with { alignAboveContext = men } \lyricsto tenors \tenorWords
    \new Lyrics \with { alignBelowContext = men } \lyricsto basses \bassWords
    % again, we could replace the line above this with the line below.
    % \new Lyrics \lyricsto basses \bassWords
  &gt;&gt;
  \layout {
    \context {
      % a little smaller so lyrics
      % can be closer to the staff
      \Staff
      \override VerticalAxisGroup #'minimum-Y-extent = #'(-3 . 3)
    }
  }
}

</pre><p>
 <a href="1a/lily-78df06e0.ly">
  <img align="middle"
       border="0"
       src="1a/lily-78df06e0.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>




<hr size="6">
<a name="Ancient-notation-templates"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Vocal-ensembles" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; &nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Ancient-notation-templates" title="Next section in reading order" accesskey="n" rel="next">&nbsp; &gt; </a>]</td></tr></table>
<a name="Ancient-notation-templates"></a>
<h2 class="appendixsec">A.5 Ancient notation templates</h2>

<hr size="6">
<a name="Ancient-notation-templates"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Ancient-notation-templates" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Ancient notation templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Ancient-notation-templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Ancient notation templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Ancient-notation-templates" title="Next section in reading order" accesskey="n" rel="next">&nbsp; &gt; </a>]</td></tr></table>
<h3 class="appendixsubsec">A.5.1 Transcription of mensural music</h3>


<p>When transcribing mensural music, an incipit at the beginning of the
piece is useful to indicate the original key and tempo. While today
musicians are used to bar lines in order to faster recognize rhythmic
patterns, bar lines were not yet invented during the period of mensural
music; in fact, the meter often changed after every few notes. As a
compromise, bar lines are often printed between the staves rather than
on the staves. 
</p>

<blockquote><pre class="verbatim">global = {
  \set Score.skipBars = ##t

  % incipit
  \once \override Score.SystemStartBracket #'transparent = ##t
  \override Score.SpacingSpanner #'spacing-increment = #1.0 % tight spacing
  \key f \major
  \time 2/2
  \once \override Staff.TimeSignature #'style = #'neomensural
  \override Voice.NoteHead #'style = #'neomensural
  \override Voice.Rest #'style = #'neomensural
  \set Staff.printKeyCancellation = ##f
  \cadenzaOn % turn off bar lines
  \skip 1*10
  \once \override Staff.BarLine #'transparent = ##f
  \bar &quot;||&quot;
  \skip 1*1 % need this extra \skip such that clef change comes
            % after bar line
  \bar &quot;&quot;

  % main
  \revert Score.SpacingSpanner #'spacing-increment % CHECK: no effect?
  \cadenzaOff % turn bar lines on again
  \once \override Staff.Clef #'full-size-change = ##t
  \set Staff.forceClef = ##t
  \key g \major
  \time 4/4
  \override Voice.NoteHead #'style = #'default
  \override Voice.Rest #'style = #'default

  % FIXME: setting printKeyCancellation back to #t must not
  % occur in the first bar after the incipit.  Dto. for forceClef.
  % Therefore, we need an extra \skip.
  \skip 1*1
  \set Staff.printKeyCancellation = ##t
  \set Staff.forceClef = ##f

  \skip 1*7 % the actual music

  % let finis bar go through all staves
  \override Staff.BarLine #'transparent = ##f

  % finis bar
  \bar &quot;|.&quot;
}

discantusNotes = {
  \transpose c' c'' {
    \set Staff.instrumentName = #&quot;Discantus  &quot;

    % incipit
    \clef &quot;neomensural-c1&quot;
    c'1. s2   % two bars
    \skip 1*8 % eight bars
    \skip 1*1 % one bar

    % main
    \clef &quot;treble&quot;
    d'2. d'4 |
    b e' d'2 |
    c'4 e'4.( d'8 c' b |
    a4) b a2 |
    b4.( c'8 d'4) c'4 |
    \once \override NoteHead #'transparent = ##t c'1 |
    b\breve |
  }
}

discantusLyrics = \lyricmode {
  % incipit
  IV-

  % main
  Ju -- bi -- |
  la -- te De -- |
  o, om --
  nis ter -- |
  ra, __ om- |
  &quot;...&quot; |
  -us. |
}

altusNotes = {
  \transpose c' c'' {
    \set Staff.instrumentName = #&quot;Altus  &quot;

    % incipit
    \clef &quot;neomensural-c3&quot;
    r1        % one bar
    f1. s2    % two bars
    \skip 1*7 % seven bars
    \skip 1*1 % one bar

    % main
    \clef &quot;treble&quot;
    r2 g2. e4 fis g | % two bars
    a2 g4 e |
    fis g4.( fis16 e fis4) |
    g1 |
    \once \override NoteHead #'transparent = ##t g1 |
    g\breve |
  }
}

altusLyrics = \lyricmode {
  % incipit
  IV-

  % main
  Ju -- bi -- la -- te | % two bars
  De -- o, om -- |
  nis ter -- ra, |
  &quot;...&quot; |
  -us. |
}

tenorNotes = {
  \transpose c' c' {
    \set Staff.instrumentName = #&quot;Tenor  &quot;

    % incipit
    \clef &quot;neomensural-c4&quot;
    r\longa   % four bars
    r\breve   % two bars
    r1        % one bar
    c'1. s2   % two bars
    \skip 1*1 % one bar
    \skip 1*1 % one bar

    % main
    \clef &quot;treble_8&quot;
    R1 |
    R1 |
    R1 |
    r2 d'2. d'4 b e' | % two bars
    \once \override NoteHead #'transparent = ##t e'1 |
    d'\breve |
  }
}

tenorLyrics = \lyricmode {
  % incipit
  IV-

  % main
  Ju -- bi -- la -- te | % two bars
  &quot;...&quot; |
  -us. |
}

bassusNotes = {
  \transpose c' c' {
    \set Staff.instrumentName = #&quot;Bassus  &quot;

    % incipit
    \clef &quot;bass&quot;
    r\maxima  % eight bars
    f1. s2    % two bars
    \skip 1*1 % one bar

    % main
    \clef &quot;bass&quot;
    R1 |
    R1 |
    R1 |
    R1 |
    g2. e4 |
    \once \override NoteHead #'transparent = ##t e1 |
    g\breve |
  }
}

bassusLyrics = \lyricmode {
  % incipit
  IV-

  % main
  Ju -- bi- |
  &quot;...&quot; |
  -us. |
}

\score {
  \new StaffGroup = choirStaff &lt;&lt;
    \new Voice =
      &quot;discantusNotes&quot; &lt;&lt; \global \discantusNotes &gt;&gt;
    \new Lyrics =
      &quot;discantusLyrics&quot; \lyricsto discantusNotes { \discantusLyrics }
    \new Voice =
      &quot;altusNotes&quot; &lt;&lt; \global \altusNotes &gt;&gt;
    \new Lyrics =
      &quot;altusLyrics&quot; \lyricsto altusNotes { \altusLyrics }
    \new Voice =
      &quot;tenorNotes&quot; &lt;&lt; \global \tenorNotes &gt;&gt;
    \new Lyrics =
      &quot;tenorLyrics&quot; \lyricsto tenorNotes { \tenorLyrics }
    \new Voice =
      &quot;bassusNotes&quot; &lt;&lt; \global \bassusNotes &gt;&gt;
    \new Lyrics =
      &quot;bassusLyrics&quot; \lyricsto bassusNotes { \bassusLyrics }
  &gt;&gt;
  \layout {
    \context {
      \Score

      % no bars in staves
      \override BarLine #'transparent = ##t

      % incipit should not start with a start delimiter
      \remove &quot;System_start_delimiter_engraver&quot;
    }
    \context {
      \Voice

      % no slurs
      \override Slur #'transparent = ##t

      % Comment in the below &quot;\remove&quot; command to allow line
      % breaking also at those barlines where a note overlaps
      % into the next bar.  The command is commented out in this
      % short example score, but especially for large scores, you
      % will typically yield better line breaking and thus improve
      % overall spacing if you comment in the following command.
      %\remove &quot;Forbid_line_break_engraver&quot;
    }
  }
}




</pre><p>
 <a href="59/lily-cd719e46.ly">
  <img align="middle"
       border="0"
       src="59/lily-cd719e46.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<hr size="6">
<a name="Ancient-notation-templates"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Ancient-notation-templates" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; &nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Ancient-notation-templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Ancient notation templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Jazz-combo" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Jazz combo &gt; </a>]</td></tr></table>
<h3 class="appendixsubsec">A.5.2 Gregorian transcription template</h3>


<p>This example demonstrates how to do modern transcription of Gregorian
music. Gregorian music has no measure, no stems; it uses only half and
quarter note heads, and special marks, indicating rests of different
length.
</p>

<blockquote><pre class="verbatim">\include &quot;gregorian.ly&quot;

chant = \relative c' {
  \set Score.timing = ##f
  f4 a2 \divisioMinima
  g4 b a2 f2 \divisioMaior
  g4( f) f( g) a2 \finalis
}

verba = \lyricmode {
  Lo -- rem ip -- sum do -- lor sit a -- met
}

\score {
  \new Staff &lt;&lt;
    \new Voice = &quot;melody&quot; \chant
    \new Lyrics = &quot;one&quot; \lyricsto melody \verba
  &gt;&gt;
  \layout {
    \context {
      \Staff
      \remove &quot;Time_signature_engraver&quot;
      \remove &quot;Bar_engraver&quot;
      \override Stem #'transparent = ##t
    }
    \context {
      \Voice
      \override Stem #'length = #0
    }
    \context {
      \Score
      barAlways = ##t
    }
  }
}

</pre><p>
 <a href="f8/lily-5cd14cb4.ly">
  <img align="middle"
       border="0"
       src="f8/lily-5cd14cb4.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<hr size="6">
<a name="Jazz-combo"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Ancient-notation-templates" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; &nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#lilypond_002dbook-templates" title="Next section in reading order" accesskey="n" rel="next">&nbsp;lilypond-book templates &gt; </a>]</td></tr></table>
<a name="Jazz-combo"></a>
<h2 class="appendixsec">A.6 Jazz combo</h2>


<p>This is quite an advanced template, for a jazz ensemble. Note that all
instruments are notated in <code>\key c \major</code>. This refers to the
key in concert pitch; the key will be automatically transposed if the
music is within a <code>\transpose</code> section.
</p>

<blockquote><pre class="verbatim">\header {
  title = &quot;Song&quot;
  subtitle = &quot;(tune)&quot;
  composer = &quot;Me&quot;
  meter = &quot;moderato&quot;
  piece = &quot;Swing&quot;
  tagline = \markup {
    \column {
      &quot;LilyPond example file by Amelie Zapf,&quot;
      &quot;Berlin 07/07/2003&quot;
    }
  }
}

%#(set-global-staff-size 16)
\include &quot;english.ly&quot;

%%%%%%%%%%%% Some macros %%%%%%%%%%%%%%%%%%%

sl = {
  \override NoteHead #'style = #'slash
  \override Stem #'transparent = ##t
}
nsl = {
  \revert NoteHead #'style
  \revert Stem #'transparent
}
crOn = \override NoteHead #'style = #'cross
crOff = \revert NoteHead #'style

%% insert chord name style stuff here.

jazzChords = { }

%%%%%%%%%%%% Keys'n'thangs %%%%%%%%%%%%%%%%%

global = { \time 4/4 }

Key = { \key c \major }

% ############ Horns ############

% ------ Trumpet ------
trpt = \transpose c d \relative c'' {
  \Key
  c1 | c | c |
}
trpHarmony = \transpose c' d {
  \jazzChords
}
trumpet = {
  \global
  \set Staff.instrumentName = #&quot;Trumpet&quot;
  \clef treble
  &lt;&lt;
    \trpt
  &gt;&gt;
}

% ------ Alto Saxophone ------
alto = \transpose c a \relative c' {
  \Key
  c1 | c | c |
}
altoHarmony = \transpose c' a {
  \jazzChords
}
altoSax = {
  \global
  \set Staff.instrumentName = #&quot;Alto Sax&quot;
  \clef treble
  &lt;&lt;
    \alto
  &gt;&gt;
}

% ------ Baritone Saxophone ------
bari = \transpose c a' \relative c {
  \Key
  c1
  c1
  \sl
  d4^&quot;Solo&quot; d d d
  \nsl
}
bariHarmony = \transpose c' a \chordmode {
  \jazzChords s1 s d2:maj e:m7
}
bariSax = {
  \global
  \set Staff.instrumentName = #&quot;Bari Sax&quot;
  \clef treble
  &lt;&lt;
    \bari
  &gt;&gt;
}

% ------ Trombone ------
tbone = \relative c {
  \Key
  c1 | c | c
}
tboneHarmony = \chordmode {
  \jazzChords
}
trombone = {
  \global
  \set Staff.instrumentName = #&quot;Trombone&quot;
  \clef bass
  &lt;&lt;
    \tbone
  &gt;&gt;
}

% ############ Rhythm Section #############

% ------ Guitar ------
gtr = \relative c'' {
  \Key
  c1
  \sl
  b4 b b b
  \nsl
  c1
}
gtrHarmony = \chordmode {
  \jazzChords
  s1 c2:min7+ d2:maj9
}
guitar = {
  \global
  \set Staff.instrumentName = #&quot;Guitar&quot;
  \clef treble
  &lt;&lt;
    \gtr
  &gt;&gt;
}

%% ------ Piano ------
rhUpper = \relative c'' {
  \voiceOne
  \Key
  c1 | c | c
}
rhLower = \relative c' {
  \voiceTwo
  \Key
  e1 | e | e
}

lhUpper = \relative c' {
  \voiceOne
  \Key
  g1 | g | g
}
lhLower = \relative c {
  \voiceTwo
  \Key
  c1 | c | c
}

PianoRH = {
  \clef treble
  \global
  \set Staff.midiInstrument = #&quot;acoustic grand&quot;
  &lt;&lt;
    \new Voice = &quot;one&quot; \rhUpper
    \new Voice = &quot;two&quot; \rhLower
  &gt;&gt;
}
PianoLH = {
  \clef bass
  \global
  \set Staff.midiInstrument = &quot;acoustic grand&quot;
  &lt;&lt;
    \new Voice = &quot;one&quot; \lhUpper
    \new Voice = &quot;two&quot; \lhLower
  &gt;&gt;
}

piano = {
  &lt;&lt;
    \set PianoStaff.instrumentName = #&quot;Piano&quot;
    \new Staff = &quot;upper&quot; \PianoRH
    \new Staff = &quot;lower&quot; \PianoLH
  &gt;&gt;
}

% ------ Bass Guitar ------
Bass = \relative c {
  \Key
  c1 | c | c
}
bass = {
  \global
  \set Staff.instrumentName = #&quot;Bass&quot;
  \clef bass
  &lt;&lt;
    \Bass
  &gt;&gt;
}

% ------ Drums ------
up = \drummode {
  \voiceOne
  hh4 &lt;hh sn&gt; hh &lt;hh sn&gt;
  hh4 &lt;hh sn&gt; hh &lt;hh sn&gt;
  hh4 &lt;hh sn&gt; hh &lt;hh sn&gt;
}
down = \drummode {
  \voiceTwo
  bd4 s bd s
  bd4 s bd s
  bd4 s bd s
}

drumContents = {
  \global
  &lt;&lt;
    \set DrumStaff.instrumentName = #&quot;Drums&quot;
    \new DrumVoice \up
    \new DrumVoice \down
  &gt;&gt;
}

%%%%%%%%% It All Goes Together Here %%%%%%%%%%%%%%%%%%%%%%

\score {
  &lt;&lt;
    \new StaffGroup = &quot;horns&quot; &lt;&lt;
      \new Staff = &quot;trumpet&quot; \trumpet
      \new Staff = &quot;altosax&quot; \altoSax
      \new ChordNames = &quot;barichords&quot; \bariHarmony
      \new Staff = &quot;barisax&quot; \bariSax
      \new Staff = &quot;trombone&quot; \trombone
    &gt;&gt;
    
    \new StaffGroup = &quot;rhythm&quot; &lt;&lt;
      \new ChordNames = &quot;chords&quot; \gtrHarmony
      \new Staff = &quot;guitar&quot; \guitar
      \new PianoStaff = &quot;piano&quot; \piano
      \new Staff = &quot;bass&quot; \bass
      \new DrumStaff \drumContents
    &gt;&gt;
  &gt;&gt;
  
  \layout {
    \context { \RemoveEmptyStaffContext }
    \context {
      \Score
      \override BarNumber #'padding = #3
      \override RehearsalMark #'padding = #2
      skipBars = ##t
    }
  }
  
  \midi { }
}

</pre><p>
 <a href="fe/lily-2bad65e3.ly">
  <img align="middle"
       border="0"
       src="fe/lily-2bad65e3.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>








<hr size="6">
<a name="lilypond_002dbook-templates"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Jazz-combo" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Jazz combo&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#lilypond_002dbook-templates" title="Next section in reading order" accesskey="n" rel="next">&nbsp; &gt; </a>]</td></tr></table>
<a name="lilypond_002dbook-templates"></a>
<h2 class="appendixsec">A.7 lilypond-book templates</h2>

<p>These templates are for use with <code>lilypond-book</code>.  If you&rsquo;re not familiar
with this program, please refer to <a name="index-LilyPond_002dbook-1"></a>
<a href="lilypond-program-big-page.html#LilyPond_002dbook">LilyPond-book</a>.
</p>
<hr size="6">
<a name="lilypond_002dbook-templates"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#lilypond_002dbook-templates" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; lilypond-book templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#lilypond_002dbook-templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;lilypond-book templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#lilypond_002dbook-templates" title="Next section in reading order" accesskey="n" rel="next">&nbsp; &gt; </a>]</td></tr></table>
<h3 class="appendixsubsec">A.7.1 LaTeX</h3>

<p>You can include LilyPond fragments in a LaTeX document.
</p>
<blockquote><pre class="example">\documentclass[]{article}

\begin{document}

Normal LaTeX text.

\begin{lilypond}
\relative c'' {
a4 b c d
}
\end{lilypond}

More LaTeX text.

\begin{lilypond}
\relative c'' {
d4 c b a
}
\end{lilypond}
\end{document}
</pre></blockquote>

<hr size="6">
<a name="lilypond_002dbook-templates"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#lilypond_002dbook-templates" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; &nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#lilypond_002dbook-templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;lilypond-book templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#lilypond_002dbook-templates" title="Next section in reading order" accesskey="n" rel="next">&nbsp; &gt; </a>]</td></tr></table>
<h3 class="appendixsubsec">A.7.2 Texinfo</h3>

<p>You can include LilyPond fragments in Texinfo; in fact, this entire manual
is written in Texinfo.
</p>
<blockquote><pre class="example">\input texinfo
@node Top

Texinfo text

@lilypond[verbatim,fragment,ragged-right]
a4 b c d
@end lilypond

More Texinfo text

@lilypond[verbatim,fragment,ragged-right]
d4 c b a
@end lilypond

@bye
</pre></blockquote>


<hr size="6">
<a name="lilypond_002dbook-templates"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#Scheme-tutorial" title="Next chapter">&nbsp;Scheme tutorial &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#lilypond_002dbook-templates" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; &nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#lilypond_002dbook-templates" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;lilypond-book templates&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Scheme-tutorial" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Scheme tutorial &gt; </a>]</td></tr></table>
<h3 class="appendixsubsec">A.7.3 xelatex</h3>

<pre class="verbatim">\documentclass{article}
\usepackage{ifxetex}
\ifxetex
%xetex specific stuff
\usepackage{xunicode,fontspec,xltxtra}
\setmainfont[Numbers=OldStyle]{Times New Roman}
\setsansfont{Arial}
\else
%This can be empty if you are not going to use pdftex
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage{mathptmx}%Times
\usepackage{helvet}%Helvetica
\fi
%Here you can insert all packages that pdftex also understands
\usepackage[ngerman,finnish,english]{babel}
\usepackage{graphicx}

\begin{document}
\title{A short document with LilyPond and xelatex}
\maketitle

Normal \textbf{font} commands inside the \emph{text} work,
because they \textsf{are supported by \LaTeX{} and XeteX.}
If you want to use specific commands like \verb+\XeTeX+, you
should include them again in a \verb+\ifxetex+ environment.
You can use this to print the \ifxetex \XeTeX{} command \else
XeTeX command \fi which is not known to normal \LaTeX .

In normal text you can easily use LilyPond commands, like this:

\begin{lilypond}
{a2 b c'8 c' c' c'}
\end{lilypond}

\noindent
and so on.

The fonts of snippets set with LilyPond will have to be set from
inside
of the snippet. For this you should read the AU on how to use
lilypond-book.

\selectlanguage{ngerman}
Auch Umlaute funktionieren ohne die \LaTeX -Befehle, wie auch alle
anderen
seltsamen Zeichen: __ ______, wenn sie von der Schriftart
unterst__tzt werden.
\end{document}
</pre>



<hr size="6">
<a name="Scheme-tutorial"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Templates" title="Beginning of this chapter or previous chapter"> &lt;&lt; Templates&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#GNU-Free-Documentation-License" title="Next chapter">&nbsp;GNU Free Documentation License &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#lilypond_002dbook-templates" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; &nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Top" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#Tweaking-with-Scheme" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Tweaking with Scheme &gt; </a>]</td></tr></table>
<a name="Scheme-tutorial"></a>
<h1 class="appendix">B. Scheme tutorial</h1>

<a name="index-_0023"></a>
<a name="index-_0023-1"></a>
<a name="index-Scheme"></a>
<a name="index-GUILE"></a>
<a name="index-Scheme_002c-in_002dline-code"></a>
<a name="index-accessing-Scheme"></a>
<a name="index-evaluating-Scheme"></a>
<a name="index-LISP"></a>

<p>LilyPond uses the Scheme programming language, both as part of the
input syntax, and as internal mechanism to glue modules of the program
together.  This section is a very brief overview of entering data in
Scheme.  If you want to know more about Scheme, see
<a href="http://www.schemers.org">http://www.schemers.org</a>.
</p>
<p>The most basic thing of a language is data: numbers, character
strings, lists, etc.  Here is a list of data types that are relevant to
LilyPond input.
</p>
<dl compact="compact">
<dt> Booleans</dt>
<dd><p>Boolean values are True or False.  The Scheme for True is <code>#t</code>
and False is <code>#f</code>.
<a name="index-_0023_0023t"></a>
<a name="index-_0023_0023t-1"></a>
<a name="index-_0023_0023f"></a>
<a name="index-_0023_0023f-1"></a>
</p>
</dd>
<dt> Numbers</dt>
<dd><p>Numbers are entered in the standard fashion,
<code>1</code> is the (integer) number one, while <code>-1.5</code> is a
floating point number (a non-integer number).
</p>
</dd>
<dt> Strings</dt>
<dd><p>Strings are enclosed in double quotes,
</p>
<blockquote><pre class="example">&quot;this is a string&quot;
</pre></blockquote>

<p>Strings may span several lines
</p>
<blockquote><pre class="example">&quot;this
is
a string&quot;
</pre></blockquote>

<p>Quotation marks and newlines can also be added with so-called escape
sequences.  The string <code>a said &quot;b&quot;</code> is entered as
</p>
<blockquote><pre class="example">&quot;a said \&quot;b\&quot;&quot;
</pre></blockquote>

<p>Newlines and backslashes are escaped with <code>\n</code> and <code>\\</code>
respectively.
</p></dd>
</dl>


<p>In a music file, snippets of Scheme code are introduced with the hash
mark <code>#</code>.  So, the previous examples translated in LilyPond are
</p>
<blockquote><pre class="example">##t ##f
#1 #-1.5
#&quot;this is a string&quot;
#&quot;this
is
a string&quot;
</pre></blockquote>

<p>For the rest of this section, we will assume that the data is entered
in a music file, so we add <code>#</code>s everywhere.
</p>
<p>Scheme can be used to do calculations.  It uses <em>prefix</em>
syntax.  Adding 1 and&nbsp;2 is written as <code>(+ 1 2)</code> rather than the
traditional <em>1+2</em>.
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">#(+ 1 2)
  &rArr; #3
</pre></td></tr></table>

<p>The arrow &rArr; shows that the result of evaluating <code>(+ 1 2)</code>
is&nbsp;<code>3</code>.  Calculations may be nested; the result of a function may
be used for another calculation.
</p>
<table><tr><td>&nbsp;</td><td><pre class="lisp">#(+ 1 (* 3 4))
  &rArr; #(+ 1 12)
  &rArr; #13
</pre></td></tr></table>

<p>These calculations are examples of evaluations; an expression like
<code>(* 3 4)</code> is replaced by its value <code>12</code>.  A similar thing
happens with variables.  After defining a variable
</p>
<blockquote><pre class="example">twelve = #12
</pre></blockquote>

<p>variables can also be used in expressions, here
</p>
<blockquote><pre class="example">twentyFour = #(* 2 twelve)
</pre></blockquote>

<p>the number 24 is stored in the variable <code>twentyFour</code>.
The same assignment can be done in completely in Scheme as well,
</p>
<blockquote><pre class="example">#(define twentyFour (* 2 twelve))
</pre></blockquote>

<p>The <em>name</em> of a variable is also an expression, similar to a
number or a string.  It is entered as
</p>
<blockquote><pre class="example">#'twentyFour
</pre></blockquote>

<a name="index-_0023_0027symbol"></a>
<a name="index-_0023_0027symbol-1"></a>
<a name="index-quoting-in-Scheme"></a>

<p>The quote mark <code>'</code> prevents the Scheme interpreter from substituting
<code>24</code> for the <code>twentyFour</code>.  Instead, we get the name
<code>twentyFour</code>.
</p>
<p>This syntax will be used very frequently, since many of the layout
tweaks involve assigning (Scheme) values to internal variables, for
example
</p>
<blockquote><pre class="example">\override Stem #'thickness = #2.6
</pre></blockquote>

<p>This instruction adjusts the appearance of stems.  The value <code>2.6</code>
is put into the <code>thickness</code> variable of a <code>Stem</code>
object.  <code>thickness</code> is measured relative to the thickness of
staff lines, so these stem lines will be <code>2.6</code> times the
width of staff lines.  This makes stems almost twice as thick as their
normal size.  To distinguish between variables defined in input files (like
<code>twentyFour</code> in the example above) and variables of internal
objects, we will call the latter &lsquo;properties&rsquo; and the former
&lsquo;variables.&rsquo;  So, the stem object has a <code>thickness</code> property,
while <code>twentyFour</code> is an variable.
</p>
<a name="index-properties-vs_002e-variables"></a>
<a name="index-variables-vs_002e-properties"></a>

<p>Two-dimensional offsets (X and Y coordinates) as well as object sizes
(intervals with a left and right point) are entered as <code>pairs</code>.  A
pair<sup><a name="DOCF1" href="#FOOT1">1</a></sup>
is entered as <code>(first . second)</code> and, like symbols, they must be quoted,
</p>
<blockquote><pre class="example">\override TextScript #'extra-offset = #'(1 . 2)
</pre></blockquote>

<p>This assigns the pair (1, 2) to the <code>extra-offset</code> property of the
TextScript object.  These numbers are measured in staff-spaces, so
this command moves the object 1 staff space to the right, and 2 spaces up.
</p>
<p>The two elements of a pair may be arbitrary values, for example
</p>
<blockquote><pre class="example">#'(1 . 2)
#'(#t . #f)
#'(&quot;blah-blah&quot; . 3.14159265)
</pre></blockquote>

<p>A list is entered by enclosing its elements in parentheses, and adding
a quote.  For example,
</p>
<blockquote><pre class="example">#'(1 2 3)
#'(1 2 &quot;string&quot; #f)
</pre></blockquote>

<p>We have been using lists all along.  A calculation, like <code>(+ 1 2)</code>
is also a list (containing the symbol <code>+</code> and the numbers 1
and&nbsp;2).  Normally lists are interpreted as calculations, and the
Scheme interpreter substitutes the outcome of the calculation.  To enter a
list, we stop the evaluation.  This is done by quoting the list with a
quote <code>'</code> symbol.  So, for calculations do not use a quote.
</p>
<p>Inside a quoted list or pair, there is no need to quote anymore.  The
following is a pair of symbols, a list of symbols and a list of lists
respectively,
</p>
<blockquote><pre class="example">#'(stem . head)
#'(staff clef key-signature)
#'((1) (2))
</pre></blockquote>


<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top"><a href="#Tweaking-with-Scheme" accesskey="1">B.1 Tweaking with Scheme</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">
</td></tr>
</table>

<hr size="6">
<a name="Tweaking-with-Scheme"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Scheme-tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Scheme tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#GNU-Free-Documentation-License" title="Next chapter">&nbsp;GNU Free Documentation License &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Scheme-tutorial" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Scheme tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Scheme-tutorial" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Scheme tutorial&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#GNU-Free-Documentation-License" title="Next section in reading order" accesskey="n" rel="next">&nbsp;GNU Free Documentation License &gt; </a>]</td></tr></table>
<a name="Tweaking-with-Scheme"></a>
<h2 class="appendixsec">B.1 Tweaking with Scheme</h2>

<p>We have seen how LilyPond output can be heavily modified using
commands like
<code>\override TextScript #'extra-offset = ( 1 . -1)</code>.  But
we have even more power if we use Scheme.  For a full explanation
of this, see the <a href="#Scheme-tutorial">Scheme tutorial</a>, and
<a name="index-Interfaces-for-programmers-1"></a>
<a href="lilypond-big-page.html#Interfaces-for-programmers">Interfaces for programmers</a>.
</p>
<p>We can use Scheme to simply <code>\override</code> commands,
</p>
<p>TODO Find a simple example
</p>

<p>We can use it to create new commands:
</p>

<blockquote><pre class="verbatim">tempoMark = #(define-music-function (parser location padding marktext)
                                    (number? string?)
#{
  \once \override Score . RehearsalMark #'padding = $padding
  \once \override Score . RehearsalMark #'extra-spacing-width = #'(+inf.0 . -inf.0)
  \mark \markup { \bold $marktext }
#})

\relative c'' {
  c2 e
  \tempoMark #3.0 #&quot;Allegro&quot;
  g c
}
</pre><p>
 <a href="05/lily-c5ae36a5.ly">
  <img align="middle"
       border="0"
       src="05/lily-c5ae36a5.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Even music expressions can be passed in:
</p>
<blockquote><pre class="verbatim">pattern = #(define-music-function (parser location x y) (ly:music? ly:music?)
#{
  $x e8 a b $y b a e
#})

\relative c''{
  \pattern c8 c8\f
  \pattern {d16 dis} { ais16-&gt; b\p }
}
</pre><p>
 <a href="ed/lily-6881f2bf.ly">
  <img align="middle"
       border="0"
       src="ed/lily-6881f2bf.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>








<hr size="6">
<a name="GNU-Free-Documentation-License"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#Scheme-tutorial" title="Beginning of this chapter or previous chapter"> &lt;&lt; Scheme tutorial&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="#LilyPond-index" title="Next chapter">&nbsp;LilyPond index &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#Tweaking-with-Scheme" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; Tweaking with Scheme&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Top" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="#LilyPond-index" title="Next section in reading order" accesskey="n" rel="next">&nbsp;LilyPond index &gt; </a>]</td></tr></table>
<a name="GNU-Free-Documentation-License"></a>
<h1 class="appendix">C. GNU Free Documentation License</h1>

<a name="index-FDL_002c-GNU-Free-Documentation-License"></a>
<p align="center"> Version 1.1, March 2000
</p>
<table><tr><td>&nbsp;</td><td><pre class="display">Copyright &copy; 2000 Free Software Foundation, Inc.
59 Temple Place, Suite 330, Boston, MA  02111-1307, USA

Everyone is permitted to copy and distribute verbatim copies
of this license document, but changing it is not allowed.
</pre></td></tr></table>

<ol>
<li>
PREAMBLE

<p>The purpose of this License is to make a manual, textbook, or other
written document <em>free</em> in the sense of freedom: to assure everyone
the effective freedom to copy and redistribute it, with or without
modifying it, either commercially or noncommercially.  Secondarily,
this License preserves for the author and publisher a way to get
credit for their work, while not being considered responsible for
modifications made by others.
</p>
<p>This License is a kind of &lsquo;copyleft&rsquo;, which means that derivative
works of the document must themselves be free in the same sense.  It
complements the GNU General Public License, which is a copyleft
license designed for free software.
</p>
<p>We have designed this License in order to use it for manuals for free
software, because free software needs free documentation: a free
program should come with manuals providing the same freedoms that the
software does.  But this License is not limited to software manuals;
it can be used for any textual work, regardless of subject matter or
whether it is published as a printed book.  We recommend this License
principally for works whose purpose is instruction or reference.
</p>
</li><li>
APPLICABILITY AND DEFINITIONS

<p>This License applies to any manual or other work that contains a
notice placed by the copyright holder saying it can be distributed
under the terms of this License.  The &lsquo;Document&rsquo;, below, refers to any
such manual or work.  Any member of the public is a licensee, and is
addressed as &lsquo;you&rsquo;.
</p>
<p>A &lsquo;Modified Version&rsquo; of the Document means any work containing the
Document or a portion of it, either copied verbatim, or with
modifications and/or translated into another language.
</p>
<p>A &lsquo;Secondary Section&rsquo; is a named appendix or a front-matter section of
the Document that deals exclusively with the relationship of the
publishers or authors of the Document to the Document&rsquo;s overall subject
(or to related matters) and contains nothing that could fall directly
within that overall subject.  (For example, if the Document is in part a
textbook of mathematics, a Secondary Section may not explain any
mathematics.)  The relationship could be a matter of historical
connection with the subject or with related matters, or of legal,
commercial, philosophical, ethical or political position regarding
them.
</p>
<p>The &lsquo;Invariant Sections&rsquo; are certain Secondary Sections whose titles
are designated, as being those of Invariant Sections, in the notice
that says that the Document is released under this License.
</p>
<p>The &lsquo;Cover Texts&rsquo; are certain short passages of text that are listed,
as Front-Cover Texts or Back-Cover Texts, in the notice that says that
the Document is released under this License.
</p>
<p>A &lsquo;Transparent&rsquo; copy of the Document means a machine-readable copy,
represented in a format whose specification is available to the
general public, whose contents can be viewed and edited directly and
straightforwardly with generic text editors or (for images composed of
pixels) generic paint programs or (for drawings) some widely available
drawing editor, and that is suitable for input to text formatters or
for automatic translation to a variety of formats suitable for input
to text formatters.  A copy made in an otherwise Transparent file
format whose markup has been designed to thwart or discourage
subsequent modification by readers is not Transparent.  A copy that is
not &lsquo;Transparent&rsquo; is called &lsquo;Opaque&rsquo;.
</p>
<p>Examples of suitable formats for Transparent copies include plain
<small>ASCII</small> without markup, Texinfo input format, LaTeX input format,
<acronym>SGML</acronym> or <acronym>XML</acronym> using a publicly available
<acronym>DTD</acronym>, and standard-conforming simple <acronym>HTML</acronym> designed
for human modification.  Opaque formats include PostScript,
<acronym>PDF</acronym>, proprietary formats that can be read and edited only by
proprietary word processors, <acronym>SGML</acronym> or <acronym>XML</acronym> for which
the <acronym>DTD</acronym> and/or processing tools are not generally available,
and the machine-generated <acronym>HTML</acronym> produced by some word
processors for output purposes only.
</p>
<p>The &lsquo;Title Page&rsquo; means, for a printed book, the title page itself,
plus such following pages as are needed to hold, legibly, the material
this License requires to appear in the title page.  For works in
formats which do not have any title page as such, &lsquo;Title Page&rsquo; means
the text near the most prominent appearance of the work&rsquo;s title,
preceding the beginning of the body of the text.
</p>
</li><li>
VERBATIM COPYING

<p>You may copy and distribute the Document in any medium, either
commercially or noncommercially, provided that this License, the
copyright notices, and the license notice saying this License applies
to the Document are reproduced in all copies, and that you add no other
conditions whatsoever to those of this License.  You may not use
technical measures to obstruct or control the reading or further
copying of the copies you make or distribute.  However, you may accept
compensation in exchange for copies.  If you distribute a large enough
number of copies you must also follow the conditions in section 3.
</p>
<p>You may also lend copies, under the same conditions stated above, and
you may publicly display copies.
</p>
</li><li>
COPYING IN QUANTITY

<p>If you publish printed copies of the Document numbering more than 100,
and the Document&rsquo;s license notice requires Cover Texts, you must enclose
the copies in covers that carry, clearly and legibly, all these Cover
Texts: Front-Cover Texts on the front cover, and Back-Cover Texts on
the back cover.  Both covers must also clearly and legibly identify
you as the publisher of these copies.  The front cover must present
the full title with all words of the title equally prominent and
visible.  You may add other material on the covers in addition.
Copying with changes limited to the covers, as long as they preserve
the title of the Document and satisfy these conditions, can be treated
as verbatim copying in other respects.
</p>
<p>If the required texts for either cover are too voluminous to fit
legibly, you should put the first ones listed (as many as fit
reasonably) on the actual cover, and continue the rest onto adjacent
pages.
</p>
<p>If you publish or distribute Opaque copies of the Document numbering
more than 100, you must either include a machine-readable Transparent
copy along with each Opaque copy, or state in or with each Opaque copy
a publicly-accessible computer-network location containing a complete
Transparent copy of the Document, free of added material, which the
general network-using public has access to download anonymously at no
charge using public-standard network protocols.  If you use the latter
option, you must take reasonably prudent steps, when you begin
distribution of Opaque copies in quantity, to ensure that this
Transparent copy will remain thus accessible at the stated location
until at least one year after the last time you distribute an Opaque
copy (directly or through your agents or retailers) of that edition to
the public.
</p>
<p>It is requested, but not required, that you contact the authors of the
Document well before redistributing any large number of copies, to give
them a chance to provide you with an updated version of the Document.
</p>
</li><li>
MODIFICATIONS

<p>You may copy and distribute a Modified Version of the Document under
the conditions of sections 2 and 3 above, provided that you release
the Modified Version under precisely this License, with the Modified
Version filling the role of the Document, thus licensing distribution
and modification of the Modified Version to whoever possesses a copy
of it.  In addition, you must do these things in the Modified Version:
</p>
<ol>
<li>
Use in the Title Page (and on the covers, if any) a title distinct
from that of the Document, and from those of previous versions
(which should, if there were any, be listed in the History section
of the Document).  You may use the same title as a previous version
if the original publisher of that version gives permission.

</li><li>
List on the Title Page, as authors, one or more persons or entities
responsible for authorship of the modifications in the Modified
Version, together with at least five of the principal authors of the
Document (all of its principal authors, if it has less than five).

</li><li>
State on the Title page the name of the publisher of the
Modified Version, as the publisher.

</li><li>
Preserve all the copyright notices of the Document.

</li><li>
Add an appropriate copyright notice for your modifications
adjacent to the other copyright notices.

</li><li>
Include, immediately after the copyright notices, a license notice
giving the public permission to use the Modified Version under the
terms of this License, in the form shown in the Addendum below.

</li><li>
Preserve in that license notice the full lists of Invariant Sections
and required Cover Texts given in the Document&rsquo;s license notice.

</li><li>
Include an unaltered copy of this License.

</li><li>
Preserve the section entitled &lsquo;History&rsquo;, and its title, and add to
it an item stating at least the title, year, new authors, and
publisher of the Modified Version as given on the Title Page.  If
there is no section entitled &lsquo;History&rsquo; in the Document, create one
stating the title, year, authors, and publisher of the Document as
given on its Title Page, then add an item describing the Modified
Version as stated in the previous sentence.

</li><li>
Preserve the network location, if any, given in the Document for
public access to a Transparent copy of the Document, and likewise
the network locations given in the Document for previous versions
it was based on.  These may be placed in the &lsquo;History&rsquo; section.
You may omit a network location for a work that was published at
least four years before the Document itself, or if the original
publisher of the version it refers to gives permission.

</li><li>
In any section entitled &lsquo;Acknowledgments&rsquo; or &lsquo;Dedications&rsquo;,
preserve the section&rsquo;s title, and preserve in the section all the
substance and tone of each of the contributor acknowledgments
and/or dedications given therein.

</li><li>
Preserve all the Invariant Sections of the Document,
unaltered in their text and in their titles.  Section numbers
or the equivalent are not considered part of the section titles.

</li><li>
Delete any section entitled &lsquo;Endorsements&rsquo;.  Such a section
may not be included in the Modified Version.

</li><li>
Do not retitle any existing section as &lsquo;Endorsements&rsquo;
or to conflict in title with any Invariant Section.
</li></ol>

<p>If the Modified Version includes new front-matter sections or
appendices that qualify as Secondary Sections and contain no material
copied from the Document, you may at your option designate some or all
of these sections as invariant.  To do this, add their titles to the
list of Invariant Sections in the Modified Version&rsquo;s license notice.
These titles must be distinct from any other section titles.
</p>
<p>You may add a section entitled &lsquo;Endorsements&rsquo;, provided it contains
nothing but endorsements of your Modified Version by various
parties&mdash;for example, statements of peer review or that the text has
been approved by an organization as the authoritative definition of a
standard.
</p>
<p>You may add a passage of up to five words as a Front-Cover Text, and a
passage of up to 25 words as a Back-Cover Text, to the end of the list
of Cover Texts in the Modified Version.  Only one passage of
Front-Cover Text and one of Back-Cover Text may be added by (or
through arrangements made by) any one entity.  If the Document already
includes a cover text for the same cover, previously added by you or
by arrangement made by the same entity you are acting on behalf of,
you may not add another; but you may replace the old one, on explicit
permission from the previous publisher that added the old one.
</p>
<p>The author(s) and publisher(s) of the Document do not by this License
give permission to use their names for publicity for or to assert or
imply endorsement of any Modified Version.
</p>
</li><li>
COMBINING DOCUMENTS

<p>You may combine the Document with other documents released under this
License, under the terms defined in section 4 above for modified
versions, provided that you include in the combination all of the
Invariant Sections of all of the original documents, unmodified, and
list them all as Invariant Sections of your combined work in its
license notice.
</p>
<p>The combined work need only contain one copy of this License, and
multiple identical Invariant Sections may be replaced with a single
copy.  If there are multiple Invariant Sections with the same name but
different contents, make the title of each such section unique by
adding at the end of it, in parentheses, the name of the original
author or publisher of that section if known, or else a unique number.
Make the same adjustment to the section titles in the list of
Invariant Sections in the license notice of the combined work.
</p>
<p>In the combination, you must combine any sections entitled &lsquo;History&rsquo;
in the various original documents, forming one section entitled
&lsquo;History&rsquo;; likewise combine any sections entitled &lsquo;Acknowledgments&rsquo;,
and any sections entitled &lsquo;Dedications&rsquo;.  You must delete all sections
entitled &lsquo;Endorsements.&rsquo;
</p>
</li><li>
COLLECTIONS OF DOCUMENTS

<p>You may make a collection consisting of the Document and other documents
released under this License, and replace the individual copies of this
License in the various documents with a single copy that is included in
the collection, provided that you follow the rules of this License for
verbatim copying of each of the documents in all other respects.
</p>
<p>You may extract a single document from such a collection, and distribute
it individually under this License, provided you insert a copy of this
License into the extracted document, and follow this License in all
other respects regarding verbatim copying of that document.
</p>
</li><li>
AGGREGATION WITH INDEPENDENT WORKS

<p>A compilation of the Document or its derivatives with other separate
and independent documents or works, in or on a volume of a storage or
distribution medium, does not as a whole count as a Modified Version
of the Document, provided no compilation copyright is claimed for the
compilation.  Such a compilation is called an &lsquo;aggregate&rsquo;, and this
License does not apply to the other self-contained works thus compiled
with the Document, on account of their being thus compiled, if they
are not themselves derivative works of the Document.
</p>
<p>If the Cover Text requirement of section 3 is applicable to these
copies of the Document, then if the Document is less than one quarter
of the entire aggregate, the Document&rsquo;s Cover Texts may be placed on
covers that surround only the Document within the aggregate.
Otherwise they must appear on covers around the whole aggregate.
</p>
</li><li>
TRANSLATION

<p>Translation is considered a kind of modification, so you may
distribute translations of the Document under the terms of section 4.
Replacing Invariant Sections with translations requires special
permission from their copyright holders, but you may include
translations of some or all Invariant Sections in addition to the
original versions of these Invariant Sections.  You may include a
translation of this License provided that you also include the
original English version of this License.  In case of a disagreement
between the translation and the original English version of this
License, the original English version will prevail.
</p>
</li><li>
TERMINATION

<p>You may not copy, modify, sublicense, or distribute the Document except
as expressly provided for under this License.  Any other attempt to
copy, modify, sublicense or distribute the Document is void, and will
automatically terminate your rights under this License.  However,
parties who have received copies, or rights, from you under this
License will not have their licenses terminated so long as such
parties remain in full compliance.
</p>
</li><li>
FUTURE REVISIONS OF THIS LICENSE

<p>The Free Software Foundation may publish new, revised versions
of the GNU Free Documentation License from time to time.  Such new
versions will be similar in spirit to the present version, but may
differ in detail to address new problems or concerns.  See
<a href="http://www.gnu.org/copyleft/">http://www.gnu.org/copyleft/</a>.
</p>
<p>Each version of the License is given a distinguishing version number.
If the Document specifies that a particular numbered version of this
License &lsquo;or any later version&rsquo; applies to it, you have the option of
following the terms and conditions either of that specified version or
of any later version that has been published (not as a draft) by the
Free Software Foundation.  If the Document does not specify a version
number of this License, you may choose any version ever published (not
as a draft) by the Free Software Foundation.
</p></li></ol>


<a name="ADDENDUM_003a-How-to-use-this-License-for-your-documents"></a>
<h3 class="subheading">ADDENDUM: How to use this License for your documents</h3>

<p>To use this License in a document you have written, include a copy of
the License in the document and put the following copyright and
license notices just after the title page:
</p>
<table><tr><td>&nbsp;</td><td><pre class="smallexample">  Copyright (C)  <var>year</var>  <var>your name</var>.
  Permission is granted to copy, distribute and/or modify this document
  under the terms of the GNU Free Documentation License, Version 1.1
  or any later version published by the Free Software Foundation;
  with the Invariant Sections being <var>list their titles</var>, with the
  Front-Cover Texts being <var>list</var>, and with the Back-Cover Texts being <var>list</var>.
  A copy of the license is included in the section entitled &lsquo;GNU
  Free Documentation License&rsquo;.
</pre></td></tr></table>

<p>If you have no Invariant Sections, write &lsquo;with no Invariant Sections&rsquo;
instead of saying which ones are invariant.  If you have no
Front-Cover Texts, write &lsquo;no Front-Cover Texts&rsquo; instead of
&lsquo;Front-Cover Texts being <var>list</var>&rsquo;; likewise for Back-Cover Texts.
</p>
<p>If your document contains nontrivial examples of program code, we
recommend releasing these examples in parallel under your choice of
free software license, such as the GNU General Public License,
to permit their use in free software.
</p>


<hr size="6">
<a name="LilyPond-index"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="#GNU-Free-Documentation-License" title="Beginning of this chapter or previous chapter"> &lt;&lt; GNU Free Documentation License&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[&nbsp; &gt;&gt; ]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="#GNU-Free-Documentation-License" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; GNU Free Documentation License&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="#Top" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;Top&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[&nbsp; &gt; ]</td></tr></table>
<a name="LilyPond-index"></a>
<h1 class="appendix">D. LilyPond index</h1>

<table><tr><th valign="top">Jump to: &nbsp; </th><td><a href="#LilyPond-index_cp_symbol-1" class="summary-letter"><b>!</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-2" class="summary-letter"><b>#</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-3" class="summary-letter"><b>%</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-4" class="summary-letter"><b>'</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-5" class="summary-letter"><b>(</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-6" class="summary-letter"><b>,</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-7" class="summary-letter"><b>.</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-8" class="summary-letter"><b>&lt;</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-9" class="summary-letter"><b>&gt;</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-10" class="summary-letter"><b>[</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-11" class="summary-letter"><b>\</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-12" class="summary-letter"><b>]</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-13" class="summary-letter"><b>^</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-14" class="summary-letter"><b>_</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-15" class="summary-letter"><b>~</b></a>
 &nbsp; 
<br>
<a href="#LilyPond-index_cp_letter-A" class="summary-letter"><b>A</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-B" class="summary-letter"><b>B</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-C" class="summary-letter"><b>C</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-D" class="summary-letter"><b>D</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-E" class="summary-letter"><b>E</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-F" class="summary-letter"><b>F</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-G" class="summary-letter"><b>G</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-H" class="summary-letter"><b>H</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-I" class="summary-letter"><b>I</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-J" class="summary-letter"><b>J</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-K" class="summary-letter"><b>K</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-L" class="summary-letter"><b>L</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-M" class="summary-letter"><b>M</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-N" class="summary-letter"><b>N</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-O" class="summary-letter"><b>O</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-P" class="summary-letter"><b>P</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-Q" class="summary-letter"><b>Q</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-R" class="summary-letter"><b>R</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-S" class="summary-letter"><b>S</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-T" class="summary-letter"><b>T</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-U" class="summary-letter"><b>U</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-V" class="summary-letter"><b>V</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-W" class="summary-letter"><b>W</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-X" class="summary-letter"><b>X</b></a>
 &nbsp; 
</td></tr></table>
<table border="0" class="index-cp">
<tr><td></td><th align="left">Index Entry</th><th align="left"> Section</th></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_symbol-1">!</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0021"><code>!</code></a></td><td valign="top"><a href="#Dynamics-1">Dynamics</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_symbol-2">#</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0023"><code>#</code></a></td><td valign="top"><a href="#Scheme-tutorial">B. Scheme tutorial</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0023_0023f"><code>##f</code></a></td><td valign="top"><a href="#Scheme-tutorial">B. Scheme tutorial</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0023_0023t"><code>##t</code></a></td><td valign="top"><a href="#Scheme-tutorial">B. Scheme tutorial</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0023_0027symbol"><code>#'symbol</code></a></td><td valign="top"><a href="#Scheme-tutorial">B. Scheme tutorial</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_symbol-3">%</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0025"><code>%</code></a></td><td valign="top"><a href="#Working-on-input-files">2.1.3 Working on input files</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0025_007b-_002e_002e_002e-_0025_007d"><code>%{ ... %}</code></a></td><td valign="top"><a href="#Working-on-input-files">2.1.3 Working on input files</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_symbol-4">'</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0027"><code>'</code></a></td><td valign="top"><a href="#Pitches">Pitches</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_symbol-5">(</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_0028-_002e_002e_002e-_0029"><code>( ... )</code></a></td><td valign="top"><a href="#Ties-and-slurs">2.2.2 Ties and slurs</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_symbol-6">,</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002c"><code>,</code></a></td><td valign="top"><a href="#Pitches">Pitches</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_symbol-7">.</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_002e_002e_002e"><code>...</code></a></td><td valign="top"><a href="#Working-on-input-files">2.1.3 Working on input files</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_symbol-8">&lt;</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003c"><code>&lt;</code></a></td><td valign="top"><a href="#Dynamics-1">Dynamics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003c-2"><code>&lt;</code></a></td><td valign="top"><a href="#Combining-notes-into-chords">2.3.4 Combining notes into chords</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003c-_002e_002e_002e-_003e"><code>&lt; ... &gt;</code></a></td><td valign="top"><a href="#Combining-notes-into-chords">2.3.4 Combining notes into chords</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003c_003c"><code>&lt;&lt;</code></a></td><td valign="top"><a href="#Simultaneous-music-expressions_003a-multiple-staves">Simultaneous music expressions: multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003c_003c-2"><code>&lt;&lt;</code></a></td><td valign="top"><a href="#Single-staff-polyphony">2.3.5 Single staff polyphony</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003c_003c-_002e_002e_002e-_003e_003e"><code>&lt;&lt; ... &gt;&gt;</code></a></td><td valign="top"><a href="#Simultaneous-music-expressions_003a-multiple-staves">Simultaneous music expressions: multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003c_003c-_002e_002e_002e-_005c_005c-_002e_002e_002e-_003e_003e"><code>&lt;&lt; ... \\ ... &gt;&gt;</code></a></td><td valign="top"><a href="#Single-staff-polyphony">2.3.5 Single staff polyphony</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003c_003c-_005c_005c-_003e_003e"><code>&lt;&lt; \\ &gt;&gt;</code></a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_symbol-9">&gt;</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003e"><code>&gt;</code></a></td><td valign="top"><a href="#Dynamics-1">Dynamics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003e-2"><code>&gt;</code></a></td><td valign="top"><a href="#Combining-notes-into-chords">2.3.4 Combining notes into chords</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003e_003e"><code>&gt;&gt;</code></a></td><td valign="top"><a href="#Simultaneous-music-expressions_003a-multiple-staves">Simultaneous music expressions: multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_003e_003e-2"><code>&gt;&gt;</code></a></td><td valign="top"><a href="#Single-staff-polyphony">2.3.5 Single staff polyphony</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_symbol-10">[</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005b"><code>[</code></a></td><td valign="top"><a href="#Automatic-and-manual-beams">2.2.5 Automatic and manual beams</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005b-_002e_002e_002e-_005d"><code>[ ... ]</code></a></td><td valign="top"><a href="#Automatic-and-manual-beams">2.2.5 Automatic and manual beams</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_symbol-11">\</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005c_0021"><code>\!</code></a></td><td valign="top"><a href="#Dynamics-1">Dynamics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005c_0028-_002e_002e_002e-_005c_0029"><code>\( ... \)</code></a></td><td valign="top"><a href="#Ties-and-slurs">2.2.2 Ties and slurs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005c_003c"><code>\&lt;</code></a></td><td valign="top"><a href="#Dynamics-1">Dynamics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005c_003e"><code>\&gt;</code></a></td><td valign="top"><a href="#Dynamics-1">Dynamics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cacciaccatura"><code>\acciaccatura</code></a></td><td valign="top"><a href="#Grace-notes">Grace notes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005caddlyrics"><code>\addlyrics</code></a></td><td valign="top"><a href="#Setting-simple-songs">2.4.1 Setting simple songs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005caddlyrics-example"><code>\addlyrics</code> example</a></td><td valign="top"><a href="#Properties-of-layout-objects">4.2.1 Properties of layout objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005caddlyrics_002c-example"><code>\addlyrics</code>, example</a></td><td valign="top"><a href="#Properties-found-in-interfaces">4.2.2 Properties found in interfaces</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cappoggiatura"><code>\appoggiatura</code></a></td><td valign="top"><a href="#Grace-notes">Grace notes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cautoBeamOff"><code>\autoBeamOff</code></a></td><td valign="top"><a href="#Automatic-and-manual-beams">2.2.5 Automatic and manual beams</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cautoBeamOff-2"><code>\autoBeamOff</code></a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cautoBeamOn"><code>\autoBeamOn</code></a></td><td valign="top"><a href="#Automatic-and-manual-beams">2.2.5 Automatic and manual beams</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cbook"><code>\book</code></a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cbook-2"><code>\book</code></a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cbook-4"><code>\book</code></a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cclef"><code>\clef</code></a></td><td valign="top"><a href="#Clef">Clef</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cconsists"><code>\consists</code></a></td><td valign="top"><a href="#Adding-and-removing-engravers">3.3.5 Adding and removing engravers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005ccontext"><code>\context</code></a></td><td valign="top"><a href="#Setting-context-properties-with-_005ccontext">Setting context properties with <code>\context</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cf"><code>\f</code></a></td><td valign="top"><a href="#Dynamics-1">Dynamics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cff"><code>\ff</code></a></td><td valign="top"><a href="#Dynamics-1">Dynamics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cgrace"><code>\grace</code></a></td><td valign="top"><a href="#Grace-notes">Grace notes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cheader"><code>\header</code></a></td><td valign="top"><a href="#Adding-titles">2.5.3 Adding titles</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cheader-2"><code>\header</code></a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005ckey"><code>\key</code></a></td><td valign="top"><a href="#Key-signatures">Key signatures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005clayout"><code>\layout</code></a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005clayout-2"><code>\layout</code></a></td><td valign="top"><a href="#Changing-all-contexts-of-the-same-type">Changing all contexts of the same type</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005clyricmode"><code>\lyricmode</code></a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005clyricsto"><code>\lyricsto</code></a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cmajor"><code>\major</code></a></td><td valign="top"><a href="#Key-signatures">Key signatures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cmarkup"><code>\markup</code></a></td><td valign="top"><a href="#Adding-text">2.2.4 Adding text</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cmf"><code>\mf</code></a></td><td valign="top"><a href="#Dynamics-1">Dynamics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cmidi"><code>\midi</code></a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cminor"><code>\minor</code></a></td><td valign="top"><a href="#Key-signatures">Key signatures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cmp"><code>\mp</code></a></td><td valign="top"><a href="#Dynamics-1">Dynamics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cnew"><code>\new</code></a></td><td valign="top"><a href="#Multiple-staves">2.3.2 Multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cnew-2"><code>\new</code></a></td><td valign="top"><a href="#Creating-contexts">3.3.2 Creating contexts</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cnew-ChoirStaff"><code>\new ChoirStaff</code></a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cnew-Lyrics"><code>\new Lyrics</code></a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cnew-Staff"><code>\new Staff</code></a></td><td valign="top"><a href="#Multiple-staves">2.3.2 Multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cnew-Voice"><code>\new Voice</code></a></td><td valign="top"><a href="#Explicitly-instantiating-voices">3.2.2 Explicitly instantiating voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005conce"><code>\once</code></a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005conce-2"><code>\once</code></a></td><td valign="top"><a href="#Overriding-once-only">Overriding once only</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005coneVoice"><code>\oneVoice</code></a></td><td valign="top"><a href="#Explicitly-instantiating-voices">3.2.2 Explicitly instantiating voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005coverride"><code>\override</code></a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005coverrideProperty"><code>\overrideProperty</code></a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cp"><code>\p</code></a></td><td valign="top"><a href="#Dynamics-1">Dynamics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cpartial"><code>\partial</code></a></td><td valign="top"><a href="#Partial-measure">Partial measure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cpp"><code>\pp</code></a></td><td valign="top"><a href="#Dynamics-1">Dynamics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005crelative"><code>\relative</code></a></td><td valign="top"><a href="#Pitches">Pitches</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cremove"><code>\remove</code></a></td><td valign="top"><a href="#Adding-and-removing-engravers">3.3.5 Adding and removing engravers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005crevert"><code>\revert</code></a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005crevert-2"><code>\revert</code></a></td><td valign="top"><a href="#Reverting">Reverting</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cscore"><code>\score</code></a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cscore-2"><code>\score</code></a></td><td valign="top"><a href="#Score-is-a-_0028single_0029-compound-musical-expression">3.1.2 Score is a (single) compound musical expression</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cset"><code>\set</code></a></td><td valign="top"><a href="#Modifying-context-properties">3.3.4 Modifying context properties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cset_002c-example-of-using"><code>\set</code>, example of using</a></td><td valign="top"><a href="#Fingering">Fingering</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cshiftOff"><code>\shiftOff</code></a></td><td valign="top"><a href="#Note-columns">Note columns</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cshiftOn"><code>\shiftOn</code></a></td><td valign="top"><a href="#Note-columns">Note columns</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cshiftOnn"><code>\shiftOnn</code></a></td><td valign="top"><a href="#Note-columns">Note columns</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cshiftOnnn"><code>\shiftOnnn</code></a></td><td valign="top"><a href="#Note-columns">Note columns</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cstartTextSpan"><code>\startTextSpan</code></a></td><td valign="top"><a href="#Outside_002dstaff-objects">4.4.3 Outside-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cstopTextSpan"><code>\stopTextSpan</code></a></td><td valign="top"><a href="#Outside_002dstaff-objects">4.4.3 Outside-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005ctextLengthOff"><code>\textLengthOff</code></a></td><td valign="top"><a href="#g_t_005ctextLengthOn">\textLengthOn</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005ctextLengthOn"><code>\textLengthOn</code></a></td><td valign="top"><a href="#g_t_005ctextLengthOn">\textLengthOn</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005ctime"><code>\time</code></a></td><td valign="top"><a href="#Time-signature">Time signature</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005ctimes"><code>\times</code></a></td><td valign="top"><a href="#Tuplets">Tuplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005ctweak"><code>\tweak</code></a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005ctweak_002c-example"><code>\tweak</code>, example</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005ctweak_002c-example-1"><code>\tweak</code>, example</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005ctweak_002c-example-2"><code>\tweak</code>, example</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cunset"><code>\unset</code></a></td><td valign="top"><a href="#Modifying-context-properties">3.3.4 Modifying context properties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cversion"><code>\version</code></a></td><td valign="top"><a href="#Version-number">2.5.2 Version number</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cvoiceFour"><code>\voiceFour</code></a></td><td valign="top"><a href="#Explicitly-instantiating-voices">3.2.2 Explicitly instantiating voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cvoiceFourStyle"><code>\voiceFourStyle</code></a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cvoiceNeutralStyle"><code>\voiceNeutralStyle</code></a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cvoiceOne"><code>\voiceOne</code></a></td><td valign="top"><a href="#Explicitly-instantiating-voices">3.2.2 Explicitly instantiating voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cvoiceOneStyle"><code>\voiceOneStyle</code></a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cvoiceThree"><code>\voiceThree</code></a></td><td valign="top"><a href="#Explicitly-instantiating-voices">3.2.2 Explicitly instantiating voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cvoiceThreeStyle"><code>\voiceThreeStyle</code></a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cvoiceTwo"><code>\voiceTwo</code></a></td><td valign="top"><a href="#Explicitly-instantiating-voices">3.2.2 Explicitly instantiating voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cvoiceTwoStyle"><code>\voiceTwoStyle</code></a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cwith"><code>\with</code></a></td><td valign="top"><a href="#Setting-context-properties-with-_005cwith">Setting context properties with <code>\with</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cwith_002c-example"><code>\with</code>, example</a></td><td valign="top"><a href="#Size-of-objects">4.3.2 Size of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cwith_002c-example-1"><code>\with</code>, example</a></td><td valign="top"><a href="#Size-of-objects">4.3.2 Size of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cwith_002c-example-2"><code>\with</code>, example</a></td><td valign="top"><a href="#Size-of-objects">4.3.2 Size of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cwith_002c-example-3"><code>\with</code>, example</a></td><td valign="top"><a href="#Size-of-objects">4.3.2 Size of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005cwith_002c-example-4"><code>\with</code>, example</a></td><td valign="top"><a href="#Length-and-thickness-of-objects">4.3.3 Length and thickness of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005c_005c"><code>\\</code></a></td><td valign="top"><a href="#Single-staff-polyphony">2.3.5 Single staff polyphony</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005c_005c-2"><code>\\</code></a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_symbol-12">]</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005d"><code>]</code></a></td><td valign="top"><a href="#Automatic-and-manual-beams">2.2.5 Automatic and manual beams</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_symbol-13">^</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005e"><code>^</code></a></td><td valign="top"><a href="#Fingerings">Fingerings</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_symbol-14">_</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_005f"><code>_</code></a></td><td valign="top"><a href="#Fingerings">Fingerings</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_symbol-15">~</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-_007e"><code>~</code></a></td><td valign="top"><a href="#Ties-and-slurs">2.2.2 Ties and slurs</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-A">A</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-absolute-mode">absolute mode</a></td><td valign="top"><a href="#Absolute-note-names">2.5.4 Absolute note names</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-absolute-note-names">absolute note names</a></td><td valign="top"><a href="#Absolute-note-names">2.5.4 Absolute note names</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-absolute-values-for-pitches">absolute values for pitches</a></td><td valign="top"><a href="#Absolute-note-names">2.5.4 Absolute note names</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-accent">accent</a></td><td valign="top"><a href="#Articulations">Articulations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-accessing-Scheme">accessing Scheme</a></td><td valign="top"><a href="#Scheme-tutorial">B. Scheme tutorial</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-acciaccatura-1"><code>acciaccatura</code></a></td><td valign="top"><a href="#Grace-notes">Grace notes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-acciaccatura-3"><code>acciaccatura</code></a></td><td valign="top"><a href="#Grace-notes">Grace notes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-accidental"><code>accidental</code></a></td><td valign="top"><a href="#Pitches">Pitches</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-accidental-1"><code>accidental</code></a></td><td valign="top"><a href="#Accidentals">Accidentals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-accidental-2"><code>accidental</code></a></td><td valign="top"><a href="#Warning_003a-key-signatures-and-pitches">Warning: key signatures and pitches</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Accidental_002c-example-of-overriding">Accidental, example of overriding</a></td><td valign="top"><a href="#left_002dpadding-and-right_002dpadding">left-padding and right-padding</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-AccidentalPlacement_002c-example-of-overriding">AccidentalPlacement, example of overriding</a></td><td valign="top"><a href="#left_002dpadding-and-right_002dpadding">left-padding and right-padding</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Accidentals"><code>Accidentals</code></a></td><td valign="top"><a href="#See-also-2">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-accidentals">accidentals</a></td><td valign="top"><a href="#Accidentals">Accidentals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-accidentals-and-key-signature">accidentals and key signature</a></td><td valign="top"><a href="#Key-signatures">Key signatures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-accidentals-and-key-signatures">accidentals and key signatures</a></td><td valign="top"><a href="#Accidentals">Accidentals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-accidentals-and-relative-mode">accidentals and relative mode</a></td><td valign="top"><a href="#Pitches">Pitches</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-adding-engravers">adding engravers</a></td><td valign="top"><a href="#Adding-and-removing-engravers">3.3.5 Adding and removing engravers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-adding-text">adding text</a></td><td valign="top"><a href="#Adding-text">2.2.4 Adding text</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-addlyrics"><code>addlyrics</code></a></td><td valign="top"><a href="#Setting-simple-songs">2.4.1 Setting simple songs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-alignAboveContext-property_002c-example">alignAboveContext property, example</a></td><td valign="top"><a href="#Size-of-objects">4.3.2 Size of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-alignAboveContext-property_002c-example-1">alignAboveContext property, example</a></td><td valign="top"><a href="#Size-of-objects">4.3.2 Size of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-alignAboveContext-property_002c-example-2">alignAboveContext property, example</a></td><td valign="top"><a href="#Size-of-objects">4.3.2 Size of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-alignAboveContext-property_002c-example-3">alignAboveContext property, example</a></td><td valign="top"><a href="#Size-of-objects">4.3.2 Size of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-alignAboveContext-property_002c-example-4">alignAboveContext property, example</a></td><td valign="top"><a href="#Length-and-thickness-of-objects">4.3.3 Length and thickness of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-aligning-lyrics">aligning lyrics</a></td><td valign="top"><a href="#Aligning-lyrics-to-a-melody">2.4.2 Aligning lyrics to a melody</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-aligning-objects-on-a-baseline">aligning objects on a baseline</a></td><td valign="top"><a href="#staff_002dpadding-property">staff-padding property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-alto">alto</a></td><td valign="top"><a href="#Clef">Clef</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ambitus"><code>ambitus</code></a></td><td valign="top"><a href="#Changing-a-single-context">Changing a single context</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ambitus-engraver">ambitus engraver</a></td><td valign="top"><a href="#Changing-a-single-context">Changing a single context</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-anacrusis-1"><code>anacrusis</code></a></td><td valign="top"><a href="#Partial-measure">Partial measure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-appendices">appendices</a></td><td valign="top"><a href="#About-the-Notation-Reference">About the Notation Reference</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Application-Usage">Application Usage</a></td><td valign="top"><a href="#About-the-documentation">1.2 About the documentation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Application-Usage-1">Application Usage</a></td><td valign="top"><a href="#About-the-Application-Usage">About the Application Usage</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-appoggiatura-1"><code>appoggiatura</code></a></td><td valign="top"><a href="#Grace-notes">Grace notes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-articulation"><code>articulation</code></a></td><td valign="top"><a href="#Warnings_003a-slurs-vs_002e-ties">Warnings: slurs vs. ties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-articulation-2"><code>articulation</code></a></td><td valign="top"><a href="#Articulations">Articulations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Articulations-and-ornamentations"><code>Articulations and ornamentations</code></a></td><td valign="top"><a href="#See-also-4">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-articulations-and-slurs">articulations and slurs</a></td><td valign="top"><a href="#Outside_002dstaff-objects">4.4.3 Outside-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-assigning-variables">assigning variables</a></td><td valign="top"><a href="#Organizing-pieces-with-variables">2.5.1 Organizing pieces with variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-autoBeamOff"><code>autoBeamOff</code></a></td><td valign="top"><a href="#Automatic-and-manual-beams">2.2.5 Automatic and manual beams</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-autoBeamOff-2"><code>autoBeamOff</code></a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-autoBeamOn"><code>autoBeamOn</code></a></td><td valign="top"><a href="#Automatic-and-manual-beams">2.2.5 Automatic and manual beams</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-automated-engraving">automated engraving</a></td><td valign="top"><a href="#Automated-engraving">Automated engraving</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Automatic-accidentals"><code>Automatic accidentals</code></a></td><td valign="top"><a href="#Warning_003a-key-signatures-and-pitches">Warning: key signatures and pitches</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Automatic-accidentals-1"><code>Automatic accidentals</code></a></td><td valign="top"><a href="#See-also-2">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Automatic-beams"><code>Automatic beams</code></a></td><td valign="top"><a href="#See-also-7">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-automatic-beams">automatic beams</a></td><td valign="top"><a href="#Automatic-and-manual-beams">2.2.5 Automatic and manual beams</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-B">B</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-balance">balance</a></td><td valign="top"><a href="#Engraving">Engraving</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Bar-and-bar-number-checks"><code>Bar and bar number checks</code></a></td><td valign="top"><a href="#General-suggestions">5.1.1 General suggestions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bar-numbers_002c-tweaking-placement">bar numbers, tweaking placement</a></td><td valign="top"><a href="#Outside_002dstaff-objects">4.4.3 Outside-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-BarLine_002c-example-of-overriding">BarLine, example of overriding</a></td><td valign="top"><a href="#stencil">stencil</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-BarLine_002c-example-of-overriding-1">BarLine, example of overriding</a></td><td valign="top"><a href="#stencil">stencil</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-BarLine_002c-example-of-overriding-2">BarLine, example of overriding</a></td><td valign="top"><a href="#break_002dvisibility">break-visibility</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-BarLine_002c-example-of-overriding-3">BarLine, example of overriding</a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-BarLine_002c-example-of-overriding-4">BarLine, example of overriding</a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-BarLine_002c-example-of-overriding-5">BarLine, example of overriding</a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-BarLine_002c-example-of-overriding-6">BarLine, example of overriding</a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bass">bass</a></td><td valign="top"><a href="#Clef">Clef</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-beam"><code>beam</code></a></td><td valign="top"><a href="#Durations-_0028rhythms_0029">Durations (rhythms)</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-beam-1"><code>beam</code></a></td><td valign="top"><a href="#Automatic-and-manual-beams">2.2.5 Automatic and manual beams</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Beam_002c-example-of-overriding">Beam, example of overriding</a></td><td valign="top"><a href="#positions-property">positions property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-beaming">beaming</a></td><td valign="top"><a href="#Automatic-and-manual-beams">2.2.5 Automatic and manual beams</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-beaming-and-lyrics">beaming and lyrics</a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-beams_002c-automatic">beams, automatic</a></td><td valign="top"><a href="#Automatic-and-manual-beams">2.2.5 Automatic and manual beams</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-beams_002c-by-hand">beams, by hand</a></td><td valign="top"><a href="#Automatic-and-manual-beams">2.2.5 Automatic and manual beams</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-beams_002c-controlling-manually">beams, controlling manually</a></td><td valign="top"><a href="#positions-property">positions property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-beams_002c-manual">beams, manual</a></td><td valign="top"><a href="#Automatic-and-manual-beams">2.2.5 Automatic and manual beams</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-blackness">blackness</a></td><td valign="top"><a href="#Engraving">Engraving</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-block-comment">block comment</a></td><td valign="top"><a href="#Working-on-input-files">2.1.3 Working on input files</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-block-comment-1">block comment</a></td><td valign="top"><a href="#Working-on-input-files">2.1.3 Working on input files</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-book"><code>book</code></a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-book-3"><code>book</code></a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-book-5"><code>book</code></a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-book-block_002c-implicit">book block, implicit</a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-book_002c-example-of-using">book, example of using</a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bound_002ddetails-property_002c-example">bound-details property, example</a></td><td valign="top"><a href="#Outside_002dstaff-objects">4.4.3 Outside-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bound_002ddetails-property_002c-example-1">bound-details property, example</a></td><td valign="top"><a href="#Outside_002dstaff-objects">4.4.3 Outside-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-brace"><code>brace</code></a></td><td valign="top"><a href="#Staff-groups">2.3.3 Staff groups</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-braces_002c-curly">braces, curly</a></td><td valign="top"><a href="#Working-on-input-files">2.1.3 Working on input files</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bracket-types">bracket types</a></td><td valign="top"><a href="#On-the-un_002dnestedness-of-brackets-and-ties">3.1.4 On the un-nestedness of brackets and ties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bracket_002c-triplet">bracket, triplet</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-bracket_002c-tuplet">bracket, tuplet</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-brackets_002c-enclosing-vs_002e-marking">brackets, enclosing vs. marking</a></td><td valign="top"><a href="#On-the-un_002dnestedness-of-brackets-and-ties">3.1.4 On the un-nestedness of brackets and ties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-brackets_002c-nesting">brackets, nesting</a></td><td valign="top"><a href="#On-the-un_002dnestedness-of-brackets-and-ties">3.1.4 On the un-nestedness of brackets and ties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-break_002dvisibility-property">break-visibility property</a></td><td valign="top"><a href="#break_002dvisibility">break-visibility</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-break_002dvisibility-property_002c-example">break-visibility property, example</a></td><td valign="top"><a href="#break_002dvisibility">break-visibility</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-C">C</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-case-sensitive">case sensitive</a></td><td valign="top"><a href="#Compiling-a-file">2.1.1 Compiling a file</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-case-sensitive-1">case sensitive</a></td><td valign="top"><a href="#Working-on-input-files">2.1.3 Working on input files</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-center">center</a></td><td valign="top"><a href="#Within_002dstaff-objects">4.4.2 Within-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Changing-context-default-settings"><code>Changing context default settings</code></a></td><td valign="top"><a href="#See-also-20">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Changing-context-default-settings-1"><code>Changing context default settings</code></a></td><td valign="top"><a href="#See-also-14">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Changing-defaults"><code>Changing defaults</code></a></td><td valign="top"><a href="#About-the-Notation-Reference">About the Notation Reference</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-changing-size-of-objects">changing size of objects</a></td><td valign="top"><a href="#Size-of-objects">4.3.2 Size of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-characters-allowed-in-variables">characters allowed in variables</a></td><td valign="top"><a href="#Organizing-pieces-with-variables">2.5.1 Organizing pieces with variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-charts_002c-reference">charts, reference</a></td><td valign="top"><a href="#About-the-Notation-Reference">About the Notation Reference</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Cheat-sheet"><code>Cheat sheet</code></a></td><td valign="top"><a href="#About-the-Notation-Reference">About the Notation Reference</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-choir-staff">choir staff</a></td><td valign="top"><a href="#Staff-groups">2.3.3 Staff groups</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-choir-staff-1">choir staff</a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ChoirStaff"><code>ChoirStaff</code></a></td><td valign="top"><a href="#Staff-groups">2.3.3 Staff groups</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ChoirStaff-2"><code>ChoirStaff</code></a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-chord"><code>chord</code></a></td><td valign="top"><a href="#Combining-notes-into-chords">2.3.4 Combining notes into chords</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ChordNames"><code>ChordNames</code></a></td><td valign="top"><a href="#Multiple-staves">2.3.2 Multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-chords">chords</a></td><td valign="top"><a href="#Combining-notes-into-chords">2.3.4 Combining notes into chords</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-chords-vs_002e-voices">chords vs. voices</a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Clef"><code>Clef</code></a></td><td valign="top"><a href="#See-also-13">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-clef-1"><code>clef</code></a></td><td valign="top"><a href="#Clef">Clef</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Clef_002c-example-of-overriding">Clef, example of overriding</a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Clef_002c-example-of-overriding-1">Clef, example of overriding</a></td><td valign="top"><a href="#Size-of-objects">4.3.2 Size of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Clef_002c-example-of-overriding-2">Clef, example of overriding</a></td><td valign="top"><a href="#Size-of-objects">4.3.2 Size of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Clef_002c-example-of-overriding-3">Clef, example of overriding</a></td><td valign="top"><a href="#Size-of-objects">4.3.2 Size of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Clef_002c-example-of-overriding-4">Clef, example of overriding</a></td><td valign="top"><a href="#Length-and-thickness-of-objects">4.3.3 Length and thickness of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-clickable-examples">clickable examples</a></td><td valign="top"><a href="#How-to-read-the-manual">2.1.4 How to read the manual</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Collision"><code>Collision</code></a></td><td valign="top"><a href="#Real-music-example">4.5.3 Real music example</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-collisions_002c-notes">collisions, notes</a></td><td valign="top"><a href="#Note-columns">Note columns</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-color-property">color property</a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-color-property_002c-example">color property, example</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-color-property_002c-example-1">color property, example</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-color-property_002c-example-2">color property, example</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-color-property_002c-example-3">color property, example</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-color-property_002c-example-4">color property, example</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-color-property_002c-example-5">color property, example</a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-color-property_002c-example-6">color property, example</a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-color-property_002c-example-7">color property, example</a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-color-property_002c-example-8">color property, example</a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-color-property_002c-setting-to-Scheme-procedure">color property, setting to Scheme procedure</a></td><td valign="top"><a href="#Advanced-tweaks-with-Scheme">4.6.5 Advanced tweaks with Scheme</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-color_002c-rgb">color, rgb</a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-color_002c-X11">color, X11</a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-combining-expressions-in-parallel">combining expressions in parallel</a></td><td valign="top"><a href="#Simultaneous-music-expressions_003a-multiple-staves">Simultaneous music expressions: multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-comma">comma</a></td><td valign="top"><a href="#Pitches">Pitches</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-comment_002c-line">comment, line</a></td><td valign="top"><a href="#Working-on-input-files">2.1.3 Working on input files</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-comment_002c-line-1">comment, line</a></td><td valign="top"><a href="#Working-on-input-files">2.1.3 Working on input files</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-comments">comments</a></td><td valign="top"><a href="#Working-on-input-files">2.1.3 Working on input files</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-comments-1">comments</a></td><td valign="top"><a href="#Working-on-input-files">2.1.3 Working on input files</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-compiling">compiling</a></td><td valign="top"><a href="#Compiling-a-file">2.1.1 Compiling a file</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-compound-music-expression">compound music expression</a></td><td valign="top"><a href="#Music-expressions-explained">2.3.1 Music expressions explained</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-compound-music-expression-1">compound music expression</a></td><td valign="top"><a href="#Score-is-a-_0028single_0029-compound-musical-expression">3.1.2 Score is a (single) compound musical expression</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-concurrent-music">concurrent music</a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-consists"><code>consists</code></a></td><td valign="top"><a href="#Adding-and-removing-engravers">3.3.5 Adding and removing engravers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-constructing-files_002c-tips">constructing files, tips</a></td><td valign="top"><a href="#How-to-read-the-manual">2.1.4 How to read the manual</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-content-vs_002e-layout">content vs. layout</a></td><td valign="top"><a href="#Key-signatures">Key signatures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-contents-of-a-score-block">contents of a score block</a></td><td valign="top"><a href="#Score-is-a-_0028single_0029-compound-musical-expression">3.1.2 Score is a (single) compound musical expression</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-context-1"><code>context</code></a></td><td valign="top"><a href="#Setting-context-properties-with-_005ccontext">Setting context properties with <code>\context</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-context-properties">context properties</a></td><td valign="top"><a href="#Modifying-context-properties">3.3.4 Modifying context properties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-context-properties_002c-modifying">context properties, modifying</a></td><td valign="top"><a href="#Modifying-context-properties">3.3.4 Modifying context properties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-context-properties_002c-setting-with-_005ccontext">context properties, setting with \context</a></td><td valign="top"><a href="#Setting-context-properties-with-_005ccontext">Setting context properties with <code>\context</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-context-properties_002c-setting-with-_005cwith">context properties, setting with \with</a></td><td valign="top"><a href="#Setting-context-properties-with-_005cwith">Setting context properties with <code>\with</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-context_002c-finding">context, finding</a></td><td valign="top"><a href="#Finding-the-context">Finding the context</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-context_002c-identifying-correct">context, identifying correct</a></td><td valign="top"><a href="#Finding-the-context">Finding the context</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-context_002c-notation">context, notation</a></td><td valign="top"><a href="#Multiple-staves">2.3.2 Multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-context_002c-specifying-in-lyric-mode">context, specifying in lyric mode</a></td><td valign="top"><a href="#Specifying-the-context-in-lyric-mode">Specifying the context in lyric mode</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-context_002c-Voice">context, Voice</a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-contexts">contexts</a></td><td valign="top"><a href="#What-symbols-to-engrave_003f">What symbols to engrave?</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Contexts"><code>Contexts</code></a></td><td valign="top"><a href="#See-also-15">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Contexts-1"><code>Contexts</code></a></td><td valign="top"><a href="#Modifying-context-properties">3.3.4 Modifying context properties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Contexts-2"><code>Contexts</code></a></td><td valign="top"><a href="#See-also-20">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Contexts-explained"><code>Contexts explained</code></a></td><td valign="top"><a href="#See-also-6">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-contexts-explained">contexts explained</a></td><td valign="top"><a href="#Contexts-explained">3.3.1 Contexts explained</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-contexts_002c-creating">contexts, creating</a></td><td valign="top"><a href="#Creating-contexts">3.3.2 Creating contexts</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-contexts_002c-implicit">contexts, implicit</a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-contexts_002c-naming">contexts, naming</a></td><td valign="top"><a href="#Creating-contexts">3.3.2 Creating contexts</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-controlling-tuplets_002c-slurs_002c-phrasing-slurs_002c-and-beams-manually">controlling tuplets, slurs, phrasing slurs, and beams manually</a></td><td valign="top"><a href="#positions-property">positions property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-convert_002dly"><code>convert-ly</code></a></td><td valign="top"><a href="#Version-number">2.5.2 Version number</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Converting-from-other-formats"><code>Converting from other formats</code></a></td><td valign="top"><a href="#About-the-Application-Usage">About the Application Usage</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-creating-contexts">creating contexts</a></td><td valign="top"><a href="#Creating-contexts">3.3.2 Creating contexts</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Creating-contexts"><code>Creating contexts</code></a></td><td valign="top"><a href="#See-also-19">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Creating-MIDI-files"><code>Creating MIDI files</code></a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Creating-titles"><code>Creating titles</code></a></td><td valign="top"><a href="#Adding-titles">2.5.3 Adding titles</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-crescendo-1"><code>crescendo</code></a></td><td valign="top"><a href="#Dynamics-1">Dynamics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-curly-braces">curly braces</a></td><td valign="top"><a href="#Working-on-input-files">2.1.3 Working on input files</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-D">D</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-decrescendo-1"><code>decrescendo</code></a></td><td valign="top"><a href="#Dynamics-1">Dynamics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-default-properties_002c-reverting-to">default properties, reverting to</a></td><td valign="top"><a href="#Reverting">Reverting</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Difficult-tweaks"><code>Difficult tweaks</code></a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-direction-property_002c-example">direction property, example</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-direction-property_002c-example-1">direction property, example</a></td><td valign="top"><a href="#Within_002dstaff-objects">4.4.2 Within-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-direction-property_002c-example-2">direction property, example</a></td><td valign="top"><a href="#Fingering">Fingering</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Displaying-staves"><code>Displaying staves</code></a></td><td valign="top"><a href="#See-also-26">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-distances">distances</a></td><td valign="top"><a href="#Length-and-thickness-of-objects">4.3.3 Length and thickness of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dotted-note-1"><code>dotted note</code></a></td><td valign="top"><a href="#Durations-_0028rhythms_0029">Durations (rhythms)</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-double-flat-1"><code>double flat</code></a></td><td valign="top"><a href="#Accidentals">Accidentals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-double-sharp-1"><code>double sharp</code></a></td><td valign="top"><a href="#Accidentals">Accidentals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-down">down</a></td><td valign="top"><a href="#Within_002dstaff-objects">4.4.2 Within-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-duration"><code>duration</code></a></td><td valign="top"><a href="#Durations-_0028rhythms_0029">Durations (rhythms)</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-durations">durations</a></td><td valign="top"><a href="#Durations-_0028rhythms_0029">Durations (rhythms)</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DynamicLineSpanner_002c-example-of-overriding">DynamicLineSpanner, example of overriding</a></td><td valign="top"><a href="#staff_002dpadding-property">staff-padding property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dynamics-1"><code>dynamics</code></a></td><td valign="top"><a href="#Dynamics-1">Dynamics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Dynamics"><code>Dynamics</code></a></td><td valign="top"><a href="#See-also-4">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-dynamics_002c-tweaking-placement">dynamics, tweaking placement</a></td><td valign="top"><a href="#Dynamics">Dynamics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DynamicText_002c-example-of-overriding">DynamicText, example of overriding</a></td><td valign="top"><a href="#Grob-sizing">Grob sizing</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DynamicText_002c-example-of-overriding-1">DynamicText, example of overriding</a></td><td valign="top"><a href="#Grob-sizing">Grob sizing</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-DynamicText_002c-example-of-overriding-2">DynamicText, example of overriding</a></td><td valign="top"><a href="#staff_002dpadding-property">staff-padding property</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-E">E</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-engraver">engraver</a></td><td valign="top"><a href="#What-symbols-to-engrave_003f">What symbols to engrave?</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-engravers">engravers</a></td><td valign="top"><a href="#Engravers-explained">3.3.3 Engravers explained</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Engravers-and-Performers"><code>Engravers and Performers</code></a></td><td valign="top"><a href="#See-also-8">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-engravers_002c-adding">engravers, adding</a></td><td valign="top"><a href="#Adding-and-removing-engravers">3.3.5 Adding and removing engravers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-engravers_002c-removing">engravers, removing</a></td><td valign="top"><a href="#Adding-and-removing-engravers">3.3.5 Adding and removing engravers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-engraving">engraving</a></td><td valign="top"><a href="#Engraving">Engraving</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-engraving-1">engraving</a></td><td valign="top"><a href="#What-symbols-to-engrave_003f">What symbols to engrave?</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-engraving-multiple-voices">engraving multiple voices</a></td><td valign="top"><a href="#What-symbols-to-engrave_003f">What symbols to engrave?</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-engraving_002c-automated">engraving, automated</a></td><td valign="top"><a href="#Automated-engraving">Automated engraving</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-es"><code>es</code></a></td><td valign="top"><a href="#Accidentals">Accidentals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-eses"><code>eses</code></a></td><td valign="top"><a href="#Accidentals">Accidentals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-evaluating-Scheme">evaluating Scheme</a></td><td valign="top"><a href="#Scheme-tutorial">B. Scheme tutorial</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-example-of-writing-a-score">example of writing a score</a></td><td valign="top"><a href="#Building-a-score-from-scratch">3.4.3 Building a score from scratch</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-example_002c-first">example, first</a></td><td valign="top"><a href="#Compiling-a-file">2.1.1 Compiling a file</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-examples_002c-clickable">examples, clickable</a></td><td valign="top"><a href="#How-to-read-the-manual">2.1.4 How to read the manual</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-examples_002c-simple">examples, simple</a></td><td valign="top"><a href="#Example-applications">Example applications</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-expression_002c-music">expression, music</a></td><td valign="top"><a href="#Music-expressions-explained">2.3.1 Music expressions explained</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-expressions">expressions</a></td><td valign="top"><a href="#Working-on-input-files">2.1.3 Working on input files</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-expressions_002c-parallel">expressions, parallel</a></td><td valign="top"><a href="#Simultaneous-music-expressions_003a-multiple-staves">Simultaneous music expressions: multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-extender-line-1"><code>extender line</code></a></td><td valign="top"><a href="#Aligning-lyrics-to-a-melody">2.4.2 Aligning lyrics to a melody</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-extra_002doffset-property">extra-offset property</a></td><td valign="top"><a href="#Moving-objects">4.5.1 Moving objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-extra_002doffset-property_002c-example">extra-offset property, example</a></td><td valign="top"><a href="#extra_002doffset-property">extra-offset property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-extra_002dspacing_002dwidth"><code>extra-spacing-width</code></a></td><td valign="top"><a href="#Grob-sizing">Grob sizing</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-extra_002dspacing_002dwidth-property">extra-spacing-width property</a></td><td valign="top"><a href="#Moving-objects">4.5.1 Moving objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-extra_002dspacing_002dwidth-property_002c-example">extra-spacing-width property, example</a></td><td valign="top"><a href="#Grob-sizing">Grob sizing</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-extra_002dspacing_002dwidth-property_002c-example-1">extra-spacing-width property, example</a></td><td valign="top"><a href="#Grob-sizing">Grob sizing</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-extra_002dspacing_002dwidth-property_002c-example-2">extra-spacing-width property, example</a></td><td valign="top"><a href="#staff_002dpadding-property">staff-padding property</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-F">F</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-FDL_002c-GNU-Free-Documentation-License">FDL, GNU Free Documentation License</a></td><td valign="top"><a href="#GNU-Free-Documentation-License">C. GNU Free Documentation License</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fermata_002c-implementing-in-MIDI">fermata, implementing in MIDI</a></td><td valign="top"><a href="#Simulating-a-fermata-in-MIDI">Simulating a fermata in MIDI</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-file-structure">file structure</a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-File-structure"><code>File structure</code></a></td><td valign="top"><a href="#How-LilyPond-input-files-work">3.1 How LilyPond input files work</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-File-structure-1"><code>File structure</code></a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-File-structure-2"><code>File structure</code></a></td><td valign="top"><a href="#See-also-12">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-files_002c-tips-for-constructing">files, tips for constructing</a></td><td valign="top"><a href="#How-to-read-the-manual">2.1.4 How to read the manual</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-files_002c-updating">files, updating</a></td><td valign="top"><a href="#Version-number">2.5.2 Version number</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fingering-1"><code>fingering</code></a></td><td valign="top"><a href="#Fingerings">Fingerings</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fingering-example">fingering example</a></td><td valign="top"><a href="#Fingering">Fingering</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fingering-example-1">fingering example</a></td><td valign="top"><a href="#Fingering">Fingering</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fingering-example-2">fingering example</a></td><td valign="top"><a href="#Fingering">Fingering</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fingering-example-3">fingering example</a></td><td valign="top"><a href="#Fingering">Fingering</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Fingering-instructions"><code>Fingering instructions</code></a></td><td valign="top"><a href="#See-also-4">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fingering_002c-chords">fingering, chords</a></td><td valign="top"><a href="#Fingering">Fingering</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Fingering_002c-example-of-overriding">Fingering, example of overriding</a></td><td valign="top"><a href="#Fingering">Fingering</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Fingering_002c-example-of-overriding-1">Fingering, example of overriding</a></td><td valign="top"><a href="#extra_002doffset-property">extra-offset property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fingering_002c-placement">fingering, placement</a></td><td valign="top"><a href="#Fingering">Fingering</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fingeringOrientations-property_002c-example">fingeringOrientations property, example</a></td><td valign="top"><a href="#Fingering">Fingering</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-first-example">first example</a></td><td valign="top"><a href="#Compiling-a-file">2.1.1 Compiling a file</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fixing-overlapping-notation">fixing overlapping notation</a></td><td valign="top"><a href="#padding-property">padding property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-flat-1"><code>flat</code></a></td><td valign="top"><a href="#Accidentals">Accidentals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-flat-2"><code>flat</code></a></td><td valign="top"><a href="#Warning_003a-key-signatures-and-pitches">Warning: key signatures and pitches</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-flat_002c-double">flat, double</a></td><td valign="top"><a href="#Accidentals">Accidentals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-font">font</a></td><td valign="top"><a href="#Engraving">Engraving</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-font_002dseries-property_002c-example">font-series property, example</a></td><td valign="top"><a href="#Using-variables-for-tweaks">4.6.2 Using variables for tweaks</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-font_002dshape-property_002c-example">font-shape property, example</a></td><td valign="top"><a href="#Properties-found-in-interfaces">4.2.2 Properties found in interfaces</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-font_002dshape-property_002c-example-1">font-shape property, example</a></td><td valign="top"><a href="#Using-variables-for-tweaks">4.6.2 Using variables for tweaks</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-font_002dsize-property_002c-example">font-size property, example</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-font_002dsize-property_002c-example-1">font-size property, example</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fontSize-property_002c-example">fontSize property, example</a></td><td valign="top"><a href="#Size-of-objects">4.3.2 Size of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fontSize-property_002c-example-1">fontSize property, example</a></td><td valign="top"><a href="#Length-and-thickness-of-objects">4.3.3 Length and thickness of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-fontSize_002c-default-and-setting">fontSize, default and setting</a></td><td valign="top"><a href="#Setting-context-properties-with-_005cwith">Setting context properties with <code>\with</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-force_002dhshift-property">force-hshift property</a></td><td valign="top"><a href="#Moving-objects">4.5.1 Moving objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-force_002dhshift-property_002c-example">force-hshift property, example</a></td><td valign="top"><a href="#force_002dhshift-property">force-hshift property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-force_002dhshift-property_002c-example-1">force-hshift property, example</a></td><td valign="top"><a href="#Real-music-example">4.5.3 Real music example</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-foreign-languages">foreign languages</a></td><td valign="top"><a href="#About-the-Music-Glossary">About the Music Glossary</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-formatting-a-score">formatting a score</a></td><td valign="top"><a href="#Automated-engraving">Automated engraving</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-formatting-rules">formatting rules</a></td><td valign="top"><a href="#Automated-engraving">Automated engraving</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-future-upgrades">future upgrades</a></td><td valign="top"><a href="#Version-number">2.5.2 Version number</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-G">G</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-General-input-and-output"><code>General input and output</code></a></td><td valign="top"><a href="#About-the-Notation-Reference">About the Notation Reference</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-grace"><code>grace</code></a></td><td valign="top"><a href="#Grace-notes">Grace notes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Grace-notes"><code>Grace notes</code></a></td><td valign="top"><a href="#See-also">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-grace-notes-1"><code>grace notes</code></a></td><td valign="top"><a href="#Grace-notes">Grace notes</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-grand-staff">grand staff</a></td><td valign="top"><a href="#Staff-groups">2.3.3 Staff groups</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GrandStaff"><code>GrandStaff</code></a></td><td valign="top"><a href="#Staff-groups">2.3.3 Staff groups</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-grob">grob</a></td><td valign="top"><a href="#Objects-and-interfaces">4.1.2 Objects and interfaces</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-grob-sizing">grob sizing</a></td><td valign="top"><a href="#Grob-sizing">Grob sizing</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-grobs_002c-moving-colliding">grobs, moving colliding</a></td><td valign="top"><a href="#Moving-objects">4.5.1 Moving objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-grobs_002c-positioning">grobs, positioning</a></td><td valign="top"><a href="#extra_002doffset-property">extra-offset property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-grobs_002c-properties-of">grobs, properties of</a></td><td valign="top"><a href="#Properties-of-layout-objects">4.2.1 Properties of layout objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-GUILE">GUILE</a></td><td valign="top"><a href="#Scheme-tutorial">B. Scheme tutorial</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-H">H</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-half-note-1"><code>half note</code></a></td><td valign="top"><a href="#Durations-_0028rhythms_0029">Durations (rhythms)</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-header"><code>header</code></a></td><td valign="top"><a href="#Adding-titles">2.5.3 Adding titles</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-header-2"><code>header</code></a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-header-block">header block</a></td><td valign="top"><a href="#Adding-titles">2.5.3 Adding titles</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-headers">headers</a></td><td valign="top"><a href="#Adding-titles">2.5.3 Adding titles</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-hiding-objects">hiding objects</a></td><td valign="top"><a href="#Other-uses-for-tweaks">4.6.1 Other uses for tweaks</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-how-to-read-the-manual">how to read the manual</a></td><td valign="top"><a href="#How-to-read-the-manual">2.1.4 How to read the manual</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-hymn-structure">hymn structure</a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-hyphens">hyphens</a></td><td valign="top"><a href="#Aligning-lyrics-to-a-melody">2.4.2 Aligning lyrics to a melody</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-I">I</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-identifiers">identifiers</a></td><td valign="top"><a href="#Organizing-pieces-with-variables">2.5.1 Organizing pieces with variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-idiom">idiom</a></td><td valign="top"><a href="#About-the-Music-Glossary">About the Music Glossary</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-implicit-book-block">implicit book block</a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-implicit-contexts">implicit contexts</a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-input-format">input format</a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Install"><code>Install</code></a></td><td valign="top"><a href="#About-the-Application-Usage">About the Application Usage</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-integrating-LilyPond-with-other-programs">integrating LilyPond with other programs</a></td><td valign="top"><a href="#About-the-Application-Usage">About the Application Usage</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-interface">interface</a></td><td valign="top"><a href="#Objects-and-interfaces">4.1.2 Objects and interfaces</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-interface-1">interface</a></td><td valign="top"><a href="#Objects-and-interfaces">4.1.2 Objects and interfaces</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-interface-2">interface</a></td><td valign="top"><a href="#Properties-found-in-interfaces">4.2.2 Properties found in interfaces</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-interface-properties">interface properties</a></td><td valign="top"><a href="#Properties-found-in-interfaces">4.2.2 Properties found in interfaces</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Interfaces-for-programmers"><code>Interfaces for programmers</code></a></td><td valign="top"><a href="#About-the-Notation-Reference">About the Notation Reference</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Interfaces-for-programmers-1"><code>Interfaces for programmers</code></a></td><td valign="top"><a href="#Tweaking-with-Scheme">B.1 Tweaking with Scheme</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Internals-Reference">Internals Reference</a></td><td valign="top"><a href="#About-the-documentation">1.2 About the documentation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Internals-Reference-1">Internals Reference</a></td><td valign="top"><a href="#About-the-Internals-Reference">About the Internals Reference</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Internals-Reference-2">Internals Reference</a></td><td valign="top"><a href="#The-Internals-Reference-manual">4.2 The Internals Reference manual</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Internals-Reference-manual">Internals Reference manual</a></td><td valign="top"><a href="#Properties-of-layout-objects">4.2.1 Properties of layout objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Internals-Reference_002c-example-of-using">Internals Reference, example of using</a></td><td valign="top"><a href="#Properties-of-layout-objects">4.2.1 Properties of layout objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-interval"><code>interval</code></a></td><td valign="top"><a href="#Pitches">Pitches</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-invisible-objects">invisible objects</a></td><td valign="top"><a href="#Other-uses-for-tweaks">4.6.1 Other uses for tweaks</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-is"><code>is</code></a></td><td valign="top"><a href="#Accidentals">Accidentals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-isis"><code>isis</code></a></td><td valign="top"><a href="#Accidentals">Accidentals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-italic_002c-example">italic, example</a></td><td valign="top"><a href="#Properties-found-in-interfaces">4.2.2 Properties found in interfaces</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-J">J</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-jargon">jargon</a></td><td valign="top"><a href="#About-the-Music-Glossary">About the Music Glossary</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-K">K</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-key"><code>key</code></a></td><td valign="top"><a href="#Key-signatures">Key signatures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-key-signature-1"><code>key signature</code></a></td><td valign="top"><a href="#Key-signatures">Key signatures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Key-signature"><code>Key signature</code></a></td><td valign="top"><a href="#See-also-2">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-key-signature-2"><code>key signature</code></a></td><td valign="top"><a href="#Warning_003a-key-signatures-and-pitches">Warning: key signatures and pitches</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-key-signature_002c-setting">key signature, setting</a></td><td valign="top"><a href="#Accidentals">Accidentals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Keyboard-and-other-multi_002dstaff"><code>Keyboard and other multi-staff</code></a></td><td valign="top"><a href="#See-also-26">See also</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-L">L</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-language">language</a></td><td valign="top"><a href="#About-the-Music-Glossary">About the Music Glossary</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-layers">layers</a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-layout"><code>layout</code></a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-layout-3"><code>layout</code></a></td><td valign="top"><a href="#Changing-all-contexts-of-the-same-type">Changing all contexts of the same type</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-layout-block_002c-effect-of-location">layout block, effect of location</a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-layout-object">layout object</a></td><td valign="top"><a href="#Objects-and-interfaces">4.1.2 Objects and interfaces</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-layout-objects_002c-properties-of">layout objects, properties of</a></td><td valign="top"><a href="#Properties-of-layout-objects">4.2.1 Properties of layout objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-layout-vs_002e-content">layout vs. content</a></td><td valign="top"><a href="#Key-signatures">Key signatures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Learning-Manual">Learning Manual</a></td><td valign="top"><a href="#About-the-documentation">1.2 About the documentation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Learning-Manual-1">Learning Manual</a></td><td valign="top"><a href="#About-the-Learning-Manual">About the Learning Manual</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-left_002dpadding-property">left-padding property</a></td><td valign="top"><a href="#Moving-objects">4.5.1 Moving objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-left_002dpadding-property-1">left-padding property</a></td><td valign="top"><a href="#left_002dpadding-and-right_002dpadding">left-padding and right-padding</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-length">length</a></td><td valign="top"><a href="#Length-and-thickness-of-objects">4.3.3 Length and thickness of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LilyPond-command-index"><code>LilyPond command index</code></a></td><td valign="top"><a href="#About-the-Notation-Reference">About the Notation Reference</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LilyPond-index"><code>LilyPond index</code></a></td><td valign="top"><a href="#About-the-Notation-Reference">About the Notation Reference</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LilyPond-Snippet-Repository">LilyPond Snippet Repository</a></td><td valign="top"><a href="#About-the-Snippet-List">About the Snippet List</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LilyPond_002dbook"><code>LilyPond-book</code></a></td><td valign="top"><a href="#About-the-Application-Usage">About the Application Usage</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LilyPond_002dbook-1"><code>LilyPond-book</code></a></td><td valign="top"><a href="#lilypond_002dbook-templates">A.7 lilypond-book templates</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-line-comment">line comment</a></td><td valign="top"><a href="#Working-on-input-files">2.1.3 Working on input files</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-line-comment-1">line comment</a></td><td valign="top"><a href="#Working-on-input-files">2.1.3 Working on input files</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LISP">LISP</a></td><td valign="top"><a href="#Scheme-tutorial">B. Scheme tutorial</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-List-of-colors"><code>List of colors</code></a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-List-of-colors-1"><code>List of colors</code></a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Literature-list"><code>Literature list</code></a></td><td valign="top"><a href="#About-the-Notation-Reference">About the Notation Reference</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LSR">LSR</a></td><td valign="top"><a href="#About-the-Snippet-List">About the Snippet List</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lyric-mode_002c-specifying-context">lyric mode, specifying context</a></td><td valign="top"><a href="#Specifying-the-context-in-lyric-mode">Specifying the context in lyric mode</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lyricmode"><code>lyricmode</code></a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Lyrics"><code>Lyrics</code></a></td><td valign="top"><a href="#Multiple-staves">2.3.2 Multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lyrics-1"><code>lyrics</code></a></td><td valign="top"><a href="#Setting-simple-songs">2.4.1 Setting simple songs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Lyrics-2"><code>Lyrics</code></a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lyrics-and-beaming">lyrics and beaming</a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lyrics-and-multiple-staves">lyrics and multiple staves</a></td><td valign="top"><a href="#Lyrics-to-multiple-staves">2.4.3 Lyrics to multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Lyrics-context_002c-creating">Lyrics context, creating</a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lyrics_002c-aligning">lyrics, aligning</a></td><td valign="top"><a href="#Aligning-lyrics-to-a-melody">2.4.2 Aligning lyrics to a melody</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lyrics_002c-linking-to-voice">lyrics, linking to voice</a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lyrics_002c-multi_002dsyllable-words">lyrics, multi-syllable words</a></td><td valign="top"><a href="#Aligning-lyrics-to-a-melody">2.4.2 Aligning lyrics to a melody</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-lyricsto"><code>lyricsto</code></a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LyricText_002c-example-of-overriding">LyricText, example of overriding</a></td><td valign="top"><a href="#Properties-found-in-interfaces">4.2.2 Properties found in interfaces</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-LyricText_002c-example-of-overriding-1">LyricText, example of overriding</a></td><td valign="top"><a href="#Using-variables-for-tweaks">4.6.2 Using variables for tweaks</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-M">M</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-MacOS-X_002c-running-LilyPond">MacOS X, running LilyPond</a></td><td valign="top"><a href="#Entering-music-and-viewing-output">Entering music and viewing output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-macros">macros</a></td><td valign="top"><a href="#Organizing-pieces-with-variables">2.5.1 Organizing pieces with variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-magstep">magstep</a></td><td valign="top"><a href="#Length-and-thickness-of-objects">4.3.3 Length and thickness of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-magstep-function_002c-example-of-using">magstep function, example of using</a></td><td valign="top"><a href="#Length-and-thickness-of-objects">4.3.3 Length and thickness of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-major-1"><code>major</code></a></td><td valign="top"><a href="#Key-signatures">Key signatures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Manual-beams"><code>Manual beams</code></a></td><td valign="top"><a href="#See-also-7">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-manual-beams">manual beams</a></td><td valign="top"><a href="#Automatic-and-manual-beams">2.2.5 Automatic and manual beams</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-manual_002c-reading">manual, reading</a></td><td valign="top"><a href="#How-to-read-the-manual">2.1.4 How to read the manual</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-manually-controlling-tuplets_002c-slurs_002c-phrasing-slurs_002c-and-beams">manually controlling tuplets, slurs, phrasing slurs, and beams</a></td><td valign="top"><a href="#positions-property">positions property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-markup-1"><code>markup</code></a></td><td valign="top"><a href="#Adding-text">2.2.4 Adding text</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-markup-example">markup example</a></td><td valign="top"><a href="#Automatic-behavior">4.4.1 Automatic behavior</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-markup-text_002c-allowing-collisions">markup text, allowing collisions</a></td><td valign="top"><a href="#g_t_005ctextLengthOn">\textLengthOn</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-melisma-1"><code>melisma</code></a></td><td valign="top"><a href="#Aligning-lyrics-to-a-melody">2.4.2 Aligning lyrics to a melody</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-metronome-mark_002c-tweaking-placement">metronome mark, tweaking placement</a></td><td valign="top"><a href="#Outside_002dstaff-objects">4.4.3 Outside-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MetronomeMark_002c-example-of-overriding">MetronomeMark, example of overriding</a></td><td valign="top"><a href="#padding-property">padding property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MetronomeMark_002c-example-of-overriding-1">MetronomeMark, example of overriding</a></td><td valign="top"><a href="#Simulating-a-fermata-in-MIDI">Simulating a fermata in MIDI</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MetronomeMark_002c-example-of-overriding-2">MetronomeMark, example of overriding</a></td><td valign="top"><a href="#Simulating-a-fermata-in-MIDI">Simulating a fermata in MIDI</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-middle-C"><code>middle C</code></a></td><td valign="top"><a href="#Pitches">Pitches</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-midi"><code>midi</code></a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-minor-1"><code>minor</code></a></td><td valign="top"><a href="#Key-signatures">Key signatures</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Modifying-context-plug_002dins"><code>Modifying context plug-ins</code></a></td><td valign="top"><a href="#See-also-14">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-modifying-context-properties">modifying context properties</a></td><td valign="top"><a href="#Modifying-context-properties">3.3.4 Modifying context properties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Modifying-properties"><code>Modifying properties</code></a></td><td valign="top"><a href="#padding-property">padding property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-modifying-templates">modifying templates</a></td><td valign="top"><a href="#Soprano-and-cello">3.4.1 Soprano and cello</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-moving-colliding-grobs">moving colliding grobs</a></td><td valign="top"><a href="#Moving-objects">4.5.1 Moving objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-moving-colliding-objects">moving colliding objects</a></td><td valign="top"><a href="#Moving-objects">4.5.1 Moving objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-moving-overlapping-objects">moving overlapping objects</a></td><td valign="top"><a href="#Moving-objects">4.5.1 Moving objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-MultiMeasureRest_002c-example-of-overriding">MultiMeasureRest, example of overriding</a></td><td valign="top"><a href="#staff_002dposition-property">staff-position property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Multiple-scores-in-a-book"><code>Multiple scores in a book</code></a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-multiple-staves">multiple staves</a></td><td valign="top"><a href="#Simultaneous-music-expressions_003a-multiple-staves">Simultaneous music expressions: multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-multiple-staves-1">multiple staves</a></td><td valign="top"><a href="#Multiple-staves">2.3.2 Multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-multiple-staves-and-lyrics">multiple staves and lyrics</a></td><td valign="top"><a href="#Lyrics-to-multiple-staves">2.4.3 Lyrics to multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-multiple-vocal-verses">multiple vocal verses</a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-multiple-voices">multiple voices</a></td><td valign="top"><a href="#Single-staff-polyphony">2.3.5 Single staff polyphony</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Multiple-voices"><code>Multiple voices</code></a></td><td valign="top"><a href="#See-also-3">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-multiple-voices-1">multiple voices</a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Multiple-voices-1"><code>Multiple voices</code></a></td><td valign="top"><a href="#See-also-22">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-music-engraving">music engraving</a></td><td valign="top"><a href="#Engraving">Engraving</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-music-expression">music expression</a></td><td valign="top"><a href="#Music-expressions-explained">2.3.1 Music expressions explained</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-music-expression_002c-compound">music expression, compound</a></td><td valign="top"><a href="#Music-expressions-explained">2.3.1 Music expressions explained</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-music-expression_002c-compound-1">music expression, compound</a></td><td valign="top"><a href="#Score-is-a-_0028single_0029-compound-musical-expression">3.1.2 Score is a (single) compound musical expression</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Music-Glossary">Music Glossary</a></td><td valign="top"><a href="#About-the-documentation">1.2 About the documentation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Music-Glossary-1">Music Glossary</a></td><td valign="top"><a href="#About-the-Music-Glossary">About the Music Glossary</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-music-typography">music typography</a></td><td valign="top"><a href="#Engraving">Engraving</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-music_002c-concurrent">music, concurrent</a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-music_002c-simultaneous">music, simultaneous</a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Musical-notation"><code>Musical notation</code></a></td><td valign="top"><a href="#About-the-Notation-Reference">About the Notation Reference</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Musical-notation-1"><code>Musical notation</code></a></td><td valign="top"><a href="#After-the-tutorial">2.5.5 After the tutorial</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-musical-symbols">musical symbols</a></td><td valign="top"><a href="#Engraving">Engraving</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-N">N</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-naming-contexts">naming contexts</a></td><td valign="top"><a href="#Creating-contexts">3.3.2 Creating contexts</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-naming-conventions-for-objects">naming conventions for objects</a></td><td valign="top"><a href="#Naming-conventions-of-objects-and-properties">4.1.3 Naming conventions of objects and properties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-naming-conventions-for-properties">naming conventions for properties</a></td><td valign="top"><a href="#Naming-conventions-of-objects-and-properties">4.1.3 Naming conventions of objects and properties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-natural"><code>natural</code></a></td><td valign="top"><a href="#Warning_003a-key-signatures-and-pitches">Warning: key signatures and pitches</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-nesting-music-expressions">nesting music expressions</a></td><td valign="top"><a href="#Explicitly-instantiating-voices">3.2.2 Explicitly instantiating voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-nesting-simultaneous-constructs">nesting simultaneous constructs</a></td><td valign="top"><a href="#Explicitly-instantiating-voices">3.2.2 Explicitly instantiating voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-nesting-voices">nesting voices</a></td><td valign="top"><a href="#Explicitly-instantiating-voices">3.2.2 Explicitly instantiating voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-neutral">neutral</a></td><td valign="top"><a href="#Within_002dstaff-objects">4.4.2 Within-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-new"><code>new</code></a></td><td valign="top"><a href="#Multiple-staves">2.3.2 Multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-new-2"><code>new</code></a></td><td valign="top"><a href="#Creating-contexts">3.3.2 Creating contexts</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-new-contexts">new contexts</a></td><td valign="top"><a href="#Creating-contexts">3.3.2 Creating contexts</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-new-Staff"><code>new Staff</code></a></td><td valign="top"><a href="#Multiple-staves">2.3.2 Multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-notating-durations">notating durations</a></td><td valign="top"><a href="#Durations-_0028rhythms_0029">Durations (rhythms)</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-notating-rests">notating rests</a></td><td valign="top"><a href="#Rests">Rests</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-notation-context">notation context</a></td><td valign="top"><a href="#Multiple-staves">2.3.2 Multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Notation-manual-tables"><code>Notation manual tables</code></a></td><td valign="top"><a href="#About-the-Notation-Reference">About the Notation Reference</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Notation-Reference">Notation Reference</a></td><td valign="top"><a href="#About-the-documentation">1.2 About the documentation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Notation-Reference-1">Notation Reference</a></td><td valign="top"><a href="#About-the-Notation-Reference">About the Notation Reference</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-notation_002c-simple">notation, simple</a></td><td valign="top"><a href="#Simple-notation">2.1.2 Simple notation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-note-collisions">note collisions</a></td><td valign="top"><a href="#Note-columns">Note columns</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-note-column">note column</a></td><td valign="top"><a href="#Note-columns">Note columns</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-note-durations">note durations</a></td><td valign="top"><a href="#Durations-_0028rhythms_0029">Durations (rhythms)</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-note-durations-in-chords">note durations in chords</a></td><td valign="top"><a href="#Combining-notes-into-chords">2.3.4 Combining notes into chords</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-note-names">note names</a></td><td valign="top"><a href="#Absolute-note-names">2.5.4 Absolute note names</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Note-names-in-other-languages"><code>Note names in other languages</code></a></td><td valign="top"><a href="#Accidentals">Accidentals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Note-names-in-other-languages-1"><code>Note names in other languages</code></a></td><td valign="top"><a href="#See-also-2">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-note-names_002c-absolute">note names, absolute</a></td><td valign="top"><a href="#Absolute-note-names">2.5.4 Absolute note names</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-note-value"><code>note value</code></a></td><td valign="top"><a href="#Tuplets">Tuplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-NoteColumn_002c-example-of-overriding">NoteColumn, example of overriding</a></td><td valign="top"><a href="#force_002dhshift-property">force-hshift property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-NoteColumn_002c-example-of-overriding-1">NoteColumn, example of overriding</a></td><td valign="top"><a href="#Real-music-example">4.5.3 Real music example</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-NoteHead_002c-example-of-overriding">NoteHead, example of overriding</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-NoteHead_002c-example-of-overriding-1">NoteHead, example of overriding</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-NoteHead_002c-example-of-overriding-2">NoteHead, example of overriding</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-NoteHead_002c-example-of-overriding-3">NoteHead, example of overriding</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-NoteHead_002c-example-of-overriding-4">NoteHead, example of overriding</a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-NoteHead_002c-example-of-overriding-5">NoteHead, example of overriding</a></td><td valign="top"><a href="#Advanced-tweaks-with-Scheme">4.6.5 Advanced tweaks with Scheme</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-notes_002c-spreading-out-with-text">notes, spreading out with text</a></td><td valign="top"><a href="#g_t_005ctextLengthOn">\textLengthOn</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-O">O</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-object">object</a></td><td valign="top"><a href="#Objects-and-interfaces">4.1.2 Objects and interfaces</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-object-collision-within-a-staff">object collision within a staff</a></td><td valign="top"><a href="#staff_002dposition-property">staff-position property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-object-properties">object properties</a></td><td valign="top"><a href="#Objects-and-interfaces">4.1.2 Objects and interfaces</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-object_002c-layout">object, layout</a></td><td valign="top"><a href="#Objects-and-interfaces">4.1.2 Objects and interfaces</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-objects_002c-aligning-on-a-baseline">objects, aligning on a baseline</a></td><td valign="top"><a href="#staff_002dpadding-property">staff-padding property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-objects_002c-changing-size-of">objects, changing size of</a></td><td valign="top"><a href="#Size-of-objects">4.3.2 Size of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-objects_002c-hiding">objects, hiding</a></td><td valign="top"><a href="#Other-uses-for-tweaks">4.6.1 Other uses for tweaks</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-objects_002c-invisible">objects, invisible</a></td><td valign="top"><a href="#Other-uses-for-tweaks">4.6.1 Other uses for tweaks</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-objects_002c-making-invisible">objects, making invisible</a></td><td valign="top"><a href="#Other-uses-for-tweaks">4.6.1 Other uses for tweaks</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-objects_002c-moving-colliding">objects, moving colliding</a></td><td valign="top"><a href="#Moving-objects">4.5.1 Moving objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-objects_002c-naming-conventions">objects, naming conventions</a></td><td valign="top"><a href="#Naming-conventions-of-objects-and-properties">4.1.3 Naming conventions of objects and properties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-objects_002c-outside_002dstaff">objects, outside-staff</a></td><td valign="top"><a href="#Automatic-behavior">4.4.1 Automatic behavior</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-objects_002c-positioning">objects, positioning</a></td><td valign="top"><a href="#extra_002doffset-property">extra-offset property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-objects_002c-removing">objects, removing</a></td><td valign="top"><a href="#Other-uses-for-tweaks">4.6.1 Other uses for tweaks</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-objects_002c-size-of">objects, size of</a></td><td valign="top"><a href="#Size-of-objects">4.3.2 Size of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-objects_002c-within_002dstaff">objects, within-staff</a></td><td valign="top"><a href="#Automatic-behavior">4.4.1 Automatic behavior</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-octave"><code>octave</code></a></td><td valign="top"><a href="#Pitches">Pitches</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Octave-checks"><code>Octave checks</code></a></td><td valign="top"><a href="#General-suggestions">5.1.1 General suggestions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-once"><code>once</code></a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-once-2"><code>once</code></a></td><td valign="top"><a href="#Overriding-once-only">Overriding once only</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-once-override">once override</a></td><td valign="top"><a href="#Overriding-once-only">Overriding once only</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-oneVoice"><code>oneVoice</code></a></td><td valign="top"><a href="#Explicitly-instantiating-voices">3.2.2 Explicitly instantiating voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-optical-spacing">optical spacing</a></td><td valign="top"><a href="#Engraving">Engraving</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ossia"><code>ossia</code></a></td><td valign="top"><a href="#Nesting-music-expressions">3.1.3 Nesting music expressions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ossia-1"><code>ossia</code></a></td><td valign="top"><a href="#Size-of-objects">4.3.2 Size of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Ossia-staves"><code>Ossia staves</code></a></td><td valign="top"><a href="#See-also-27">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ossias">ossias</a></td><td valign="top"><a href="#Nesting-music-expressions">3.1.3 Nesting music expressions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ottava-bracket">ottava bracket</a></td><td valign="top"><a href="#Outside_002dstaff-objects">4.4.3 Outside-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-outside_002dstaff-objects">outside-staff objects</a></td><td valign="top"><a href="#Automatic-behavior">4.4.1 Automatic behavior</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-outside_002dstaff_002dpriority-property_002c-example">outside-staff-priority property, example</a></td><td valign="top"><a href="#Outside_002dstaff-objects">4.4.3 Outside-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-outside_002dstaff_002dpriority-property_002c-example-1">outside-staff-priority property, example</a></td><td valign="top"><a href="#g_t_005ctextLengthOn">\textLengthOn</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-overlapping-notation">overlapping notation</a></td><td valign="top"><a href="#padding-property">padding property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-override"><code>override</code></a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-override-command">override command</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-override-example">override example</a></td><td valign="top"><a href="#Properties-of-layout-objects">4.2.1 Properties of layout objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-override-syntax">override syntax</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-overrideProperty"><code>overrideProperty</code></a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-overrideProperty-command">overrideProperty command</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-overriding-once-only">overriding once only</a></td><td valign="top"><a href="#Overriding-once-only">Overriding once only</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-P">P</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-padding">padding</a></td><td valign="top"><a href="#Moving-objects">4.5.1 Moving objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-padding-1">padding</a></td><td valign="top"><a href="#padding-property">padding property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-padding-property">padding property</a></td><td valign="top"><a href="#Moving-objects">4.5.1 Moving objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-padding-property_002c-example">padding property, example</a></td><td valign="top"><a href="#padding-property">padding property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-padding-property_002c-example-1">padding property, example</a></td><td valign="top"><a href="#padding-property">padding property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Painting-objects-white"><code>Painting objects white</code></a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-parallel-expressions">parallel expressions</a></td><td valign="top"><a href="#Simultaneous-music-expressions_003a-multiple-staves">Simultaneous music expressions: multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-parallel-expressions-and-relative-notes">parallel expressions and relative notes</a></td><td valign="top"><a href="#Simultaneous-music-expressions_003a-multiple-staves">Simultaneous music expressions: multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-partial"><code>partial</code></a></td><td valign="top"><a href="#Partial-measure">Partial measure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-partial-measure">partial measure</a></td><td valign="top"><a href="#Partial-measure">Partial measure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PDF-file">PDF file</a></td><td valign="top"><a href="#Entering-music-and-viewing-output">Entering music and viewing output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-phrasing"><code>phrasing</code></a></td><td valign="top"><a href="#Phrasing-slurs">Phrasing slurs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-phrasing-slur">phrasing slur</a></td><td valign="top"><a href="#Ties-and-slurs">2.2.2 Ties and slurs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Phrasing-slurs"><code>Phrasing slurs</code></a></td><td valign="top"><a href="#See-also-23">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-phrasing-slurs_002c-controlling-manually">phrasing slurs, controlling manually</a></td><td valign="top"><a href="#positions-property">positions property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PhrasingSlur_002c-example-of-overriding">PhrasingSlur, example of overriding</a></td><td valign="top"><a href="#positions-property">positions property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-piano-staff">piano staff</a></td><td valign="top"><a href="#Staff-groups">2.3.3 Staff groups</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-PianoStaff"><code>PianoStaff</code></a></td><td valign="top"><a href="#Staff-groups">2.3.3 Staff groups</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pickup">pickup</a></td><td valign="top"><a href="#Partial-measure">Partial measure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pitch"><code>pitch</code></a></td><td valign="top"><a href="#Pitches">Pitches</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pitch-1"><code>pitch</code></a></td><td valign="top"><a href="#Warning_003a-key-signatures-and-pitches">Warning: key signatures and pitches</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Pitch-names"><code>Pitch names</code></a></td><td valign="top"><a href="#See-also-2">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pitches">pitches</a></td><td valign="top"><a href="#Pitches">Pitches</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-pitches_002c-absolute-values">pitches, absolute values</a></td><td valign="top"><a href="#Absolute-note-names">2.5.4 Absolute note names</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-plate-engraving">plate engraving</a></td><td valign="top"><a href="#Engraving">Engraving</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-plug_002din">plug-in</a></td><td valign="top"><a href="#What-symbols-to-engrave_003f">What symbols to engrave?</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-polyphony-2"><code>polyphony</code></a></td><td valign="top"><a href="#Simultaneous-music-expressions_003a-multiple-staves">Simultaneous music expressions: multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-polyphony-1">polyphony</a></td><td valign="top"><a href="#Simultaneous-music-expressions_003a-multiple-staves">Simultaneous music expressions: multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-polyphony-3">polyphony</a></td><td valign="top"><a href="#Single-staff-polyphony">2.3.5 Single staff polyphony</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-polyphony-4">polyphony</a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-polyphony-and-relative-note-entry">polyphony and relative note entry</a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-positioning-grobs">positioning grobs</a></td><td valign="top"><a href="#extra_002doffset-property">extra-offset property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-positioning-objects">positioning objects</a></td><td valign="top"><a href="#extra_002doffset-property">extra-offset property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-positions-property">positions property</a></td><td valign="top"><a href="#Moving-objects">4.5.1 Moving objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-positions-property_002c-example">positions property, example</a></td><td valign="top"><a href="#positions-property">positions property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-positions-property_002c-example-1">positions property, example</a></td><td valign="top"><a href="#positions-property">positions property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-properties-in-interfaces">properties in interfaces</a></td><td valign="top"><a href="#Properties-found-in-interfaces">4.2.2 Properties found in interfaces</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-properties-of-grobs">properties of grobs</a></td><td valign="top"><a href="#Properties-of-layout-objects">4.2.1 Properties of layout objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-properties-of-layout-objects">properties of layout objects</a></td><td valign="top"><a href="#Properties-of-layout-objects">4.2.1 Properties of layout objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-properties-operating-in-contexts">properties operating in contexts</a></td><td valign="top"><a href="#Modifying-context-properties">3.3.4 Modifying context properties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-properties-vs_002e-variables">properties vs. variables</a></td><td valign="top"><a href="#Scheme-tutorial">B. Scheme tutorial</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-properties_002c-naming-conventions">properties, naming conventions</a></td><td valign="top"><a href="#Naming-conventions-of-objects-and-properties">4.1.3 Naming conventions of objects and properties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-properties_002c-object">properties, object</a></td><td valign="top"><a href="#Objects-and-interfaces">4.1.2 Objects and interfaces</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-property-types">property types</a></td><td valign="top"><a href="#Types-of-properties">4.2.3 Types of properties</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-Q">Q</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-quarter-note-1"><code>quarter note</code></a></td><td valign="top"><a href="#Durations-_0028rhythms_0029">Durations (rhythms)</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-quote_002c-single">quote, single</a></td><td valign="top"><a href="#Pitches">Pitches</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-quoting-in-Scheme">quoting in Scheme</a></td><td valign="top"><a href="#Scheme-tutorial">B. Scheme tutorial</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-R">R</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-reading-the-manual">reading the manual</a></td><td valign="top"><a href="#How-to-read-the-manual">2.1.4 How to read the manual</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-recursive-structures">recursive structures</a></td><td valign="top"><a href="#Music-representation">Music representation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-reference-charts">reference charts</a></td><td valign="top"><a href="#About-the-Notation-Reference">About the Notation Reference</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-regular-rhythms">regular rhythms</a></td><td valign="top"><a href="#Engraving">Engraving</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-regular-spacing">regular spacing</a></td><td valign="top"><a href="#Engraving">Engraving</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-rehearsal-marks_002c-tweaking-placement">rehearsal marks, tweaking placement</a></td><td valign="top"><a href="#Outside_002dstaff-objects">4.4.3 Outside-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-relative"><code>relative</code></a></td><td valign="top"><a href="#Pitches">Pitches</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-relative-mode">relative mode</a></td><td valign="top"><a href="#Pitches">Pitches</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-relative-mode_002c-and-accidentals">relative mode, and accidentals</a></td><td valign="top"><a href="#Pitches">Pitches</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-relative-note-entry-and-polyphony">relative note entry and polyphony</a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-relative-notes-and-parallel-expressions">relative notes and parallel expressions</a></td><td valign="top"><a href="#Simultaneous-music-expressions_003a-multiple-staves">Simultaneous music expressions: multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-relative-notes-and-simultaneous-music">relative notes and simultaneous music</a></td><td valign="top"><a href="#Simultaneous-music-expressions_003a-multiple-staves">Simultaneous music expressions: multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-remove"><code>remove</code></a></td><td valign="top"><a href="#Adding-and-removing-engravers">3.3.5 Adding and removing engravers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-removing-engravers">removing engravers</a></td><td valign="top"><a href="#Adding-and-removing-engravers">3.3.5 Adding and removing engravers</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-removing-objects">removing objects</a></td><td valign="top"><a href="#Other-uses-for-tweaks">4.6.1 Other uses for tweaks</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-rest-1"><code>rest</code></a></td><td valign="top"><a href="#Rests">Rests</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-rest_002c-spacer">rest, spacer</a></td><td valign="top"><a href="#Single-staff-polyphony">2.3.5 Single staff polyphony</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-revert"><code>revert</code></a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-revert-3"><code>revert</code></a></td><td valign="top"><a href="#Reverting">Reverting</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-revert-command">revert command</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-reverting-to-a-single-voice">reverting to a single voice</a></td><td valign="top"><a href="#Explicitly-instantiating-voices">3.2.2 Explicitly instantiating voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-rgb-colors">rgb colors</a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-rgb_002dcolor"><code>rgb-color</code></a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-rhythms">rhythms</a></td><td valign="top"><a href="#Durations-_0028rhythms_0029">Durations (rhythms)</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-right_002dpadding-property">right-padding property</a></td><td valign="top"><a href="#Moving-objects">4.5.1 Moving objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-right_002dpadding-property-1">right-padding property</a></td><td valign="top"><a href="#left_002dpadding-and-right_002dpadding">left-padding and right-padding</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-right_002dpadding-property_002c-example">right-padding property, example</a></td><td valign="top"><a href="#left_002dpadding-and-right_002dpadding">left-padding and right-padding</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Running-LilyPond"><code>Running LilyPond</code></a></td><td valign="top"><a href="#About-the-Application-Usage">About the Application Usage</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-running-LilyPond-under-MacOS-X">running LilyPond under MacOS X</a></td><td valign="top"><a href="#Entering-music-and-viewing-output">Entering music and viewing output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-running-LilyPond-under-Unix">running LilyPond under Unix</a></td><td valign="top"><a href="#Entering-music-and-viewing-output">Entering music and viewing output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-running-LilyPond-under-Windows">running LilyPond under Windows</a></td><td valign="top"><a href="#Entering-music-and-viewing-output">Entering music and viewing output</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-S">S</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-SATB-structure">SATB structure</a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-SATB-template">SATB template</a></td><td valign="top"><a href="#Four_002dpart-SATB-vocal-score">3.4.2 Four-part SATB vocal score</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-scale"><code>scale</code></a></td><td valign="top"><a href="#Pitches">Pitches</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Scheme">Scheme</a></td><td valign="top"><a href="#Scheme-tutorial">B. Scheme tutorial</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Scheme-programming-language">Scheme programming language</a></td><td valign="top"><a href="#Automated-engraving">Automated engraving</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Scheme_002c-in_002dline-code">Scheme, in-line code</a></td><td valign="top"><a href="#Scheme-tutorial">B. Scheme tutorial</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Score"><code>Score</code></a></td><td valign="top"><a href="#Multiple-staves">2.3.2 Multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-score"><code>score</code></a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-score-3"><code>score</code></a></td><td valign="top"><a href="#Score-is-a-_0028single_0029-compound-musical-expression">3.1.2 Score is a (single) compound musical expression</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-score-block_002c-contents-of">score block, contents of</a></td><td valign="top"><a href="#Score-is-a-_0028single_0029-compound-musical-expression">3.1.2 Score is a (single) compound musical expression</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-score-formatting">score formatting</a></td><td valign="top"><a href="#Automated-engraving">Automated engraving</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Score-layout"><code>Score layout</code></a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-score_002c-example-of-writing">score, example of writing</a></td><td valign="top"><a href="#Building-a-score-from-scratch">3.4.3 Building a score from scratch</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-scores_002c-multiple">scores, multiple</a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Script_002c-example-of-overriding">Script, example of overriding</a></td><td valign="top"><a href="#padding-property">padding property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-self_002dalignment_002dX-property">self-alignment-X property</a></td><td valign="top"><a href="#Moving-objects">4.5.1 Moving objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-self_002dalignment_002dX-property_002c-example">self-alignment-X property, example</a></td><td valign="top"><a href="#self_002dalignment_002dX-property">self-alignment-X property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-set"><code>set</code></a></td><td valign="top"><a href="#Modifying-context-properties">3.3.4 Modifying context properties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-setting-properties-within-contexts">setting properties within contexts</a></td><td valign="top"><a href="#Modifying-context-properties">3.3.4 Modifying context properties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Setup"><code>Setup</code></a></td><td valign="top"><a href="#About-the-Application-Usage">About the Application Usage</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sharp-1"><code>sharp</code></a></td><td valign="top"><a href="#Accidentals">Accidentals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sharp-2"><code>sharp</code></a></td><td valign="top"><a href="#Warning_003a-key-signatures-and-pitches">Warning: key signatures and pitches</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sharp_002c-double">sharp, double</a></td><td valign="top"><a href="#Accidentals">Accidentals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-shift-commands">shift commands</a></td><td valign="top"><a href="#Note-columns">Note columns</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-shiftOff"><code>shiftOff</code></a></td><td valign="top"><a href="#Note-columns">Note columns</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-shiftOn"><code>shiftOn</code></a></td><td valign="top"><a href="#Note-columns">Note columns</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-shiftOnn"><code>shiftOnn</code></a></td><td valign="top"><a href="#Note-columns">Note columns</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-shiftOnnn"><code>shiftOnnn</code></a></td><td valign="top"><a href="#Note-columns">Note columns</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-simple-examples">simple examples</a></td><td valign="top"><a href="#Example-applications">Example applications</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-simple-notation">simple notation</a></td><td valign="top"><a href="#Simple-notation">2.1.2 Simple notation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-simultaneous-music">simultaneous music</a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-simultaneous-music-and-relative-notes">simultaneous music and relative notes</a></td><td valign="top"><a href="#Simultaneous-music-expressions_003a-multiple-staves">Simultaneous music expressions: multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Simultaneous-notes"><code>Simultaneous notes</code></a></td><td valign="top"><a href="#See-also-25">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-single-staff-polyphony">single staff polyphony</a></td><td valign="top"><a href="#Single-staff-polyphony">2.3.5 Single staff polyphony</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-size-of-objects">size of objects</a></td><td valign="top"><a href="#Size-of-objects">4.3.2 Size of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-size_002c-changing">size, changing</a></td><td valign="top"><a href="#Length-and-thickness-of-objects">4.3.3 Length and thickness of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-sizing-grobs">sizing grobs</a></td><td valign="top"><a href="#Grob-sizing">Grob sizing</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Skipping-corrected-music"><code>Skipping corrected music</code></a></td><td valign="top"><a href="#Typesetting-existing-music">5.1.2 Typesetting existing music</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-slur-1"><code>slur</code></a></td><td valign="top"><a href="#Slurs">Slurs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-slur-2"><code>slur</code></a></td><td valign="top"><a href="#Phrasing-slurs">Phrasing slurs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-slur-3"><code>slur</code></a></td><td valign="top"><a href="#Warnings_003a-slurs-vs_002e-ties">Warnings: slurs vs. ties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Slur-example-of-overriding">Slur example of overriding</a></td><td valign="top"><a href="#Properties-of-layout-objects">4.2.1 Properties of layout objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Slur_002c-example-of-overriding">Slur, example of overriding</a></td><td valign="top"><a href="#Overriding-once-only">Overriding once only</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Slur_002c-example-of-overriding-1">Slur, example of overriding</a></td><td valign="top"><a href="#Reverting">Reverting</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Slur_002c-example-of-overriding-2">Slur, example of overriding</a></td><td valign="top"><a href="#Reverting">Reverting</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-slur_002c-phrasing">slur, phrasing</a></td><td valign="top"><a href="#Ties-and-slurs">2.2.2 Ties and slurs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Slurs"><code>Slurs</code></a></td><td valign="top"><a href="#See-also-23">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-slurs-and-articulations">slurs and articulations</a></td><td valign="top"><a href="#Outside_002dstaff-objects">4.4.3 Outside-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-slurs-and-outside_002dstaff_002dpriority">slurs and outside-staff-priority</a></td><td valign="top"><a href="#Outside_002dstaff-objects">4.4.3 Outside-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-slurs-crossing-brackets">slurs crossing brackets</a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-slurs-versus-ties">slurs versus ties</a></td><td valign="top"><a href="#Phrasing-slurs">Phrasing slurs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-slurs_002c-controlling-manually">slurs, controlling manually</a></td><td valign="top"><a href="#positions-property">positions property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Snippet-List">Snippet List</a></td><td valign="top"><a href="#About-the-documentation">1.2 About the documentation</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Snippet-List-1">Snippet List</a></td><td valign="top"><a href="#About-the-Snippet-List">About the Snippet List</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-snippets">snippets</a></td><td valign="top"><a href="#About-the-Snippet-List">About the Snippet List</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-songs">songs</a></td><td valign="top"><a href="#Setting-simple-songs">2.4.1 Setting simple songs</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spacer-rest">spacer rest</a></td><td valign="top"><a href="#Single-staff-polyphony">2.3.5 Single staff polyphony</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Spacing-issues"><code>Spacing issues</code></a></td><td valign="top"><a href="#About-the-Notation-Reference">About the Notation Reference</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spacing-notes">spacing notes</a></td><td valign="top"><a href="#Explicitly-instantiating-voices">3.2.2 Explicitly instantiating voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spacing_002c-regular">spacing, regular</a></td><td valign="top"><a href="#Engraving">Engraving</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-spanner">spanner</a></td><td valign="top"><a href="#Objects-and-interfaces">4.1.2 Objects and interfaces</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Specialist-notation"><code>Specialist notation</code></a></td><td valign="top"><a href="#About-the-Notation-Reference">About the Notation Reference</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-staccato">staccato</a></td><td valign="top"><a href="#Articulations">Articulations</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Staff"><code>Staff</code></a></td><td valign="top"><a href="#Multiple-staves">2.3.2 Multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-staff-group">staff group</a></td><td valign="top"><a href="#Staff-groups">2.3.3 Staff groups</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-staff-line-spacing_002c-changing">staff line spacing, changing</a></td><td valign="top"><a href="#Length-and-thickness-of-objects">4.3.3 Length and thickness of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-staff_002c-choir">staff, choir</a></td><td valign="top"><a href="#Staff-groups">2.3.3 Staff groups</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-staff_002c-grand">staff, grand</a></td><td valign="top"><a href="#Staff-groups">2.3.3 Staff groups</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-staff_002c-piano">staff, piano</a></td><td valign="top"><a href="#Staff-groups">2.3.3 Staff groups</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-staff_002c-positioning">staff, positioning</a></td><td valign="top"><a href="#Nesting-music-expressions">3.1.3 Nesting music expressions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-staff_002dpadding-property">staff-padding property</a></td><td valign="top"><a href="#Moving-objects">4.5.1 Moving objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-staff_002dpadding-property_002c-example">staff-padding property, example</a></td><td valign="top"><a href="#staff_002dpadding-property">staff-padding property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-staff_002dposition-property">staff-position property</a></td><td valign="top"><a href="#Moving-objects">4.5.1 Moving objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-staff_002dposition-property_002c-example">staff-position property, example</a></td><td valign="top"><a href="#staff_002dposition-property">staff-position property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-staff_002dposition-property_002c-example-1">staff-position property, example</a></td><td valign="top"><a href="#Real-music-example">4.5.3 Real music example</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-staff_002dspace-property_002c-example">staff-space property, example</a></td><td valign="top"><a href="#Length-and-thickness-of-objects">4.3.3 Length and thickness of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-StaffSymbol_002c-example-of-overriding">StaffSymbol, example of overriding</a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-StaffSymbol_002c-example-of-overriding-1">StaffSymbol, example of overriding</a></td><td valign="top"><a href="#Length-and-thickness-of-objects">4.3.3 Length and thickness of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-startTextSpan"><code>startTextSpan</code></a></td><td valign="top"><a href="#Outside_002dstaff-objects">4.4.3 Outside-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-staves_002c-multiple">staves, multiple</a></td><td valign="top"><a href="#Simultaneous-music-expressions_003a-multiple-staves">Simultaneous music expressions: multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-staves_002c-multiple-1">staves, multiple</a></td><td valign="top"><a href="#Multiple-staves">2.3.2 Multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-staves_002c-temporary">staves, temporary</a></td><td valign="top"><a href="#Nesting-music-expressions">3.1.3 Nesting music expressions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-stem-directions-and-voices">stem directions and voices</a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-stem-down">stem down</a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-stem-length_002c-changing">stem length, changing</a></td><td valign="top"><a href="#Length-and-thickness-of-objects">4.3.3 Length and thickness of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-stem-up">stem up</a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Stem_002c-example-of-overriding">Stem, example of overriding</a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Stem_002c-example-of-overriding-1">Stem, example of overriding</a></td><td valign="top"><a href="#Within_002dstaff-objects">4.4.2 Within-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Stem_002c-example-of-overriding-2">Stem, example of overriding</a></td><td valign="top"><a href="#Real-music-example">4.5.3 Real music example</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Stem_002c-example-of-overriding-3">Stem, example of overriding</a></td><td valign="top"><a href="#Tying-notes-across-voices">Tying notes across voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-stencil-property">stencil property</a></td><td valign="top"><a href="#stencil">stencil</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-stencil-property_002c-example">stencil property, example</a></td><td valign="top"><a href="#stencil">stencil</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-stencil-property_002c-example-1">stencil property, example</a></td><td valign="top"><a href="#stencil">stencil</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-stencil-property_002c-example-2">stencil property, example</a></td><td valign="top"><a href="#transparent">transparent</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-stencil-property_002c-example-3">stencil property, example</a></td><td valign="top"><a href="#Size-of-objects">4.3.2 Size of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-stencil-property_002c-example-4">stencil property, example</a></td><td valign="top"><a href="#Length-and-thickness-of-objects">4.3.3 Length and thickness of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-stencil-property_002c-example-5">stencil property, example</a></td><td valign="top"><a href="#left_002dpadding-and-right_002dpadding">left-padding and right-padding</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-stencil-property_002c-example-6">stencil property, example</a></td><td valign="top"><a href="#Simulating-a-fermata-in-MIDI">Simulating a fermata in MIDI</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-stencil-property_002c-use-of">stencil property, use of</a></td><td valign="top"><a href="#Simulating-a-fermata-in-MIDI">Simulating a fermata in MIDI</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-stopTextSpan"><code>stopTextSpan</code></a></td><td valign="top"><a href="#Outside_002dstaff-objects">4.4.3 Outside-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-StringNumber_002c-example-of-overriding">StringNumber, example of overriding</a></td><td valign="top"><a href="#self_002dalignment_002dX-property">self-alignment-X property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Structure-of-a-score"><code>Structure of a score</code></a></td><td valign="top"><a href="#See-also-21">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-syntax">syntax</a></td><td valign="top"><a href="#Music-representation">Music representation</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-T">T</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-template_002c-modifying">template, modifying</a></td><td valign="top"><a href="#Soprano-and-cello">3.4.1 Soprano and cello</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-template_002c-SATB">template, SATB</a></td><td valign="top"><a href="#Four_002dpart-SATB-vocal-score">3.4.2 Four-part SATB vocal score</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-template_002c-writing-your-own">template, writing your own</a></td><td valign="top"><a href="#Building-a-score-from-scratch">3.4.3 Building a score from scratch</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-templates">templates</a></td><td valign="top"><a href="#How-to-read-the-manual">2.1.4 How to read the manual</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-temporary-staves">temporary staves</a></td><td valign="top"><a href="#Nesting-music-expressions">3.1.3 Nesting music expressions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tenor">tenor</a></td><td valign="top"><a href="#Clef">Clef</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-terminology">terminology</a></td><td valign="top"><a href="#About-the-Music-Glossary">About the Music Glossary</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Text-editor-support"><code>Text editor support</code></a></td><td valign="top"><a href="#Entering-music-and-viewing-output">Entering music and viewing output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-text-editors">text editors</a></td><td valign="top"><a href="#Entering-music-and-viewing-output">Entering music and viewing output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-text-property_002c-example">text property, example</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-text-property_002c-example-1">text property, example</a></td><td valign="top"><a href="#left_002dpadding-and-right_002dpadding">left-padding and right-padding</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-text-spanner">text spanner</a></td><td valign="top"><a href="#Outside_002dstaff-objects">4.4.3 Outside-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Text-spanners"><code>Text spanners</code></a></td><td valign="top"><a href="#Outside_002dstaff-objects">4.4.3 Outside-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-text_002c-adding">text, adding</a></td><td valign="top"><a href="#Adding-text">2.2.4 Adding text</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-textLengthOff"><code>textLengthOff</code></a></td><td valign="top"><a href="#g_t_005ctextLengthOn">\textLengthOn</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-textLengthOn"><code>textLengthOn</code></a></td><td valign="top"><a href="#g_t_005ctextLengthOn">\textLengthOn</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TextScript_002c-example-of-overriding">TextScript, example of overriding</a></td><td valign="top"><a href="#Outside_002dstaff-objects">4.4.3 Outside-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TextScript_002c-example-of-overriding-1">TextScript, example of overriding</a></td><td valign="top"><a href="#g_t_005ctextLengthOn">\textLengthOn</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TextSpanner_002c-example-of-overriding">TextSpanner, example of overriding</a></td><td valign="top"><a href="#Outside_002dstaff-objects">4.4.3 Outside-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TextSpanner_002c-example-of-overriding-1">TextSpanner, example of overriding</a></td><td valign="top"><a href="#Outside_002dstaff-objects">4.4.3 Outside-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-The-tweak-command"><code>The tweak command</code></a></td><td valign="top"><a href="#See-also-11">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-thickness">thickness</a></td><td valign="top"><a href="#Length-and-thickness-of-objects">4.3.3 Length and thickness of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-thickness-property_002c-example">thickness property, example</a></td><td valign="top"><a href="#Properties-of-layout-objects">4.2.1 Properties of layout objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-thickness-property_002c-example-1">thickness property, example</a></td><td valign="top"><a href="#Overriding-once-only">Overriding once only</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-thickness-property_002c-example-2">thickness property, example</a></td><td valign="top"><a href="#Reverting">Reverting</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-thickness-property_002c-example-3">thickness property, example</a></td><td valign="top"><a href="#Reverting">Reverting</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tie-1"><code>tie</code></a></td><td valign="top"><a href="#Ties">Ties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tie-2"><code>tie</code></a></td><td valign="top"><a href="#Warnings_003a-slurs-vs_002e-ties">Warnings: slurs vs. ties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Tie_002c-example-of-overriding">Tie, example of overriding</a></td><td valign="top"><a href="#Real-music-example">4.5.3 Real music example</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Ties"><code>Ties</code></a></td><td valign="top"><a href="#See-also-23">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-ties-crossing-brackest">ties crossing brackest</a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-time"><code>time</code></a></td><td valign="top"><a href="#Time-signature">Time signature</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Time-signature"><code>Time signature</code></a></td><td valign="top"><a href="#See-also-13">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-time-signature-1"><code>time signature</code></a></td><td valign="top"><a href="#Time-signature">Time signature</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-times"><code>times</code></a></td><td valign="top"><a href="#Tuplets">Tuplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TimeSignature_002c-example-of-overriding">TimeSignature, example of overriding</a></td><td valign="top"><a href="#transparent">transparent</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TimeSignature_002c-example-of-overriding-1">TimeSignature, example of overriding</a></td><td valign="top"><a href="#transparent">transparent</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TimeSignature_002c-example-of-overriding-2">TimeSignature, example of overriding</a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TimeSignature_002c-example-of-overriding-3">TimeSignature, example of overriding</a></td><td valign="top"><a href="#Size-of-objects">4.3.2 Size of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TimeSignature_002c-example-of-overriding-4">TimeSignature, example of overriding</a></td><td valign="top"><a href="#Size-of-objects">4.3.2 Size of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TimeSignature_002c-example-of-overriding-5">TimeSignature, example of overriding</a></td><td valign="top"><a href="#Size-of-objects">4.3.2 Size of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TimeSignature_002c-example-of-overriding-6">TimeSignature, example of overriding</a></td><td valign="top"><a href="#Length-and-thickness-of-objects">4.3.3 Length and thickness of objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tips-for-constructing-files">tips for constructing files</a></td><td valign="top"><a href="#How-to-read-the-manual">2.1.4 How to read the manual</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-title">title</a></td><td valign="top"><a href="#Adding-titles">2.5.3 Adding titles</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Top"><code>Top</code></a></td><td valign="top"><a href="#About-the-Music-Glossary">About the Music Glossary</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Top-1"><code>Top</code></a></td><td valign="top"><a href="#About-the-Internals-Reference">About the Internals Reference</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-transparency">transparency</a></td><td valign="top"><a href="#transparent">transparent</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-transparent-property">transparent property</a></td><td valign="top"><a href="#transparent">transparent</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-transparent-property_002c-example">transparent property, example</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-transparent-property_002c-example-1">transparent property, example</a></td><td valign="top"><a href="#transparent">transparent</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-transparent-property_002c-example-2">transparent property, example</a></td><td valign="top"><a href="#Real-music-example">4.5.3 Real music example</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-transparent-property_002c-example-3">transparent property, example</a></td><td valign="top"><a href="#Tying-notes-across-voices">Tying notes across voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-transparent-property_002c-example-4">transparent property, example</a></td><td valign="top"><a href="#Simulating-a-fermata-in-MIDI">Simulating a fermata in MIDI</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-transparent-property_002c-use-of">transparent property, use of</a></td><td valign="top"><a href="#Other-uses-for-tweaks">4.6.1 Other uses for tweaks</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-transposition"><code>transposition</code></a></td><td valign="top"><a href="#Warning_003a-key-signatures-and-pitches">Warning: key signatures and pitches</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-treble">treble</a></td><td valign="top"><a href="#Clef">Clef</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-triplet"><code>triplet</code></a></td><td valign="top"><a href="#Tuplets">Tuplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-triplet-bracket">triplet bracket</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-triplets">triplets</a></td><td valign="top"><a href="#Tuplets">Tuplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-triplets_002c-nested">triplets, nested</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Tunable-context-properties"><code>Tunable context properties</code></a></td><td valign="top"><a href="#Modifying-context-properties">3.3.4 Modifying context properties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Tunable-context-properties-1"><code>Tunable context properties</code></a></td><td valign="top"><a href="#See-also-20">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tuplet-beams_002c-controlling-manually">tuplet beams, controlling manually</a></td><td valign="top"><a href="#positions-property">positions property</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tuplet-bracket">tuplet bracket</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tuplet_002dnumber-function_002c-example">tuplet-number function, example</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TupletBracket"><code>TupletBracket</code></a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-TupletNumber_002c-example-of-overriding">TupletNumber, example of overriding</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tuplets">tuplets</a></td><td valign="top"><a href="#Tuplets">Tuplets</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Tuplets"><code>Tuplets</code></a></td><td valign="top"><a href="#See-also">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tuplets_002c-nested">tuplets, nested</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tweak"><code>tweak</code></a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tweak-command">tweak command</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tweaking-bar-number-placement">tweaking bar number placement</a></td><td valign="top"><a href="#Outside_002dstaff-objects">4.4.3 Outside-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tweaking-dynamics-placement">tweaking dynamics placement</a></td><td valign="top"><a href="#Dynamics">Dynamics</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tweaking-methods">tweaking methods</a></td><td valign="top"><a href="#Tweaking-methods">4.1.4 Tweaking methods</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tweaking-metronome-mark-placement">tweaking metronome mark placement</a></td><td valign="top"><a href="#Outside_002dstaff-objects">4.4.3 Outside-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tweaking-rehearsal-mark-placement">tweaking rehearsal mark placement</a></td><td valign="top"><a href="#Outside_002dstaff-objects">4.4.3 Outside-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tweaks_002c-using-variables-for">tweaks, using variables for</a></td><td valign="top"><a href="#Using-variables-for-tweaks">4.6.2 Using variables for tweaks</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-tying-notes-across-voices">tying notes across voices</a></td><td valign="top"><a href="#Other-uses-for-tweaks">4.6.1 Other uses for tweaks</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-typography">typography</a></td><td valign="top"><a href="#What-symbols-to-engrave_003f">What symbols to engrave?</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-typography_002c-music">typography, music</a></td><td valign="top"><a href="#Engraving">Engraving</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-U">U</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-underscore">underscore</a></td><td valign="top"><a href="#Aligning-lyrics-to-a-melody">2.4.2 Aligning lyrics to a melody</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Unix_002c-running-LilyPond">Unix, running LilyPond</a></td><td valign="top"><a href="#Entering-music-and-viewing-output">Entering music and viewing output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-unset"><code>unset</code></a></td><td valign="top"><a href="#Modifying-context-properties">3.3.4 Modifying context properties</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-up">up</a></td><td valign="top"><a href="#Within_002dstaff-objects">4.4.2 Within-staff objects</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Upbeats"><code>Upbeats</code></a></td><td valign="top"><a href="#See-also">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-updating-files">updating files</a></td><td valign="top"><a href="#Version-number">2.5.2 Version number</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Updating-files-with-convert_002dly"><code>Updating files with convert-ly</code></a></td><td valign="top"><a href="#Version-number">2.5.2 Version number</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Updating-files-with-convert_002dly-1"><code>Updating files with convert-ly</code></a></td><td valign="top"><a href="#Updating-old-input-files">5.2.1 Updating old input files</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Updating-files-with-convert_002dly-2"><code>Updating files with convert-ly</code></a></td><td valign="top"><a href="#Updating-old-input-files">5.2.1 Updating old input files</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-upgrades">upgrades</a></td><td valign="top"><a href="#Version-number">2.5.2 Version number</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-URL">URL</a></td><td valign="top"><a href="#Top">GNU LilyPond &mdash; Learning Manual</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-using-variables">using variables</a></td><td valign="top"><a href="#Organizing-pieces-with-variables">2.5.1 Organizing pieces with variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-using-variables-for-tweaks">using variables for tweaks</a></td><td valign="top"><a href="#Using-variables-for-tweaks">4.6.2 Using variables for tweaks</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-V">V</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-variables">variables</a></td><td valign="top"><a href="#Organizing-pieces-with-variables">2.5.1 Organizing pieces with variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variables-1">variables</a></td><td valign="top"><a href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variables-2">variables</a></td><td valign="top"><a href="#Saving-typing-with-variables-and-functions">5.1.4 Saving typing with variables and functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variables-3">variables</a></td><td valign="top"><a href="#Saving-typing-with-variables-and-functions">5.1.4 Saving typing with variables and functions</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variables-vs_002e-properties">variables vs. properties</a></td><td valign="top"><a href="#Scheme-tutorial">B. Scheme tutorial</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variables_002c-characters-allowed-in">variables, characters allowed in</a></td><td valign="top"><a href="#Organizing-pieces-with-variables">2.5.1 Organizing pieces with variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variables_002c-defining">variables, defining</a></td><td valign="top"><a href="#Organizing-pieces-with-variables">2.5.1 Organizing pieces with variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variables_002c-using">variables, using</a></td><td valign="top"><a href="#Organizing-pieces-with-variables">2.5.1 Organizing pieces with variables</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-variables_002c-using-for-tweaks">variables, using for tweaks</a></td><td valign="top"><a href="#Using-variables-for-tweaks">4.6.2 Using variables for tweaks</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-verse-and-refrain">verse and refrain</a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-verses_002c-multiple-vocal">verses, multiple vocal</a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-version-1"><code>version</code></a></td><td valign="top"><a href="#Version-number">2.5.2 Version number</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-version-number">version number</a></td><td valign="top"><a href="#Version-number">2.5.2 Version number</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-versioning">versioning</a></td><td valign="top"><a href="#Version-number">2.5.2 Version number</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-viewing-music">viewing music</a></td><td valign="top"><a href="#Entering-music-and-viewing-output">Entering music and viewing output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Vocal-music"><code>Vocal music</code></a></td><td valign="top"><a href="#See-also-9">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Vocal-music-1"><code>Vocal music</code></a></td><td valign="top"><a href="#See-also-17">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Vocal-music-2"><code>Vocal music</code></a></td><td valign="top"><a href="#See-also-24">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-vocal-score-structure">vocal score structure</a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-vocal-scores-with-multiple-verses">vocal scores with multiple verses</a></td><td valign="top"><a href="#Voices-and-vocals">3.2.3 Voices and vocals</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Voice"><code>Voice</code></a></td><td valign="top"><a href="#Multiple-staves">2.3.2 Multiple staves</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Voice-context">Voice context</a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-voice-contexts_002c-creating">voice contexts, creating</a></td><td valign="top"><a href="#Explicitly-instantiating-voices">3.2.2 Explicitly instantiating voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-voiceFour"><code>voiceFour</code></a></td><td valign="top"><a href="#Explicitly-instantiating-voices">3.2.2 Explicitly instantiating voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-voiceOne"><code>voiceOne</code></a></td><td valign="top"><a href="#Explicitly-instantiating-voices">3.2.2 Explicitly instantiating voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-voices-and-stem-directions">voices and stem directions</a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-voices-crossing-brackets">voices crossing brackets</a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-voices-vs_002e-chords">voices vs. chords</a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-voices_002c-more-on-one-staff">voices, more on one staff</a></td><td valign="top"><a href="#Single-staff-polyphony">2.3.5 Single staff polyphony</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-voices_002c-multiple">voices, multiple</a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-voices_002c-naming">voices, naming</a></td><td valign="top"><a href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-voices_002c-nesting">voices, nesting</a></td><td valign="top"><a href="#Explicitly-instantiating-voices">3.2.2 Explicitly instantiating voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-voices_002c-reverting-to-single">voices, reverting to single</a></td><td valign="top"><a href="#Explicitly-instantiating-voices">3.2.2 Explicitly instantiating voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-voices_002c-temporary">voices, temporary</a></td><td valign="top"><a href="#Explicitly-instantiating-voices">3.2.2 Explicitly instantiating voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-voiceThree"><code>voiceThree</code></a></td><td valign="top"><a href="#Explicitly-instantiating-voices">3.2.2 Explicitly instantiating voices</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-voiceTwo"><code>voiceTwo</code></a></td><td valign="top"><a href="#Explicitly-instantiating-voices">3.2.2 Explicitly instantiating voices</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-W">W</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-web-site">web site</a></td><td valign="top"><a href="#Top">GNU LilyPond &mdash; Learning Manual</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-whitespace-insensitive">whitespace insensitive</a></td><td valign="top"><a href="#Working-on-input-files">2.1.3 Working on input files</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-whole-note-1"><code>whole note</code></a></td><td valign="top"><a href="#Durations-_0028rhythms_0029">Durations (rhythms)</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Windows_002c-running-LilyPond">Windows, running LilyPond</a></td><td valign="top"><a href="#Entering-music-and-viewing-output">Entering music and viewing output</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-with"><code>with</code></a></td><td valign="top"><a href="#Setting-context-properties-with-_005cwith">Setting context properties with <code>\with</code></a></td></tr>
<tr><td></td><td valign="top"><a href="#index-within_002dstaff-objects">within-staff objects</a></td><td valign="top"><a href="#Automatic-behavior">4.4.1 Automatic behavior</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-words-with-multiple-syllables-in-lyrics">words with multiple syllables in lyrics</a></td><td valign="top"><a href="#Aligning-lyrics-to-a-melody">2.4.2 Aligning lyrics to a melody</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-writing-a-score_002c-example">writing a score, example</a></td><td valign="top"><a href="#Building-a-score-from-scratch">3.4.3 Building a score from scratch</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Writing-pitches"><code>Writing pitches</code></a></td><td valign="top"><a href="#See-also-13">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Writing-rests"><code>Writing rests</code></a></td><td valign="top"><a href="#See-also-13">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Writing-rhythms"><code>Writing rhythms</code></a></td><td valign="top"><a href="#See-also-13">See also</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-Writing-text"><code>Writing text</code></a></td><td valign="top"><a href="#See-also-16">See also</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
<tr><th><a name="LilyPond-index_cp_letter-X">X</a></th><td></td><td></td></tr>
<tr><td></td><td valign="top"><a href="#index-X11-colors">X11 colors</a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-x11_002dcolor"><code>x11-color</code></a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-x11_002dcolor-function_002c-example-of-using">x11-color function, example of using</a></td><td valign="top"><a href="#Advanced-tweaks-with-Scheme">4.6.5 Advanced tweaks with Scheme</a></td></tr>
<tr><td></td><td valign="top"><a href="#index-x11_002dcolor_002c-example-of-using">x11-color, example of using</a></td><td valign="top"><a href="#color">color</a></td></tr>
<tr><td colspan="3"> <hr></td></tr>
</table>
<table><tr><th valign="top">Jump to: &nbsp; </th><td><a href="#LilyPond-index_cp_symbol-1" class="summary-letter"><b>!</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-2" class="summary-letter"><b>#</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-3" class="summary-letter"><b>%</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-4" class="summary-letter"><b>'</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-5" class="summary-letter"><b>(</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-6" class="summary-letter"><b>,</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-7" class="summary-letter"><b>.</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-8" class="summary-letter"><b>&lt;</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-9" class="summary-letter"><b>&gt;</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-10" class="summary-letter"><b>[</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-11" class="summary-letter"><b>\</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-12" class="summary-letter"><b>]</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-13" class="summary-letter"><b>^</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-14" class="summary-letter"><b>_</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_symbol-15" class="summary-letter"><b>~</b></a>
 &nbsp; 
<br>
<a href="#LilyPond-index_cp_letter-A" class="summary-letter"><b>A</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-B" class="summary-letter"><b>B</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-C" class="summary-letter"><b>C</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-D" class="summary-letter"><b>D</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-E" class="summary-letter"><b>E</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-F" class="summary-letter"><b>F</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-G" class="summary-letter"><b>G</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-H" class="summary-letter"><b>H</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-I" class="summary-letter"><b>I</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-J" class="summary-letter"><b>J</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-K" class="summary-letter"><b>K</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-L" class="summary-letter"><b>L</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-M" class="summary-letter"><b>M</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-N" class="summary-letter"><b>N</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-O" class="summary-letter"><b>O</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-P" class="summary-letter"><b>P</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-Q" class="summary-letter"><b>Q</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-R" class="summary-letter"><b>R</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-S" class="summary-letter"><b>S</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-T" class="summary-letter"><b>T</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-U" class="summary-letter"><b>U</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-V" class="summary-letter"><b>V</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-W" class="summary-letter"><b>W</b></a>
 &nbsp; 
<a href="#LilyPond-index_cp_letter-X" class="summary-letter"><b>X</b></a>
 &nbsp; 
</td></tr></table>

<hr size="6">
<a name="SEC_Foot"></a>
<table class="nav_table">
<tr><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td></tr></table>
<h1>Footnotes</h1>
<p class="footnote"><small>[<a name="FOOT1" href="#DOCF1">1</a>]</small> In Scheme terminology, the pair is called <code>cons</code>,
and its two elements are called <code>car</code> and <code>cdr</code> respectively.
</p><hr size="1">
<a name="SEC_Contents"></a>
<table class="nav_table">
<tr><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td></tr></table>
<h1>Table of Contents</h1>
<div class="contents">

<ul class="toc">
  <li><a name="toc-Preface-1" href="#Preface">Preface</a></li>
  <li><a name="toc-Introduction-1" href="#Introduction">1. Introduction</a>
  <ul class="toc">
    <li><a name="toc-Background-1" href="#Background">1.1 Background</a>
    <ul class="toc">
      <li><a name="toc-Engraving-1" href="#Engraving">Engraving</a></li>
      <li><a name="toc-Automated-engraving-1" href="#Automated-engraving">Automated engraving</a></li>
      <li><a name="toc-What-symbols-to-engrave_003f-1" href="#What-symbols-to-engrave_003f">What symbols to engrave?</a></li>
      <li><a name="toc-Music-representation-1" href="#Music-representation">Music representation</a></li>
      <li><a name="toc-Example-applications-1" href="#Example-applications">Example applications</a></li>
    </ul></li>
    <li><a name="toc-About-the-documentation-1" href="#About-the-documentation">1.2 About the documentation</a>
    <ul class="toc">
      <li><a name="toc-About-the-Learning-Manual-1" href="#About-the-Learning-Manual">About the Learning Manual</a></li>
      <li><a name="toc-About-the-Music-Glossary-1" href="#About-the-Music-Glossary">About the Music Glossary</a></li>
      <li><a name="toc-About-the-Notation-Reference-1" href="#About-the-Notation-Reference">About the Notation Reference</a></li>
      <li><a name="toc-About-the-Application-Usage-1" href="#About-the-Application-Usage">About the Application Usage</a></li>
      <li><a name="toc-About-the-Snippet-List-1" href="#About-the-Snippet-List">About the Snippet List</a></li>
      <li><a name="toc-About-the-Internals-Reference-1" href="#About-the-Internals-Reference">About the Internals Reference</a></li>
      <li><a name="toc-Other-documentation-1" href="#Other-documentation">Other documentation</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Tutorial-1" href="#Tutorial">2. Tutorial</a>
  <ul class="toc">
    <li><a name="toc-First-steps-1" href="#First-steps">2.1 First steps</a>
    <ul class="toc">
      <li><a name="toc-Compiling-a-file-1" href="#Compiling-a-file">2.1.1 Compiling a file</a></li>
      <li><a name="toc-Simple-notation-1" href="#Simple-notation">2.1.2 Simple notation</a></li>
      <li><a name="toc-Working-on-input-files-1" href="#Working-on-input-files">2.1.3 Working on input files</a></li>
      <li><a name="toc-How-to-read-the-manual-1" href="#How-to-read-the-manual">2.1.4 How to read the manual</a></li>
    </ul></li>
    <li><a name="toc-Single-staff-notation-1" href="#Single-staff-notation">2.2 Single staff notation</a>
    <ul class="toc">
      <li><a name="toc-Accidentals-and-key-signatures-1" href="#Accidentals-and-key-signatures">2.2.1 Accidentals and key signatures</a></li>
      <li><a name="toc-Ties-and-slurs-1" href="#Ties-and-slurs">2.2.2 Ties and slurs</a></li>
      <li><a name="toc-Articulation-and-dynamics-1" href="#Articulation-and-dynamics">2.2.3 Articulation and dynamics</a></li>
      <li><a name="toc-Adding-text-1" href="#Adding-text">2.2.4 Adding text</a></li>
      <li><a name="toc-Automatic-and-manual-beams-1" href="#Automatic-and-manual-beams">2.2.5 Automatic and manual beams</a></li>
      <li><a name="toc-Advanced-rhythmic-commands-1" href="#Advanced-rhythmic-commands">2.2.6 Advanced rhythmic commands</a></li>
    </ul></li>
    <li><a name="toc-Multiple-notes-at-once-1" href="#Multiple-notes-at-once">2.3 Multiple notes at once</a>
    <ul class="toc">
      <li><a name="toc-Music-expressions-explained-1" href="#Music-expressions-explained">2.3.1 Music expressions explained</a></li>
      <li><a name="toc-Multiple-staves-1" href="#Multiple-staves">2.3.2 Multiple staves</a></li>
      <li><a name="toc-Staff-groups-1" href="#Staff-groups">2.3.3 Staff groups</a></li>
      <li><a name="toc-Combining-notes-into-chords-1" href="#Combining-notes-into-chords">2.3.4 Combining notes into chords</a></li>
      <li><a name="toc-Single-staff-polyphony-1" href="#Single-staff-polyphony">2.3.5 Single staff polyphony</a></li>
    </ul></li>
    <li><a name="toc-Songs-1" href="#Songs">2.4 Songs</a>
    <ul class="toc">
      <li><a name="toc-Setting-simple-songs-1" href="#Setting-simple-songs">2.4.1 Setting simple songs</a></li>
      <li><a name="toc-Aligning-lyrics-to-a-melody-1" href="#Aligning-lyrics-to-a-melody">2.4.2 Aligning lyrics to a melody</a></li>
      <li><a name="toc-Lyrics-to-multiple-staves-1" href="#Lyrics-to-multiple-staves">2.4.3 Lyrics to multiple staves</a></li>
    </ul></li>
    <li><a name="toc-Final-touches-1" href="#Final-touches">2.5 Final touches</a>
    <ul class="toc">
      <li><a name="toc-Organizing-pieces-with-variables-1" href="#Organizing-pieces-with-variables">2.5.1 Organizing pieces with variables</a></li>
      <li><a name="toc-Version-number-1" href="#Version-number">2.5.2 Version number</a></li>
      <li><a name="toc-Adding-titles-1" href="#Adding-titles">2.5.3 Adding titles</a></li>
      <li><a name="toc-Absolute-note-names-1" href="#Absolute-note-names">2.5.4 Absolute note names</a></li>
      <li><a name="toc-After-the-tutorial-1" href="#After-the-tutorial">2.5.5 After the tutorial</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Fundamental-concepts-1" href="#Fundamental-concepts">3. Fundamental concepts</a>
  <ul class="toc">
    <li><a name="toc-How-LilyPond-input-files-work-1" href="#How-LilyPond-input-files-work">3.1 How LilyPond input files work</a>
    <ul class="toc">
      <li><a name="toc-Introduction-to-the-LilyPond-file-structure-1" href="#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a></li>
      <li><a name="toc-Score-is-a-_0028single_0029-compound-musical-expression-1" href="#Score-is-a-_0028single_0029-compound-musical-expression">3.1.2 Score is a (single) compound musical expression</a></li>
      <li><a name="toc-Nesting-music-expressions-1" href="#Nesting-music-expressions">3.1.3 Nesting music expressions</a></li>
      <li><a name="toc-On-the-un_002dnestedness-of-brackets-and-ties-1" href="#On-the-un_002dnestedness-of-brackets-and-ties">3.1.4 On the un-nestedness of brackets and ties</a></li>
    </ul></li>
    <li><a name="toc-Voices-contain-music-1" href="#Voices-contain-music">3.2 Voices contain music</a>
    <ul class="toc">
      <li><a name="toc-I_0027m-hearing-Voices-1" href="#I_0027m-hearing-Voices">3.2.1 I&rsquo;m hearing Voices</a></li>
      <li><a name="toc-Explicitly-instantiating-voices-1" href="#Explicitly-instantiating-voices">3.2.2 Explicitly instantiating voices</a></li>
      <li><a name="toc-Voices-and-vocals-1" href="#Voices-and-vocals">3.2.3 Voices and vocals</a></li>
    </ul></li>
    <li><a name="toc-Contexts-and-engravers-1" href="#Contexts-and-engravers">3.3 Contexts and engravers</a>
    <ul class="toc">
      <li><a name="toc-Contexts-explained-1" href="#Contexts-explained">3.3.1 Contexts explained</a></li>
      <li><a name="toc-Creating-contexts-1" href="#Creating-contexts">3.3.2 Creating contexts</a></li>
      <li><a name="toc-Engravers-explained-1" href="#Engravers-explained">3.3.3 Engravers explained</a></li>
      <li><a name="toc-Modifying-context-properties-1" href="#Modifying-context-properties">3.3.4 Modifying context properties</a></li>
      <li><a name="toc-Adding-and-removing-engravers-1" href="#Adding-and-removing-engravers">3.3.5 Adding and removing engravers</a></li>
    </ul></li>
    <li><a name="toc-Extending-the-templates-1" href="#Extending-the-templates">3.4 Extending the templates</a>
    <ul class="toc">
      <li><a name="toc-Soprano-and-cello-1" href="#Soprano-and-cello">3.4.1 Soprano and cello</a></li>
      <li><a name="toc-Four_002dpart-SATB-vocal-score-1" href="#Four_002dpart-SATB-vocal-score">3.4.2 Four-part SATB vocal score</a></li>
      <li><a name="toc-Building-a-score-from-scratch-1" href="#Building-a-score-from-scratch">3.4.3 Building a score from scratch</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Tweaking-output-1" href="#Tweaking-output">4. Tweaking output</a>
  <ul class="toc">
    <li><a name="toc-Tweaking-basics-1" href="#Tweaking-basics">4.1 Tweaking basics</a>
    <ul class="toc">
      <li><a name="toc-Introduction-to-tweaks-1" href="#Introduction-to-tweaks">4.1.1 Introduction to tweaks</a></li>
      <li><a name="toc-Objects-and-interfaces-1" href="#Objects-and-interfaces">4.1.2 Objects and interfaces</a></li>
      <li><a name="toc-Naming-conventions-of-objects-and-properties-1" href="#Naming-conventions-of-objects-and-properties">4.1.3 Naming conventions of objects and properties</a></li>
      <li><a name="toc-Tweaking-methods-1" href="#Tweaking-methods">4.1.4 Tweaking methods</a></li>
    </ul></li>
    <li><a name="toc-The-Internals-Reference-manual-1" href="#The-Internals-Reference-manual">4.2 The Internals Reference manual</a>
    <ul class="toc">
      <li><a name="toc-Properties-of-layout-objects-1" href="#Properties-of-layout-objects">4.2.1 Properties of layout objects</a></li>
      <li><a name="toc-Properties-found-in-interfaces-1" href="#Properties-found-in-interfaces">4.2.2 Properties found in interfaces</a></li>
      <li><a name="toc-Types-of-properties-1" href="#Types-of-properties">4.2.3 Types of properties</a></li>
    </ul></li>
    <li><a name="toc-Appearance-of-objects-1" href="#Appearance-of-objects">4.3 Appearance of objects</a>
    <ul class="toc">
      <li><a name="toc-Visibility-and-color-of-objects-1" href="#Visibility-and-color-of-objects">4.3.1 Visibility and color of objects</a></li>
      <li><a name="toc-Size-of-objects-1" href="#Size-of-objects">4.3.2 Size of objects</a></li>
      <li><a name="toc-Length-and-thickness-of-objects-1" href="#Length-and-thickness-of-objects">4.3.3 Length and thickness of objects</a></li>
    </ul></li>
    <li><a name="toc-Placement-of-objects-1" href="#Placement-of-objects">4.4 Placement of objects</a>
    <ul class="toc">
      <li><a name="toc-Automatic-behavior-1" href="#Automatic-behavior">4.4.1 Automatic behavior</a></li>
      <li><a name="toc-Within_002dstaff-objects-1" href="#Within_002dstaff-objects">4.4.2 Within-staff objects</a></li>
      <li><a name="toc-Outside_002dstaff-objects-1" href="#Outside_002dstaff-objects">4.4.3 Outside-staff objects</a></li>
    </ul></li>
    <li><a name="toc-Collisions-of-objects-1" href="#Collisions-of-objects">4.5 Collisions of objects</a>
    <ul class="toc">
      <li><a name="toc-Moving-objects-1" href="#Moving-objects">4.5.1 Moving objects</a></li>
      <li><a name="toc-Fixing-overlapping-notation-1" href="#Fixing-overlapping-notation">4.5.2 Fixing overlapping notation</a></li>
      <li><a name="toc-Real-music-example-1" href="#Real-music-example">4.5.3 Real music example</a></li>
    </ul></li>
    <li><a name="toc-Further-tweaking-1" href="#Further-tweaking">4.6 Further tweaking</a>
    <ul class="toc">
      <li><a name="toc-Other-uses-for-tweaks-1" href="#Other-uses-for-tweaks">4.6.1 Other uses for tweaks</a></li>
      <li><a name="toc-Using-variables-for-tweaks-1" href="#Using-variables-for-tweaks">4.6.2 Using variables for tweaks</a></li>
      <li><a name="toc-Other-sources-of-information-1" href="#Other-sources-of-information">4.6.3 Other sources of information</a></li>
      <li><a name="toc-Avoiding-tweaks-with-slower-processing-1" href="#Avoiding-tweaks-with-slower-processing">4.6.4 Avoiding tweaks with slower processing</a></li>
      <li><a name="toc-Advanced-tweaks-with-Scheme-1" href="#Advanced-tweaks-with-Scheme">4.6.5 Advanced tweaks with Scheme</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Working-on-LilyPond-projects-1" href="#Working-on-LilyPond-projects">5. Working on LilyPond projects</a>
  <ul class="toc">
    <li><a name="toc-Suggestions-for-writing-LilyPond-input-files-1" href="#Suggestions-for-writing-LilyPond-input-files">5.1 Suggestions for writing LilyPond input files</a>
    <ul class="toc">
      <li><a name="toc-General-suggestions-1" href="#General-suggestions">5.1.1 General suggestions</a></li>
      <li><a name="toc-Typesetting-existing-music-1" href="#Typesetting-existing-music">5.1.2 Typesetting existing music</a></li>
      <li><a name="toc-Large-projects-1" href="#Large-projects">5.1.3 Large projects</a></li>
      <li><a name="toc-Saving-typing-with-variables-and-functions-1" href="#Saving-typing-with-variables-and-functions">5.1.4 Saving typing with variables and functions</a></li>
      <li><a name="toc-Style-sheets-1" href="#Style-sheets">5.1.5 Style sheets</a></li>
    </ul></li>
    <li><a name="toc-When-things-don_0027t-work-1" href="#When-things-don_0027t-work">5.2 When things don&rsquo;t work</a>
    <ul class="toc">
      <li><a name="toc-Updating-old-input-files-1" href="#Updating-old-input-files">5.2.1 Updating old input files</a></li>
      <li><a name="toc-Troubleshooting-_0028taking-it-all-apart_0029-1" href="#Troubleshooting-_0028taking-it-all-apart_0029">5.2.2 Troubleshooting (taking it all apart)</a></li>
      <li><a name="toc-Minimal-examples-1" href="#Minimal-examples">5.2.3 Minimal examples</a></li>
    </ul></li>
    <li><a name="toc-Scores-and-parts-1" href="#Scores-and-parts">5.3 Scores and parts</a></li>
  </ul></li>
  <li><a name="toc-Templates-1" href="#Templates">A. Templates</a>
  <ul class="toc">
    <li><a name="toc-Single-staff-1" href="#Single-staff">A.1 Single staff</a>
    <ul class="toc">
      <li><a name="toc-Notes-only" href="#Single-staff">A.1.1 Notes only</a></li>
      <li><a name="toc-Notes-and-lyrics" href="#Single-staff">A.1.2 Notes and lyrics</a></li>
      <li><a name="toc-Notes-and-chords" href="#Single-staff">A.1.3 Notes and chords</a></li>
      <li><a name="toc-Notes_002c-lyrics_002c-and-chords_002e" href="#Single-staff">A.1.4 Notes, lyrics, and chords.</a></li>
    </ul></li>
    <li><a name="toc-Piano-templates-1" href="#Piano-templates">A.2 Piano templates</a>
    <ul class="toc">
      <li><a name="toc-Solo-piano" href="#Piano-templates">A.2.1 Solo piano</a></li>
      <li><a name="toc-Piano-and-melody-with-lyrics" href="#Piano-templates">A.2.2 Piano and melody with lyrics</a></li>
      <li><a name="toc-Piano-centered-lyrics" href="#Piano-templates">A.2.3 Piano centered lyrics</a></li>
      <li><a name="toc-Piano-centered-dynamics" href="#Piano-templates">A.2.4 Piano centered dynamics</a></li>
    </ul></li>
    <li><a name="toc-String-quartet-2" href="#String-quartet">A.3 String quartet</a>
    <ul class="toc">
      <li><a name="toc-String-quartet-1" href="#String-quartet">A.3.1 String quartet</a></li>
      <li><a name="toc-String-quartet-parts" href="#String-quartet">A.3.2 String quartet parts</a></li>
    </ul></li>
    <li><a name="toc-Vocal-ensembles-1" href="#Vocal-ensembles">A.4 Vocal ensembles</a>
    <ul class="toc">
      <li><a name="toc-SATB-vocal-score" href="#Vocal-ensembles">A.4.1 SATB vocal score</a></li>
      <li><a name="toc-SATB-vocal-score-and-automatic-piano-reduction" href="#Vocal-ensembles">A.4.2 SATB vocal score and automatic piano reduction</a></li>
      <li><a name="toc-SATB-with-aligned-contexts" href="#Vocal-ensembles">A.4.3 SATB with aligned contexts</a></li>
    </ul></li>
    <li><a name="toc-Ancient-notation-templates-1" href="#Ancient-notation-templates">A.5 Ancient notation templates</a>
    <ul class="toc">
      <li><a name="toc-Transcription-of-mensural-music" href="#Ancient-notation-templates">A.5.1 Transcription of mensural music</a></li>
      <li><a name="toc-Gregorian-transcription-template" href="#Ancient-notation-templates">A.5.2 Gregorian transcription template</a></li>
    </ul></li>
    <li><a name="toc-Jazz-combo-1" href="#Jazz-combo">A.6 Jazz combo</a></li>
    <li><a name="toc-lilypond_002dbook-templates-1" href="#lilypond_002dbook-templates">A.7 lilypond-book templates</a>
    <ul class="toc">
      <li><a name="toc-LaTeX" href="#lilypond_002dbook-templates">A.7.1 LaTeX</a></li>
      <li><a name="toc-Texinfo" href="#lilypond_002dbook-templates">A.7.2 Texinfo</a></li>
      <li><a name="toc-xelatex" href="#lilypond_002dbook-templates">A.7.3 xelatex</a></li>
    </ul>
</li>
  </ul></li>
  <li><a name="toc-Scheme-tutorial-1" href="#Scheme-tutorial">B. Scheme tutorial</a>
  <ul class="toc">
    <li><a name="toc-Tweaking-with-Scheme-1" href="#Tweaking-with-Scheme">B.1 Tweaking with Scheme</a></li>
  </ul></li>
  <li><a name="toc-GNU-Free-Documentation-License-1" href="#GNU-Free-Documentation-License">C. GNU Free Documentation License</a></li>
  <li><a name="toc-LilyPond-index-1" href="#LilyPond-index">D. LilyPond index</a></li>
</ul>
</div>
<hr size="1">
<a name="SEC_About"></a>
<table class="nav_table">
<tr><td valign="middle" align="center" colspan="3">[<a href="#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="#LilyPond-index" title="Index" rel="index">Index</a>][<a href="#SEC_About" title="About (help)" rel="help"> ? </a>]</td></tr></table>
<h1>About This Document</h1>
<p>
  This document was generated by <em>Graham Percival</em> on <em>January 13, 2010</em> using <a href="http://www.nongnu.org/texi2html/"><em>texi2html 1.82</em></a>.
</p>
<p>
  The buttons in the navigation panels have the following meaning:
</p>
<table border="1">
  <tr>
    <th> Button </th>
    <th> Name </th>
    <th> Go to </th>
    <th> From 1.2.3 go to</th>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [ &lt;&lt; ] </td>
    <td align="center">FastBack</td>
    <td>Beginning of this chapter or previous chapter</td>
    <td>1</td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [Top] </td>
    <td align="center">Top</td>
    <td>Cover (top) of document</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [Contents] </td>
    <td align="center">Contents</td>
    <td>Table of contents</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [Index] </td>
    <td align="center">Index</td>
    <td>Index</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [ ? ] </td>
    <td align="center">About</td>
    <td>About (help)</td>
    <td> &nbsp; </td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [ &gt;&gt; ] </td>
    <td align="center">FastForward</td>
    <td>Next chapter</td>
    <td>2</td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [ &lt; ] </td>
    <td align="center">Back</td>
    <td>Previous section in reading order</td>
    <td>1.2.2</td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [ Up ] </td>
    <td align="center">Up</td>
    <td>Up section</td>
    <td>1.2</td>
  </tr>
  <tr>
    <td align="center"> [] </td>
    <td align="center"></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <td align="center"> [ &gt; ] </td>
    <td align="center">Forward</td>
    <td>Next section in reading order</td>
    <td>1.2.4</td>
  </tr>
</table>

<p>
  where the <strong> Example </strong> assumes that the current position is at <strong> Subsubsection One-Two-Three </strong> of a document of the following structure:
</p>

<ul>
  <li> 1. Section One
    <ul>
      <li>1.1 Subsection One-One
        <ul>
          <li>...</li>
        </ul>
      </li>
      <li>1.2 Subsection One-Two
        <ul>
          <li>1.2.1 Subsubsection One-Two-One</li>
          <li>1.2.2 Subsubsection One-Two-Two</li>
          <li>1.2.3 Subsubsection One-Two-Three &nbsp; &nbsp;
            <strong>&lt;== Current Position </strong></li>
          <li>1.2.4 Subsubsection One-Two-Four</li>
        </ul>
      </li>
      <li>1.3 Subsection One-Three
        <ul>
          <li>...</li>
        </ul>
      </li>
      <li>1.4 Subsection One-Four</li>
    </ul>
  </li>
</ul>

<hr size="1">
<!-- footer_tag -->
<div class="footer">
<p class="footer_version">
This page is for LilyPond-2.12.3 (stable-branch).
</p>
<p class="footer_report">
Your <a href="http://lilypond.org/web/devel/participating/documentation-adding">suggestions for the documentation</a> are welcome, please report errors to our <a href="http://post.gmane.org/post.php?group=gmane.comp.gnu.lilypond.bugs">bug list</a>.
</p>
</div>


<p id="languages">
 Other languages: <a href="lilypond-learning-big-page.fr.html">français</a>, <a href="lilypond-learning-big-page.es.html">español</a>, <a href="lilypond-learning-big-page.de.html">deutsch</a>, <a href="lilypond-learning-big-page.ja.html">japanese</a>.
 <br>
 
</p>

<!-- FOOTER -->

<!-- end div#main here -->
</div>



<div id="tocframe">
<p class="toc_uplink"><a href="index.html" 
         title="Documentation Index">&lt;&lt; Back to Documentation Index</a></p>
<h4 class="toc_header"> <a href="#Top" title="Start of the manual">Learning Manual</a></h4>
<div class="contents">
<ul class="toc">
  <li><a name="toc-Preface-1" href="lilypond-learning-big-page.html#Preface">Preface</a>  </li>
  <li><a name="toc-Introduction-1" href="lilypond-learning-big-page.html#Introduction">1. Introduction</a>
  <ul class="toc">
    <li><a name="toc-Background-1" href="lilypond-learning-big-page.html#Background">1.1 Background</a>    </li>
    <li><a name="toc-About-the-documentation-1" href="lilypond-learning-big-page.html#About-the-documentation">1.2 About the documentation</a>    </li>
  </ul>
  </li>
  <li><a name="toc-Tutorial-1" href="lilypond-learning-big-page.html#Tutorial">2. Tutorial</a>
  <ul class="toc">
    <li><a name="toc-First-steps-1" href="lilypond-learning-big-page.html#First-steps">2.1 First steps</a>    </li>
    <li><a name="toc-Single-staff-notation-1" href="lilypond-learning-big-page.html#Single-staff-notation">2.2 Single staff notation</a>    </li>
    <li><a name="toc-Multiple-notes-at-once-1" href="lilypond-learning-big-page.html#Multiple-notes-at-once">2.3 Multiple notes at once</a>    </li>
    <li><a name="toc-Songs-1" href="lilypond-learning-big-page.html#Songs">2.4 Songs</a>    </li>
    <li><a name="toc-Final-touches-1" href="lilypond-learning-big-page.html#Final-touches">2.5 Final touches</a>    </li>
  </ul>
  </li>
  <li><a name="toc-Fundamental-concepts-1" href="lilypond-learning-big-page.html#Fundamental-concepts">3. Fundamental concepts</a>
  <ul class="toc">
    <li><a name="toc-How-LilyPond-input-files-work-1" href="lilypond-learning-big-page.html#How-LilyPond-input-files-work">3.1 How LilyPond input files work</a>    </li>
    <li><a name="toc-Voices-contain-music-1" href="lilypond-learning-big-page.html#Voices-contain-music">3.2 Voices contain music</a>    </li>
    <li><a name="toc-Contexts-and-engravers-1" href="lilypond-learning-big-page.html#Contexts-and-engravers">3.3 Contexts and engravers</a>    </li>
    <li><a name="toc-Extending-the-templates-1" href="lilypond-learning-big-page.html#Extending-the-templates">3.4 Extending the templates</a>    </li>
  </ul>
  </li>
  <li><a name="toc-Tweaking-output-1" href="lilypond-learning-big-page.html#Tweaking-output">4. Tweaking output</a>
  <ul class="toc">
    <li><a name="toc-Tweaking-basics-1" href="lilypond-learning-big-page.html#Tweaking-basics">4.1 Tweaking basics</a>    </li>
    <li><a name="toc-The-Internals-Reference-manual-1" href="lilypond-learning-big-page.html#The-Internals-Reference-manual">4.2 The Internals Reference manual</a>    </li>
    <li><a name="toc-Appearance-of-objects-1" href="lilypond-learning-big-page.html#Appearance-of-objects">4.3 Appearance of objects</a>    </li>
    <li><a name="toc-Placement-of-objects-1" href="lilypond-learning-big-page.html#Placement-of-objects">4.4 Placement of objects</a>    </li>
    <li><a name="toc-Collisions-of-objects-1" href="lilypond-learning-big-page.html#Collisions-of-objects">4.5 Collisions of objects</a>    </li>
    <li><a name="toc-Further-tweaking-1" href="lilypond-learning-big-page.html#Further-tweaking">4.6 Further tweaking</a>    </li>
  </ul>
  </li>
  <li><a name="toc-Working-on-LilyPond-projects-1" href="lilypond-learning-big-page.html#Working-on-LilyPond-projects">5. Working on LilyPond projects</a>
  <ul class="toc">
    <li><a name="toc-Suggestions-for-writing-LilyPond-input-files-1" href="lilypond-learning-big-page.html#Suggestions-for-writing-LilyPond-input-files">5.1 Suggestions for writing LilyPond input files</a>    </li>
    <li><a name="toc-When-things-don_0027t-work-1" href="lilypond-learning-big-page.html#When-things-don_0027t-work">5.2 When things don&rsquo;t work</a>    </li>
    <li><a name="toc-Scores-and-parts-1" href="lilypond-learning-big-page.html#Scores-and-parts">5.3 Scores and parts</a>    </li>
  </ul>
  </li>
  <li><a name="toc-Templates-1" href="lilypond-learning-big-page.html#Templates">A. Templates</a>
  <ul class="toc">
    <li><a name="toc-Single-staff-1" href="lilypond-learning-big-page.html#Single-staff">A.1 Single staff</a>    </li>
    <li><a name="toc-Piano-templates-1" href="lilypond-learning-big-page.html#Piano-templates">A.2 Piano templates</a>    </li>
    <li><a name="toc-String-quartet-2" href="lilypond-learning-big-page.html#String-quartet">A.3 String quartet</a>    </li>
    <li><a name="toc-Vocal-ensembles-1" href="lilypond-learning-big-page.html#Vocal-ensembles">A.4 Vocal ensembles</a>    </li>
    <li><a name="toc-Ancient-notation-templates-1" href="lilypond-learning-big-page.html#Ancient-notation-templates">A.5 Ancient notation templates</a>    </li>
    <li><a name="toc-Jazz-combo-1" href="lilypond-learning-big-page.html#Jazz-combo">A.6 Jazz combo</a>    </li>
    <li><a name="toc-lilypond_002dbook-templates-1" href="lilypond-learning-big-page.html#lilypond_002dbook-templates">A.7 lilypond-book templates</a>    </li>
  </ul>
  </li>
  <li><a name="toc-Scheme-tutorial-1" href="lilypond-learning-big-page.html#Scheme-tutorial">B. Scheme tutorial</a>
  <ul class="toc">
    <li><a name="toc-Tweaking-with-Scheme-1" href="lilypond-learning-big-page.html#Tweaking-with-Scheme">B.1 Tweaking with Scheme</a>    </li>
  </ul>
  </li>
  <li><a name="toc-GNU-Free-Documentation-License-1" href="lilypond-learning-big-page.html#GNU-Free-Documentation-License">C. GNU Free Documentation License</a>  </li>
  <li><a name="toc-LilyPond-index-1" href="lilypond-learning-big-page.html#LilyPond-index">D. LilyPond index</a>  </li>
</ul>
</div>
</div>

</body>
</html>
