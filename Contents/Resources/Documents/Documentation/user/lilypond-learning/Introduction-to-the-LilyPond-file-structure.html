<!-- header_tag -->
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html401/loose.dtd">
<html>
<!-- Copyright C 1999-2009 by the authors

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.1
or any later version published by the Free Software Foundation;
with no Invariant Sections.
A copy of the license is included in the section entitled "GNU
Free Documentation License".

 -->
<!-- Created on January 13, 2010 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>GNU LilyPond Learning Manual: 3.1.1 Introduction to the LilyPond file structure</title>

<meta name="description" content="GNU LilyPond Learning Manual: 3.1.1 Introduction to the LilyPond file structure">
<meta name="keywords" content="GNU LilyPond Learning Manual: 3.1.1 Introduction to the LilyPond file structure">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="GNU LilyPond &mdash; Learning Manual">
<link href="LilyPond-index.html#LilyPond-index" rel="index" title="D. LilyPond index">
<link href="index_toc.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index_abt.html#SEC_About" rel="help" title="About This Document">
<link href="How-LilyPond-input-files-work.html#How-LilyPond-input-files-work" rel="up" title="3.1 How LilyPond input files work">
<link href="LilyPond-index.html#LilyPond-index" rel="next" title="D. LilyPond index">
<link href="How-LilyPond-input-files-work.html#How-LilyPond-input-files-work" rel="previous" title="3.1 How LilyPond input files work">
<link rel="stylesheet" type="text/css" title="Patrick McCarty's design" href="lilypond-mccarty.css">
<link rel="alternate stylesheet" type="text/css" href="lilypond.css" title="Andrew Hawryluk's design">
<link rel="alternate stylesheet" type="text/css" href="lilypond-blue.css" title="Kurt Kroon's blue design">
<!--[if lte IE 7]>
<link href="lilypond-ie-fixes.css" rel="stylesheet" type="text/css">
<![endif]-->


</head>

<body lang="en" bgcolor="#FFFFFF" text="#000000" link="#0000FF" vlink="#800080" alink="#FF0000">


<div id="main">
<a name="Introduction-to-the-LilyPond-file-structure"></a>
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="Fundamental-concepts.html#Fundamental-concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="LilyPond-index.html#LilyPond-index" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="Tweaking-output.html#Tweaking-output" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="How-LilyPond-input-files-work.html#How-LilyPond-input-files-work" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; How LilyPond input files work&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="How-LilyPond-input-files-work.html#How-LilyPond-input-files-work" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;How LilyPond input files work&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="Score-is-a-_0028single_0029-compound-musical-expression.html#Score-is-a-_0028single_0029-compound-musical-expression" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Score is a (single) compound musical expression &gt; </a>]</td></tr></table>
<a name="Introduction-to-the-LilyPond-file-structure"></a>
<h3 class="subsection">3.1.1 Introduction to the LilyPond file structure</h3>

<a name="index-input-format"></a>
<a name="index-file-structure"></a>

<p>A basic example of a LilyPond input file is
</p>
<blockquote><pre class="example">\version &quot;2.12.3&quot;
\header { }
\score {
  <var>...compound music expression...</var>  % all the music goes here!
  \layout { }
  \midi { }
}
</pre></blockquote>

<p>There are many variations of this basic pattern, but this
example serves as a useful starting place.
</p>
<a name="index-_005cbook"></a>
<a name="index-_005cbook-1"></a>
<a name="index-book"></a>
<a name="index-book-1"></a>
<a name="index-_005cscore"></a>
<a name="index-_005cscore-1"></a>
<a name="index-score"></a>
<a name="index-score-1"></a>
<a name="index-book-2"></a>
<a name="index-score-2"></a>

<p>Up to this point none of the examples you have seen has used a
<code>\score{}</code> command.  This is because LilyPond automatically
adds the extra commands which are needed when you give it simple
input.  LilyPond treats input like this:
</p>
<blockquote><pre class="example">\relative c'' {
  c4 a d c
}
</pre></blockquote>

<p>as shorthand for this:
</p>
<blockquote><pre class="example">\book {
  \score {
    \new Staff {
      \new Voice {
        \relative c'' {
          c4 a b c
        }
      }
    }
    \layout { }
  }
}
</pre></blockquote>

<p>In other words, if the input contains a single music expression,
LilyPond will interpret the file as though the music expression
was wrapped up inside the commands shown above.
</p>
<a name="index-implicit-contexts"></a>
<a name="index-contexts_002c-implicit"></a>

<p><strong>A word of warning!</strong>  Many of the examples in the LilyPond
documentation will omit the <code>\new Staff</code> and <code>\new Voice</code>
commands, leaving them to be created implicitly.  For simple
examples this works well, but for more complex examples, especially
when additional commands are used, the implicit creation of contexts
can give surprising results, maybe creating extra unwanted staves.
The way to create contexts explicitly is explained in
<a href="Contexts-and-engravers.html#Contexts-and-engravers">Contexts and engravers</a>.
</p>
<table class="cartouche" border="1"><tr><td>
<p><b>Note:</b> When entering more than a few lines of music it is
advisable to always create staves and voices explicitly.
</p></td></tr></table>

<p>For now, though, let us return to the first example and examine the
<code>\score</code> command, leaving the others to default.
</p>
<p>A <code>\score</code> block must always contain just one music expression,
and this must appear immediately after the <code>\score</code> command.
Remember that a music expression could be anything from a single
note to a huge compound expression like
</p>
<blockquote><pre class="example">{
  \new StaffGroup &lt;&lt;
    <var>...insert the whole score of a Wagner opera in here...</var>
  &gt;&gt;
}
</pre></blockquote>

<p>Since everything is inside <code>{ ... }</code>, it counts
as one music expression.
</p>
<p>As we saw previously, the <code>\score</code> block can contain other
things, such as
</p>
<blockquote><pre class="example">\score {
  { c'4 a b c' }
  \header { }
  \layout { }
  \midi { }
}
</pre></blockquote>

<a name="index-_005cheader-2"></a>
<a name="index-_005cheader-3"></a>
<a name="index-header-2"></a>
<a name="index-header-3"></a>
<a name="index-_005clayout"></a>
<a name="index-_005clayout-1"></a>
<a name="index-layout"></a>
<a name="index-layout-1"></a>
<a name="index-_005cmidi"></a>
<a name="index-_005cmidi-1"></a>
<a name="index-midi"></a>
<a name="index-midi-1"></a>
<a name="index-header-4"></a>
<a name="index-layout-2"></a>
<a name="index-midi-2"></a>

<p>Note that these three commands &ndash; <code>\header</code>, <code>\layout</code> and
<code>\midi</code> &ndash; are special: unlike many other commands which begin
with a backward slash (<code>\</code>) they are <em>not</em> music expressions
and are not part of any music expression.  So they may be placed
inside a <code>\score</code> block or outside it.  In fact, these commands
are commonly placed outside the <code>\score</code> block &ndash; for example,
<code>\header</code> is often placed above the <code>\score</code> command, as the
example at the beginning of this section shows.
</p>
<p>Two more commands you have not previously seen are
<code>\layout { }</code> and <code>\midi {}</code>.  If these appear as
shown they will cause LilyPond to produce a printed output and a
MIDI output respectively.  They are described fully in the
Notation Reference &ndash; <a name="index-Score-layout"></a>
<a href="../lilypond/Score-layout.html#Score-layout">Score layout</a>, and
<a name="index-Creating-MIDI-files"></a>
<a href="../lilypond/Creating-MIDI-files.html#Creating-MIDI-files">Creating MIDI files</a>.
</p>
<a name="index-scores_002c-multiple"></a>
<a name="index-book-block_002c-implicit"></a>
<a name="index-implicit-book-block"></a>
<a name="index-_005cbook-2"></a>
<a name="index-_005cbook-3"></a>
<a name="index-book-3"></a>
<a name="index-book-4"></a>

<p>You may code multiple <code>\score</code> blocks.  Each will be
treated as a separate score, but they will be all combined into
a single output file.  A <code>\book</code> command is not necessary
&ndash; one will be implicitly created.  However, if you would like
separate output files from one <code>.ly</code> file then the
<code>\book</code> command should be used to separate the different
sections: each <code>\book</code> block will produce a
separate output file.
</p>
<p>In summary:
</p>
<p>Every <code>\book</code> block creates a separate output file (e.g., a
PDF file).  If you haven&rsquo;t explicitly added one, LilyPond wraps
your entire input code in a <code>\book</code> block implicitly.
</p>
<p>Every <code>\score</code> block is a separate chunk of music within a
<code>\book</code> block.
</p>
<a name="index-layout-block_002c-effect-of-location"></a>

<p>Every <code>\layout</code> block affects the <code>\score</code> or
<code>\book</code> block in which it appears &ndash; i.e., a <code>\layout</code>
block inside a <code>\score</code> block affects only that <code>\score</code>
block, but a <code>\layout</code> block outside of a <code>\score</code> block
(and thus in a <code>\book</code> block, either explicitly or
implicitly) will affect every <code>\score</code> in that <code>\book</code>.
</p>
<p>For details see <a name="index-Multiple-scores-in-a-book"></a>
<a href="../lilypond/Multiple-scores-in-a-book.html#Multiple-scores-in-a-book">Multiple scores in a book</a>.
</p>
<a name="index-variables-1"></a>

<p>Another great shorthand is the ability to define variables.  All
the templates use this
</p>
<blockquote><pre class="example">melody = \relative c' {
  c4 a b c
}

\score {
  \melody
}
</pre></blockquote>

<p>When LilyPond looks at this file, it takes the value of
<code>melody</code> (everything after the equals sign) and inserts it
whenever it sees <code>\melody</code>.  There&rsquo;s nothing special about
the names &ndash; it could be <code>melody</code>, <code>global</code>,
<code>TimeKey</code>,
<code>pianorighthand</code>, or <code>foofoobarbaz</code>.  For more details,
see <a href="Saving-typing-with-variables-and-functions.html#Saving-typing-with-variables-and-functions">Saving typing with variables and functions</a>.
Remember that you can use almost any name you like as long
as it contains just alphabetic characters and is distinct from
LilyPond command names.  The exact
limitations on variable names are detailed in
<a name="index-File-structure-1"></a>
<a href="../lilypond/File-structure.html#File-structure">File structure</a>.
</p>

<a name="See-also-12"></a>
<h4 class="subsubheading">See also</h4>
<p>For a complete definition of the input format, see
<a name="index-File-structure-2"></a>
<a href="../lilypond/File-structure.html#File-structure">File structure</a>.
</p>

<hr size="6">
<table class="nav_table">
<tr><td valign="middle" align="left" colspan="1">[<a href="Fundamental-concepts.html#Fundamental-concepts" title="Beginning of this chapter or previous chapter"> &lt;&lt; Fundamental concepts&nbsp;</a>]</td><td valign="middle" align="center" colspan="3">[<a href="index.html#Top" title="Cover (top) of document" rel="start">Top</a>][<a href="index_toc.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="LilyPond-index.html#LilyPond-index" title="Index" rel="index">Index</a>][<a href="index_abt.html#SEC_About" title="About (help)" rel="help"> ? </a>]</td><td valign="middle" align="right" colspan="1">[<a href="Tweaking-output.html#Tweaking-output" title="Next chapter">&nbsp;Tweaking output &gt;&gt; </a>]</td></tr><tr><td valign="middle" align="left" colspan="2">[<a href="How-LilyPond-input-files-work.html#How-LilyPond-input-files-work" title="Previous section in reading order" accesskey="p" rel="previous"> &lt; How LilyPond input files work&nbsp;</a>]</td><td valign="middle" align="center" colspan="1">[<a href="How-LilyPond-input-files-work.html#How-LilyPond-input-files-work" title="Up section" accesskey="u" rel="up">&nbsp; Up :&nbsp;How LilyPond input files work&nbsp;</a>]</td><td valign="middle" align="right" colspan="2">[<a href="Score-is-a-_0028single_0029-compound-musical-expression.html#Score-is-a-_0028single_0029-compound-musical-expression" title="Next section in reading order" accesskey="n" rel="next">&nbsp;Score is a (single) compound musical expression &gt; </a>]</td></tr></table>
<!-- footer_tag -->
<div class="footer">
<p class="footer_version">
This page is for LilyPond-2.12.3 (stable-branch).
</p>
<p class="footer_report">
Your <a href="http://lilypond.org/web/devel/participating/documentation-adding">suggestions for the documentation</a> are welcome, please report errors to our <a href="http://post.gmane.org/post.php?group=gmane.comp.gnu.lilypond.bugs">bug list</a>.
</p>
</div>


<p id="languages">
 Other languages: <a href="Introduction-to-the-LilyPond-file-structure.fr.html">français</a>, <a href="Introduction-to-the-LilyPond-file-structure.es.html">español</a>, <a href="Introduction-to-the-LilyPond-file-structure.de.html">deutsch</a>.
 <br>
 
</p>

<!-- FOOTER -->

<!-- end div#main here -->
</div>



<div id="tocframe">
<p class="toc_uplink"><a href="../index.html" 
         title="Documentation Index">&lt;&lt; Back to Documentation Index</a></p>
<h4 class="toc_header"> <a href="index.html#Top" title="Start of the manual">Learning Manual</a></h4>
<div class="contents">
<ul class="toc">
  <li><a name="toc-Preface-1" href="Preface.html#Preface">Preface</a>  </li>
  <li><a name="toc-Introduction-1" href="Introduction.html#Introduction">1. Introduction</a>
  <ul class="toc">
    <li><a name="toc-Background-1" href="Background.html#Background">1.1 Background</a>    </li>
    <li><a name="toc-About-the-documentation-1" href="About-the-documentation.html#About-the-documentation">1.2 About the documentation</a>    </li>
  </ul>
  </li>
  <li><a name="toc-Tutorial-1" href="Tutorial.html#Tutorial">2. Tutorial</a>
  <ul class="toc">
    <li><a name="toc-First-steps-1" href="First-steps.html#First-steps">2.1 First steps</a>    </li>
    <li><a name="toc-Single-staff-notation-1" href="Single-staff-notation.html#Single-staff-notation">2.2 Single staff notation</a>    </li>
    <li><a name="toc-Multiple-notes-at-once-1" href="Multiple-notes-at-once.html#Multiple-notes-at-once">2.3 Multiple notes at once</a>    </li>
    <li><a name="toc-Songs-1" href="Songs.html#Songs">2.4 Songs</a>    </li>
    <li><a name="toc-Final-touches-1" href="Final-touches.html#Final-touches">2.5 Final touches</a>    </li>
  </ul>
  </li>
  <li class="toc_current"><a name="toc-Fundamental-concepts-1" href="Fundamental-concepts.html#Fundamental-concepts">3. Fundamental concepts</a>
  <ul class="toc">
    <li class="toc_current"><a name="toc-How-LilyPond-input-files-work-1" href="How-LilyPond-input-files-work.html#How-LilyPond-input-files-work">3.1 How LilyPond input files work</a>
    <ul class="toc">
      <li class="toc_current"><a name="toc-Introduction-to-the-LilyPond-file-structure-1" href="Introduction-to-the-LilyPond-file-structure.html#Introduction-to-the-LilyPond-file-structure">3.1.1 Introduction to the LilyPond file structure</a>      </li>
      <li><a name="toc-Score-is-a-_0028single_0029-compound-musical-expression-1" href="Score-is-a-_0028single_0029-compound-musical-expression.html#Score-is-a-_0028single_0029-compound-musical-expression">3.1.2 Score is a (single) compound musical expression</a>      </li>
      <li><a name="toc-Nesting-music-expressions-1" href="Nesting-music-expressions.html#Nesting-music-expressions">3.1.3 Nesting music expressions</a>      </li>
      <li><a name="toc-On-the-un_002dnestedness-of-brackets-and-ties-1" href="On-the-un_002dnestedness-of-brackets-and-ties.html#On-the-un_002dnestedness-of-brackets-and-ties">3.1.4 On the un-nestedness of brackets and ties</a>      </li>
    </ul>
    </li>
    <li><a name="toc-Voices-contain-music-1" href="Voices-contain-music.html#Voices-contain-music">3.2 Voices contain music</a>    </li>
    <li><a name="toc-Contexts-and-engravers-1" href="Contexts-and-engravers.html#Contexts-and-engravers">3.3 Contexts and engravers</a>    </li>
    <li><a name="toc-Extending-the-templates-1" href="Extending-the-templates.html#Extending-the-templates">3.4 Extending the templates</a>    </li>
  </ul>
  </li>
  <li><a name="toc-Tweaking-output-1" href="Tweaking-output.html#Tweaking-output">4. Tweaking output</a>
  <ul class="toc">
    <li><a name="toc-Tweaking-basics-1" href="Tweaking-basics.html#Tweaking-basics">4.1 Tweaking basics</a>    </li>
    <li><a name="toc-The-Internals-Reference-manual-1" href="The-Internals-Reference-manual.html#The-Internals-Reference-manual">4.2 The Internals Reference manual</a>    </li>
    <li><a name="toc-Appearance-of-objects-1" href="Appearance-of-objects.html#Appearance-of-objects">4.3 Appearance of objects</a>    </li>
    <li><a name="toc-Placement-of-objects-1" href="Placement-of-objects.html#Placement-of-objects">4.4 Placement of objects</a>    </li>
    <li><a name="toc-Collisions-of-objects-1" href="Collisions-of-objects.html#Collisions-of-objects">4.5 Collisions of objects</a>    </li>
    <li><a name="toc-Further-tweaking-1" href="Further-tweaking.html#Further-tweaking">4.6 Further tweaking</a>    </li>
  </ul>
  </li>
  <li><a name="toc-Working-on-LilyPond-projects-1" href="Working-on-LilyPond-projects.html#Working-on-LilyPond-projects">5. Working on LilyPond projects</a>
  <ul class="toc">
    <li><a name="toc-Suggestions-for-writing-LilyPond-input-files-1" href="Suggestions-for-writing-LilyPond-input-files.html#Suggestions-for-writing-LilyPond-input-files">5.1 Suggestions for writing LilyPond input files</a>    </li>
    <li><a name="toc-When-things-don_0027t-work-1" href="When-things-don_0027t-work.html#When-things-don_0027t-work">5.2 When things don&rsquo;t work</a>    </li>
    <li><a name="toc-Scores-and-parts-1" href="Scores-and-parts.html#Scores-and-parts">5.3 Scores and parts</a>    </li>
  </ul>
  </li>
  <li><a name="toc-Templates-1" href="Templates.html#Templates">A. Templates</a>
  <ul class="toc">
    <li><a name="toc-Single-staff-1" href="Single-staff.html#Single-staff">A.1 Single staff</a>    </li>
    <li><a name="toc-Piano-templates-1" href="Piano-templates.html#Piano-templates">A.2 Piano templates</a>    </li>
    <li><a name="toc-String-quartet-2" href="String-quartet.html#String-quartet">A.3 String quartet</a>    </li>
    <li><a name="toc-Vocal-ensembles-1" href="Vocal-ensembles.html#Vocal-ensembles">A.4 Vocal ensembles</a>    </li>
    <li><a name="toc-Ancient-notation-templates-1" href="Ancient-notation-templates.html#Ancient-notation-templates">A.5 Ancient notation templates</a>    </li>
    <li><a name="toc-Jazz-combo-1" href="Jazz-combo.html#Jazz-combo">A.6 Jazz combo</a>    </li>
    <li><a name="toc-lilypond_002dbook-templates-1" href="lilypond_002dbook-templates.html#lilypond_002dbook-templates">A.7 lilypond-book templates</a>    </li>
  </ul>
  </li>
  <li><a name="toc-Scheme-tutorial-1" href="Scheme-tutorial.html#Scheme-tutorial">B. Scheme tutorial</a>
  <ul class="toc">
    <li><a name="toc-Tweaking-with-Scheme-1" href="Tweaking-with-Scheme.html#Tweaking-with-Scheme">B.1 Tweaking with Scheme</a>    </li>
  </ul>
  </li>
  <li><a name="toc-GNU-Free-Documentation-License-1" href="GNU-Free-Documentation-License.html#GNU-Free-Documentation-License">C. GNU Free Documentation License</a>  </li>
  <li><a name="toc-LilyPond-index-1" href="LilyPond-index.html#LilyPond-index">D. LilyPond index</a>  </li>
</ul>
</div>
</div>

</body>
</html>
