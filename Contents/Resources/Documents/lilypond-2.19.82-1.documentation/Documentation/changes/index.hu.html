<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created on June 24, 2018 by texi2html 1.82
texi2html was written by: 
            Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Many creative people.
Send bugs and suggestions to <texi2html-bug@nongnu.org>
-->
<head>
<title>LilyPond Changes: New features in 2.20 since 2.18</title>

<meta name="description" content="LilyPond Changes: New features in 2.20 since 2.18">
<meta name="keywords" content="LilyPond Changes: New features in 2.20 since 2.18">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="texi2html 1.82">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="#index" rel="start" title="New features in 2.20 since 2.18">
<link rel="stylesheet" type="text/css" title="Default style" href="../../Documentation/css/lilypond-manuals.css">
<!--[if lte IE 7]>
<link href="../../Documentation/css/lilypond-manuals-ie-fixes.css" rel="stylesheet" type="text/css">
<![endif]-->


</head>

<body lang="en" class="changes devStatus">


<div id="main">
<a name="Top"></a>
<a name="index"></a>
<h1 class="unnumbered">New features in 2.20 since 2.18</h1>







<a name="New-for-musical-notation"></a>
<h3 class="subheading">New for musical notation</h3>


<p><strong>Displaying pitch improvements</strong>
</p>
<ul>
<li>
Pitches that have a sharp or flat in their name now need to be
hyphenated;

<blockquote><pre class="example">\key a-flat \major
</pre></blockquote>

<p>instead of:
</p>
<blockquote><pre class="example">\key aflat \major
</pre></blockquote>

<p>Pitches that contain <em>double</em> sharps or flats in their name,
however, do not need a second hyphen. For example using the Dutch
notation <code>cisis</code>:
</p>
<blockquote><pre class="example">\key c-sharpsharp \major
</pre></blockquote>

</li><li>
Accidental rules can now be defined <em>across</em> <code>ChoirStaff</code>
contexts.

</li><li>
Two new accidental rules have been added.  Both combine the
characteristics of <code>modern-voice</code>, <code>piano</code> and their
equivalents:

<p><code>choral</code>
</p>
<blockquote><p>
 <a href="../1b/lily-cf35636c.ly">
  <img align="middle"
       border="0"
       src="../1b/lily-cf35636c.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>This is the now the default accidental style for <code>ChoirStaff</code>.
</p>
<p><code>choral-cautionary</code>
</p>
<blockquote><p>
 <a href="../e6/lily-ed418876.ly">
  <img align="middle"
       border="0"
       src="../e6/lily-ed418876.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The same as <code>choral</code> but with the extra accidentals typeset as
cautionaries instead.
</p>
<p>Also see <a name="index-Automatic-accidentals"></a>
<a href="../notation/displaying-pitches.hu.html#automatic-accidentals">Automatic accidentals</a>.
</p>
</li><li>
Four new clef glyphs are now available; &lsquo;GG&rsquo; (double-G),
&lsquo;Tenor G&rsquo;, &lsquo;varC&rsquo; plus related tessitura and
&lsquo;Varpercussion&rsquo;:

<table>
<thead><tr><th width="30%"><p>Example
</p></th><th width="20%"><p>Output
</p></th><th width="30%"><p>Example
</p></th><th width="20%"><p>Output
</p></th></tr></thead>
<tr><td width="30%"><p><code>\clef GG</code>
</p></td><td width="20%"><p>
 <a href="../7d/lily-49a952e0.ly">
  <img align="middle"
       border="0"
       src="../7d/lily-49a952e0.png"
       alt="[image of music]">
 </a>
</p></td><td width="30%"><p><code>\clef tenorG</code>
</p></td><td width="20%"><p>
 <a href="../08/lily-f233a841.ly">
  <img align="middle"
       border="0"
       src="../08/lily-f233a841.png"
       alt="[image of music]">
 </a>
</p></td></tr>
<tr><td width="30%"><p><code>\clef varC</code>
</p></td><td width="20%"><p>
 <a href="../7b/lily-31c55b7f.ly">
  <img align="middle"
       border="0"
       src="../7b/lily-31c55b7f.png"
       alt="[image of music]">
 </a>
</p></td><td width="30%"><p><code>\clef altovarC</code>
</p></td><td width="20%"><p>
 <a href="../21/lily-79e2f041.ly">
  <img align="middle"
       border="0"
       src="../21/lily-79e2f041.png"
       alt="[image of music]">
 </a>
</p></td></tr>
<tr><td width="30%"><p><code>\clef tenorvarC</code>
</p></td><td width="20%"><p>
 <a href="../58/lily-3515af84.ly">
  <img align="middle"
       border="0"
       src="../58/lily-3515af84.png"
       alt="[image of music]">
 </a>
</p></td><td width="30%"><p><code>\clef baritonevarC</code>
</p></td><td width="20%"><p>
 <a href="../41/lily-e1410ca8.ly">
  <img align="middle"
       border="0"
       src="../41/lily-e1410ca8.png"
       alt="[image of music]">
 </a>
</p></td></tr>
<tr><td width="30%"><p><code>\clef varpercussion</code>
</p></td><td width="20%"><p>
 <a href="../28/lily-95f6b417.ly">
  <img align="middle"
       border="0"
       src="../28/lily-95f6b417.png"
       alt="[image of music]">
 </a>
</p></td></tr>
</table>

<p>Also see <a name="index-Clef-styles"></a>
<a href="../notation/clef-styles.hu.html">Clef styles</a>.
</p>
</li><li>
French note names are now explicitly defined &ndash; previously they were
aliased to Italian note names.  The <var>d</var> pitch may be entered as
either  <code>re</code> or <code>ré</code>.

<blockquote><pre class="verbatim">\language &quot;français&quot;
do ré mi fa | sol la si do | ré1
</pre><p>
 <a href="../70/lily-7a280132.ly">
  <img align="middle"
       border="0"
       src="../70/lily-7a280132.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Double sharps are entered using an <code>x</code> suffix.
</p>
<blockquote><pre class="verbatim">\language &quot;français&quot;
dob, rebb misb fabsb | sold ladd six dosd | rédsd1
</pre><p>
 <a href="../e5/lily-66c95992.ly">
  <img align="middle"
       border="0"
       src="../e5/lily-66c95992.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li></ul>


<p><strong>Rhythm improvements</strong>
</p>
<ul>
<li>
Multi-measure rests have length according to their total duration,
under the control of <code>MultiMeasureRest.space-increment</code>.  Note the
default value is <code>2.0</code>.

<blockquote><pre class="verbatim">\compressFullBarRests
R1*2 R1*4 R1*64 R1*16
</pre><p>
 <a href="../a1/lily-b6e83ca6.ly">
  <img align="middle"
       border="0"
       src="../a1/lily-b6e83ca6.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<blockquote><pre class="verbatim">\compressFullBarRests
\override Staff.MultiMeasureRest.space-increment = 2.5
R1*2 R1*4 R1*64 R1*16
</pre><p>
 <a href="../93/lily-40423ab9.ly">
  <img align="middle"
       border="0"
       src="../93/lily-40423ab9.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li><li>
Improvements to the <code>\partial</code> command have been made when used
with parallel music and/or multiple contexts.

</li><li>
It is now possible to change the time signature mid-measure by using
both the <code>\time</code> and <code>\partial</code> commands together.

<blockquote><pre class="verbatim">f f f f | f2. \bar &quot;||&quot;
\time 3/4 \partial 4
f8 8 | f2 f8 f |
</pre><p>
 <a href="../51/lily-bbfb7ec4.ly">
  <img align="middle"
       border="0"
       src="../51/lily-bbfb7ec4.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li><li>
Isolated durations in music now stand for unpitched notes.  Pitches are
taken from the preceding note or chord.  This is especially convenient
for specifying rhythms in both music and scheme functions and can help
improve the readability of LilyPond source files.

<blockquote><pre class="verbatim">c64[ 64] 32 16 8^- &lt;g b d&gt;4~ 2 | 1
</pre><p>
 <a href="../90/lily-c8e76208.ly">
  <img align="middle"
       border="0"
       src="../90/lily-c8e76208.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<blockquote><pre class="verbatim">\new DrumStaff \with { \override StaffSymbol.line-count = 1 }
\drummode {
  \time 3/4
  tambourine 8 \tuplet 3/2 { 16 16 16 }
             8 \tuplet 3/2 { 16 16 16 } 8 8 |
}
</pre><p>
 <a href="../fa/lily-b8bef0d3.ly">
  <img align="middle"
       border="0"
       src="../fa/lily-b8bef0d3.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li><li>
Beaming exceptions can now be constructed using the simpler
<code>\beamExceptions</code> scheme function. Previously, this would have
required writing:

<blockquote><pre class="example">\set Timing.beamExceptions =
#'(                         ;start of alist
   (end .                   ;entry for end of beams
    (                       ;start of alist of end points
     ((1 . 32) . (2 2 2))   ;rule for 1/32 beams -- end each 1/16
    )))

\time #'(2 1) 3/16
c16 c c
\repeat unfold 6 { c32 }
</pre></blockquote>

<p>With the new <code>\beamExceptions</code> scheme function, this becomes:
</p>
<blockquote><pre class="verbatim">\set Timing.beamExceptions =
  \beamExceptions { 32[ 32] 32[ 32] 32[ 32] }

\time #'(2 1) 3/16
c16 c c |
\repeat unfold 6 { c32 } |
</pre><p>
 <a href="../6d/lily-424ae84d.ly">
  <img align="middle"
       border="0"
       src="../6d/lily-424ae84d.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>with multiple exceptions separated by bar checks.  Note that writing the
exception pattern without pitches is convenient but not mandatory (also
see the previous documented rhythm improvement &ndash;
<em>Isolated durations in music now stand for unpitched notes</em>.
</p>
</li><li>
The positioning of tuplet numbers for kneed beams has been improved.
Previously, tuplet numbers were placed according to the position of the
tuplet bracket, even if the bracket was not printed.  This could lead to
tuplet numbers being &lsquo;stranded&rsquo;.

<p>Previously:
</p>
<blockquote><p>
 <a href="../1e/lily-6b7d7355.ly">
  <img align="middle"
       border="0"
       src="../1e/lily-6b7d7355.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Now, when the bracket is not drawn, tuplet numbers are positioned
closer.
</p>
<blockquote><p>
 <a href="../0e/lily-aea6a38a.ly">
  <img align="middle"
       border="0"
       src="../0e/lily-aea6a38a.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li><li>
Collision detection for the kneed beam tuplet numbers has also been
added, shifting the offset horizontally if the number is too close to
an adjoining note column (but still preserving the number&rsquo;s vertical
distance).  In the event of a collision &ndash; for example with an
accidental &ndash; the tuplet number will be shifted vertically instead.  If
the tuplet number is itself too large to fit within the available space,
the original, &lsquo;bracket-based&rsquo;, positioning system will be used
instead.

<blockquote><p>
 <a href="../76/lily-87dcf03d.ly">
  <img align="middle"
       border="0"
       src="../76/lily-87dcf03d.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>The original kneed-beam tuplet behavior is still available with a new,
<code>knee-to-beam</code> property for the <code>TupletNumber</code> layout object.
</p>
<blockquote><pre class="verbatim">\time 2/4
\override Beam.auto-knee-gap = 3
\override TupletNumber.knee-to-beam = ##f
\override TupletBracket.bracket-visibility = ##t
\tuplet 3/2 4 { g8 c'' e, }
\once \override TupletBracket.bracket-visibility = ##f
\tuplet 3/2 4 { g,,8 c'' e, }
</pre><p>
 <a href="../a2/lily-934e5e8e.ly">
  <img align="middle"
       border="0"
       src="../a2/lily-934e5e8e.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li></ul>


<p><strong>Expressive mark improvements</strong>
</p>
<ul>
<li>
The ends of hairpins may now be fine-tuned using the <code>shorten-pair</code>
grob property.  This previously only affected text-spanners (e.g.
<code>TupletBracket</code> and <code>OttavaBracket</code>).

<p>Positive and negative values offset right and left respectively.
</p>
<blockquote><pre class="verbatim">\once \override Hairpin.shorten-pair = #'(0 . 2)
a1\&lt; | a2 a\!

\once \override Hairpin.shorten-pair = #'(2 . 0)
\once \override Hairpin.stencil = #constante-hairpin
a1\&lt; | a2 a\!

\once \override Hairpin.shorten-pair = #'(-1 . -1)
\once \override Hairpin.stencil = #flared-hairpin
a1\&lt; | a2 a\!
</pre><p>
 <a href="../27/lily-6ff7bdaf.ly">
  <img align="middle"
       border="0"
       src="../27/lily-6ff7bdaf.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li><li>
Individual slurs and phrasing slurs may now be started from an explicit
note within a chord.

<blockquote><pre class="verbatim">&lt;f a( c&gt;1 | &lt;c') e g(&gt; | &lt;a c) e&gt;
</pre><p>
 <a href="../57/lily-e73119b2.ly">
  <img align="middle"
       border="0"
       src="../57/lily-e73119b2.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<blockquote><pre class="verbatim">&lt;f( a\( c&gt;1 | &lt;c'\) e\( g&gt; | &lt;a c e\)&gt;
</pre><p>
 <a href="../97/lily-3904a065.ly">
  <img align="middle"
       border="0"
       src="../97/lily-3904a065.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li><li>
A new command <code>\=X</code> has been added &ndash; where &lsquo;X&rsquo; can be any
non-negative integer or symbol &ndash; so that a specific &lsquo;id&rsquo; can be
assigned to the start and end of slurs and phrasing slurs.

<p>This is useful when simultaneous slurs are required or if one slur
overlaps another or when nesting short slurs within a longer one.
</p>
<blockquote><pre class="verbatim">&lt;a c e\=7\(&gt;1 | &lt;g b d\=£(&gt; |
&lt;f\=A( a c\=&quot;foo&quot;(&gt; | &lt;c'\=&quot;foo&quot;)\=A) e\=£) g\=7\)&gt; |
</pre><p>
 <a href="../e4/lily-9ea72108.ly">
  <img align="middle"
       border="0"
       src="../e4/lily-9ea72108.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>Also see <a name="index-Expressive-marks-as-curves"></a>
<a href="../notation/expressive-marks-as-curves.hu.html">Expressive marks as curves</a>.
</p>
</li></ul>


<p><strong>Repeat notation improvements</strong>
</p>
<ul>
<li>
The visual style of tremolo slashes (shape, style and slope)
is now more finely controlled.
<blockquote><p>
 <a href="../8f/lily-118b8275.ly">
  <img align="middle"
       border="0"
       src="../8f/lily-118b8275.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li><li>
The music function <code>\unfoldRepeats</code> can now take an
optional argument-list specifying which type(s) of repeated music
should be unfolded.  Possible entries are <code>percent</code>, <code>tremolo</code>,
<code>volta</code>.
If the optional argument-list is unspecified, <code>repeated-music</code> will be
used, unfolding all.

</li></ul>


<p><strong>Staff notation improvements</strong>
</p>
<ul>
<li>
A new command <code>\magnifyStaff</code> has been added which scales staff
sizes, staff lines, bar lines, beamlets and horizontal spacing generally
at the <code>Staff</code> context level.  Staff lines are prevented from being
scaled smaller than the default since the thickness of stems, slurs, and
the like are all based on the staff line thickness.

</li><li>
A new command <code>\magnifyMusic</code> has been added, which allows
the notation size to be changed without changing the staff size,
while automatically scaling stems, beams, and horizontal spacing.

<blockquote><pre class="verbatim">\new Staff &lt;&lt;
  \new Voice \relative {
    \voiceOne
    &lt;e' e'&gt;4 &lt;f f'&gt;8. &lt;g g'&gt;16 &lt;f f'&gt;8 &lt;e e'&gt;4 r8
  }
  \new Voice \relative {
    \voiceTwo
    \magnifyMusic 0.63 {
      \override Score.SpacingSpanner.spacing-increment = #(* 1.2 0.63)
      r32 c'' a c a c a c r c a c a c a c
      r c a c a c a c a c a c a c a c
    }
  }
&gt;&gt;
</pre><p>
 <a href="../3e/lily-8cc6ae6f.ly">
  <img align="middle"
       border="0"
       src="../3e/lily-8cc6ae6f.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li><li>
A new command, <code>\RemoveAllEmptyStaves</code>, has been made available, which
acts exactly like <code>\RemoveEmptyStaves</code>, except for also removing empty
staves on the first system in a score.

</li><li>
A new markup command <code>\justify-line</code> has been added.  Similar to
the <code>\fill-line</code> markup command except that instead of setting
<em>words</em> in columns, the <code>\justify-line</code> command balances the
whitespace between them ensuring that when there are three or more
words in a markup, the whitespace is always consistent.

<blockquote><pre class="verbatim">\markup \fill-line {oooooo oooooo oooooo oooooo}
\markup \fill-line {ooooooooo oooooooo oo ooo}
</pre><p>
 <a href="../a2/lily-69e67acc.ly">
  <img align="middle"
       border="0"
       src="../a2/lily-69e67acc.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<blockquote><pre class="verbatim">\markup \justify-line {oooooo oooooo oooooo oooooo}
\markup \justify-line {ooooooooo oooooooo oo ooo}
</pre><p>
 <a href="../33/lily-c0a93b4c.ly">
  <img align="middle"
       border="0"
       src="../33/lily-c0a93b4c.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li></ul>


<p><strong>Editorial annotation improvements</strong>
</p>
<ul>
<li>
It is now possible to add text to analysis brackets through the
<code>HorizontalBracketText</code> object.
<blockquote><pre class="verbatim">\layout {
  \context {
    \Voice
    \consists &quot;Horizontal_bracket_engraver&quot;
  }
}

{
  \once \override HorizontalBracketText.text = &quot;a&quot;
  c''\startGroup d''\stopGroup
  e''-\tweak HorizontalBracketText.text &quot;a'&quot; \startGroup d''\stopGroup
}
</pre><p>
 <a href="../87/lily-271056c8.ly">
  <img align="middle"
       border="0"
       src="../87/lily-271056c8.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li></ul>


<p><strong>Text formatting improvements</strong>
</p>
<ul>
<li>
Support for making it easier to use alternative &lsquo;music&rsquo; fonts other
than the default Emmentaler in LilyPond has been added.  See
<a name="index-Replacing-the-notation-font"></a>
<a href="../notation/replacing-the-notation-font.hu.html">Replacing the notation font</a> for more information.

</li><li>
Default text fonts have been changed from
<code>Century Schoolbook L</code>, <code>sans-serif</code>, and <code>monospace</code>.

<p>For <code>svg</code> backend:
</p><table>
<thead><tr><th width="15%"><p> Family </p></th><th width="30%"><p> Default font
</p></th></tr></thead>
<tr><td width="15%"><p> <em>roman</em> </p></td><td width="30%"><p> <code>serif</code>
</p></td></tr>
<tr><td width="15%"><p> <em>sans</em> </p></td><td width="30%"><p> <code>sans-serif</code>
</p></td></tr>
<tr><td width="15%"><p> <em>typewriter</em> </p></td><td width="30%"><p> <code>monospace</code>
</p></td></tr>
</table>

<p><code>serif</code>, <code>sans-serif</code>, and <code>monospace</code> are
<code>generic-family</code> in SVG and CSS specifications.
</p>
<p>For other backends:
</p><table>
<thead><tr><th width="15%"><p> Family </p></th><th width="30%"><p> Default font (alias) </p></th><th width="55%"><p> Alias definition lists
</p></th></tr></thead>
<tr><td width="15%"><p> <em>roman</em>
</p></td><td width="30%"><p> <code>LilyPond Serif</code>
</p></td><td width="55%"><p>TeX Gyre Schola,
C059, Century SchoolBook URW, Century Schoolbook L,
DejaVu Serif,
..., serif
</p></td></tr>
<tr><td width="15%"><p> <em>sans</em>
</p></td><td width="30%"><p> <code>LilyPond Sans Serif</code>
</p></td><td width="55%"><p>TeX Gyre Heros,
Nimbus Sans, Nimbus Sans L, DejaVu Sans,
..., sans-serif
</p></td></tr>
<tr><td width="15%"><p> <em>typewriter</em>
</p></td><td width="30%"><p> <code>LilyPond Monospace</code>
</p></td><td width="55%"><p>TeX Gyre Cursor,
Nimbus Mono PS, Nimbus Mono, Nimbus Mono L,
DejaVu Sans Mono,
..., monospace
</p></td></tr>
</table>

<p><code>LilyPond Serif</code>, <code>LilyPond Sans Serif</code>,
and <code>LilyPond Monospace</code> are font aliases defined
in the LilyPond dedicated FontConfig configuration file
<code>00-lilypond-fonts.conf</code>.
Where a character dosen&rsquo;t exist in the first font listed,
the next font listed will be used instead for that character.
For details of alias definitions, please see
to <code>00-lilypond-fonts.conf</code> under the installed directory.
</p>
</li><li>
When using OpenType fonts, font features can be used.
Note: Not all OpenType fonts have all functions.

<blockquote><pre class="verbatim">% True small caps
\markup { Normal Style: Hello HELLO }
\markup { \caps { Small Caps: Hello } }
\markup { \override #'(font-features . (&quot;smcp&quot;))
          { True Small Caps: Hello } }

% Number styles
\markup { Normal Number Style: 0123456789 }
\markup { \override #'(font-features . (&quot;onum&quot;))
          { Old Number Style: 0123456789 } }

% Stylistic Alternates
\markup { \override #'(font-features . (&quot;salt 0&quot;))
          { Stylistic Alternates 0: εφπρθ } }
\markup { \override #'(font-features . (&quot;salt 1&quot;))
          { Stylistic Alternates 1: εφπρθ } }

% Multiple features
\markup { \override #'(font-features . (&quot;onum&quot; &quot;smcp&quot; &quot;salt 1&quot;))
          { Multiple features: Hello 0123456789 εφπρθ } }
</pre><p>
 <a href="../25/lily-66d9ea61.ly">
  <img align="middle"
       border="0"
       src="../25/lily-66d9ea61.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li><li>
Two new styles of whiteout are now available.  The <code>outline</code> style
approximates the contours of a glyph&rsquo;s outline, and its shape is
produced from multiple displaced copies of the glyph.  The
<code>rounded-box</code> style produces a rounded rectangle shape.  For all
three styles, including the default <code>box</code> style, the whiteout
shape&rsquo;s <code>thickness</code>, as a multiple of staff-line thickness, can be
customized.

<blockquote><pre class="verbatim">\markup {
  \combine
    \filled-box #'(-1 . 15) #'(-3 . 4) #1
    \override #'(thickness . 3)
    \whiteout whiteout-box
}
\markup {
  \combine
    \filled-box #'(-1 . 24) #'(-3 . 4) #1
    \override #'(style . rounded-box)
    \override #'(thickness . 3)
    \whiteout whiteout-rounded-box
}
\markup {
  \combine
    \filled-box #'(-1 . 18) #'(-3 . 4) #1
    \override #'(style . outline)
    \override #'(thickness . 3)
    \whiteout whiteout-outline
}
\relative {
  \override Staff.Clef.whiteout-style = #'outline
  \override Staff.Clef.whiteout = 3
  g'1
}
</pre><p>
 <a href="../a5/lily-9433be3e.ly">
  <img align="middle"
       border="0"
       src="../a5/lily-9433be3e.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li><li>
A new markup-command, <code>\with-dimensions-from</code>, makes
<code>\with-dimensions</code> easier to use by taking the new
dimensions from a markup object, given as first argument.
<blockquote><pre class="verbatim">\markup {
  \pattern #5 #Y #0 &quot;x&quot;
  \pattern #5 #Y #0 \with-dimensions-from &quot;x&quot; &quot;f&quot;
  \pattern #5 #Y #0 \with-dimensions-from &quot;x&quot; &quot;g&quot;
  \override #'(baseline-skip . 2)
  \column {
    \pattern #5 #X #0 &quot;n&quot;
    \pattern #5 #X #0 \with-dimensions-from &quot;n&quot; &quot;m&quot;
    \pattern #5 #X #0 \with-dimensions-from &quot;n&quot; &quot;!&quot;
  }
}
</pre><p>
 <a href="../41/lily-6de44edc.ly">
  <img align="middle"
       border="0"
       src="../41/lily-6de44edc.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li><li>
Markup-command <code>\draw-squiggle-line</code> is now available.
Customizing is possible with overrides of <code>thickness</code>, <code>angularity</code>,
<code>height</code> and <code>orientation</code>
<blockquote><pre class="verbatim">\markup
  \overlay {
    \draw-squiggle-line #0.5 #'(3 . 3) ##t

    \translate #'(3 . 3)
    \override #'(thickness . 4)
    \draw-squiggle-line #0.5 #'(3 . -3) ##t

    \translate #'(6 . 0)
    \override #'(angularity . -5)
    \draw-squiggle-line #0.5 #'(-3 . -3) ##t

    \translate #'(3 . -3)
    \override #'(angularity . 2)
    \override #'(height . 0.3)
    \override #'(orientation . -1)
    \draw-squiggle-line #0.2 #'(-3 . 3) ##t
  }
</pre><p>
 <a href="../a4/lily-91505bc1.ly">
  <img align="middle"
       border="0"
       src="../a4/lily-91505bc1.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li><li>
Markup-commands <code>\undertie</code> and <code>\overtie</code> are now available, as well
as the generic markup-command <code>\tie</code>.
<blockquote><pre class="verbatim">\markup {
  \undertie &quot;undertied&quot;
  \overtie &quot;overtied&quot;
}

m = {
  c''1 \prall -\tweak text \markup \tie &quot;131&quot; -1
}

{ \voiceOne \m \voiceTwo \m }
</pre><p>
 <a href="../da/lily-9e5b0000.ly">
  <img align="middle"
       border="0"
       src="../da/lily-9e5b0000.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li></ul>



<a name="New-for-specialist-notation"></a>
<h3 class="subheading">New for specialist notation</h3>


<p><strong>Vocal music improvements</strong>
</p>
<ul>
<li>
A new flexible template suitable for a range of choral music, is now
provided.  This may be used to create simple choral music, with or
without piano accompaniment, in two or four staves. Unlike other
templates, this template is &lsquo;built-in&rsquo;, which means it does not
need to be copied and edited: instead it is simply <code>\include</code>&rsquo;d
in the input file.  For details, see <a name="index-Built_002din-templates"></a>
<a href="../learning/built_002din-templates.hu.html">Built-in templates</a>.

</li><li>
The <code>\addlyrics</code> function now works with arbitrary contexts
incuding <code>Staff</code>.

</li><li>
<code>\lyricsto</code> and <code>\addLyrics</code> have been &lsquo;harmonized&rsquo;.  Both
now accept the same kind of delimited argument list that <code>\lyrics</code>
and <code>\chords</code> accept.  Backward compatibility has been added so
music identifiers (i.e. <code>\mus</code>) are permitted as arguments.  A
<code>convert-ly</code> rule has been added that removes redundant uses of
<code>\lyricmode</code> and rearranges combinations with context starters such
that <code>\lyricsto</code> in general is applied last (i.e. like
<code>\lyricmode</code> would be).

</li></ul>


<p><strong>Unfretted and fretted string instrument improvements</strong>
</p>
<ul>
<li>
A new note head style for Tabulature has been added &ndash;
<code>TabNoteHead.style = #'slash</code>.

</li><li>
In fret-diagrams the distance between frets and the distance between strings is
now independently adjustable.  Available are <code>fret-distance</code> and
<code>string-distance</code> as subproperties of <code>fret-diagram-details</code>.
<blockquote><pre class="verbatim">fretMrkp = \markup { \fret-diagram-terse #&quot;x;x;o;2;3;2;&quot; }

\markuplist
\override #'(padding . 2)
\table #'(0 -1) {
  &quot;default&quot;

  \fretMrkp

  &quot;fret-distance&quot;

  \override #'(fret-diagram-details . ((fret-distance . 2)))
  \fretMrkp

  &quot;string-distance&quot;

  \override #'(fret-diagram-details . ((string-distance . 2)))
  \fretMrkp
}
</pre><p>
 <a href="../a4/lily-febce9af.ly">
  <img align="middle"
       border="0"
       src="../a4/lily-febce9af.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li><li>
It is now possible to individually color both the dots and parentheses
in fret diagrams when using the <code>\fret-diagram-verbose</code> markup
command.

<blockquote><pre class="verbatim">\new Voice {
  c1^\markup {
    \override #'(fret-diagram-details . (
                 (finger-code . in-dot))) {
      \fret-diagram-verbose #'((mute 6)
                               (place-fret 5 3 1 red)
                               (place-fret 4 5 2 inverted)
                               (place-fret 3 5 3 green)
                               (place-fret 2 5 4 blue inverted)
                               (place-fret 1 3 1 violet)
                               (barre 5 1 3 ))
    }
  }
  c1^\markup {
    \override #'(fret-diagram-details . (
                 (finger-code . below-string))) {
      \fret-diagram-verbose #'((mute 6)
                             (place-fret 5 3 1 red parenthesized)
                             (place-fret 4 5 2 yellow
                                               default-paren-color
                                               parenthesized)
                             (place-fret 3 5 3 green)
                             (place-fret 2 5 4 blue )
                             (place-fret 1 3 1)
                             (barre 5 1 3))
    }
  }
}
</pre><p>
 <a href="../4e/lily-14262971.ly">
  <img align="middle"
       border="0"
       src="../4e/lily-14262971.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li><li>
Two new properties have been added for use in
<code>fret-diagram-details</code> when using the <code>\fret-diagram-verbose</code>
markup command; <code>fret-label-horizontal-offset</code> which affects the
<code>fret-label-indication</code> and <code>paren-padding</code> which controls the
space between the dot and the parentheses surrounding it.

<blockquote><pre class="verbatim">\new Voice {
  c1^\markup {
    \fret-diagram-verbose #'((mute 6)
                             (place-fret 5 3 1)
                             (place-fret 4 5 2)
                             (place-fret 3 5 3)
                             (place-fret 1 6 4 parenthesized)
                             (place-fret 2 3 1)
                             (barre 5 2 3))
  }
  c1^\markup {
    \override #'(fret-diagram-details . (
                 (fret-label-horizontal-offset . 2)
                 (paren-padding . 0.25))) {
      \fret-diagram-verbose #'((mute 6)
                               (place-fret 5 3 1)
                               (place-fret 4 5 2)
                               (place-fret 3 5 3)
                               (place-fret 1 6 4 parenthesized)
                               (place-fret 2 3 1)
                               (barre 5 2 3))
    }
  }
}
</pre><p>
 <a href="../71/lily-237d86d2.ly">
  <img align="middle"
       border="0"
       src="../71/lily-237d86d2.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li><li>
Additional bass strings (for lute tablature) are supported.
<blockquote><pre class="verbatim">m = { f'4 d' a f d a, g, fis, e, d, c,  \bar &quot;|.&quot; }

\score {
  \new TabStaff \m
  \layout {
    \context {
      \Score
      tablatureFormat = #fret-letter-tablature-format
    }
    \context {
      \TabStaff
      stringTunings = \stringTuning &lt;a, d f a d' f'&gt;
      additionalBassStrings = \stringTuning &lt;c, d, e, fis, g,&gt;
      fretLabels = #'(&quot;a&quot; &quot;b&quot; &quot;r&quot; &quot;d&quot; &quot;e&quot; &quot;f&quot; &quot;g&quot; &quot;h&quot; &quot;i&quot; &quot;k&quot;)
    }
  }
}
</pre><p>
 <a href="../25/lily-bda13ae9.ly">
  <img align="middle"
       border="0"
       src="../25/lily-bda13ae9.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li><li>
String numbers can now also be used to print roman numerals
(e.g. for unfretted string instruments).
<blockquote><pre class="verbatim">c2\2
\romanStringNumbers
c\2
\arabicStringNumbers
c1\3
</pre><p>
 <a href="../c4/lily-9fba1aa6.ly">
  <img align="middle"
       border="0"
       src="../c4/lily-9fba1aa6.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li><li>
<code>TabStaff</code> is now able to print micro-tones for bendings etc.
<blockquote><pre class="verbatim">\layout {
  \context {
    \Score
    supportNonIntegerFret = ##t
  }
}

mus = \relative { c'4 cih d dih }

&lt;&lt;
  \new Staff &lt;&lt; \clef &quot;G_8&quot; \mus &gt;&gt;
  \new TabStaff \mus
&gt;&gt;
</pre><p>
 <a href="../be/lily-26d1c888.ly">
  <img align="middle"
       border="0"
       src="../be/lily-26d1c888.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li></ul>


<p><strong>Chord notation improvements</strong>
</p>
<ul>
<li> <code>\chordmode</code> can now use <code>&lt; &gt;</code> and <code>&lt;&lt; &gt;&gt;</code>
constructs.

</li><li>
It is now possible to override the <code>text</code> property of
chord names.

<blockquote><pre class="verbatim">&lt;&lt;
\new ChordNames \chordmode {
  a' b c:7
  \once \override ChordName.text = #&quot;foo&quot;
  d
}
&gt;&gt;
</pre><p>
 <a href="../f5/lily-56582229.ly">
  <img align="middle"
       border="0"
       src="../f5/lily-56582229.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li></ul>



<a name="New-for-input-and-output"></a>
<h3 class="subheading">New for input and output</h3>


<p><strong>Input structure improvements</strong>
</p>
<ul>
<li>
Blocks introduced with <code>\header</code> can be stored in variables
and used as arguments to music and scheme functions and as the
body of <code>#{&hellip;#}</code> constructs.  They are represented as
a Guile module.

<p>While <code>\book</code>, <code>\bookpart</code>, <code>\score</code>, <code>\with</code>,
<code>\layout</code>, <code>\midi</code>, <code>\paper</code> blocks can be passed
around in similar manner, they are represented by different data
types.
</p>
</li></ul>


<p><strong>Titles and header improvements</strong>
</p>
<ul>
<li>
Page numbers may now be printed in roman numerals, by setting the
<code>page-number-type</code> paper variable.

</li></ul>


<p><strong>Input file improvements</strong>
</p>
<ul>
<li>
A new command <code>\tagGroup</code> has now been added.  This complements
the existing <code>\keepWithTag</code> and <code>\removeWithTag</code> commands.
For Example:

<blockquote><pre class="example">\tagGroup #'(violinI violinII viola cello)
</pre></blockquote>

<p>declares a list of &lsquo;tags&rsquo; that belong to a single &lsquo;tag group&rsquo;.
</p>
<blockquote><pre class="example">\keepWithTag #'violinI
</pre></blockquote>

<p>Is now only concerned with &lsquo;tags&rsquo; from &lsquo;violinI&rsquo;’s tag group.
</p>
<p>Any element of the included music tagged with one or more tags from the
group, but <em>not</em> with <var>violinI</var>, will be removed.
</p>
</li></ul>


<p><strong>Output improvements</strong>
</p>
<ul>
<li>
LilyPond source files may now be embedded inside the generated PDF files.
This experimental feature is disabled by default and may be regarded as unsafe,
as PDF documents with hidden content tend to present a security risk.
Please note that not all PDF viewers have the ability to handle embedded
documents (if not, the PDF output will appear normally and source files
will remain invisible).  This feature only works with the PDF backend.

</li><li>
The <code>output-classic-framework</code> procedure and the <code>-dclip-systems</code>
are now available with the <code>SVG</code> backend.

</li><li>
An argument, <code>-dcrop</code>, has been added, formatting <code>SVG</code> and
<code>PDF</code> output without margins or page-breaks.

</li><li>
A new <code>output-attributes</code> grob property is now used for svg output
instead of the <code>id</code> grob property.  It allows multiple attributes
to be defined as an association list.  For example, <code>#'((id . 123)
(class . foo) (data-whatever . &ldquo;bar&rdquo;))</code> will produce the following
group tag in an SVG file: <code>&lt;g id=&ldquo;123&rdquo; class=&ldquo;foo&rdquo;
data-whatever=&ldquo;bar&rdquo;&gt; &hellip; &lt;/g&gt;</code>.

</li><li>
The PostScript functionality of stroke adjustment is no longer
applied automatically but left to the discretion of the PostScript
device (by default, Ghostscript uses it for resolutions up to
150dpi when generating raster images).  When it is enabled, a more
complex drawing algorithm designed to benefit from stroke
adjustment is employed mostly for stems and bar lines.

<p>Stroke adjustment can be forced by specifying the command line
option &lsquo;<samp>-dstrokeadjust</samp>&rsquo; to LilyPond.  When generating
<code>PDF</code> files, this will usually result in markedly better
looking <code>PDF</code> previews but significantly larger file size.
Print quality at high resolutions will be unaffected.
</p>
</li><li>
Added a new <code>make-path-stencil</code> function that supports all
<code>path</code> commands both relative and absolute:

<p><code>lineto</code>, <code>rlineto</code>, <code>curveto</code>, <code>rcurveto</code>,
<code>moveto</code>, <code>rmoveto</code>, <code>closepath</code>.  The function also
supports &lsquo;single-letter&rsquo; syntax used in standard SVG path commands:
</p>
<p><code>L</code>, <code>l</code>, <code>C</code>, <code>c</code>, <code>M</code>, <code>m</code>, <code>Z</code> and
<code>z</code>.  The new command is also backward-compatible with the original
<code>make-connected-path-stencil</code> function.  Also see
&lsquo;<tt>scm/stencil.scm</tt>&rsquo;.
</p>
</li></ul>


<p><strong>MIDI improvements</strong>
</p>
<ul>
<li>
The most common articulations are now reflected in MIDI output.
Accent and marcato make notes louder; staccato, staccatissimo and
portato make them shorter. Breath marks shorten the previous
note.

<p>This behavior is customizable through the <code>midiLength</code> and
<code>midiExtraVelocity</code> properties on <code>ArticulationEvent</code>.
See &lsquo;<tt>script-init.ly</tt>&rsquo; for examples.
</p>
</li><li>
Improved MIDI output for breathe marks.  After tied notes, breaths take
time <em>only</em> from the last note of the tie; e.g.
<code>{ c4~ c8 \breathe }</code> performs as <code>{ c4~ c16 r }</code> instead
of <code>{ c4 r8 }</code>.  This is more consistent with articulations and
how humans interpret breaths after ties.  It now also makes it easier to
align simultaneous breathe marks over multiple parts, all with different
note lengths.

</li><li>
There is now support for controlling the &lsquo;expression level&rsquo; of
MIDI channels using the <code>Staff.midiExpression</code> context property.
This can be used to alter the perceived volume of even sustained notes
(albeit in a very &lsquo;low-level&rsquo; way) and accepts a number value between
<code>0.0</code> and <code>1.0</code>.

<blockquote><pre class="example">\score {
  \new Staff \with {
    midiExpression = #0.6
    midiInstrument = #&quot;clarinet&quot;
  }
  &lt;&lt;
    { a'1~ a'1 }
    {
      \set Staff.midiExpression = #0.7 s4\f\&lt;
      \set Staff.midiExpression = #0.8 s4
      \set Staff.midiExpression = #0.9 s4
      \set Staff.midiExpression = #1.0 s4

      \set Staff.midiExpression = #0.9 s4\&gt;
      \set Staff.midiExpression = #0.8 s4
      \set Staff.midiExpression = #0.7 s4
      \set Staff.midiExpression = #0.6 s4\!
    }
  &gt;&gt;
  \midi { }
}
</pre></blockquote>

</li><li>
When outputting MIDI, LilyPond will now store the <code>title</code>
defined in a score&rsquo;s <code>\header</code> block (or, if there is no
such definition on the <code>\score</code> level, the first such
definition found in a <code>\header</code> block of the score&rsquo;s
enclosing <code>\bookpart</code>, <code>\book</code>, or top-level scope)
as the name of the MIDI sequence in the MIDI file.  Optionally,
the name of the MIDI sequence can be overridden using the new
<code>midititle</code> <code>\header</code> field independently of
<code>title</code> (for example, in case <code>title</code> contains markup
code which does not render as plain text in a satisfactory way
automatically).

</li></ul>


<p><strong>Extracting music improvements</strong>
</p>
<ul>
<li>
<code>\displayLilyMusic</code> and its underlying Scheme functions no
longer omit redundant note durations.  This makes it easier to
reliably recognize and format standalone durations in expressions
like
<blockquote><pre class="example">{ c4 d4 8 }
</pre></blockquote>

</li></ul>



<a name="New-for-spacing-issues"></a>
<h3 class="subheading">New for spacing issues</h3>


<p><strong>Page breaking improvements</strong>
</p>
<ul>
<li>
There are two new page breaking functions.  <code>ly:one-page-breaking</code>
automatically adjusts the height of the page to fit the music, so that
everything fits on one page.  <code>ly:one-line-auto-height-breaking</code>
is like <code>ly:one-line-breaking</code>, placing the music on a single
line and adjusting the page width accordingly, however it also
automatically adjusts the page height to fit the music.

</li></ul>


<p><strong>Vertical and Horizontal spacing improvements</strong>
</p>
<ul>
<li>
It is now possible to move systems with reference to their current
position using the <code>extra-offset</code> subproperty of
<code>NonMusicalPaperColumn.line-break-system-details</code>.  Both vertical
and horizontal changes are possible.  This feature is especially useful
for making slight adjustments to the default vertical position of
individual systems. See <a name="index-Explicit-staff-and-system-positioning"></a>
<a href="../notation/explicit-staff-and-system-positioning.hu.html">Explicit staff and system positioning</a> for
more information.

</li><li>
Improved visual spacing of small and regular &lsquo;MI&rsquo; Funk and Walker
noteheads so they are now the same width as other shaped notes in
their respective sets.  <code>SOL</code> noteheads are also now visually
improved when used with both the normal Aiken and Sacred Harp heads, as
well as with the thin variants.

</li><li>
<code>LeftEdge</code> now has a definable <code>Y-extent</code> (i.e.vertical).  See
<a name="index-LeftEdge"></a>
<a href="../internals/leftedge.hu.html">LeftEdge</a>.

</li><li>
Grobs and their parents can now be aligned separately allowing
more flexibility for grob positions.  For example the &lsquo;left&rsquo; edge of a
grob can now be aligned on the &lsquo;center&rsquo; of its parent.

</li><li>
Improved horizontal alignment when using <code>TextScript</code>,
with <code>DynamicText</code> or <code>LyricText</code>.

</li></ul>



<a name="New-for-changing-defaults"></a>
<h3 class="subheading">New for changing defaults</h3>

<ul>
<li>
All of <code>\override</code>, <code>\revert</code>, <code>\set</code>, and
<code>\unset</code> now work with the <code>\once</code> prefix for making
one-time settings.
<blockquote><pre class="verbatim">\relative {
  c'4 d
  \override NoteHead.color = #red
  e4 f |
  \once \override NoteHead.color = #green
  g4 a
  \once \revert NoteHead.color
  b c |
  \revert NoteHead.color
  f2 c |
}
</pre><p>
 <a href="../f1/lily-c2078184.ly">
  <img align="middle"
       border="0"
       src="../f1/lily-c2078184.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li></ul>



<a name="New-for-Internal-interfaces-and-functions"></a>
<h3 class="subheading">New for Internal interfaces and functions</h3>

<ul>
<li>
The music and grob property <code>spanner-id</code>, used for distinguishing
simultaneous slurs and phrasing slurs, has been changed from a string to
a <em>key</em> which can be either a non-negative integer or symbol (also
see the previous documented expressive mark improvement &ndash;
<em>A new command \=X has been added</em>).

</li><li>
Context properties named in the &lsquo;<samp>alternativeRestores</samp>&rsquo; property are
restored to their value at the start of the <em>first</em> alternative in
all subsequent alternatives.

<p>Currently the default set restores &lsquo;current meter&rsquo;:
</p>
<blockquote><pre class="verbatim">\time 3/4
\repeat volta 2 { c2 e4 | }
\alternative {
  { \time 4/4 f2 d | }
  { f2 d4 | }
}
g2. |
</pre><p>
 <a href="../2a/lily-00fc9fe1.ly">
  <img align="middle"
       border="0"
       src="../2a/lily-00fc9fe1.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>&lsquo;measure position&rsquo;:
</p>
<blockquote><pre class="verbatim">\time 3/4
\repeat volta 2 { c2 e4 | }
\alternative {
  { \time 4/4
    \set Timing.measurePosition = #(ly:make-moment -1/2)
    f2 | }
  { f2 d4 | }
}
g2. |
</pre><p>
 <a href="../d3/lily-58dea92c.ly">
  <img align="middle"
       border="0"
       src="../d3/lily-58dea92c.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



<p>and &lsquo;chord changes&rsquo;:
</p>
<blockquote><pre class="verbatim">&lt;&lt;
  \new ChordNames {
    \set chordChanges = ##t
    \chordmode { c1:m d:m c:m d:m }
  }
  \new Staff {
    \repeat volta 2 { \chordmode { c1:m } }
    \alternative {
      { \chordmode { d:m } }
      { \chordmode { c:m } }
    }
  \chordmode { d:m }
}
&gt;&gt;
</pre><p>
 <a href="../29/lily-89064a3b.ly">
  <img align="middle"
       border="0"
       src="../29/lily-89064a3b.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li><li>
LilyPond functions defined with <code>define-music-function</code>,
<code>define-event-function</code>, <code>define-scheme-function</code> and
<code>define-void-function</code> can now be directly called from Scheme
as if they were genuine Scheme procedures.  Argument checking and
matching will still be performed in the same manner as when
calling the function through LilyPond input.  This includes the
insertion of defaults for optional arguments not matching their
predicates.  Instead of using <code>\default</code> in the actual
argument list for explicitly skipping a sequence of optional
arguments, <code>*unspecified*</code> can be employed.

</li><li>
Current input location and parser are now stored in GUILE fluids
and can be referenced via the function calls <code>(*location*)</code>
and <code>(*parser*)</code>.  Consequently, a lot of functions
previously taking an explicit <code>parser</code> argument no longer do
so.

<p>Functions defined with <code>define-music-function</code>,
<code>define-event-function</code>, <code>define-scheme-function</code> and
<code>define-void-function</code> no longer use <code>parser</code> and
<code>location</code> arguments.
</p>
<p>With those particular definitions, LilyPond will try to recognize
legacy use of <code>parser</code> and <code>location</code> arguments,
providing backwards-compatible semantics for some time.
</p>
</li><li>
Scheme functions and identifiers can now be used as output definitions.

</li><li>
Scheme expressions can now be used as chord constituents.

</li><li>
Music (and scheme and void) functions and markup commands that
just supply the final parameters to a chain of overrides, music
function and markup command calls can now be defined in the form
of just writing the expression cut short with <code>\etc</code>.

<blockquote><pre class="verbatim">\markup bold-red = \markup \bold \with-color #red \etc
highlight = \tweak font-size 3 \tweak color #red \etc

\markup \bold-red &quot;text&quot;
\markuplist \column-lines \bold-red { One Two }

{ c' \highlight d' e'2-\highlight -! }
</pre><p>
 <a href="../20/lily-17001a9a.ly">
  <img align="middle"
       border="0"
       src="../20/lily-17001a9a.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li><li>
Dot-separated symbol lists like <code>FretBoard.stencil</code> were
already supported as of version&nbsp;2.18.  They may now also
contain unsigned integers, and may alternatively be separated by
commata.  This allows usage such as
<blockquote><pre class="verbatim">{ \time 2,2,1 5/8  g'8 8 8 8 8 }
</pre><p>
 <a href="../67/lily-116be5e4.ly">
  <img align="middle"
       border="0"
       src="../67/lily-116be5e4.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>


<p>and
</p><blockquote><pre class="example">\tagGroup violin,oboe,bassoon
</pre></blockquote>

</li><li>
Such lists may also be used in expressions for assignments, sets,
and overrides.  This allows usage such as
<blockquote><pre class="verbatim">{ \unset Timing.beamExceptions
  \set Timing.beatStructure = 1,2,1
  g'8 8 8 8 8 8 8 8 }
</pre><p>
 <a href="../da/lily-a4e58419.ly">
  <img align="middle"
       border="0"
       src="../da/lily-a4e58419.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li><li>
Association list elements could previously be assigned values
individually (for example, paper variables like
<code>system-system-spacing.basic-distance</code>).  They may now be
also referenced in this manner, as with
<blockquote><pre class="example">\paper {
  \void \displayScheme \system-system-spacing.basic-distance
}
</pre></blockquote>

<p>In combination with the previously mentioned changes, this allows
setting and referencing pseudovariables like <code>violin.1</code>.
</p>
</li><li>
The markup-list-command <code>\table</code> is now available.
Each column may be aligned differently.
<blockquote><pre class="verbatim">\markuplist {
    \override #'(padding . 2)
    \table
      #'(0 1 0 -1)
      {
        \underline { center-aligned right-aligned center-aligned left-aligned }
        one &quot;1&quot; thousandth &quot;0.001&quot;
        eleven &quot;11&quot; hundredth &quot;0.01&quot;
        twenty &quot;20&quot; tenth &quot;0.1&quot;
        thousand &quot;1000&quot; one &quot;1.0&quot;
      }
}
</pre><p>
 <a href="../89/lily-19d6aaad.ly">
  <img align="middle"
       border="0"
       src="../89/lily-19d6aaad.png"
       alt="[image of music]">
 </a>
</p>
</blockquote>



</li><li>
<code>InstrumentName</code> now supports <code>text-interface</code>.

</li><li>
The <code>thin-kern</code> property of the <code>BarLine</code> grob has been
renamed to <code>segno-kern</code>.

</li><li>
<code>KeyCancellation</code> grobs now ignore cue clefs (like
<code>KeySignature</code> grobs do).

</li><li>
Add support for <code>\once&nbsp;\unset</code>

</li></ul>

<p>For older news, go to
<a href="http://lilypond.org/doc/v2.18/Documentation/changes">http://lilypond.org/doc/v2.18/Documentation/changes/</a>,
<a href="http://lilypond.org/doc/v2.16/Documentation/changes">http://lilypond.org/doc/v2.16/Documentation/changes/</a>,
or <a href="..">go back</a> to the Documentation index.
</p>

<hr size="1">
<!-- footer_tag -->
<div class="footer">
<!-- This footer was autogenerated by /home/gub/NewGub/gub/target/linux-x86/build/lilypond-git.sv.gnu.org--lilypond.git-stable-2.20/scripts/build/out/www_post -->
<p class="footer_version">
This page is for LilyPond-2.19.82 (development-branch).
</p>
<p class="footer_report">
We welcome your aid; please <a href="http://lilypond.org/help-us.html">help us</a> by reporting errors to our <a href="mailto:https://lists.gnu.org/mailman/listinfo/bug-lilypond">bug list</a>.
</p>
</div>


<p id="languages">
<!-- These links were autogenerated by /home/gub/NewGub/gub/target/linux-x86/build/lilypond-git.sv.gnu.org--lilypond.git-stable-2.20/scripts/build/out/www_post -->
 Más nyelvek: <a href="index.fr.html">français</a>, <a href="index.it.html">italiano</a>.
 <br>
 About <a href="http://www.lilypond.org/website/misc/browser-language">automatic language selection</a>.
</p>

<!-- FOOTER -->

<!-- end div#main here -->
</div>



<div id="tocframe">
<p class="toc_uplink"><a href="../../Documentation/web/manuals.html"
         title="Documentation Index">&lt;&lt; Back to Documentation Index</a></p>
<h4 class="toc_header"> <a href="#index" title="Start of the manual">New features in 2.20 since 2.18  v2.19.82 (development-branch). </a></h4>
<div class="contents">
<ul class="toc">
<li>
<!--
we depend on an external entity here, which we cannot control.  Suppose
we go from 2.15.x to 2.17.x and put the documentation under "v2.17".
For some time, Google won't have the new location in its index, so the
search would get nothing.  It would be better to keep "v2.15" in the
search for a while and have a redirection from "v2.15" to "v2.17".
-->

<form action="http://google.com/search"
      method="get"
      name="search"
      onSubmit="search.q.value='site:lilypond.org/doc/v2.19 '
		+ search.brute_query.value"
      onMouseMove="search.q.value='site:lilypond.org/doc/v2.19 '
		   + search.brute_query.value"
      onKeyUp="search.q.value='site:lilypond.org/doc/v2.19 '
	       + search.brute_query.value">
  <input type="hidden" name="btnG" value="Google Search">
  <input type="text" name="brute_query" onfocus="this.value=''" value="Search">
  <input type="hidden" name="q" value="">
</form>
</li>
</ul>
</div>
</div>

</body>
</html>
